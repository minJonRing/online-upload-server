{"version":3,"file":"static/client/js/chunk-vendors-5add3539.de033353.js","mappings":"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","sources":["webpack://d1/./node_modules/zrender/lib/Element.js","webpack://d1/./node_modules/zrender/lib/Handler.js","webpack://d1/./node_modules/zrender/lib/Storage.js","webpack://d1/./node_modules/zrender/lib/animation/Animation.js","webpack://d1/./node_modules/zrender/lib/animation/easing.js","webpack://d1/./node_modules/zrender/lib/animation/Clip.js","webpack://d1/./node_modules/zrender/lib/animation/Animator.js","webpack://d1/./node_modules/zrender/lib/animation/cubicEasing.js","webpack://d1/./node_modules/zrender/lib/animation/requestAnimationFrame.js","webpack://d1/./node_modules/zrender/lib/canvas/Layer.js","webpack://d1/./node_modules/zrender/lib/canvas/Painter.js","webpack://d1/./node_modules/zrender/lib/canvas/dashStyle.js","webpack://d1/./node_modules/zrender/lib/canvas/graphic.js","webpack://d1/./node_modules/zrender/lib/canvas/helper.js","webpack://d1/./node_modules/zrender/lib/config.js"],"sourcesContent":["import Transformable, { TRANSFORMABLE_PROPS } from './core/Transformable.js';\nimport Animator, { cloneValue } from './animation/Animator.js';\nimport BoundingRect from './core/BoundingRect.js';\nimport Eventful from './core/Eventful.js';\nimport { calculateTextPosition, parsePercent } from './contain/text.js';\nimport { guid, isObject, keys, extend, indexOf, logError, mixin, isArrayLike, isTypedArray, isGradientObject, filter, reduce } from './core/util.js';\nimport { LIGHT_LABEL_COLOR, DARK_LABEL_COLOR } from './config.js';\nimport { parse, stringify } from './tool/color.js';\nimport { REDRAW_BIT } from './graphic/constants.js';\nexport var PRESERVED_NORMAL_STATE = '__zr_normal__';\nvar PRIMARY_STATES_KEYS = TRANSFORMABLE_PROPS.concat(['ignore']);\nvar DEFAULT_ANIMATABLE_MAP = reduce(TRANSFORMABLE_PROPS, function (obj, key) {\n    obj[key] = true;\n    return obj;\n}, { ignore: false });\nvar tmpTextPosCalcRes = {};\nvar tmpBoundingRect = new BoundingRect(0, 0, 0, 0);\nvar Element = (function () {\n    function Element(props) {\n        this.id = guid();\n        this.animators = [];\n        this.currentStates = [];\n        this.states = {};\n        this._init(props);\n    }\n    Element.prototype._init = function (props) {\n        this.attr(props);\n    };\n    Element.prototype.drift = function (dx, dy, e) {\n        switch (this.draggable) {\n            case 'horizontal':\n                dy = 0;\n                break;\n            case 'vertical':\n                dx = 0;\n                break;\n        }\n        var m = this.transform;\n        if (!m) {\n            m = this.transform = [1, 0, 0, 1, 0, 0];\n        }\n        m[4] += dx;\n        m[5] += dy;\n        this.decomposeTransform();\n        this.markRedraw();\n    };\n    Element.prototype.beforeUpdate = function () { };\n    Element.prototype.afterUpdate = function () { };\n    Element.prototype.update = function () {\n        this.updateTransform();\n        if (this.__dirty) {\n            this.updateInnerText();\n        }\n    };\n    Element.prototype.updateInnerText = function (forceUpdate) {\n        var textEl = this._textContent;\n        if (textEl && (!textEl.ignore || forceUpdate)) {\n            if (!this.textConfig) {\n                this.textConfig = {};\n            }\n            var textConfig = this.textConfig;\n            var isLocal = textConfig.local;\n            var innerTransformable = textEl.innerTransformable;\n            var textAlign = void 0;\n            var textVerticalAlign = void 0;\n            var textStyleChanged = false;\n            innerTransformable.parent = isLocal ? this : null;\n            var innerOrigin = false;\n            innerTransformable.copyTransform(textEl);\n            if (textConfig.position != null) {\n                var layoutRect = tmpBoundingRect;\n                if (textConfig.layoutRect) {\n                    layoutRect.copy(textConfig.layoutRect);\n                }\n                else {\n                    layoutRect.copy(this.getBoundingRect());\n                }\n                if (!isLocal) {\n                    layoutRect.applyTransform(this.transform);\n                }\n                if (this.calculateTextPosition) {\n                    this.calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n                }\n                else {\n                    calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n                }\n                innerTransformable.x = tmpTextPosCalcRes.x;\n                innerTransformable.y = tmpTextPosCalcRes.y;\n                textAlign = tmpTextPosCalcRes.align;\n                textVerticalAlign = tmpTextPosCalcRes.verticalAlign;\n                var textOrigin = textConfig.origin;\n                if (textOrigin && textConfig.rotation != null) {\n                    var relOriginX = void 0;\n                    var relOriginY = void 0;\n                    if (textOrigin === 'center') {\n                        relOriginX = layoutRect.width * 0.5;\n                        relOriginY = layoutRect.height * 0.5;\n                    }\n                    else {\n                        relOriginX = parsePercent(textOrigin[0], layoutRect.width);\n                        relOriginY = parsePercent(textOrigin[1], layoutRect.height);\n                    }\n                    innerOrigin = true;\n                    innerTransformable.originX = -innerTransformable.x + relOriginX + (isLocal ? 0 : layoutRect.x);\n                    innerTransformable.originY = -innerTransformable.y + relOriginY + (isLocal ? 0 : layoutRect.y);\n                }\n            }\n            if (textConfig.rotation != null) {\n                innerTransformable.rotation = textConfig.rotation;\n            }\n            var textOffset = textConfig.offset;\n            if (textOffset) {\n                innerTransformable.x += textOffset[0];\n                innerTransformable.y += textOffset[1];\n                if (!innerOrigin) {\n                    innerTransformable.originX = -textOffset[0];\n                    innerTransformable.originY = -textOffset[1];\n                }\n            }\n            var isInside = textConfig.inside == null\n                ? (typeof textConfig.position === 'string' && textConfig.position.indexOf('inside') >= 0)\n                : textConfig.inside;\n            var innerTextDefaultStyle = this._innerTextDefaultStyle || (this._innerTextDefaultStyle = {});\n            var textFill = void 0;\n            var textStroke = void 0;\n            var autoStroke = void 0;\n            if (isInside && this.canBeInsideText()) {\n                textFill = textConfig.insideFill;\n                textStroke = textConfig.insideStroke;\n                if (textFill == null || textFill === 'auto') {\n                    textFill = this.getInsideTextFill();\n                }\n                if (textStroke == null || textStroke === 'auto') {\n                    textStroke = this.getInsideTextStroke(textFill);\n                    autoStroke = true;\n                }\n            }\n            else {\n                textFill = textConfig.outsideFill;\n                textStroke = textConfig.outsideStroke;\n                if (textFill == null || textFill === 'auto') {\n                    textFill = this.getOutsideFill();\n                }\n                if (textStroke == null || textStroke === 'auto') {\n                    textStroke = this.getOutsideStroke(textFill);\n                    autoStroke = true;\n                }\n            }\n            textFill = textFill || '#000';\n            if (textFill !== innerTextDefaultStyle.fill\n                || textStroke !== innerTextDefaultStyle.stroke\n                || autoStroke !== innerTextDefaultStyle.autoStroke\n                || textAlign !== innerTextDefaultStyle.align\n                || textVerticalAlign !== innerTextDefaultStyle.verticalAlign) {\n                textStyleChanged = true;\n                innerTextDefaultStyle.fill = textFill;\n                innerTextDefaultStyle.stroke = textStroke;\n                innerTextDefaultStyle.autoStroke = autoStroke;\n                innerTextDefaultStyle.align = textAlign;\n                innerTextDefaultStyle.verticalAlign = textVerticalAlign;\n                textEl.setDefaultTextStyle(innerTextDefaultStyle);\n            }\n            textEl.__dirty |= REDRAW_BIT;\n            if (textStyleChanged) {\n                textEl.dirtyStyle(true);\n            }\n        }\n    };\n    Element.prototype.canBeInsideText = function () {\n        return true;\n    };\n    Element.prototype.getInsideTextFill = function () {\n        return '#fff';\n    };\n    Element.prototype.getInsideTextStroke = function (textFill) {\n        return '#000';\n    };\n    Element.prototype.getOutsideFill = function () {\n        return this.__zr && this.__zr.isDarkMode() ? LIGHT_LABEL_COLOR : DARK_LABEL_COLOR;\n    };\n    Element.prototype.getOutsideStroke = function (textFill) {\n        var backgroundColor = this.__zr && this.__zr.getBackgroundColor();\n        var colorArr = typeof backgroundColor === 'string' && parse(backgroundColor);\n        if (!colorArr) {\n            colorArr = [255, 255, 255, 1];\n        }\n        var alpha = colorArr[3];\n        var isDark = this.__zr.isDarkMode();\n        for (var i = 0; i < 3; i++) {\n            colorArr[i] = colorArr[i] * alpha + (isDark ? 0 : 255) * (1 - alpha);\n        }\n        colorArr[3] = 1;\n        return stringify(colorArr, 'rgba');\n    };\n    Element.prototype.traverse = function (cb, context) { };\n    Element.prototype.attrKV = function (key, value) {\n        if (key === 'textConfig') {\n            this.setTextConfig(value);\n        }\n        else if (key === 'textContent') {\n            this.setTextContent(value);\n        }\n        else if (key === 'clipPath') {\n            this.setClipPath(value);\n        }\n        else if (key === 'extra') {\n            this.extra = this.extra || {};\n            extend(this.extra, value);\n        }\n        else {\n            this[key] = value;\n        }\n    };\n    Element.prototype.hide = function () {\n        this.ignore = true;\n        this.markRedraw();\n    };\n    Element.prototype.show = function () {\n        this.ignore = false;\n        this.markRedraw();\n    };\n    Element.prototype.attr = function (keyOrObj, value) {\n        if (typeof keyOrObj === 'string') {\n            this.attrKV(keyOrObj, value);\n        }\n        else if (isObject(keyOrObj)) {\n            var obj = keyOrObj;\n            var keysArr = keys(obj);\n            for (var i = 0; i < keysArr.length; i++) {\n                var key = keysArr[i];\n                this.attrKV(key, keyOrObj[key]);\n            }\n        }\n        this.markRedraw();\n        return this;\n    };\n    Element.prototype.saveCurrentToNormalState = function (toState) {\n        this._innerSaveToNormal(toState);\n        var normalState = this._normalState;\n        for (var i = 0; i < this.animators.length; i++) {\n            var animator = this.animators[i];\n            var fromStateTransition = animator.__fromStateTransition;\n            if (animator.getLoop() || fromStateTransition && fromStateTransition !== PRESERVED_NORMAL_STATE) {\n                continue;\n            }\n            var targetName = animator.targetName;\n            var target = targetName\n                ? normalState[targetName] : normalState;\n            animator.saveTo(target);\n        }\n    };\n    Element.prototype._innerSaveToNormal = function (toState) {\n        var normalState = this._normalState;\n        if (!normalState) {\n            normalState = this._normalState = {};\n        }\n        if (toState.textConfig && !normalState.textConfig) {\n            normalState.textConfig = this.textConfig;\n        }\n        this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\n    };\n    Element.prototype._savePrimaryToNormal = function (toState, normalState, primaryKeys) {\n        for (var i = 0; i < primaryKeys.length; i++) {\n            var key = primaryKeys[i];\n            if (toState[key] != null && !(key in normalState)) {\n                normalState[key] = this[key];\n            }\n        }\n    };\n    Element.prototype.hasState = function () {\n        return this.currentStates.length > 0;\n    };\n    Element.prototype.getState = function (name) {\n        return this.states[name];\n    };\n    Element.prototype.ensureState = function (name) {\n        var states = this.states;\n        if (!states[name]) {\n            states[name] = {};\n        }\n        return states[name];\n    };\n    Element.prototype.clearStates = function (noAnimation) {\n        this.useState(PRESERVED_NORMAL_STATE, false, noAnimation);\n    };\n    Element.prototype.useState = function (stateName, keepCurrentStates, noAnimation, forceUseHoverLayer) {\n        var toNormalState = stateName === PRESERVED_NORMAL_STATE;\n        var hasStates = this.hasState();\n        if (!hasStates && toNormalState) {\n            return;\n        }\n        var currentStates = this.currentStates;\n        var animationCfg = this.stateTransition;\n        if (indexOf(currentStates, stateName) >= 0 && (keepCurrentStates || currentStates.length === 1)) {\n            return;\n        }\n        var state;\n        if (this.stateProxy && !toNormalState) {\n            state = this.stateProxy(stateName);\n        }\n        if (!state) {\n            state = (this.states && this.states[stateName]);\n        }\n        if (!state && !toNormalState) {\n            logError(\"State \" + stateName + \" not exists.\");\n            return;\n        }\n        if (!toNormalState) {\n            this.saveCurrentToNormalState(state);\n        }\n        var useHoverLayer = !!((state && state.hoverLayer) || forceUseHoverLayer);\n        if (useHoverLayer) {\n            this._toggleHoverLayerFlag(true);\n        }\n        this._applyStateObj(stateName, state, this._normalState, keepCurrentStates, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n        var textContent = this._textContent;\n        var textGuide = this._textGuide;\n        if (textContent) {\n            textContent.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n        }\n        if (textGuide) {\n            textGuide.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n        }\n        if (toNormalState) {\n            this.currentStates = [];\n            this._normalState = {};\n        }\n        else {\n            if (!keepCurrentStates) {\n                this.currentStates = [stateName];\n            }\n            else {\n                this.currentStates.push(stateName);\n            }\n        }\n        this._updateAnimationTargets();\n        this.markRedraw();\n        if (!useHoverLayer && this.__inHover) {\n            this._toggleHoverLayerFlag(false);\n            this.__dirty &= ~REDRAW_BIT;\n        }\n        return state;\n    };\n    Element.prototype.useStates = function (states, noAnimation, forceUseHoverLayer) {\n        if (!states.length) {\n            this.clearStates();\n        }\n        else {\n            var stateObjects = [];\n            var currentStates = this.currentStates;\n            var len = states.length;\n            var notChange = len === currentStates.length;\n            if (notChange) {\n                for (var i = 0; i < len; i++) {\n                    if (states[i] !== currentStates[i]) {\n                        notChange = false;\n                        break;\n                    }\n                }\n            }\n            if (notChange) {\n                return;\n            }\n            for (var i = 0; i < len; i++) {\n                var stateName = states[i];\n                var stateObj = void 0;\n                if (this.stateProxy) {\n                    stateObj = this.stateProxy(stateName, states);\n                }\n                if (!stateObj) {\n                    stateObj = this.states[stateName];\n                }\n                if (stateObj) {\n                    stateObjects.push(stateObj);\n                }\n            }\n            var lastStateObj = stateObjects[len - 1];\n            var useHoverLayer = !!((lastStateObj && lastStateObj.hoverLayer) || forceUseHoverLayer);\n            if (useHoverLayer) {\n                this._toggleHoverLayerFlag(true);\n            }\n            var mergedState = this._mergeStates(stateObjects);\n            var animationCfg = this.stateTransition;\n            this.saveCurrentToNormalState(mergedState);\n            this._applyStateObj(states.join(','), mergedState, this._normalState, false, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n            var textContent = this._textContent;\n            var textGuide = this._textGuide;\n            if (textContent) {\n                textContent.useStates(states, noAnimation, useHoverLayer);\n            }\n            if (textGuide) {\n                textGuide.useStates(states, noAnimation, useHoverLayer);\n            }\n            this._updateAnimationTargets();\n            this.currentStates = states.slice();\n            this.markRedraw();\n            if (!useHoverLayer && this.__inHover) {\n                this._toggleHoverLayerFlag(false);\n                this.__dirty &= ~REDRAW_BIT;\n            }\n        }\n    };\n    Element.prototype.isSilent = function () {\n        var isSilent = this.silent;\n        var ancestor = this.parent;\n        while (!isSilent && ancestor) {\n            if (ancestor.silent) {\n                isSilent = true;\n                break;\n            }\n            ancestor = ancestor.parent;\n        }\n        return isSilent;\n    };\n    Element.prototype._updateAnimationTargets = function () {\n        for (var i = 0; i < this.animators.length; i++) {\n            var animator = this.animators[i];\n            if (animator.targetName) {\n                animator.changeTarget(this[animator.targetName]);\n            }\n        }\n    };\n    Element.prototype.removeState = function (state) {\n        var idx = indexOf(this.currentStates, state);\n        if (idx >= 0) {\n            var currentStates = this.currentStates.slice();\n            currentStates.splice(idx, 1);\n            this.useStates(currentStates);\n        }\n    };\n    Element.prototype.replaceState = function (oldState, newState, forceAdd) {\n        var currentStates = this.currentStates.slice();\n        var idx = indexOf(currentStates, oldState);\n        var newStateExists = indexOf(currentStates, newState) >= 0;\n        if (idx >= 0) {\n            if (!newStateExists) {\n                currentStates[idx] = newState;\n            }\n            else {\n                currentStates.splice(idx, 1);\n            }\n        }\n        else if (forceAdd && !newStateExists) {\n            currentStates.push(newState);\n        }\n        this.useStates(currentStates);\n    };\n    Element.prototype.toggleState = function (state, enable) {\n        if (enable) {\n            this.useState(state, true);\n        }\n        else {\n            this.removeState(state);\n        }\n    };\n    Element.prototype._mergeStates = function (states) {\n        var mergedState = {};\n        var mergedTextConfig;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            extend(mergedState, state);\n            if (state.textConfig) {\n                mergedTextConfig = mergedTextConfig || {};\n                extend(mergedTextConfig, state.textConfig);\n            }\n        }\n        if (mergedTextConfig) {\n            mergedState.textConfig = mergedTextConfig;\n        }\n        return mergedState;\n    };\n    Element.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        if (state && state.textConfig) {\n            this.textConfig = extend({}, keepCurrentStates ? this.textConfig : normalState.textConfig);\n            extend(this.textConfig, state.textConfig);\n        }\n        else if (needsRestoreToNormal) {\n            if (normalState.textConfig) {\n                this.textConfig = normalState.textConfig;\n            }\n        }\n        var transitionTarget = {};\n        var hasTransition = false;\n        for (var i = 0; i < PRIMARY_STATES_KEYS.length; i++) {\n            var key = PRIMARY_STATES_KEYS[i];\n            var propNeedsTransition = transition && DEFAULT_ANIMATABLE_MAP[key];\n            if (state && state[key] != null) {\n                if (propNeedsTransition) {\n                    hasTransition = true;\n                    transitionTarget[key] = state[key];\n                }\n                else {\n                    this[key] = state[key];\n                }\n            }\n            else if (needsRestoreToNormal) {\n                if (normalState[key] != null) {\n                    if (propNeedsTransition) {\n                        hasTransition = true;\n                        transitionTarget[key] = normalState[key];\n                    }\n                    else {\n                        this[key] = normalState[key];\n                    }\n                }\n            }\n        }\n        if (!transition) {\n            for (var i = 0; i < this.animators.length; i++) {\n                var animator = this.animators[i];\n                var targetName = animator.targetName;\n                if (!animator.getLoop()) {\n                    animator.__changeFinalValue(targetName\n                        ? (state || normalState)[targetName]\n                        : (state || normalState));\n                }\n            }\n        }\n        if (hasTransition) {\n            this._transitionState(stateName, transitionTarget, animationCfg);\n        }\n    };\n    Element.prototype._attachComponent = function (componentEl) {\n        if (componentEl.__zr && !componentEl.__hostTarget) {\n            if (process.env.NODE_ENV !== 'production') {\n                throw new Error('Text element has been added to zrender.');\n            }\n            return;\n        }\n        if (componentEl === this) {\n            if (process.env.NODE_ENV !== 'production') {\n                throw new Error('Recursive component attachment.');\n            }\n            return;\n        }\n        var zr = this.__zr;\n        if (zr) {\n            componentEl.addSelfToZr(zr);\n        }\n        componentEl.__zr = zr;\n        componentEl.__hostTarget = this;\n    };\n    Element.prototype._detachComponent = function (componentEl) {\n        if (componentEl.__zr) {\n            componentEl.removeSelfFromZr(componentEl.__zr);\n        }\n        componentEl.__zr = null;\n        componentEl.__hostTarget = null;\n    };\n    Element.prototype.getClipPath = function () {\n        return this._clipPath;\n    };\n    Element.prototype.setClipPath = function (clipPath) {\n        if (this._clipPath && this._clipPath !== clipPath) {\n            this.removeClipPath();\n        }\n        this._attachComponent(clipPath);\n        this._clipPath = clipPath;\n        this.markRedraw();\n    };\n    Element.prototype.removeClipPath = function () {\n        var clipPath = this._clipPath;\n        if (clipPath) {\n            this._detachComponent(clipPath);\n            this._clipPath = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.getTextContent = function () {\n        return this._textContent;\n    };\n    Element.prototype.setTextContent = function (textEl) {\n        var previousTextContent = this._textContent;\n        if (previousTextContent === textEl) {\n            return;\n        }\n        if (previousTextContent && previousTextContent !== textEl) {\n            this.removeTextContent();\n        }\n        if (process.env.NODE_ENV !== 'production') {\n            if (textEl.__zr && !textEl.__hostTarget) {\n                throw new Error('Text element has been added to zrender.');\n            }\n        }\n        textEl.innerTransformable = new Transformable();\n        this._attachComponent(textEl);\n        this._textContent = textEl;\n        this.markRedraw();\n    };\n    Element.prototype.setTextConfig = function (cfg) {\n        if (!this.textConfig) {\n            this.textConfig = {};\n        }\n        extend(this.textConfig, cfg);\n        this.markRedraw();\n    };\n    Element.prototype.removeTextConfig = function () {\n        this.textConfig = null;\n        this.markRedraw();\n    };\n    Element.prototype.removeTextContent = function () {\n        var textEl = this._textContent;\n        if (textEl) {\n            textEl.innerTransformable = null;\n            this._detachComponent(textEl);\n            this._textContent = null;\n            this._innerTextDefaultStyle = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.getTextGuideLine = function () {\n        return this._textGuide;\n    };\n    Element.prototype.setTextGuideLine = function (guideLine) {\n        if (this._textGuide && this._textGuide !== guideLine) {\n            this.removeTextGuideLine();\n        }\n        this._attachComponent(guideLine);\n        this._textGuide = guideLine;\n        this.markRedraw();\n    };\n    Element.prototype.removeTextGuideLine = function () {\n        var textGuide = this._textGuide;\n        if (textGuide) {\n            this._detachComponent(textGuide);\n            this._textGuide = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.markRedraw = function () {\n        this.__dirty |= REDRAW_BIT;\n        var zr = this.__zr;\n        if (zr) {\n            if (this.__inHover) {\n                zr.refreshHover();\n            }\n            else {\n                zr.refresh();\n            }\n        }\n        if (this.__hostTarget) {\n            this.__hostTarget.markRedraw();\n        }\n    };\n    Element.prototype.dirty = function () {\n        this.markRedraw();\n    };\n    Element.prototype._toggleHoverLayerFlag = function (inHover) {\n        this.__inHover = inHover;\n        var textContent = this._textContent;\n        var textGuide = this._textGuide;\n        if (textContent) {\n            textContent.__inHover = inHover;\n        }\n        if (textGuide) {\n            textGuide.__inHover = inHover;\n        }\n    };\n    Element.prototype.addSelfToZr = function (zr) {\n        if (this.__zr === zr) {\n            return;\n        }\n        this.__zr = zr;\n        var animators = this.animators;\n        if (animators) {\n            for (var i = 0; i < animators.length; i++) {\n                zr.animation.addAnimator(animators[i]);\n            }\n        }\n        if (this._clipPath) {\n            this._clipPath.addSelfToZr(zr);\n        }\n        if (this._textContent) {\n            this._textContent.addSelfToZr(zr);\n        }\n        if (this._textGuide) {\n            this._textGuide.addSelfToZr(zr);\n        }\n    };\n    Element.prototype.removeSelfFromZr = function (zr) {\n        if (!this.__zr) {\n            return;\n        }\n        this.__zr = null;\n        var animators = this.animators;\n        if (animators) {\n            for (var i = 0; i < animators.length; i++) {\n                zr.animation.removeAnimator(animators[i]);\n            }\n        }\n        if (this._clipPath) {\n            this._clipPath.removeSelfFromZr(zr);\n        }\n        if (this._textContent) {\n            this._textContent.removeSelfFromZr(zr);\n        }\n        if (this._textGuide) {\n            this._textGuide.removeSelfFromZr(zr);\n        }\n    };\n    Element.prototype.animate = function (key, loop, allowDiscreteAnimation) {\n        var target = key ? this[key] : this;\n        if (process.env.NODE_ENV !== 'production') {\n            if (!target) {\n                logError('Property \"'\n                    + key\n                    + '\" is not existed in element '\n                    + this.id);\n                return;\n            }\n        }\n        var animator = new Animator(target, loop, allowDiscreteAnimation);\n        key && (animator.targetName = key);\n        this.addAnimator(animator, key);\n        return animator;\n    };\n    Element.prototype.addAnimator = function (animator, key) {\n        var zr = this.__zr;\n        var el = this;\n        animator.during(function () {\n            el.updateDuringAnimation(key);\n        }).done(function () {\n            var animators = el.animators;\n            var idx = indexOf(animators, animator);\n            if (idx >= 0) {\n                animators.splice(idx, 1);\n            }\n        });\n        this.animators.push(animator);\n        if (zr) {\n            zr.animation.addAnimator(animator);\n        }\n        zr && zr.wakeUp();\n    };\n    Element.prototype.updateDuringAnimation = function (key) {\n        this.markRedraw();\n    };\n    Element.prototype.stopAnimation = function (scope, forwardToLast) {\n        var animators = this.animators;\n        var len = animators.length;\n        var leftAnimators = [];\n        for (var i = 0; i < len; i++) {\n            var animator = animators[i];\n            if (!scope || scope === animator.scope) {\n                animator.stop(forwardToLast);\n            }\n            else {\n                leftAnimators.push(animator);\n            }\n        }\n        this.animators = leftAnimators;\n        return this;\n    };\n    Element.prototype.animateTo = function (target, cfg, animationProps) {\n        animateTo(this, target, cfg, animationProps);\n    };\n    Element.prototype.animateFrom = function (target, cfg, animationProps) {\n        animateTo(this, target, cfg, animationProps, true);\n    };\n    Element.prototype._transitionState = function (stateName, target, cfg, animationProps) {\n        var animators = animateTo(this, target, cfg, animationProps);\n        for (var i = 0; i < animators.length; i++) {\n            animators[i].__fromStateTransition = stateName;\n        }\n    };\n    Element.prototype.getBoundingRect = function () {\n        return null;\n    };\n    Element.prototype.getPaintRect = function () {\n        return null;\n    };\n    Element.initDefaultProps = (function () {\n        var elProto = Element.prototype;\n        elProto.type = 'element';\n        elProto.name = '';\n        elProto.ignore =\n            elProto.silent =\n                elProto.isGroup =\n                    elProto.draggable =\n                        elProto.dragging =\n                            elProto.ignoreClip =\n                                elProto.__inHover = false;\n        elProto.__dirty = REDRAW_BIT;\n        var logs = {};\n        function logDeprecatedError(key, xKey, yKey) {\n            if (!logs[key + xKey + yKey]) {\n                console.warn(\"DEPRECATED: '\" + key + \"' has been deprecated. use '\" + xKey + \"', '\" + yKey + \"' instead\");\n                logs[key + xKey + yKey] = true;\n            }\n        }\n        function createLegacyProperty(key, privateKey, xKey, yKey) {\n            Object.defineProperty(elProto, key, {\n                get: function () {\n                    if (process.env.NODE_ENV !== 'production') {\n                        logDeprecatedError(key, xKey, yKey);\n                    }\n                    if (!this[privateKey]) {\n                        var pos = this[privateKey] = [];\n                        enhanceArray(this, pos);\n                    }\n                    return this[privateKey];\n                },\n                set: function (pos) {\n                    if (process.env.NODE_ENV !== 'production') {\n                        logDeprecatedError(key, xKey, yKey);\n                    }\n                    this[xKey] = pos[0];\n                    this[yKey] = pos[1];\n                    this[privateKey] = pos;\n                    enhanceArray(this, pos);\n                }\n            });\n            function enhanceArray(self, pos) {\n                Object.defineProperty(pos, 0, {\n                    get: function () {\n                        return self[xKey];\n                    },\n                    set: function (val) {\n                        self[xKey] = val;\n                    }\n                });\n                Object.defineProperty(pos, 1, {\n                    get: function () {\n                        return self[yKey];\n                    },\n                    set: function (val) {\n                        self[yKey] = val;\n                    }\n                });\n            }\n        }\n        if (Object.defineProperty) {\n            createLegacyProperty('position', '_legacyPos', 'x', 'y');\n            createLegacyProperty('scale', '_legacyScale', 'scaleX', 'scaleY');\n            createLegacyProperty('origin', '_legacyOrigin', 'originX', 'originY');\n        }\n    })();\n    return Element;\n}());\nmixin(Element, Eventful);\nmixin(Element, Transformable);\nfunction animateTo(animatable, target, cfg, animationProps, reverse) {\n    cfg = cfg || {};\n    var animators = [];\n    animateToShallow(animatable, '', animatable, target, cfg, animationProps, animators, reverse);\n    var finishCount = animators.length;\n    var doneHappened = false;\n    var cfgDone = cfg.done;\n    var cfgAborted = cfg.aborted;\n    var doneCb = function () {\n        doneHappened = true;\n        finishCount--;\n        if (finishCount <= 0) {\n            doneHappened\n                ? (cfgDone && cfgDone())\n                : (cfgAborted && cfgAborted());\n        }\n    };\n    var abortedCb = function () {\n        finishCount--;\n        if (finishCount <= 0) {\n            doneHappened\n                ? (cfgDone && cfgDone())\n                : (cfgAborted && cfgAborted());\n        }\n    };\n    if (!finishCount) {\n        cfgDone && cfgDone();\n    }\n    if (animators.length > 0 && cfg.during) {\n        animators[0].during(function (target, percent) {\n            cfg.during(percent);\n        });\n    }\n    for (var i = 0; i < animators.length; i++) {\n        var animator = animators[i];\n        if (doneCb) {\n            animator.done(doneCb);\n        }\n        if (abortedCb) {\n            animator.aborted(abortedCb);\n        }\n        if (cfg.force) {\n            animator.duration(cfg.duration);\n        }\n        animator.start(cfg.easing);\n    }\n    return animators;\n}\nfunction copyArrShallow(source, target, len) {\n    for (var i = 0; i < len; i++) {\n        source[i] = target[i];\n    }\n}\nfunction is2DArray(value) {\n    return isArrayLike(value[0]);\n}\nfunction copyValue(target, source, key) {\n    if (isArrayLike(source[key])) {\n        if (!isArrayLike(target[key])) {\n            target[key] = [];\n        }\n        if (isTypedArray(source[key])) {\n            var len = source[key].length;\n            if (target[key].length !== len) {\n                target[key] = new (source[key].constructor)(len);\n                copyArrShallow(target[key], source[key], len);\n            }\n        }\n        else {\n            var sourceArr = source[key];\n            var targetArr = target[key];\n            var len0 = sourceArr.length;\n            if (is2DArray(sourceArr)) {\n                var len1 = sourceArr[0].length;\n                for (var i = 0; i < len0; i++) {\n                    if (!targetArr[i]) {\n                        targetArr[i] = Array.prototype.slice.call(sourceArr[i]);\n                    }\n                    else {\n                        copyArrShallow(targetArr[i], sourceArr[i], len1);\n                    }\n                }\n            }\n            else {\n                copyArrShallow(targetArr, sourceArr, len0);\n            }\n            targetArr.length = sourceArr.length;\n        }\n    }\n    else {\n        target[key] = source[key];\n    }\n}\nfunction isValueSame(val1, val2) {\n    return val1 === val2\n        || isArrayLike(val1) && isArrayLike(val2) && is1DArraySame(val1, val2);\n}\nfunction is1DArraySame(arr0, arr1) {\n    var len = arr0.length;\n    if (len !== arr1.length) {\n        return false;\n    }\n    for (var i = 0; i < len; i++) {\n        if (arr0[i] !== arr1[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction animateToShallow(animatable, topKey, animateObj, target, cfg, animationProps, animators, reverse) {\n    var targetKeys = keys(target);\n    var duration = cfg.duration;\n    var delay = cfg.delay;\n    var additive = cfg.additive;\n    var setToFinal = cfg.setToFinal;\n    var animateAll = !isObject(animationProps);\n    var existsAnimators = animatable.animators;\n    var animationKeys = [];\n    for (var k = 0; k < targetKeys.length; k++) {\n        var innerKey = targetKeys[k];\n        var targetVal = target[innerKey];\n        if (targetVal != null && animateObj[innerKey] != null\n            && (animateAll || animationProps[innerKey])) {\n            if (isObject(targetVal)\n                && !isArrayLike(targetVal)\n                && !isGradientObject(targetVal)) {\n                if (topKey) {\n                    if (!reverse) {\n                        animateObj[innerKey] = targetVal;\n                        animatable.updateDuringAnimation(topKey);\n                    }\n                    continue;\n                }\n                animateToShallow(animatable, innerKey, animateObj[innerKey], targetVal, cfg, animationProps && animationProps[innerKey], animators, reverse);\n            }\n            else {\n                animationKeys.push(innerKey);\n            }\n        }\n        else if (!reverse) {\n            animateObj[innerKey] = targetVal;\n            animatable.updateDuringAnimation(topKey);\n            animationKeys.push(innerKey);\n        }\n    }\n    var keyLen = animationKeys.length;\n    if (!additive && keyLen) {\n        for (var i = 0; i < existsAnimators.length; i++) {\n            var animator = existsAnimators[i];\n            if (animator.targetName === topKey) {\n                var allAborted = animator.stopTracks(animationKeys);\n                if (allAborted) {\n                    var idx = indexOf(existsAnimators, animator);\n                    existsAnimators.splice(idx, 1);\n                }\n            }\n        }\n    }\n    if (!cfg.force) {\n        animationKeys = filter(animationKeys, function (key) { return !isValueSame(target[key], animateObj[key]); });\n        keyLen = animationKeys.length;\n    }\n    if (keyLen > 0\n        || (cfg.force && !animators.length)) {\n        var revertedSource = void 0;\n        var reversedTarget = void 0;\n        var sourceClone = void 0;\n        if (reverse) {\n            reversedTarget = {};\n            if (setToFinal) {\n                revertedSource = {};\n            }\n            for (var i = 0; i < keyLen; i++) {\n                var innerKey = animationKeys[i];\n                reversedTarget[innerKey] = animateObj[innerKey];\n                if (setToFinal) {\n                    revertedSource[innerKey] = target[innerKey];\n                }\n                else {\n                    animateObj[innerKey] = target[innerKey];\n                }\n            }\n        }\n        else if (setToFinal) {\n            sourceClone = {};\n            for (var i = 0; i < keyLen; i++) {\n                var innerKey = animationKeys[i];\n                sourceClone[innerKey] = cloneValue(animateObj[innerKey]);\n                copyValue(animateObj, target, innerKey);\n            }\n        }\n        var animator = new Animator(animateObj, false, false, additive ? filter(existsAnimators, function (animator) { return animator.targetName === topKey; }) : null);\n        animator.targetName = topKey;\n        if (cfg.scope) {\n            animator.scope = cfg.scope;\n        }\n        if (setToFinal && revertedSource) {\n            animator.whenWithKeys(0, revertedSource, animationKeys);\n        }\n        if (sourceClone) {\n            animator.whenWithKeys(0, sourceClone, animationKeys);\n        }\n        animator.whenWithKeys(duration == null ? 500 : duration, reverse ? reversedTarget : target, animationKeys).delay(delay || 0);\n        animatable.addAnimator(animator, topKey);\n        animators.push(animator);\n    }\n}\nexport default Element;\n","import { __extends } from \"tslib\";\nimport * as util from './core/util.js';\nimport * as vec2 from './core/vector.js';\nimport Draggable from './mixin/Draggable.js';\nimport Eventful from './core/Eventful.js';\nimport * as eventTool from './core/event.js';\nimport { GestureMgr } from './core/GestureMgr.js';\nimport BoundingRect from './core/BoundingRect.js';\nvar SILENT = 'silent';\nfunction makeEventPacket(eveType, targetInfo, event) {\n    return {\n        type: eveType,\n        event: event,\n        target: targetInfo.target,\n        topTarget: targetInfo.topTarget,\n        cancelBubble: false,\n        offsetX: event.zrX,\n        offsetY: event.zrY,\n        gestureEvent: event.gestureEvent,\n        pinchX: event.pinchX,\n        pinchY: event.pinchY,\n        pinchScale: event.pinchScale,\n        wheelDelta: event.zrDelta,\n        zrByTouch: event.zrByTouch,\n        which: event.which,\n        stop: stopEvent\n    };\n}\nfunction stopEvent() {\n    eventTool.stop(this.event);\n}\nvar EmptyProxy = (function (_super) {\n    __extends(EmptyProxy, _super);\n    function EmptyProxy() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handler = null;\n        return _this;\n    }\n    EmptyProxy.prototype.dispose = function () { };\n    EmptyProxy.prototype.setCursor = function () { };\n    return EmptyProxy;\n}(Eventful));\nvar HoveredResult = (function () {\n    function HoveredResult(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    return HoveredResult;\n}());\nvar handlerNames = [\n    'click', 'dblclick', 'mousewheel', 'mouseout',\n    'mouseup', 'mousedown', 'mousemove', 'contextmenu'\n];\nvar tmpRect = new BoundingRect(0, 0, 0, 0);\nvar Handler = (function (_super) {\n    __extends(Handler, _super);\n    function Handler(storage, painter, proxy, painterRoot, pointerSize) {\n        var _this = _super.call(this) || this;\n        _this._hovered = new HoveredResult(0, 0);\n        _this.storage = storage;\n        _this.painter = painter;\n        _this.painterRoot = painterRoot;\n        _this._pointerSize = pointerSize;\n        proxy = proxy || new EmptyProxy();\n        _this.proxy = null;\n        _this.setHandlerProxy(proxy);\n        _this._draggingMgr = new Draggable(_this);\n        return _this;\n    }\n    Handler.prototype.setHandlerProxy = function (proxy) {\n        if (this.proxy) {\n            this.proxy.dispose();\n        }\n        if (proxy) {\n            util.each(handlerNames, function (name) {\n                proxy.on && proxy.on(name, this[name], this);\n            }, this);\n            proxy.handler = this;\n        }\n        this.proxy = proxy;\n    };\n    Handler.prototype.mousemove = function (event) {\n        var x = event.zrX;\n        var y = event.zrY;\n        var isOutside = isOutsideBoundary(this, x, y);\n        var lastHovered = this._hovered;\n        var lastHoveredTarget = lastHovered.target;\n        if (lastHoveredTarget && !lastHoveredTarget.__zr) {\n            lastHovered = this.findHover(lastHovered.x, lastHovered.y);\n            lastHoveredTarget = lastHovered.target;\n        }\n        var hovered = this._hovered = isOutside ? new HoveredResult(x, y) : this.findHover(x, y);\n        var hoveredTarget = hovered.target;\n        var proxy = this.proxy;\n        proxy.setCursor && proxy.setCursor(hoveredTarget ? hoveredTarget.cursor : 'default');\n        if (lastHoveredTarget && hoveredTarget !== lastHoveredTarget) {\n            this.dispatchToElement(lastHovered, 'mouseout', event);\n        }\n        this.dispatchToElement(hovered, 'mousemove', event);\n        if (hoveredTarget && hoveredTarget !== lastHoveredTarget) {\n            this.dispatchToElement(hovered, 'mouseover', event);\n        }\n    };\n    Handler.prototype.mouseout = function (event) {\n        var eventControl = event.zrEventControl;\n        if (eventControl !== 'only_globalout') {\n            this.dispatchToElement(this._hovered, 'mouseout', event);\n        }\n        if (eventControl !== 'no_globalout') {\n            this.trigger('globalout', { type: 'globalout', event: event });\n        }\n    };\n    Handler.prototype.resize = function () {\n        this._hovered = new HoveredResult(0, 0);\n    };\n    Handler.prototype.dispatch = function (eventName, eventArgs) {\n        var handler = this[eventName];\n        handler && handler.call(this, eventArgs);\n    };\n    Handler.prototype.dispose = function () {\n        this.proxy.dispose();\n        this.storage = null;\n        this.proxy = null;\n        this.painter = null;\n    };\n    Handler.prototype.setCursorStyle = function (cursorStyle) {\n        var proxy = this.proxy;\n        proxy.setCursor && proxy.setCursor(cursorStyle);\n    };\n    Handler.prototype.dispatchToElement = function (targetInfo, eventName, event) {\n        targetInfo = targetInfo || {};\n        var el = targetInfo.target;\n        if (el && el.silent) {\n            return;\n        }\n        var eventKey = ('on' + eventName);\n        var eventPacket = makeEventPacket(eventName, targetInfo, event);\n        while (el) {\n            el[eventKey]\n                && (eventPacket.cancelBubble = !!el[eventKey].call(el, eventPacket));\n            el.trigger(eventName, eventPacket);\n            el = el.__hostTarget ? el.__hostTarget : el.parent;\n            if (eventPacket.cancelBubble) {\n                break;\n            }\n        }\n        if (!eventPacket.cancelBubble) {\n            this.trigger(eventName, eventPacket);\n            if (this.painter && this.painter.eachOtherLayer) {\n                this.painter.eachOtherLayer(function (layer) {\n                    if (typeof (layer[eventKey]) === 'function') {\n                        layer[eventKey].call(layer, eventPacket);\n                    }\n                    if (layer.trigger) {\n                        layer.trigger(eventName, eventPacket);\n                    }\n                });\n            }\n        }\n    };\n    Handler.prototype.findHover = function (x, y, exclude) {\n        var list = this.storage.getDisplayList();\n        var out = new HoveredResult(x, y);\n        setHoverTarget(list, out, x, y, exclude);\n        if (this._pointerSize && !out.target) {\n            var candidates = [];\n            var pointerSize = this._pointerSize;\n            var targetSizeHalf = pointerSize / 2;\n            var pointerRect = new BoundingRect(x - targetSizeHalf, y - targetSizeHalf, pointerSize, pointerSize);\n            for (var i = list.length - 1; i >= 0; i--) {\n                var el = list[i];\n                if (el !== exclude\n                    && !el.ignore\n                    && !el.ignoreCoarsePointer\n                    && (!el.parent || !el.parent.ignoreCoarsePointer)) {\n                    tmpRect.copy(el.getBoundingRect());\n                    if (el.transform) {\n                        tmpRect.applyTransform(el.transform);\n                    }\n                    if (tmpRect.intersect(pointerRect)) {\n                        candidates.push(el);\n                    }\n                }\n            }\n            if (candidates.length) {\n                var rStep = 4;\n                var thetaStep = Math.PI / 12;\n                var PI2 = Math.PI * 2;\n                for (var r = 0; r < targetSizeHalf; r += rStep) {\n                    for (var theta = 0; theta < PI2; theta += thetaStep) {\n                        var x1 = x + r * Math.cos(theta);\n                        var y1 = y + r * Math.sin(theta);\n                        setHoverTarget(candidates, out, x1, y1, exclude);\n                        if (out.target) {\n                            return out;\n                        }\n                    }\n                }\n            }\n        }\n        return out;\n    };\n    Handler.prototype.processGesture = function (event, stage) {\n        if (!this._gestureMgr) {\n            this._gestureMgr = new GestureMgr();\n        }\n        var gestureMgr = this._gestureMgr;\n        stage === 'start' && gestureMgr.clear();\n        var gestureInfo = gestureMgr.recognize(event, this.findHover(event.zrX, event.zrY, null).target, this.proxy.dom);\n        stage === 'end' && gestureMgr.clear();\n        if (gestureInfo) {\n            var type = gestureInfo.type;\n            event.gestureEvent = type;\n            var res = new HoveredResult();\n            res.target = gestureInfo.target;\n            this.dispatchToElement(res, type, gestureInfo.event);\n        }\n    };\n    return Handler;\n}(Eventful));\nutil.each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\n    Handler.prototype[name] = function (event) {\n        var x = event.zrX;\n        var y = event.zrY;\n        var isOutside = isOutsideBoundary(this, x, y);\n        var hovered;\n        var hoveredTarget;\n        if (name !== 'mouseup' || !isOutside) {\n            hovered = this.findHover(x, y);\n            hoveredTarget = hovered.target;\n        }\n        if (name === 'mousedown') {\n            this._downEl = hoveredTarget;\n            this._downPoint = [event.zrX, event.zrY];\n            this._upEl = hoveredTarget;\n        }\n        else if (name === 'mouseup') {\n            this._upEl = hoveredTarget;\n        }\n        else if (name === 'click') {\n            if (this._downEl !== this._upEl\n                || !this._downPoint\n                || vec2.dist(this._downPoint, [event.zrX, event.zrY]) > 4) {\n                return;\n            }\n            this._downPoint = null;\n        }\n        this.dispatchToElement(hovered, name, event);\n    };\n});\nfunction isHover(displayable, x, y) {\n    if (displayable[displayable.rectHover ? 'rectContain' : 'contain'](x, y)) {\n        var el = displayable;\n        var isSilent = void 0;\n        var ignoreClip = false;\n        while (el) {\n            if (el.ignoreClip) {\n                ignoreClip = true;\n            }\n            if (!ignoreClip) {\n                var clipPath = el.getClipPath();\n                if (clipPath && !clipPath.contain(x, y)) {\n                    return false;\n                }\n            }\n            if (el.silent) {\n                isSilent = true;\n            }\n            var hostEl = el.__hostTarget;\n            el = hostEl ? hostEl : el.parent;\n        }\n        return isSilent ? SILENT : true;\n    }\n    return false;\n}\nfunction setHoverTarget(list, out, x, y, exclude) {\n    for (var i = list.length - 1; i >= 0; i--) {\n        var el = list[i];\n        var hoverCheckResult = void 0;\n        if (el !== exclude\n            && !el.ignore\n            && (hoverCheckResult = isHover(el, x, y))) {\n            !out.topTarget && (out.topTarget = el);\n            if (hoverCheckResult !== SILENT) {\n                out.target = el;\n                break;\n            }\n        }\n    }\n}\nfunction isOutsideBoundary(handlerInstance, x, y) {\n    var painter = handlerInstance.painter;\n    return x < 0 || x > painter.getWidth() || y < 0 || y > painter.getHeight();\n}\nexport default Handler;\n","import * as util from './core/util.js';\nimport timsort from './core/timsort.js';\nimport { REDRAW_BIT } from './graphic/constants.js';\nvar invalidZErrorLogged = false;\nfunction logInvalidZError() {\n    if (invalidZErrorLogged) {\n        return;\n    }\n    invalidZErrorLogged = true;\n    console.warn('z / z2 / zlevel of displayable is invalid, which may cause unexpected errors');\n}\nfunction shapeCompareFunc(a, b) {\n    if (a.zlevel === b.zlevel) {\n        if (a.z === b.z) {\n            return a.z2 - b.z2;\n        }\n        return a.z - b.z;\n    }\n    return a.zlevel - b.zlevel;\n}\nvar Storage = (function () {\n    function Storage() {\n        this._roots = [];\n        this._displayList = [];\n        this._displayListLen = 0;\n        this.displayableSortFunc = shapeCompareFunc;\n    }\n    Storage.prototype.traverse = function (cb, context) {\n        for (var i = 0; i < this._roots.length; i++) {\n            this._roots[i].traverse(cb, context);\n        }\n    };\n    Storage.prototype.getDisplayList = function (update, includeIgnore) {\n        includeIgnore = includeIgnore || false;\n        var displayList = this._displayList;\n        if (update || !displayList.length) {\n            this.updateDisplayList(includeIgnore);\n        }\n        return displayList;\n    };\n    Storage.prototype.updateDisplayList = function (includeIgnore) {\n        this._displayListLen = 0;\n        var roots = this._roots;\n        var displayList = this._displayList;\n        for (var i = 0, len = roots.length; i < len; i++) {\n            this._updateAndAddDisplayable(roots[i], null, includeIgnore);\n        }\n        displayList.length = this._displayListLen;\n        timsort(displayList, shapeCompareFunc);\n    };\n    Storage.prototype._updateAndAddDisplayable = function (el, clipPaths, includeIgnore) {\n        if (el.ignore && !includeIgnore) {\n            return;\n        }\n        el.beforeUpdate();\n        el.update();\n        el.afterUpdate();\n        var userSetClipPath = el.getClipPath();\n        if (el.ignoreClip) {\n            clipPaths = null;\n        }\n        else if (userSetClipPath) {\n            if (clipPaths) {\n                clipPaths = clipPaths.slice();\n            }\n            else {\n                clipPaths = [];\n            }\n            var currentClipPath = userSetClipPath;\n            var parentClipPath = el;\n            while (currentClipPath) {\n                currentClipPath.parent = parentClipPath;\n                currentClipPath.updateTransform();\n                clipPaths.push(currentClipPath);\n                parentClipPath = currentClipPath;\n                currentClipPath = currentClipPath.getClipPath();\n            }\n        }\n        if (el.childrenRef) {\n            var children = el.childrenRef();\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                if (el.__dirty) {\n                    child.__dirty |= REDRAW_BIT;\n                }\n                this._updateAndAddDisplayable(child, clipPaths, includeIgnore);\n            }\n            el.__dirty = 0;\n        }\n        else {\n            var disp = el;\n            if (clipPaths && clipPaths.length) {\n                disp.__clipPaths = clipPaths;\n            }\n            else if (disp.__clipPaths && disp.__clipPaths.length > 0) {\n                disp.__clipPaths = [];\n            }\n            if (isNaN(disp.z)) {\n                logInvalidZError();\n                disp.z = 0;\n            }\n            if (isNaN(disp.z2)) {\n                logInvalidZError();\n                disp.z2 = 0;\n            }\n            if (isNaN(disp.zlevel)) {\n                logInvalidZError();\n                disp.zlevel = 0;\n            }\n            this._displayList[this._displayListLen++] = disp;\n        }\n        var decalEl = el.getDecalElement && el.getDecalElement();\n        if (decalEl) {\n            this._updateAndAddDisplayable(decalEl, clipPaths, includeIgnore);\n        }\n        var textGuide = el.getTextGuideLine();\n        if (textGuide) {\n            this._updateAndAddDisplayable(textGuide, clipPaths, includeIgnore);\n        }\n        var textEl = el.getTextContent();\n        if (textEl) {\n            this._updateAndAddDisplayable(textEl, clipPaths, includeIgnore);\n        }\n    };\n    Storage.prototype.addRoot = function (el) {\n        if (el.__zr && el.__zr.storage === this) {\n            return;\n        }\n        this._roots.push(el);\n    };\n    Storage.prototype.delRoot = function (el) {\n        if (el instanceof Array) {\n            for (var i = 0, l = el.length; i < l; i++) {\n                this.delRoot(el[i]);\n            }\n            return;\n        }\n        var idx = util.indexOf(this._roots, el);\n        if (idx >= 0) {\n            this._roots.splice(idx, 1);\n        }\n    };\n    Storage.prototype.delAllRoots = function () {\n        this._roots = [];\n        this._displayList = [];\n        this._displayListLen = 0;\n        return;\n    };\n    Storage.prototype.getRoots = function () {\n        return this._roots;\n    };\n    Storage.prototype.dispose = function () {\n        this._displayList = null;\n        this._roots = null;\n    };\n    return Storage;\n}());\nexport default Storage;\n","import { __extends } from \"tslib\";\nimport Eventful from '../core/Eventful.js';\nimport requestAnimationFrame from './requestAnimationFrame.js';\nimport Animator from './Animator.js';\nexport function getTime() {\n    return new Date().getTime();\n}\nvar Animation = (function (_super) {\n    __extends(Animation, _super);\n    function Animation(opts) {\n        var _this = _super.call(this) || this;\n        _this._running = false;\n        _this._time = 0;\n        _this._pausedTime = 0;\n        _this._pauseStart = 0;\n        _this._paused = false;\n        opts = opts || {};\n        _this.stage = opts.stage || {};\n        return _this;\n    }\n    Animation.prototype.addClip = function (clip) {\n        if (clip.animation) {\n            this.removeClip(clip);\n        }\n        if (!this._head) {\n            this._head = this._tail = clip;\n        }\n        else {\n            this._tail.next = clip;\n            clip.prev = this._tail;\n            clip.next = null;\n            this._tail = clip;\n        }\n        clip.animation = this;\n    };\n    Animation.prototype.addAnimator = function (animator) {\n        animator.animation = this;\n        var clip = animator.getClip();\n        if (clip) {\n            this.addClip(clip);\n        }\n    };\n    Animation.prototype.removeClip = function (clip) {\n        if (!clip.animation) {\n            return;\n        }\n        var prev = clip.prev;\n        var next = clip.next;\n        if (prev) {\n            prev.next = next;\n        }\n        else {\n            this._head = next;\n        }\n        if (next) {\n            next.prev = prev;\n        }\n        else {\n            this._tail = prev;\n        }\n        clip.next = clip.prev = clip.animation = null;\n    };\n    Animation.prototype.removeAnimator = function (animator) {\n        var clip = animator.getClip();\n        if (clip) {\n            this.removeClip(clip);\n        }\n        animator.animation = null;\n    };\n    Animation.prototype.update = function (notTriggerFrameAndStageUpdate) {\n        var time = getTime() - this._pausedTime;\n        var delta = time - this._time;\n        var clip = this._head;\n        while (clip) {\n            var nextClip = clip.next;\n            var finished = clip.step(time, delta);\n            if (finished) {\n                clip.ondestroy();\n                this.removeClip(clip);\n                clip = nextClip;\n            }\n            else {\n                clip = nextClip;\n            }\n        }\n        this._time = time;\n        if (!notTriggerFrameAndStageUpdate) {\n            this.trigger('frame', delta);\n            this.stage.update && this.stage.update();\n        }\n    };\n    Animation.prototype._startLoop = function () {\n        var self = this;\n        this._running = true;\n        function step() {\n            if (self._running) {\n                requestAnimationFrame(step);\n                !self._paused && self.update();\n            }\n        }\n        requestAnimationFrame(step);\n    };\n    Animation.prototype.start = function () {\n        if (this._running) {\n            return;\n        }\n        this._time = getTime();\n        this._pausedTime = 0;\n        this._startLoop();\n    };\n    Animation.prototype.stop = function () {\n        this._running = false;\n    };\n    Animation.prototype.pause = function () {\n        if (!this._paused) {\n            this._pauseStart = getTime();\n            this._paused = true;\n        }\n    };\n    Animation.prototype.resume = function () {\n        if (this._paused) {\n            this._pausedTime += getTime() - this._pauseStart;\n            this._paused = false;\n        }\n    };\n    Animation.prototype.clear = function () {\n        var clip = this._head;\n        while (clip) {\n            var nextClip = clip.next;\n            clip.prev = clip.next = clip.animation = null;\n            clip = nextClip;\n        }\n        this._head = this._tail = null;\n    };\n    Animation.prototype.isFinished = function () {\n        return this._head == null;\n    };\n    Animation.prototype.animate = function (target, options) {\n        options = options || {};\n        this.start();\n        var animator = new Animator(target, options.loop);\n        this.addAnimator(animator);\n        return animator;\n    };\n    return Animation;\n}(Eventful));\nexport default Animation;\n","var easingFuncs = {\n    linear: function (k) {\n        return k;\n    },\n    quadraticIn: function (k) {\n        return k * k;\n    },\n    quadraticOut: function (k) {\n        return k * (2 - k);\n    },\n    quadraticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k;\n        }\n        return -0.5 * (--k * (k - 2) - 1);\n    },\n    cubicIn: function (k) {\n        return k * k * k;\n    },\n    cubicOut: function (k) {\n        return --k * k * k + 1;\n    },\n    cubicInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k + 2);\n    },\n    quarticIn: function (k) {\n        return k * k * k * k;\n    },\n    quarticOut: function (k) {\n        return 1 - (--k * k * k * k);\n    },\n    quarticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k;\n        }\n        return -0.5 * ((k -= 2) * k * k * k - 2);\n    },\n    quinticIn: function (k) {\n        return k * k * k * k * k;\n    },\n    quinticOut: function (k) {\n        return --k * k * k * k * k + 1;\n    },\n    quinticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k * k * k + 2);\n    },\n    sinusoidalIn: function (k) {\n        return 1 - Math.cos(k * Math.PI / 2);\n    },\n    sinusoidalOut: function (k) {\n        return Math.sin(k * Math.PI / 2);\n    },\n    sinusoidalInOut: function (k) {\n        return 0.5 * (1 - Math.cos(Math.PI * k));\n    },\n    exponentialIn: function (k) {\n        return k === 0 ? 0 : Math.pow(1024, k - 1);\n    },\n    exponentialOut: function (k) {\n        return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n    },\n    exponentialInOut: function (k) {\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if ((k *= 2) < 1) {\n            return 0.5 * Math.pow(1024, k - 1);\n        }\n        return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n    },\n    circularIn: function (k) {\n        return 1 - Math.sqrt(1 - k * k);\n    },\n    circularOut: function (k) {\n        return Math.sqrt(1 - (--k * k));\n    },\n    circularInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return -0.5 * (Math.sqrt(1 - k * k) - 1);\n        }\n        return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n    },\n    elasticIn: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return -(a * Math.pow(2, 10 * (k -= 1))\n            * Math.sin((k - s) * (2 * Math.PI) / p));\n    },\n    elasticOut: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return (a * Math.pow(2, -10 * k)\n            * Math.sin((k - s) * (2 * Math.PI) / p) + 1);\n    },\n    elasticInOut: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        if ((k *= 2) < 1) {\n            return -0.5 * (a * Math.pow(2, 10 * (k -= 1))\n                * Math.sin((k - s) * (2 * Math.PI) / p));\n        }\n        return a * Math.pow(2, -10 * (k -= 1))\n            * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\n    },\n    backIn: function (k) {\n        var s = 1.70158;\n        return k * k * ((s + 1) * k - s);\n    },\n    backOut: function (k) {\n        var s = 1.70158;\n        return --k * k * ((s + 1) * k + s) + 1;\n    },\n    backInOut: function (k) {\n        var s = 1.70158 * 1.525;\n        if ((k *= 2) < 1) {\n            return 0.5 * (k * k * ((s + 1) * k - s));\n        }\n        return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    },\n    bounceIn: function (k) {\n        return 1 - easingFuncs.bounceOut(1 - k);\n    },\n    bounceOut: function (k) {\n        if (k < (1 / 2.75)) {\n            return 7.5625 * k * k;\n        }\n        else if (k < (2 / 2.75)) {\n            return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n        }\n        else if (k < (2.5 / 2.75)) {\n            return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n        }\n        else {\n            return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n        }\n    },\n    bounceInOut: function (k) {\n        if (k < 0.5) {\n            return easingFuncs.bounceIn(k * 2) * 0.5;\n        }\n        return easingFuncs.bounceOut(k * 2 - 1) * 0.5 + 0.5;\n    }\n};\nexport default easingFuncs;\n","import easingFuncs from './easing.js';\nimport { isFunction, noop } from '../core/util.js';\nimport { createCubicEasingFunc } from './cubicEasing.js';\nvar Clip = (function () {\n    function Clip(opts) {\n        this._inited = false;\n        this._startTime = 0;\n        this._pausedTime = 0;\n        this._paused = false;\n        this._life = opts.life || 1000;\n        this._delay = opts.delay || 0;\n        this.loop = opts.loop || false;\n        this.onframe = opts.onframe || noop;\n        this.ondestroy = opts.ondestroy || noop;\n        this.onrestart = opts.onrestart || noop;\n        opts.easing && this.setEasing(opts.easing);\n    }\n    Clip.prototype.step = function (globalTime, deltaTime) {\n        if (!this._inited) {\n            this._startTime = globalTime + this._delay;\n            this._inited = true;\n        }\n        if (this._paused) {\n            this._pausedTime += deltaTime;\n            return;\n        }\n        var life = this._life;\n        var elapsedTime = globalTime - this._startTime - this._pausedTime;\n        var percent = elapsedTime / life;\n        if (percent < 0) {\n            percent = 0;\n        }\n        percent = Math.min(percent, 1);\n        var easingFunc = this.easingFunc;\n        var schedule = easingFunc ? easingFunc(percent) : percent;\n        this.onframe(schedule);\n        if (percent === 1) {\n            if (this.loop) {\n                var remainder = elapsedTime % life;\n                this._startTime = globalTime - remainder;\n                this._pausedTime = 0;\n                this.onrestart();\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    };\n    Clip.prototype.pause = function () {\n        this._paused = true;\n    };\n    Clip.prototype.resume = function () {\n        this._paused = false;\n    };\n    Clip.prototype.setEasing = function (easing) {\n        this.easing = easing;\n        this.easingFunc = isFunction(easing)\n            ? easing\n            : easingFuncs[easing] || createCubicEasingFunc(easing);\n    };\n    return Clip;\n}());\nexport default Clip;\n","import Clip from './Clip.js';\nimport * as color from '../tool/color.js';\nimport { eqNaN, extend, isArrayLike, isFunction, isGradientObject, isNumber, isString, keys, logError, map } from '../core/util.js';\nimport easingFuncs from './easing.js';\nimport { createCubicEasingFunc } from './cubicEasing.js';\nimport { isLinearGradient, isRadialGradient } from '../svg/helper.js';\n;\nvar arraySlice = Array.prototype.slice;\nfunction interpolateNumber(p0, p1, percent) {\n    return (p1 - p0) * percent + p0;\n}\nfunction interpolate1DArray(out, p0, p1, percent) {\n    var len = p0.length;\n    for (var i = 0; i < len; i++) {\n        out[i] = interpolateNumber(p0[i], p1[i], percent);\n    }\n    return out;\n}\nfunction interpolate2DArray(out, p0, p1, percent) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n    for (var i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[i] = [];\n        }\n        for (var j = 0; j < len2; j++) {\n            out[i][j] = interpolateNumber(p0[i][j], p1[i][j], percent);\n        }\n    }\n    return out;\n}\nfunction add1DArray(out, p0, p1, sign) {\n    var len = p0.length;\n    for (var i = 0; i < len; i++) {\n        out[i] = p0[i] + p1[i] * sign;\n    }\n    return out;\n}\nfunction add2DArray(out, p0, p1, sign) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n    for (var i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[i] = [];\n        }\n        for (var j = 0; j < len2; j++) {\n            out[i][j] = p0[i][j] + p1[i][j] * sign;\n        }\n    }\n    return out;\n}\nfunction fillColorStops(val0, val1) {\n    var len0 = val0.length;\n    var len1 = val1.length;\n    var shorterArr = len0 > len1 ? val1 : val0;\n    var shorterLen = Math.min(len0, len1);\n    var last = shorterArr[shorterLen - 1] || { color: [0, 0, 0, 0], offset: 0 };\n    for (var i = shorterLen; i < Math.max(len0, len1); i++) {\n        shorterArr.push({\n            offset: last.offset,\n            color: last.color.slice()\n        });\n    }\n}\nfunction fillArray(val0, val1, arrDim) {\n    var arr0 = val0;\n    var arr1 = val1;\n    if (!arr0.push || !arr1.push) {\n        return;\n    }\n    var arr0Len = arr0.length;\n    var arr1Len = arr1.length;\n    if (arr0Len !== arr1Len) {\n        var isPreviousLarger = arr0Len > arr1Len;\n        if (isPreviousLarger) {\n            arr0.length = arr1Len;\n        }\n        else {\n            for (var i = arr0Len; i < arr1Len; i++) {\n                arr0.push(arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i]));\n            }\n        }\n    }\n    var len2 = arr0[0] && arr0[0].length;\n    for (var i = 0; i < arr0.length; i++) {\n        if (arrDim === 1) {\n            if (isNaN(arr0[i])) {\n                arr0[i] = arr1[i];\n            }\n        }\n        else {\n            for (var j = 0; j < len2; j++) {\n                if (isNaN(arr0[i][j])) {\n                    arr0[i][j] = arr1[i][j];\n                }\n            }\n        }\n    }\n}\nexport function cloneValue(value) {\n    if (isArrayLike(value)) {\n        var len = value.length;\n        if (isArrayLike(value[0])) {\n            var ret = [];\n            for (var i = 0; i < len; i++) {\n                ret.push(arraySlice.call(value[i]));\n            }\n            return ret;\n        }\n        return arraySlice.call(value);\n    }\n    return value;\n}\nfunction rgba2String(rgba) {\n    rgba[0] = Math.floor(rgba[0]) || 0;\n    rgba[1] = Math.floor(rgba[1]) || 0;\n    rgba[2] = Math.floor(rgba[2]) || 0;\n    rgba[3] = rgba[3] == null ? 1 : rgba[3];\n    return 'rgba(' + rgba.join(',') + ')';\n}\nfunction guessArrayDim(value) {\n    return isArrayLike(value && value[0]) ? 2 : 1;\n}\nvar VALUE_TYPE_NUMBER = 0;\nvar VALUE_TYPE_1D_ARRAY = 1;\nvar VALUE_TYPE_2D_ARRAY = 2;\nvar VALUE_TYPE_COLOR = 3;\nvar VALUE_TYPE_LINEAR_GRADIENT = 4;\nvar VALUE_TYPE_RADIAL_GRADIENT = 5;\nvar VALUE_TYPE_UNKOWN = 6;\nfunction isGradientValueType(valType) {\n    return valType === VALUE_TYPE_LINEAR_GRADIENT || valType === VALUE_TYPE_RADIAL_GRADIENT;\n}\nfunction isArrayValueType(valType) {\n    return valType === VALUE_TYPE_1D_ARRAY || valType === VALUE_TYPE_2D_ARRAY;\n}\nvar tmpRgba = [0, 0, 0, 0];\nvar Track = (function () {\n    function Track(propName) {\n        this.keyframes = [];\n        this.discrete = false;\n        this._invalid = false;\n        this._needsSort = false;\n        this._lastFr = 0;\n        this._lastFrP = 0;\n        this.propName = propName;\n    }\n    Track.prototype.isFinished = function () {\n        return this._finished;\n    };\n    Track.prototype.setFinished = function () {\n        this._finished = true;\n        if (this._additiveTrack) {\n            this._additiveTrack.setFinished();\n        }\n    };\n    Track.prototype.needsAnimate = function () {\n        return this.keyframes.length >= 1;\n    };\n    Track.prototype.getAdditiveTrack = function () {\n        return this._additiveTrack;\n    };\n    Track.prototype.addKeyframe = function (time, rawValue, easing) {\n        this._needsSort = true;\n        var keyframes = this.keyframes;\n        var len = keyframes.length;\n        var discrete = false;\n        var valType = VALUE_TYPE_UNKOWN;\n        var value = rawValue;\n        if (isArrayLike(rawValue)) {\n            var arrayDim = guessArrayDim(rawValue);\n            valType = arrayDim;\n            if (arrayDim === 1 && !isNumber(rawValue[0])\n                || arrayDim === 2 && !isNumber(rawValue[0][0])) {\n                discrete = true;\n            }\n        }\n        else {\n            if (isNumber(rawValue) && !eqNaN(rawValue)) {\n                valType = VALUE_TYPE_NUMBER;\n            }\n            else if (isString(rawValue)) {\n                if (!isNaN(+rawValue)) {\n                    valType = VALUE_TYPE_NUMBER;\n                }\n                else {\n                    var colorArray = color.parse(rawValue);\n                    if (colorArray) {\n                        value = colorArray;\n                        valType = VALUE_TYPE_COLOR;\n                    }\n                }\n            }\n            else if (isGradientObject(rawValue)) {\n                var parsedGradient = extend({}, value);\n                parsedGradient.colorStops = map(rawValue.colorStops, function (colorStop) { return ({\n                    offset: colorStop.offset,\n                    color: color.parse(colorStop.color)\n                }); });\n                if (isLinearGradient(rawValue)) {\n                    valType = VALUE_TYPE_LINEAR_GRADIENT;\n                }\n                else if (isRadialGradient(rawValue)) {\n                    valType = VALUE_TYPE_RADIAL_GRADIENT;\n                }\n                value = parsedGradient;\n            }\n        }\n        if (len === 0) {\n            this.valType = valType;\n        }\n        else if (valType !== this.valType || valType === VALUE_TYPE_UNKOWN) {\n            discrete = true;\n        }\n        this.discrete = this.discrete || discrete;\n        var kf = {\n            time: time,\n            value: value,\n            rawValue: rawValue,\n            percent: 0\n        };\n        if (easing) {\n            kf.easing = easing;\n            kf.easingFunc = isFunction(easing)\n                ? easing\n                : easingFuncs[easing] || createCubicEasingFunc(easing);\n        }\n        keyframes.push(kf);\n        return kf;\n    };\n    Track.prototype.prepare = function (maxTime, additiveTrack) {\n        var kfs = this.keyframes;\n        if (this._needsSort) {\n            kfs.sort(function (a, b) {\n                return a.time - b.time;\n            });\n        }\n        var valType = this.valType;\n        var kfsLen = kfs.length;\n        var lastKf = kfs[kfsLen - 1];\n        var isDiscrete = this.discrete;\n        var isArr = isArrayValueType(valType);\n        var isGradient = isGradientValueType(valType);\n        for (var i = 0; i < kfsLen; i++) {\n            var kf = kfs[i];\n            var value = kf.value;\n            var lastValue = lastKf.value;\n            kf.percent = kf.time / maxTime;\n            if (!isDiscrete) {\n                if (isArr && i !== kfsLen - 1) {\n                    fillArray(value, lastValue, valType);\n                }\n                else if (isGradient) {\n                    fillColorStops(value.colorStops, lastValue.colorStops);\n                }\n            }\n        }\n        if (!isDiscrete\n            && valType !== VALUE_TYPE_RADIAL_GRADIENT\n            && additiveTrack\n            && this.needsAnimate()\n            && additiveTrack.needsAnimate()\n            && valType === additiveTrack.valType\n            && !additiveTrack._finished) {\n            this._additiveTrack = additiveTrack;\n            var startValue = kfs[0].value;\n            for (var i = 0; i < kfsLen; i++) {\n                if (valType === VALUE_TYPE_NUMBER) {\n                    kfs[i].additiveValue = kfs[i].value - startValue;\n                }\n                else if (valType === VALUE_TYPE_COLOR) {\n                    kfs[i].additiveValue =\n                        add1DArray([], kfs[i].value, startValue, -1);\n                }\n                else if (isArrayValueType(valType)) {\n                    kfs[i].additiveValue = valType === VALUE_TYPE_1D_ARRAY\n                        ? add1DArray([], kfs[i].value, startValue, -1)\n                        : add2DArray([], kfs[i].value, startValue, -1);\n                }\n            }\n        }\n    };\n    Track.prototype.step = function (target, percent) {\n        if (this._finished) {\n            return;\n        }\n        if (this._additiveTrack && this._additiveTrack._finished) {\n            this._additiveTrack = null;\n        }\n        var isAdditive = this._additiveTrack != null;\n        var valueKey = isAdditive ? 'additiveValue' : 'value';\n        var valType = this.valType;\n        var keyframes = this.keyframes;\n        var kfsNum = keyframes.length;\n        var propName = this.propName;\n        var isValueColor = valType === VALUE_TYPE_COLOR;\n        var frameIdx;\n        var lastFrame = this._lastFr;\n        var mathMin = Math.min;\n        var frame;\n        var nextFrame;\n        if (kfsNum === 1) {\n            frame = nextFrame = keyframes[0];\n        }\n        else {\n            if (percent < 0) {\n                frameIdx = 0;\n            }\n            else if (percent < this._lastFrP) {\n                var start = mathMin(lastFrame + 1, kfsNum - 1);\n                for (frameIdx = start; frameIdx >= 0; frameIdx--) {\n                    if (keyframes[frameIdx].percent <= percent) {\n                        break;\n                    }\n                }\n                frameIdx = mathMin(frameIdx, kfsNum - 2);\n            }\n            else {\n                for (frameIdx = lastFrame; frameIdx < kfsNum; frameIdx++) {\n                    if (keyframes[frameIdx].percent > percent) {\n                        break;\n                    }\n                }\n                frameIdx = mathMin(frameIdx - 1, kfsNum - 2);\n            }\n            nextFrame = keyframes[frameIdx + 1];\n            frame = keyframes[frameIdx];\n        }\n        if (!(frame && nextFrame)) {\n            return;\n        }\n        this._lastFr = frameIdx;\n        this._lastFrP = percent;\n        var interval = (nextFrame.percent - frame.percent);\n        var w = interval === 0 ? 1 : mathMin((percent - frame.percent) / interval, 1);\n        if (nextFrame.easingFunc) {\n            w = nextFrame.easingFunc(w);\n        }\n        var targetArr = isAdditive ? this._additiveValue\n            : (isValueColor ? tmpRgba : target[propName]);\n        if ((isArrayValueType(valType) || isValueColor) && !targetArr) {\n            targetArr = this._additiveValue = [];\n        }\n        if (this.discrete) {\n            target[propName] = w < 1 ? frame.rawValue : nextFrame.rawValue;\n        }\n        else if (isArrayValueType(valType)) {\n            valType === VALUE_TYPE_1D_ARRAY\n                ? interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w)\n                : interpolate2DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n        }\n        else if (isGradientValueType(valType)) {\n            var val = frame[valueKey];\n            var nextVal_1 = nextFrame[valueKey];\n            var isLinearGradient_1 = valType === VALUE_TYPE_LINEAR_GRADIENT;\n            target[propName] = {\n                type: isLinearGradient_1 ? 'linear' : 'radial',\n                x: interpolateNumber(val.x, nextVal_1.x, w),\n                y: interpolateNumber(val.y, nextVal_1.y, w),\n                colorStops: map(val.colorStops, function (colorStop, idx) {\n                    var nextColorStop = nextVal_1.colorStops[idx];\n                    return {\n                        offset: interpolateNumber(colorStop.offset, nextColorStop.offset, w),\n                        color: rgba2String(interpolate1DArray([], colorStop.color, nextColorStop.color, w))\n                    };\n                }),\n                global: nextVal_1.global\n            };\n            if (isLinearGradient_1) {\n                target[propName].x2 = interpolateNumber(val.x2, nextVal_1.x2, w);\n                target[propName].y2 = interpolateNumber(val.y2, nextVal_1.y2, w);\n            }\n            else {\n                target[propName].r = interpolateNumber(val.r, nextVal_1.r, w);\n            }\n        }\n        else if (isValueColor) {\n            interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n            if (!isAdditive) {\n                target[propName] = rgba2String(targetArr);\n            }\n        }\n        else {\n            var value = interpolateNumber(frame[valueKey], nextFrame[valueKey], w);\n            if (isAdditive) {\n                this._additiveValue = value;\n            }\n            else {\n                target[propName] = value;\n            }\n        }\n        if (isAdditive) {\n            this._addToTarget(target);\n        }\n    };\n    Track.prototype._addToTarget = function (target) {\n        var valType = this.valType;\n        var propName = this.propName;\n        var additiveValue = this._additiveValue;\n        if (valType === VALUE_TYPE_NUMBER) {\n            target[propName] = target[propName] + additiveValue;\n        }\n        else if (valType === VALUE_TYPE_COLOR) {\n            color.parse(target[propName], tmpRgba);\n            add1DArray(tmpRgba, tmpRgba, additiveValue, 1);\n            target[propName] = rgba2String(tmpRgba);\n        }\n        else if (valType === VALUE_TYPE_1D_ARRAY) {\n            add1DArray(target[propName], target[propName], additiveValue, 1);\n        }\n        else if (valType === VALUE_TYPE_2D_ARRAY) {\n            add2DArray(target[propName], target[propName], additiveValue, 1);\n        }\n    };\n    return Track;\n}());\nvar Animator = (function () {\n    function Animator(target, loop, allowDiscreteAnimation, additiveTo) {\n        this._tracks = {};\n        this._trackKeys = [];\n        this._maxTime = 0;\n        this._started = 0;\n        this._clip = null;\n        this._target = target;\n        this._loop = loop;\n        if (loop && additiveTo) {\n            logError('Can\\' use additive animation on looped animation.');\n            return;\n        }\n        this._additiveAnimators = additiveTo;\n        this._allowDiscrete = allowDiscreteAnimation;\n    }\n    Animator.prototype.getMaxTime = function () {\n        return this._maxTime;\n    };\n    Animator.prototype.getDelay = function () {\n        return this._delay;\n    };\n    Animator.prototype.getLoop = function () {\n        return this._loop;\n    };\n    Animator.prototype.getTarget = function () {\n        return this._target;\n    };\n    Animator.prototype.changeTarget = function (target) {\n        this._target = target;\n    };\n    Animator.prototype.when = function (time, props, easing) {\n        return this.whenWithKeys(time, props, keys(props), easing);\n    };\n    Animator.prototype.whenWithKeys = function (time, props, propNames, easing) {\n        var tracks = this._tracks;\n        for (var i = 0; i < propNames.length; i++) {\n            var propName = propNames[i];\n            var track = tracks[propName];\n            if (!track) {\n                track = tracks[propName] = new Track(propName);\n                var initialValue = void 0;\n                var additiveTrack = this._getAdditiveTrack(propName);\n                if (additiveTrack) {\n                    var addtiveTrackKfs = additiveTrack.keyframes;\n                    var lastFinalKf = addtiveTrackKfs[addtiveTrackKfs.length - 1];\n                    initialValue = lastFinalKf && lastFinalKf.value;\n                    if (additiveTrack.valType === VALUE_TYPE_COLOR && initialValue) {\n                        initialValue = rgba2String(initialValue);\n                    }\n                }\n                else {\n                    initialValue = this._target[propName];\n                }\n                if (initialValue == null) {\n                    continue;\n                }\n                if (time > 0) {\n                    track.addKeyframe(0, cloneValue(initialValue), easing);\n                }\n                this._trackKeys.push(propName);\n            }\n            track.addKeyframe(time, cloneValue(props[propName]), easing);\n        }\n        this._maxTime = Math.max(this._maxTime, time);\n        return this;\n    };\n    Animator.prototype.pause = function () {\n        this._clip.pause();\n        this._paused = true;\n    };\n    Animator.prototype.resume = function () {\n        this._clip.resume();\n        this._paused = false;\n    };\n    Animator.prototype.isPaused = function () {\n        return !!this._paused;\n    };\n    Animator.prototype.duration = function (duration) {\n        this._maxTime = duration;\n        this._force = true;\n        return this;\n    };\n    Animator.prototype._doneCallback = function () {\n        this._setTracksFinished();\n        this._clip = null;\n        var doneList = this._doneCbs;\n        if (doneList) {\n            var len = doneList.length;\n            for (var i = 0; i < len; i++) {\n                doneList[i].call(this);\n            }\n        }\n    };\n    Animator.prototype._abortedCallback = function () {\n        this._setTracksFinished();\n        var animation = this.animation;\n        var abortedList = this._abortedCbs;\n        if (animation) {\n            animation.removeClip(this._clip);\n        }\n        this._clip = null;\n        if (abortedList) {\n            for (var i = 0; i < abortedList.length; i++) {\n                abortedList[i].call(this);\n            }\n        }\n    };\n    Animator.prototype._setTracksFinished = function () {\n        var tracks = this._tracks;\n        var tracksKeys = this._trackKeys;\n        for (var i = 0; i < tracksKeys.length; i++) {\n            tracks[tracksKeys[i]].setFinished();\n        }\n    };\n    Animator.prototype._getAdditiveTrack = function (trackName) {\n        var additiveTrack;\n        var additiveAnimators = this._additiveAnimators;\n        if (additiveAnimators) {\n            for (var i = 0; i < additiveAnimators.length; i++) {\n                var track = additiveAnimators[i].getTrack(trackName);\n                if (track) {\n                    additiveTrack = track;\n                }\n            }\n        }\n        return additiveTrack;\n    };\n    Animator.prototype.start = function (easing) {\n        if (this._started > 0) {\n            return;\n        }\n        this._started = 1;\n        var self = this;\n        var tracks = [];\n        var maxTime = this._maxTime || 0;\n        for (var i = 0; i < this._trackKeys.length; i++) {\n            var propName = this._trackKeys[i];\n            var track = this._tracks[propName];\n            var additiveTrack = this._getAdditiveTrack(propName);\n            var kfs = track.keyframes;\n            var kfsNum = kfs.length;\n            track.prepare(maxTime, additiveTrack);\n            if (track.needsAnimate()) {\n                if (!this._allowDiscrete && track.discrete) {\n                    var lastKf = kfs[kfsNum - 1];\n                    if (lastKf) {\n                        self._target[track.propName] = lastKf.rawValue;\n                    }\n                    track.setFinished();\n                }\n                else {\n                    tracks.push(track);\n                }\n            }\n        }\n        if (tracks.length || this._force) {\n            var clip = new Clip({\n                life: maxTime,\n                loop: this._loop,\n                delay: this._delay || 0,\n                onframe: function (percent) {\n                    self._started = 2;\n                    var additiveAnimators = self._additiveAnimators;\n                    if (additiveAnimators) {\n                        var stillHasAdditiveAnimator = false;\n                        for (var i = 0; i < additiveAnimators.length; i++) {\n                            if (additiveAnimators[i]._clip) {\n                                stillHasAdditiveAnimator = true;\n                                break;\n                            }\n                        }\n                        if (!stillHasAdditiveAnimator) {\n                            self._additiveAnimators = null;\n                        }\n                    }\n                    for (var i = 0; i < tracks.length; i++) {\n                        tracks[i].step(self._target, percent);\n                    }\n                    var onframeList = self._onframeCbs;\n                    if (onframeList) {\n                        for (var i = 0; i < onframeList.length; i++) {\n                            onframeList[i](self._target, percent);\n                        }\n                    }\n                },\n                ondestroy: function () {\n                    self._doneCallback();\n                }\n            });\n            this._clip = clip;\n            if (this.animation) {\n                this.animation.addClip(clip);\n            }\n            if (easing) {\n                clip.setEasing(easing);\n            }\n        }\n        else {\n            this._doneCallback();\n        }\n        return this;\n    };\n    Animator.prototype.stop = function (forwardToLast) {\n        if (!this._clip) {\n            return;\n        }\n        var clip = this._clip;\n        if (forwardToLast) {\n            clip.onframe(1);\n        }\n        this._abortedCallback();\n    };\n    Animator.prototype.delay = function (time) {\n        this._delay = time;\n        return this;\n    };\n    Animator.prototype.during = function (cb) {\n        if (cb) {\n            if (!this._onframeCbs) {\n                this._onframeCbs = [];\n            }\n            this._onframeCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.done = function (cb) {\n        if (cb) {\n            if (!this._doneCbs) {\n                this._doneCbs = [];\n            }\n            this._doneCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.aborted = function (cb) {\n        if (cb) {\n            if (!this._abortedCbs) {\n                this._abortedCbs = [];\n            }\n            this._abortedCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.getClip = function () {\n        return this._clip;\n    };\n    Animator.prototype.getTrack = function (propName) {\n        return this._tracks[propName];\n    };\n    Animator.prototype.getTracks = function () {\n        var _this = this;\n        return map(this._trackKeys, function (key) { return _this._tracks[key]; });\n    };\n    Animator.prototype.stopTracks = function (propNames, forwardToLast) {\n        if (!propNames.length || !this._clip) {\n            return true;\n        }\n        var tracks = this._tracks;\n        var tracksKeys = this._trackKeys;\n        for (var i = 0; i < propNames.length; i++) {\n            var track = tracks[propNames[i]];\n            if (track && !track.isFinished()) {\n                if (forwardToLast) {\n                    track.step(this._target, 1);\n                }\n                else if (this._started === 1) {\n                    track.step(this._target, 0);\n                }\n                track.setFinished();\n            }\n        }\n        var allAborted = true;\n        for (var i = 0; i < tracksKeys.length; i++) {\n            if (!tracks[tracksKeys[i]].isFinished()) {\n                allAborted = false;\n                break;\n            }\n        }\n        if (allAborted) {\n            this._abortedCallback();\n        }\n        return allAborted;\n    };\n    Animator.prototype.saveTo = function (target, trackKeys, firstOrLast) {\n        if (!target) {\n            return;\n        }\n        trackKeys = trackKeys || this._trackKeys;\n        for (var i = 0; i < trackKeys.length; i++) {\n            var propName = trackKeys[i];\n            var track = this._tracks[propName];\n            if (!track || track.isFinished()) {\n                continue;\n            }\n            var kfs = track.keyframes;\n            var kf = kfs[firstOrLast ? 0 : kfs.length - 1];\n            if (kf) {\n                target[propName] = cloneValue(kf.rawValue);\n            }\n        }\n    };\n    Animator.prototype.__changeFinalValue = function (finalProps, trackKeys) {\n        trackKeys = trackKeys || keys(finalProps);\n        for (var i = 0; i < trackKeys.length; i++) {\n            var propName = trackKeys[i];\n            var track = this._tracks[propName];\n            if (!track) {\n                continue;\n            }\n            var kfs = track.keyframes;\n            if (kfs.length > 1) {\n                var lastKf = kfs.pop();\n                track.addKeyframe(lastKf.time, finalProps[propName]);\n                track.prepare(this._maxTime, track.getAdditiveTrack());\n            }\n        }\n    };\n    return Animator;\n}());\nexport default Animator;\n","import { cubicAt, cubicRootAt } from '../core/curve.js';\nimport { trim } from '../core/util.js';\nvar regexp = /cubic-bezier\\(([0-9,\\.e ]+)\\)/;\nexport function createCubicEasingFunc(cubicEasingStr) {\n    var cubic = cubicEasingStr && regexp.exec(cubicEasingStr);\n    if (cubic) {\n        var points = cubic[1].split(',');\n        var a_1 = +trim(points[0]);\n        var b_1 = +trim(points[1]);\n        var c_1 = +trim(points[2]);\n        var d_1 = +trim(points[3]);\n        if (isNaN(a_1 + b_1 + c_1 + d_1)) {\n            return;\n        }\n        var roots_1 = [];\n        return function (p) {\n            return p <= 0\n                ? 0 : p >= 1\n                ? 1\n                : cubicRootAt(0, a_1, c_1, 1, p, roots_1) && cubicAt(0, b_1, d_1, 1, roots_1[0]);\n        };\n    }\n}\n","import env from '../core/env.js';\nvar requestAnimationFrame;\nrequestAnimationFrame = (env.hasGlobalWindow\n    && ((window.requestAnimationFrame && window.requestAnimationFrame.bind(window))\n        || (window.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window))\n        || window.mozRequestAnimationFrame\n        || window.webkitRequestAnimationFrame)) || function (func) {\n    return setTimeout(func, 16);\n};\nexport default requestAnimationFrame;\n","import { __extends } from \"tslib\";\nimport * as util from '../core/util.js';\nimport { devicePixelRatio } from '../config.js';\nimport Eventful from '../core/Eventful.js';\nimport { getCanvasGradient } from './helper.js';\nimport { createCanvasPattern } from './graphic.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { REDRAW_BIT } from '../graphic/constants.js';\nimport { platformApi } from '../core/platform.js';\nfunction createDom(id, painter, dpr) {\n    var newDom = platformApi.createCanvas();\n    var width = painter.getWidth();\n    var height = painter.getHeight();\n    var newDomStyle = newDom.style;\n    if (newDomStyle) {\n        newDomStyle.position = 'absolute';\n        newDomStyle.left = '0';\n        newDomStyle.top = '0';\n        newDomStyle.width = width + 'px';\n        newDomStyle.height = height + 'px';\n        newDom.setAttribute('data-zr-dom-id', id);\n    }\n    newDom.width = width * dpr;\n    newDom.height = height * dpr;\n    return newDom;\n}\n;\nvar Layer = (function (_super) {\n    __extends(Layer, _super);\n    function Layer(id, painter, dpr) {\n        var _this = _super.call(this) || this;\n        _this.motionBlur = false;\n        _this.lastFrameAlpha = 0.7;\n        _this.dpr = 1;\n        _this.virtual = false;\n        _this.config = {};\n        _this.incremental = false;\n        _this.zlevel = 0;\n        _this.maxRepaintRectCount = 5;\n        _this.__dirty = true;\n        _this.__firstTimePaint = true;\n        _this.__used = false;\n        _this.__drawIndex = 0;\n        _this.__startIndex = 0;\n        _this.__endIndex = 0;\n        _this.__prevStartIndex = null;\n        _this.__prevEndIndex = null;\n        var dom;\n        dpr = dpr || devicePixelRatio;\n        if (typeof id === 'string') {\n            dom = createDom(id, painter, dpr);\n        }\n        else if (util.isObject(id)) {\n            dom = id;\n            id = dom.id;\n        }\n        _this.id = id;\n        _this.dom = dom;\n        var domStyle = dom.style;\n        if (domStyle) {\n            util.disableUserSelect(dom);\n            dom.onselectstart = function () { return false; };\n            domStyle.padding = '0';\n            domStyle.margin = '0';\n            domStyle.borderWidth = '0';\n        }\n        _this.painter = painter;\n        _this.dpr = dpr;\n        return _this;\n    }\n    Layer.prototype.getElementCount = function () {\n        return this.__endIndex - this.__startIndex;\n    };\n    Layer.prototype.afterBrush = function () {\n        this.__prevStartIndex = this.__startIndex;\n        this.__prevEndIndex = this.__endIndex;\n    };\n    Layer.prototype.initContext = function () {\n        this.ctx = this.dom.getContext('2d');\n        this.ctx.dpr = this.dpr;\n    };\n    Layer.prototype.setUnpainted = function () {\n        this.__firstTimePaint = true;\n    };\n    Layer.prototype.createBackBuffer = function () {\n        var dpr = this.dpr;\n        this.domBack = createDom('back-' + this.id, this.painter, dpr);\n        this.ctxBack = this.domBack.getContext('2d');\n        if (dpr !== 1) {\n            this.ctxBack.scale(dpr, dpr);\n        }\n    };\n    Layer.prototype.createRepaintRects = function (displayList, prevList, viewWidth, viewHeight) {\n        if (this.__firstTimePaint) {\n            this.__firstTimePaint = false;\n            return null;\n        }\n        var mergedRepaintRects = [];\n        var maxRepaintRectCount = this.maxRepaintRectCount;\n        var full = false;\n        var pendingRect = new BoundingRect(0, 0, 0, 0);\n        function addRectToMergePool(rect) {\n            if (!rect.isFinite() || rect.isZero()) {\n                return;\n            }\n            if (mergedRepaintRects.length === 0) {\n                var boundingRect = new BoundingRect(0, 0, 0, 0);\n                boundingRect.copy(rect);\n                mergedRepaintRects.push(boundingRect);\n            }\n            else {\n                var isMerged = false;\n                var minDeltaArea = Infinity;\n                var bestRectToMergeIdx = 0;\n                for (var i = 0; i < mergedRepaintRects.length; ++i) {\n                    var mergedRect = mergedRepaintRects[i];\n                    if (mergedRect.intersect(rect)) {\n                        var pendingRect_1 = new BoundingRect(0, 0, 0, 0);\n                        pendingRect_1.copy(mergedRect);\n                        pendingRect_1.union(rect);\n                        mergedRepaintRects[i] = pendingRect_1;\n                        isMerged = true;\n                        break;\n                    }\n                    else if (full) {\n                        pendingRect.copy(rect);\n                        pendingRect.union(mergedRect);\n                        var aArea = rect.width * rect.height;\n                        var bArea = mergedRect.width * mergedRect.height;\n                        var pendingArea = pendingRect.width * pendingRect.height;\n                        var deltaArea = pendingArea - aArea - bArea;\n                        if (deltaArea < minDeltaArea) {\n                            minDeltaArea = deltaArea;\n                            bestRectToMergeIdx = i;\n                        }\n                    }\n                }\n                if (full) {\n                    mergedRepaintRects[bestRectToMergeIdx].union(rect);\n                    isMerged = true;\n                }\n                if (!isMerged) {\n                    var boundingRect = new BoundingRect(0, 0, 0, 0);\n                    boundingRect.copy(rect);\n                    mergedRepaintRects.push(boundingRect);\n                }\n                if (!full) {\n                    full = mergedRepaintRects.length >= maxRepaintRectCount;\n                }\n            }\n        }\n        for (var i = this.__startIndex; i < this.__endIndex; ++i) {\n            var el = displayList[i];\n            if (el) {\n                var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n                var prevRect = el.__isRendered && ((el.__dirty & REDRAW_BIT) || !shouldPaint)\n                    ? el.getPrevPaintRect()\n                    : null;\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n                var curRect = shouldPaint && ((el.__dirty & REDRAW_BIT) || !el.__isRendered)\n                    ? el.getPaintRect()\n                    : null;\n                if (curRect) {\n                    addRectToMergePool(curRect);\n                }\n            }\n        }\n        for (var i = this.__prevStartIndex; i < this.__prevEndIndex; ++i) {\n            var el = prevList[i];\n            var shouldPaint = el && el.shouldBePainted(viewWidth, viewHeight, true, true);\n            if (el && (!shouldPaint || !el.__zr) && el.__isRendered) {\n                var prevRect = el.getPrevPaintRect();\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n            }\n        }\n        var hasIntersections;\n        do {\n            hasIntersections = false;\n            for (var i = 0; i < mergedRepaintRects.length;) {\n                if (mergedRepaintRects[i].isZero()) {\n                    mergedRepaintRects.splice(i, 1);\n                    continue;\n                }\n                for (var j = i + 1; j < mergedRepaintRects.length;) {\n                    if (mergedRepaintRects[i].intersect(mergedRepaintRects[j])) {\n                        hasIntersections = true;\n                        mergedRepaintRects[i].union(mergedRepaintRects[j]);\n                        mergedRepaintRects.splice(j, 1);\n                    }\n                    else {\n                        j++;\n                    }\n                }\n                i++;\n            }\n        } while (hasIntersections);\n        this._paintRects = mergedRepaintRects;\n        return mergedRepaintRects;\n    };\n    Layer.prototype.debugGetPaintRects = function () {\n        return (this._paintRects || []).slice();\n    };\n    Layer.prototype.resize = function (width, height) {\n        var dpr = this.dpr;\n        var dom = this.dom;\n        var domStyle = dom.style;\n        var domBack = this.domBack;\n        if (domStyle) {\n            domStyle.width = width + 'px';\n            domStyle.height = height + 'px';\n        }\n        dom.width = width * dpr;\n        dom.height = height * dpr;\n        if (domBack) {\n            domBack.width = width * dpr;\n            domBack.height = height * dpr;\n            if (dpr !== 1) {\n                this.ctxBack.scale(dpr, dpr);\n            }\n        }\n    };\n    Layer.prototype.clear = function (clearAll, clearColor, repaintRects) {\n        var dom = this.dom;\n        var ctx = this.ctx;\n        var width = dom.width;\n        var height = dom.height;\n        clearColor = clearColor || this.clearColor;\n        var haveMotionBLur = this.motionBlur && !clearAll;\n        var lastFrameAlpha = this.lastFrameAlpha;\n        var dpr = this.dpr;\n        var self = this;\n        if (haveMotionBLur) {\n            if (!this.domBack) {\n                this.createBackBuffer();\n            }\n            this.ctxBack.globalCompositeOperation = 'copy';\n            this.ctxBack.drawImage(dom, 0, 0, width / dpr, height / dpr);\n        }\n        var domBack = this.domBack;\n        function doClear(x, y, width, height) {\n            ctx.clearRect(x, y, width, height);\n            if (clearColor && clearColor !== 'transparent') {\n                var clearColorGradientOrPattern = void 0;\n                if (util.isGradientObject(clearColor)) {\n                    var shouldCache = clearColor.global || (clearColor.__width === width\n                        && clearColor.__height === height);\n                    clearColorGradientOrPattern = shouldCache\n                        && clearColor.__canvasGradient\n                        || getCanvasGradient(ctx, clearColor, {\n                            x: 0,\n                            y: 0,\n                            width: width,\n                            height: height\n                        });\n                    clearColor.__canvasGradient = clearColorGradientOrPattern;\n                    clearColor.__width = width;\n                    clearColor.__height = height;\n                }\n                else if (util.isImagePatternObject(clearColor)) {\n                    clearColor.scaleX = clearColor.scaleX || dpr;\n                    clearColor.scaleY = clearColor.scaleY || dpr;\n                    clearColorGradientOrPattern = createCanvasPattern(ctx, clearColor, {\n                        dirty: function () {\n                            self.setUnpainted();\n                            self.painter.refresh();\n                        }\n                    });\n                }\n                ctx.save();\n                ctx.fillStyle = clearColorGradientOrPattern || clearColor;\n                ctx.fillRect(x, y, width, height);\n                ctx.restore();\n            }\n            if (haveMotionBLur) {\n                ctx.save();\n                ctx.globalAlpha = lastFrameAlpha;\n                ctx.drawImage(domBack, x, y, width, height);\n                ctx.restore();\n            }\n        }\n        ;\n        if (!repaintRects || haveMotionBLur) {\n            doClear(0, 0, width, height);\n        }\n        else if (repaintRects.length) {\n            util.each(repaintRects, function (rect) {\n                doClear(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n            });\n        }\n    };\n    return Layer;\n}(Eventful));\nexport default Layer;\n","import { devicePixelRatio } from '../config.js';\nimport * as util from '../core/util.js';\nimport Layer from './Layer.js';\nimport requestAnimationFrame from '../animation/requestAnimationFrame.js';\nimport env from '../core/env.js';\nimport { brush, brushSingle } from './graphic.js';\nimport { REDRAW_BIT } from '../graphic/constants.js';\nimport { getSize } from './helper.js';\nvar HOVER_LAYER_ZLEVEL = 1e5;\nvar CANVAS_ZLEVEL = 314159;\nvar EL_AFTER_INCREMENTAL_INC = 0.01;\nvar INCREMENTAL_INC = 0.001;\nfunction isLayerValid(layer) {\n    if (!layer) {\n        return false;\n    }\n    if (layer.__builtin__) {\n        return true;\n    }\n    if (typeof (layer.resize) !== 'function'\n        || typeof (layer.refresh) !== 'function') {\n        return false;\n    }\n    return true;\n}\nfunction createRoot(width, height) {\n    var domRoot = document.createElement('div');\n    domRoot.style.cssText = [\n        'position:relative',\n        'width:' + width + 'px',\n        'height:' + height + 'px',\n        'padding:0',\n        'margin:0',\n        'border-width:0'\n    ].join(';') + ';';\n    return domRoot;\n}\nvar CanvasPainter = (function () {\n    function CanvasPainter(root, storage, opts, id) {\n        this.type = 'canvas';\n        this._zlevelList = [];\n        this._prevDisplayList = [];\n        this._layers = {};\n        this._layerConfig = {};\n        this._needsManuallyCompositing = false;\n        this.type = 'canvas';\n        var singleCanvas = !root.nodeName\n            || root.nodeName.toUpperCase() === 'CANVAS';\n        this._opts = opts = util.extend({}, opts || {});\n        this.dpr = opts.devicePixelRatio || devicePixelRatio;\n        this._singleCanvas = singleCanvas;\n        this.root = root;\n        var rootStyle = root.style;\n        if (rootStyle) {\n            util.disableUserSelect(root);\n            root.innerHTML = '';\n        }\n        this.storage = storage;\n        var zlevelList = this._zlevelList;\n        this._prevDisplayList = [];\n        var layers = this._layers;\n        if (!singleCanvas) {\n            this._width = getSize(root, 0, opts);\n            this._height = getSize(root, 1, opts);\n            var domRoot = this._domRoot = createRoot(this._width, this._height);\n            root.appendChild(domRoot);\n        }\n        else {\n            var rootCanvas = root;\n            var width = rootCanvas.width;\n            var height = rootCanvas.height;\n            if (opts.width != null) {\n                width = opts.width;\n            }\n            if (opts.height != null) {\n                height = opts.height;\n            }\n            this.dpr = opts.devicePixelRatio || 1;\n            rootCanvas.width = width * this.dpr;\n            rootCanvas.height = height * this.dpr;\n            this._width = width;\n            this._height = height;\n            var mainLayer = new Layer(rootCanvas, this, this.dpr);\n            mainLayer.__builtin__ = true;\n            mainLayer.initContext();\n            layers[CANVAS_ZLEVEL] = mainLayer;\n            mainLayer.zlevel = CANVAS_ZLEVEL;\n            zlevelList.push(CANVAS_ZLEVEL);\n            this._domRoot = root;\n        }\n    }\n    CanvasPainter.prototype.getType = function () {\n        return 'canvas';\n    };\n    CanvasPainter.prototype.isSingleCanvas = function () {\n        return this._singleCanvas;\n    };\n    CanvasPainter.prototype.getViewportRoot = function () {\n        return this._domRoot;\n    };\n    CanvasPainter.prototype.getViewportRootOffset = function () {\n        var viewportRoot = this.getViewportRoot();\n        if (viewportRoot) {\n            return {\n                offsetLeft: viewportRoot.offsetLeft || 0,\n                offsetTop: viewportRoot.offsetTop || 0\n            };\n        }\n    };\n    CanvasPainter.prototype.refresh = function (paintAll) {\n        var list = this.storage.getDisplayList(true);\n        var prevList = this._prevDisplayList;\n        var zlevelList = this._zlevelList;\n        this._redrawId = Math.random();\n        this._paintList(list, prevList, paintAll, this._redrawId);\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__ && layer.refresh) {\n                var clearColor = i === 0 ? this._backgroundColor : null;\n                layer.refresh(clearColor);\n            }\n        }\n        if (this._opts.useDirtyRect) {\n            this._prevDisplayList = list.slice();\n        }\n        return this;\n    };\n    CanvasPainter.prototype.refreshHover = function () {\n        this._paintHoverList(this.storage.getDisplayList(false));\n    };\n    CanvasPainter.prototype._paintHoverList = function (list) {\n        var len = list.length;\n        var hoverLayer = this._hoverlayer;\n        hoverLayer && hoverLayer.clear();\n        if (!len) {\n            return;\n        }\n        var scope = {\n            inHover: true,\n            viewWidth: this._width,\n            viewHeight: this._height\n        };\n        var ctx;\n        for (var i = 0; i < len; i++) {\n            var el = list[i];\n            if (el.__inHover) {\n                if (!hoverLayer) {\n                    hoverLayer = this._hoverlayer = this.getLayer(HOVER_LAYER_ZLEVEL);\n                }\n                if (!ctx) {\n                    ctx = hoverLayer.ctx;\n                    ctx.save();\n                }\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        if (ctx) {\n            ctx.restore();\n        }\n    };\n    CanvasPainter.prototype.getHoverLayer = function () {\n        return this.getLayer(HOVER_LAYER_ZLEVEL);\n    };\n    CanvasPainter.prototype.paintOne = function (ctx, el) {\n        brushSingle(ctx, el);\n    };\n    CanvasPainter.prototype._paintList = function (list, prevList, paintAll, redrawId) {\n        if (this._redrawId !== redrawId) {\n            return;\n        }\n        paintAll = paintAll || false;\n        this._updateLayerStatus(list);\n        var _a = this._doPaintList(list, prevList, paintAll), finished = _a.finished, needsRefreshHover = _a.needsRefreshHover;\n        if (this._needsManuallyCompositing) {\n            this._compositeManually();\n        }\n        if (needsRefreshHover) {\n            this._paintHoverList(list);\n        }\n        if (!finished) {\n            var self_1 = this;\n            requestAnimationFrame(function () {\n                self_1._paintList(list, prevList, paintAll, redrawId);\n            });\n        }\n        else {\n            this.eachLayer(function (layer) {\n                layer.afterBrush && layer.afterBrush();\n            });\n        }\n    };\n    CanvasPainter.prototype._compositeManually = function () {\n        var ctx = this.getLayer(CANVAS_ZLEVEL).ctx;\n        var width = this._domRoot.width;\n        var height = this._domRoot.height;\n        ctx.clearRect(0, 0, width, height);\n        this.eachBuiltinLayer(function (layer) {\n            if (layer.virtual) {\n                ctx.drawImage(layer.dom, 0, 0, width, height);\n            }\n        });\n    };\n    CanvasPainter.prototype._doPaintList = function (list, prevList, paintAll) {\n        var _this = this;\n        var layerList = [];\n        var useDirtyRect = this._opts.useDirtyRect;\n        for (var zi = 0; zi < this._zlevelList.length; zi++) {\n            var zlevel = this._zlevelList[zi];\n            var layer = this._layers[zlevel];\n            if (layer.__builtin__\n                && layer !== this._hoverlayer\n                && (layer.__dirty || paintAll)) {\n                layerList.push(layer);\n            }\n        }\n        var finished = true;\n        var needsRefreshHover = false;\n        var _loop_1 = function (k) {\n            var layer = layerList[k];\n            var ctx = layer.ctx;\n            var repaintRects = useDirtyRect\n                && layer.createRepaintRects(list, prevList, this_1._width, this_1._height);\n            var start = paintAll ? layer.__startIndex : layer.__drawIndex;\n            var useTimer = !paintAll && layer.incremental && Date.now;\n            var startTime = useTimer && Date.now();\n            var clearColor = layer.zlevel === this_1._zlevelList[0]\n                ? this_1._backgroundColor : null;\n            if (layer.__startIndex === layer.__endIndex) {\n                layer.clear(false, clearColor, repaintRects);\n            }\n            else if (start === layer.__startIndex) {\n                var firstEl = list[start];\n                if (!firstEl.incremental || !firstEl.notClear || paintAll) {\n                    layer.clear(false, clearColor, repaintRects);\n                }\n            }\n            if (start === -1) {\n                console.error('For some unknown reason. drawIndex is -1');\n                start = layer.__startIndex;\n            }\n            var i;\n            var repaint = function (repaintRect) {\n                var scope = {\n                    inHover: false,\n                    allClipped: false,\n                    prevEl: null,\n                    viewWidth: _this._width,\n                    viewHeight: _this._height\n                };\n                for (i = start; i < layer.__endIndex; i++) {\n                    var el = list[i];\n                    if (el.__inHover) {\n                        needsRefreshHover = true;\n                    }\n                    _this._doPaintEl(el, layer, useDirtyRect, repaintRect, scope, i === layer.__endIndex - 1);\n                    if (useTimer) {\n                        var dTime = Date.now() - startTime;\n                        if (dTime > 15) {\n                            break;\n                        }\n                    }\n                }\n                if (scope.prevElClipPaths) {\n                    ctx.restore();\n                }\n            };\n            if (repaintRects) {\n                if (repaintRects.length === 0) {\n                    i = layer.__endIndex;\n                }\n                else {\n                    var dpr = this_1.dpr;\n                    for (var r = 0; r < repaintRects.length; ++r) {\n                        var rect = repaintRects[r];\n                        ctx.save();\n                        ctx.beginPath();\n                        ctx.rect(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n                        ctx.clip();\n                        repaint(rect);\n                        ctx.restore();\n                    }\n                }\n            }\n            else {\n                ctx.save();\n                repaint();\n                ctx.restore();\n            }\n            layer.__drawIndex = i;\n            if (layer.__drawIndex < layer.__endIndex) {\n                finished = false;\n            }\n        };\n        var this_1 = this;\n        for (var k = 0; k < layerList.length; k++) {\n            _loop_1(k);\n        }\n        if (env.wxa) {\n            util.each(this._layers, function (layer) {\n                if (layer && layer.ctx && layer.ctx.draw) {\n                    layer.ctx.draw();\n                }\n            });\n        }\n        return {\n            finished: finished,\n            needsRefreshHover: needsRefreshHover\n        };\n    };\n    CanvasPainter.prototype._doPaintEl = function (el, currentLayer, useDirtyRect, repaintRect, scope, isLast) {\n        var ctx = currentLayer.ctx;\n        if (useDirtyRect) {\n            var paintRect = el.getPaintRect();\n            if (!repaintRect || paintRect && paintRect.intersect(repaintRect)) {\n                brush(ctx, el, scope, isLast);\n                el.setPrevPaintRect(paintRect);\n            }\n        }\n        else {\n            brush(ctx, el, scope, isLast);\n        }\n    };\n    CanvasPainter.prototype.getLayer = function (zlevel, virtual) {\n        if (this._singleCanvas && !this._needsManuallyCompositing) {\n            zlevel = CANVAS_ZLEVEL;\n        }\n        var layer = this._layers[zlevel];\n        if (!layer) {\n            layer = new Layer('zr_' + zlevel, this, this.dpr);\n            layer.zlevel = zlevel;\n            layer.__builtin__ = true;\n            if (this._layerConfig[zlevel]) {\n                util.merge(layer, this._layerConfig[zlevel], true);\n            }\n            else if (this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC]) {\n                util.merge(layer, this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC], true);\n            }\n            if (virtual) {\n                layer.virtual = virtual;\n            }\n            this.insertLayer(zlevel, layer);\n            layer.initContext();\n        }\n        return layer;\n    };\n    CanvasPainter.prototype.insertLayer = function (zlevel, layer) {\n        var layersMap = this._layers;\n        var zlevelList = this._zlevelList;\n        var len = zlevelList.length;\n        var domRoot = this._domRoot;\n        var prevLayer = null;\n        var i = -1;\n        if (layersMap[zlevel]) {\n            if (process.env.NODE_ENV !== 'production') {\n                util.logError('ZLevel ' + zlevel + ' has been used already');\n            }\n            return;\n        }\n        if (!isLayerValid(layer)) {\n            if (process.env.NODE_ENV !== 'production') {\n                util.logError('Layer of zlevel ' + zlevel + ' is not valid');\n            }\n            return;\n        }\n        if (len > 0 && zlevel > zlevelList[0]) {\n            for (i = 0; i < len - 1; i++) {\n                if (zlevelList[i] < zlevel\n                    && zlevelList[i + 1] > zlevel) {\n                    break;\n                }\n            }\n            prevLayer = layersMap[zlevelList[i]];\n        }\n        zlevelList.splice(i + 1, 0, zlevel);\n        layersMap[zlevel] = layer;\n        if (!layer.virtual) {\n            if (prevLayer) {\n                var prevDom = prevLayer.dom;\n                if (prevDom.nextSibling) {\n                    domRoot.insertBefore(layer.dom, prevDom.nextSibling);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n            else {\n                if (domRoot.firstChild) {\n                    domRoot.insertBefore(layer.dom, domRoot.firstChild);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n        }\n        layer.painter || (layer.painter = this);\n    };\n    CanvasPainter.prototype.eachLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            cb.call(context, this._layers[z], z);\n        }\n    };\n    CanvasPainter.prototype.eachBuiltinLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.eachOtherLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.getLayers = function () {\n        return this._layers;\n    };\n    CanvasPainter.prototype._updateLayerStatus = function (list) {\n        this.eachBuiltinLayer(function (layer, z) {\n            layer.__dirty = layer.__used = false;\n        });\n        function updatePrevLayer(idx) {\n            if (prevLayer) {\n                if (prevLayer.__endIndex !== idx) {\n                    prevLayer.__dirty = true;\n                }\n                prevLayer.__endIndex = idx;\n            }\n        }\n        if (this._singleCanvas) {\n            for (var i_1 = 1; i_1 < list.length; i_1++) {\n                var el = list[i_1];\n                if (el.zlevel !== list[i_1 - 1].zlevel || el.incremental) {\n                    this._needsManuallyCompositing = true;\n                    break;\n                }\n            }\n        }\n        var prevLayer = null;\n        var incrementalLayerCount = 0;\n        var prevZlevel;\n        var i;\n        for (i = 0; i < list.length; i++) {\n            var el = list[i];\n            var zlevel = el.zlevel;\n            var layer = void 0;\n            if (prevZlevel !== zlevel) {\n                prevZlevel = zlevel;\n                incrementalLayerCount = 0;\n            }\n            if (el.incremental) {\n                layer = this.getLayer(zlevel + INCREMENTAL_INC, this._needsManuallyCompositing);\n                layer.incremental = true;\n                incrementalLayerCount = 1;\n            }\n            else {\n                layer = this.getLayer(zlevel + (incrementalLayerCount > 0 ? EL_AFTER_INCREMENTAL_INC : 0), this._needsManuallyCompositing);\n            }\n            if (!layer.__builtin__) {\n                util.logError('ZLevel ' + zlevel + ' has been used by unkown layer ' + layer.id);\n            }\n            if (layer !== prevLayer) {\n                layer.__used = true;\n                if (layer.__startIndex !== i) {\n                    layer.__dirty = true;\n                }\n                layer.__startIndex = i;\n                if (!layer.incremental) {\n                    layer.__drawIndex = i;\n                }\n                else {\n                    layer.__drawIndex = -1;\n                }\n                updatePrevLayer(i);\n                prevLayer = layer;\n            }\n            if ((el.__dirty & REDRAW_BIT) && !el.__inHover) {\n                layer.__dirty = true;\n                if (layer.incremental && layer.__drawIndex < 0) {\n                    layer.__drawIndex = i;\n                }\n            }\n        }\n        updatePrevLayer(i);\n        this.eachBuiltinLayer(function (layer, z) {\n            if (!layer.__used && layer.getElementCount() > 0) {\n                layer.__dirty = true;\n                layer.__startIndex = layer.__endIndex = layer.__drawIndex = 0;\n            }\n            if (layer.__dirty && layer.__drawIndex < 0) {\n                layer.__drawIndex = layer.__startIndex;\n            }\n        });\n    };\n    CanvasPainter.prototype.clear = function () {\n        this.eachBuiltinLayer(this._clearLayer);\n        return this;\n    };\n    CanvasPainter.prototype._clearLayer = function (layer) {\n        layer.clear();\n    };\n    CanvasPainter.prototype.setBackgroundColor = function (backgroundColor) {\n        this._backgroundColor = backgroundColor;\n        util.each(this._layers, function (layer) {\n            layer.setUnpainted();\n        });\n    };\n    CanvasPainter.prototype.configLayer = function (zlevel, config) {\n        if (config) {\n            var layerConfig = this._layerConfig;\n            if (!layerConfig[zlevel]) {\n                layerConfig[zlevel] = config;\n            }\n            else {\n                util.merge(layerConfig[zlevel], config, true);\n            }\n            for (var i = 0; i < this._zlevelList.length; i++) {\n                var _zlevel = this._zlevelList[i];\n                if (_zlevel === zlevel || _zlevel === zlevel + EL_AFTER_INCREMENTAL_INC) {\n                    var layer = this._layers[_zlevel];\n                    util.merge(layer, layerConfig[zlevel], true);\n                }\n            }\n        }\n    };\n    CanvasPainter.prototype.delLayer = function (zlevel) {\n        var layers = this._layers;\n        var zlevelList = this._zlevelList;\n        var layer = layers[zlevel];\n        if (!layer) {\n            return;\n        }\n        layer.dom.parentNode.removeChild(layer.dom);\n        delete layers[zlevel];\n        zlevelList.splice(util.indexOf(zlevelList, zlevel), 1);\n    };\n    CanvasPainter.prototype.resize = function (width, height) {\n        if (!this._domRoot.style) {\n            if (width == null || height == null) {\n                return;\n            }\n            this._width = width;\n            this._height = height;\n            this.getLayer(CANVAS_ZLEVEL).resize(width, height);\n        }\n        else {\n            var domRoot = this._domRoot;\n            domRoot.style.display = 'none';\n            var opts = this._opts;\n            var root = this.root;\n            width != null && (opts.width = width);\n            height != null && (opts.height = height);\n            width = getSize(root, 0, opts);\n            height = getSize(root, 1, opts);\n            domRoot.style.display = '';\n            if (this._width !== width || height !== this._height) {\n                domRoot.style.width = width + 'px';\n                domRoot.style.height = height + 'px';\n                for (var id in this._layers) {\n                    if (this._layers.hasOwnProperty(id)) {\n                        this._layers[id].resize(width, height);\n                    }\n                }\n                this.refresh(true);\n            }\n            this._width = width;\n            this._height = height;\n        }\n        return this;\n    };\n    CanvasPainter.prototype.clearLayer = function (zlevel) {\n        var layer = this._layers[zlevel];\n        if (layer) {\n            layer.clear();\n        }\n    };\n    CanvasPainter.prototype.dispose = function () {\n        this.root.innerHTML = '';\n        this.root =\n            this.storage =\n                this._domRoot =\n                    this._layers = null;\n    };\n    CanvasPainter.prototype.getRenderedCanvas = function (opts) {\n        opts = opts || {};\n        if (this._singleCanvas && !this._compositeManually) {\n            return this._layers[CANVAS_ZLEVEL].dom;\n        }\n        var imageLayer = new Layer('image', this, opts.pixelRatio || this.dpr);\n        imageLayer.initContext();\n        imageLayer.clear(false, opts.backgroundColor || this._backgroundColor);\n        var ctx = imageLayer.ctx;\n        if (opts.pixelRatio <= this.dpr) {\n            this.refresh();\n            var width_1 = imageLayer.dom.width;\n            var height_1 = imageLayer.dom.height;\n            this.eachLayer(function (layer) {\n                if (layer.__builtin__) {\n                    ctx.drawImage(layer.dom, 0, 0, width_1, height_1);\n                }\n                else if (layer.renderToCanvas) {\n                    ctx.save();\n                    layer.renderToCanvas(ctx);\n                    ctx.restore();\n                }\n            });\n        }\n        else {\n            var scope = {\n                inHover: false,\n                viewWidth: this._width,\n                viewHeight: this._height\n            };\n            var displayList = this.storage.getDisplayList(true);\n            for (var i = 0, len = displayList.length; i < len; i++) {\n                var el = displayList[i];\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        return imageLayer.dom;\n    };\n    CanvasPainter.prototype.getWidth = function () {\n        return this._width;\n    };\n    CanvasPainter.prototype.getHeight = function () {\n        return this._height;\n    };\n    return CanvasPainter;\n}());\nexport default CanvasPainter;\n;\n","import { isArray, isNumber, map } from '../core/util.js';\nexport function normalizeLineDash(lineType, lineWidth) {\n    if (!lineType || lineType === 'solid' || !(lineWidth > 0)) {\n        return null;\n    }\n    return lineType === 'dashed'\n        ? [4 * lineWidth, 2 * lineWidth]\n        : lineType === 'dotted'\n            ? [lineWidth]\n            : isNumber(lineType)\n                ? [lineType] : isArray(lineType) ? lineType : null;\n}\nexport function getLineDash(el) {\n    var style = el.style;\n    var lineDash = style.lineDash && style.lineWidth > 0 && normalizeLineDash(style.lineDash, style.lineWidth);\n    var lineDashOffset = style.lineDashOffset;\n    if (lineDash) {\n        var lineScale_1 = (style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1;\n        if (lineScale_1 && lineScale_1 !== 1) {\n            lineDash = map(lineDash, function (rawVal) {\n                return rawVal / lineScale_1;\n            });\n            lineDashOffset /= lineScale_1;\n        }\n    }\n    return [lineDash, lineDashOffset];\n}\n","import { DEFAULT_COMMON_STYLE } from '../graphic/Displayable.js';\nimport PathProxy from '../core/PathProxy.js';\nimport { createOrUpdateImage, isImageReady } from '../graphic/helper/image.js';\nimport { getCanvasGradient, isClipPathChanged } from './helper.js';\nimport Path from '../graphic/Path.js';\nimport ZRImage from '../graphic/Image.js';\nimport TSpan from '../graphic/TSpan.js';\nimport { RADIAN_TO_DEGREE } from '../core/util.js';\nimport { getLineDash } from './dashStyle.js';\nimport { REDRAW_BIT, SHAPE_CHANGED_BIT } from '../graphic/constants.js';\nimport { DEFAULT_FONT } from '../core/platform.js';\nvar pathProxyForDraw = new PathProxy(true);\nfunction styleHasStroke(style) {\n    var stroke = style.stroke;\n    return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\n}\nfunction isValidStrokeFillStyle(strokeOrFill) {\n    return typeof strokeOrFill === 'string' && strokeOrFill !== 'none';\n}\nfunction styleHasFill(style) {\n    var fill = style.fill;\n    return fill != null && fill !== 'none';\n}\nfunction doFillPath(ctx, style) {\n    if (style.fillOpacity != null && style.fillOpacity !== 1) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.fillOpacity * style.opacity;\n        ctx.fill();\n        ctx.globalAlpha = originalGlobalAlpha;\n    }\n    else {\n        ctx.fill();\n    }\n}\nfunction doStrokePath(ctx, style) {\n    if (style.strokeOpacity != null && style.strokeOpacity !== 1) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.strokeOpacity * style.opacity;\n        ctx.stroke();\n        ctx.globalAlpha = originalGlobalAlpha;\n    }\n    else {\n        ctx.stroke();\n    }\n}\nexport function createCanvasPattern(ctx, pattern, el) {\n    var image = createOrUpdateImage(pattern.image, pattern.__image, el);\n    if (isImageReady(image)) {\n        var canvasPattern = ctx.createPattern(image, pattern.repeat || 'repeat');\n        if (typeof DOMMatrix === 'function'\n            && canvasPattern\n            && canvasPattern.setTransform) {\n            var matrix = new DOMMatrix();\n            matrix.translateSelf((pattern.x || 0), (pattern.y || 0));\n            matrix.rotateSelf(0, 0, (pattern.rotation || 0) * RADIAN_TO_DEGREE);\n            matrix.scaleSelf((pattern.scaleX || 1), (pattern.scaleY || 1));\n            canvasPattern.setTransform(matrix);\n        }\n        return canvasPattern;\n    }\n}\nfunction brushPath(ctx, el, style, inBatch) {\n    var _a;\n    var hasStroke = styleHasStroke(style);\n    var hasFill = styleHasFill(style);\n    var strokePercent = style.strokePercent;\n    var strokePart = strokePercent < 1;\n    var firstDraw = !el.path;\n    if ((!el.silent || strokePart) && firstDraw) {\n        el.createPathProxy();\n    }\n    var path = el.path || pathProxyForDraw;\n    var dirtyFlag = el.__dirty;\n    if (!inBatch) {\n        var fill = style.fill;\n        var stroke = style.stroke;\n        var hasFillGradient = hasFill && !!fill.colorStops;\n        var hasStrokeGradient = hasStroke && !!stroke.colorStops;\n        var hasFillPattern = hasFill && !!fill.image;\n        var hasStrokePattern = hasStroke && !!stroke.image;\n        var fillGradient = void 0;\n        var strokeGradient = void 0;\n        var fillPattern = void 0;\n        var strokePattern = void 0;\n        var rect = void 0;\n        if (hasFillGradient || hasStrokeGradient) {\n            rect = el.getBoundingRect();\n        }\n        if (hasFillGradient) {\n            fillGradient = dirtyFlag\n                ? getCanvasGradient(ctx, fill, rect)\n                : el.__canvasFillGradient;\n            el.__canvasFillGradient = fillGradient;\n        }\n        if (hasStrokeGradient) {\n            strokeGradient = dirtyFlag\n                ? getCanvasGradient(ctx, stroke, rect)\n                : el.__canvasStrokeGradient;\n            el.__canvasStrokeGradient = strokeGradient;\n        }\n        if (hasFillPattern) {\n            fillPattern = (dirtyFlag || !el.__canvasFillPattern)\n                ? createCanvasPattern(ctx, fill, el)\n                : el.__canvasFillPattern;\n            el.__canvasFillPattern = fillPattern;\n        }\n        if (hasStrokePattern) {\n            strokePattern = (dirtyFlag || !el.__canvasStrokePattern)\n                ? createCanvasPattern(ctx, stroke, el)\n                : el.__canvasStrokePattern;\n            el.__canvasStrokePattern = fillPattern;\n        }\n        if (hasFillGradient) {\n            ctx.fillStyle = fillGradient;\n        }\n        else if (hasFillPattern) {\n            if (fillPattern) {\n                ctx.fillStyle = fillPattern;\n            }\n            else {\n                hasFill = false;\n            }\n        }\n        if (hasStrokeGradient) {\n            ctx.strokeStyle = strokeGradient;\n        }\n        else if (hasStrokePattern) {\n            if (strokePattern) {\n                ctx.strokeStyle = strokePattern;\n            }\n            else {\n                hasStroke = false;\n            }\n        }\n    }\n    var scale = el.getGlobalScale();\n    path.setScale(scale[0], scale[1], el.segmentIgnoreThreshold);\n    var lineDash;\n    var lineDashOffset;\n    if (ctx.setLineDash && style.lineDash) {\n        _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n    }\n    var needsRebuild = true;\n    if (firstDraw || (dirtyFlag & SHAPE_CHANGED_BIT)) {\n        path.setDPR(ctx.dpr);\n        if (strokePart) {\n            path.setContext(null);\n        }\n        else {\n            path.setContext(ctx);\n            needsRebuild = false;\n        }\n        path.reset();\n        el.buildPath(path, el.shape, inBatch);\n        path.toStatic();\n        el.pathUpdated();\n    }\n    if (needsRebuild) {\n        path.rebuildPath(ctx, strokePart ? strokePercent : 1);\n    }\n    if (lineDash) {\n        ctx.setLineDash(lineDash);\n        ctx.lineDashOffset = lineDashOffset;\n    }\n    if (!inBatch) {\n        if (style.strokeFirst) {\n            if (hasStroke) {\n                doStrokePath(ctx, style);\n            }\n            if (hasFill) {\n                doFillPath(ctx, style);\n            }\n        }\n        else {\n            if (hasFill) {\n                doFillPath(ctx, style);\n            }\n            if (hasStroke) {\n                doStrokePath(ctx, style);\n            }\n        }\n    }\n    if (lineDash) {\n        ctx.setLineDash([]);\n    }\n}\nfunction brushImage(ctx, el, style) {\n    var image = el.__image = createOrUpdateImage(style.image, el.__image, el, el.onload);\n    if (!image || !isImageReady(image)) {\n        return;\n    }\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var width = el.getWidth();\n    var height = el.getHeight();\n    var aspect = image.width / image.height;\n    if (width == null && height != null) {\n        width = height * aspect;\n    }\n    else if (height == null && width != null) {\n        height = width / aspect;\n    }\n    else if (width == null && height == null) {\n        width = image.width;\n        height = image.height;\n    }\n    if (style.sWidth && style.sHeight) {\n        var sx = style.sx || 0;\n        var sy = style.sy || 0;\n        ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);\n    }\n    else if (style.sx && style.sy) {\n        var sx = style.sx;\n        var sy = style.sy;\n        var sWidth = width - sx;\n        var sHeight = height - sy;\n        ctx.drawImage(image, sx, sy, sWidth, sHeight, x, y, width, height);\n    }\n    else {\n        ctx.drawImage(image, x, y, width, height);\n    }\n}\nfunction brushText(ctx, el, style) {\n    var _a;\n    var text = style.text;\n    text != null && (text += '');\n    if (text) {\n        ctx.font = style.font || DEFAULT_FONT;\n        ctx.textAlign = style.textAlign;\n        ctx.textBaseline = style.textBaseline;\n        var lineDash = void 0;\n        var lineDashOffset = void 0;\n        if (ctx.setLineDash && style.lineDash) {\n            _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n        }\n        if (lineDash) {\n            ctx.setLineDash(lineDash);\n            ctx.lineDashOffset = lineDashOffset;\n        }\n        if (style.strokeFirst) {\n            if (styleHasStroke(style)) {\n                ctx.strokeText(text, style.x, style.y);\n            }\n            if (styleHasFill(style)) {\n                ctx.fillText(text, style.x, style.y);\n            }\n        }\n        else {\n            if (styleHasFill(style)) {\n                ctx.fillText(text, style.x, style.y);\n            }\n            if (styleHasStroke(style)) {\n                ctx.strokeText(text, style.x, style.y);\n            }\n        }\n        if (lineDash) {\n            ctx.setLineDash([]);\n        }\n    }\n}\nvar SHADOW_NUMBER_PROPS = ['shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\nvar STROKE_PROPS = [\n    ['lineCap', 'butt'], ['lineJoin', 'miter'], ['miterLimit', 10]\n];\nfunction bindCommonProps(ctx, style, prevStyle, forceSetAll, scope) {\n    var styleChanged = false;\n    if (!forceSetAll) {\n        prevStyle = prevStyle || {};\n        if (style === prevStyle) {\n            return false;\n        }\n    }\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n        flushPathDrawn(ctx, scope);\n        styleChanged = true;\n        var opacity = Math.max(Math.min(style.opacity, 1), 0);\n        ctx.globalAlpha = isNaN(opacity) ? DEFAULT_COMMON_STYLE.opacity : opacity;\n    }\n    if (forceSetAll || style.blend !== prevStyle.blend) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.globalCompositeOperation = style.blend || DEFAULT_COMMON_STYLE.blend;\n    }\n    for (var i = 0; i < SHADOW_NUMBER_PROPS.length; i++) {\n        var propName = SHADOW_NUMBER_PROPS[i];\n        if (forceSetAll || style[propName] !== prevStyle[propName]) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx[propName] = ctx.dpr * (style[propName] || 0);\n        }\n    }\n    if (forceSetAll || style.shadowColor !== prevStyle.shadowColor) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.shadowColor = style.shadowColor || DEFAULT_COMMON_STYLE.shadowColor;\n    }\n    return styleChanged;\n}\nfunction bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetAll, scope) {\n    var style = getStyle(el, scope.inHover);\n    var prevStyle = forceSetAll\n        ? null\n        : (prevEl && getStyle(prevEl, scope.inHover) || {});\n    if (style === prevStyle) {\n        return false;\n    }\n    var styleChanged = bindCommonProps(ctx, style, prevStyle, forceSetAll, scope);\n    if (forceSetAll || style.fill !== prevStyle.fill) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        isValidStrokeFillStyle(style.fill) && (ctx.fillStyle = style.fill);\n    }\n    if (forceSetAll || style.stroke !== prevStyle.stroke) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        isValidStrokeFillStyle(style.stroke) && (ctx.strokeStyle = style.stroke);\n    }\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.globalAlpha = style.opacity == null ? 1 : style.opacity;\n    }\n    if (el.hasStroke()) {\n        var lineWidth = style.lineWidth;\n        var newLineWidth = lineWidth / ((style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1);\n        if (ctx.lineWidth !== newLineWidth) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx.lineWidth = newLineWidth;\n        }\n    }\n    for (var i = 0; i < STROKE_PROPS.length; i++) {\n        var prop = STROKE_PROPS[i];\n        var propName = prop[0];\n        if (forceSetAll || style[propName] !== prevStyle[propName]) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx[propName] = style[propName] || prop[1];\n        }\n    }\n    return styleChanged;\n}\nfunction bindImageStyle(ctx, el, prevEl, forceSetAll, scope) {\n    return bindCommonProps(ctx, getStyle(el, scope.inHover), prevEl && getStyle(prevEl, scope.inHover), forceSetAll, scope);\n}\nfunction setContextTransform(ctx, el) {\n    var m = el.transform;\n    var dpr = ctx.dpr || 1;\n    if (m) {\n        ctx.setTransform(dpr * m[0], dpr * m[1], dpr * m[2], dpr * m[3], dpr * m[4], dpr * m[5]);\n    }\n    else {\n        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n    }\n}\nfunction updateClipStatus(clipPaths, ctx, scope) {\n    var allClipped = false;\n    for (var i = 0; i < clipPaths.length; i++) {\n        var clipPath = clipPaths[i];\n        allClipped = allClipped || clipPath.isZeroArea();\n        setContextTransform(ctx, clipPath);\n        ctx.beginPath();\n        clipPath.buildPath(ctx, clipPath.shape);\n        ctx.clip();\n    }\n    scope.allClipped = allClipped;\n}\nfunction isTransformChanged(m0, m1) {\n    if (m0 && m1) {\n        return m0[0] !== m1[0]\n            || m0[1] !== m1[1]\n            || m0[2] !== m1[2]\n            || m0[3] !== m1[3]\n            || m0[4] !== m1[4]\n            || m0[5] !== m1[5];\n    }\n    else if (!m0 && !m1) {\n        return false;\n    }\n    return true;\n}\nvar DRAW_TYPE_PATH = 1;\nvar DRAW_TYPE_IMAGE = 2;\nvar DRAW_TYPE_TEXT = 3;\nvar DRAW_TYPE_INCREMENTAL = 4;\nfunction canPathBatch(style) {\n    var hasFill = styleHasFill(style);\n    var hasStroke = styleHasStroke(style);\n    return !(style.lineDash\n        || !(+hasFill ^ +hasStroke)\n        || (hasFill && typeof style.fill !== 'string')\n        || (hasStroke && typeof style.stroke !== 'string')\n        || style.strokePercent < 1\n        || style.strokeOpacity < 1\n        || style.fillOpacity < 1);\n}\nfunction flushPathDrawn(ctx, scope) {\n    scope.batchFill && ctx.fill();\n    scope.batchStroke && ctx.stroke();\n    scope.batchFill = '';\n    scope.batchStroke = '';\n}\nfunction getStyle(el, inHover) {\n    return inHover ? (el.__hoverStyle || el.style) : el.style;\n}\nexport function brushSingle(ctx, el) {\n    brush(ctx, el, { inHover: false, viewWidth: 0, viewHeight: 0 }, true);\n}\nexport function brush(ctx, el, scope, isLast) {\n    var m = el.transform;\n    if (!el.shouldBePainted(scope.viewWidth, scope.viewHeight, false, false)) {\n        el.__dirty &= ~REDRAW_BIT;\n        el.__isRendered = false;\n        return;\n    }\n    var clipPaths = el.__clipPaths;\n    var prevElClipPaths = scope.prevElClipPaths;\n    var forceSetTransform = false;\n    var forceSetStyle = false;\n    if (!prevElClipPaths || isClipPathChanged(clipPaths, prevElClipPaths)) {\n        if (prevElClipPaths && prevElClipPaths.length) {\n            flushPathDrawn(ctx, scope);\n            ctx.restore();\n            forceSetStyle = forceSetTransform = true;\n            scope.prevElClipPaths = null;\n            scope.allClipped = false;\n            scope.prevEl = null;\n        }\n        if (clipPaths && clipPaths.length) {\n            flushPathDrawn(ctx, scope);\n            ctx.save();\n            updateClipStatus(clipPaths, ctx, scope);\n            forceSetTransform = true;\n        }\n        scope.prevElClipPaths = clipPaths;\n    }\n    if (scope.allClipped) {\n        el.__isRendered = false;\n        return;\n    }\n    el.beforeBrush && el.beforeBrush();\n    el.innerBeforeBrush();\n    var prevEl = scope.prevEl;\n    if (!prevEl) {\n        forceSetStyle = forceSetTransform = true;\n    }\n    var canBatchPath = el instanceof Path\n        && el.autoBatch\n        && canPathBatch(el.style);\n    if (forceSetTransform || isTransformChanged(m, prevEl.transform)) {\n        flushPathDrawn(ctx, scope);\n        setContextTransform(ctx, el);\n    }\n    else if (!canBatchPath) {\n        flushPathDrawn(ctx, scope);\n    }\n    var style = getStyle(el, scope.inHover);\n    if (el instanceof Path) {\n        if (scope.lastDrawType !== DRAW_TYPE_PATH) {\n            forceSetStyle = true;\n            scope.lastDrawType = DRAW_TYPE_PATH;\n        }\n        bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n        if (!canBatchPath || (!scope.batchFill && !scope.batchStroke)) {\n            ctx.beginPath();\n        }\n        brushPath(ctx, el, style, canBatchPath);\n        if (canBatchPath) {\n            scope.batchFill = style.fill || '';\n            scope.batchStroke = style.stroke || '';\n        }\n    }\n    else {\n        if (el instanceof TSpan) {\n            if (scope.lastDrawType !== DRAW_TYPE_TEXT) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_TEXT;\n            }\n            bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n            brushText(ctx, el, style);\n        }\n        else if (el instanceof ZRImage) {\n            if (scope.lastDrawType !== DRAW_TYPE_IMAGE) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_IMAGE;\n            }\n            bindImageStyle(ctx, el, prevEl, forceSetStyle, scope);\n            brushImage(ctx, el, style);\n        }\n        else if (el.getTemporalDisplayables) {\n            if (scope.lastDrawType !== DRAW_TYPE_INCREMENTAL) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_INCREMENTAL;\n            }\n            brushIncremental(ctx, el, scope);\n        }\n    }\n    if (canBatchPath && isLast) {\n        flushPathDrawn(ctx, scope);\n    }\n    el.innerAfterBrush();\n    el.afterBrush && el.afterBrush();\n    scope.prevEl = el;\n    el.__dirty = 0;\n    el.__isRendered = true;\n}\nfunction brushIncremental(ctx, el, scope) {\n    var displayables = el.getDisplayables();\n    var temporalDisplayables = el.getTemporalDisplayables();\n    ctx.save();\n    var innerScope = {\n        prevElClipPaths: null,\n        prevEl: null,\n        allClipped: false,\n        viewWidth: scope.viewWidth,\n        viewHeight: scope.viewHeight,\n        inHover: scope.inHover\n    };\n    var i;\n    var len;\n    for (i = el.getCursor(), len = displayables.length; i < len; i++) {\n        var displayable = displayables[i];\n        displayable.beforeBrush && displayable.beforeBrush();\n        displayable.innerBeforeBrush();\n        brush(ctx, displayable, innerScope, i === len - 1);\n        displayable.innerAfterBrush();\n        displayable.afterBrush && displayable.afterBrush();\n        innerScope.prevEl = displayable;\n    }\n    for (var i_1 = 0, len_1 = temporalDisplayables.length; i_1 < len_1; i_1++) {\n        var displayable = temporalDisplayables[i_1];\n        displayable.beforeBrush && displayable.beforeBrush();\n        displayable.innerBeforeBrush();\n        brush(ctx, displayable, innerScope, i_1 === len_1 - 1);\n        displayable.innerAfterBrush();\n        displayable.afterBrush && displayable.afterBrush();\n        innerScope.prevEl = displayable;\n    }\n    el.clearTemporalDisplayables();\n    el.notClear = true;\n    ctx.restore();\n}\n","function isSafeNum(num) {\n    return isFinite(num);\n}\nexport function createLinearGradient(ctx, obj, rect) {\n    var x = obj.x == null ? 0 : obj.x;\n    var x2 = obj.x2 == null ? 1 : obj.x2;\n    var y = obj.y == null ? 0 : obj.y;\n    var y2 = obj.y2 == null ? 0 : obj.y2;\n    if (!obj.global) {\n        x = x * rect.width + rect.x;\n        x2 = x2 * rect.width + rect.x;\n        y = y * rect.height + rect.y;\n        y2 = y2 * rect.height + rect.y;\n    }\n    x = isSafeNum(x) ? x : 0;\n    x2 = isSafeNum(x2) ? x2 : 1;\n    y = isSafeNum(y) ? y : 0;\n    y2 = isSafeNum(y2) ? y2 : 0;\n    var canvasGradient = ctx.createLinearGradient(x, y, x2, y2);\n    return canvasGradient;\n}\nexport function createRadialGradient(ctx, obj, rect) {\n    var width = rect.width;\n    var height = rect.height;\n    var min = Math.min(width, height);\n    var x = obj.x == null ? 0.5 : obj.x;\n    var y = obj.y == null ? 0.5 : obj.y;\n    var r = obj.r == null ? 0.5 : obj.r;\n    if (!obj.global) {\n        x = x * width + rect.x;\n        y = y * height + rect.y;\n        r = r * min;\n    }\n    x = isSafeNum(x) ? x : 0.5;\n    y = isSafeNum(y) ? y : 0.5;\n    r = r >= 0 && isSafeNum(r) ? r : 0.5;\n    var canvasGradient = ctx.createRadialGradient(x, y, 0, x, y, r);\n    return canvasGradient;\n}\nexport function getCanvasGradient(ctx, obj, rect) {\n    var canvasGradient = obj.type === 'radial'\n        ? createRadialGradient(ctx, obj, rect)\n        : createLinearGradient(ctx, obj, rect);\n    var colorStops = obj.colorStops;\n    for (var i = 0; i < colorStops.length; i++) {\n        canvasGradient.addColorStop(colorStops[i].offset, colorStops[i].color);\n    }\n    return canvasGradient;\n}\nexport function isClipPathChanged(clipPaths, prevClipPaths) {\n    if (clipPaths === prevClipPaths || (!clipPaths && !prevClipPaths)) {\n        return false;\n    }\n    if (!clipPaths || !prevClipPaths || (clipPaths.length !== prevClipPaths.length)) {\n        return true;\n    }\n    for (var i = 0; i < clipPaths.length; i++) {\n        if (clipPaths[i] !== prevClipPaths[i]) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction parseInt10(val) {\n    return parseInt(val, 10);\n}\nexport function getSize(root, whIdx, opts) {\n    var wh = ['width', 'height'][whIdx];\n    var cwh = ['clientWidth', 'clientHeight'][whIdx];\n    var plt = ['paddingLeft', 'paddingTop'][whIdx];\n    var prb = ['paddingRight', 'paddingBottom'][whIdx];\n    if (opts[wh] != null && opts[wh] !== 'auto') {\n        return parseFloat(opts[wh]);\n    }\n    var stl = document.defaultView.getComputedStyle(root);\n    return ((root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh]))\n        - (parseInt10(stl[plt]) || 0)\n        - (parseInt10(stl[prb]) || 0)) | 0;\n}\n","import env from './core/env.js';\nvar dpr = 1;\nif (env.hasGlobalWindow) {\n    dpr = Math.max(window.devicePixelRatio\n        || (window.screen && window.screen.deviceXDPI / window.screen.logicalXDPI)\n        || 1, 1);\n}\nexport var debugMode = 0;\nexport var devicePixelRatio = dpr;\nexport var DARK_MODE_THRESHOLD = 0.4;\nexport var DARK_LABEL_COLOR = '#333';\nexport var LIGHT_LABEL_COLOR = '#ccc';\nexport var LIGHTER_LABEL_COLOR = '#eee';\n"],"names":["PRESERVED_NORMAL_STATE","PRIMARY_STATES_KEYS","TRANSFORMABLE_PROPS","concat","DEFAULT_ANIMATABLE_MAP","reduce","obj","key","ignore","tmpTextPosCalcRes","tmpBoundingRect","BoundingRect","Element","props","this","id","guid","animators","currentStates","states","_init","prototype","attr","drift","dx","dy","e","draggable","m","transform","decomposeTransform","markRedraw","beforeUpdate","afterUpdate","update","updateTransform","__dirty","updateInnerText","forceUpdate","textEl","_textContent","textConfig","isLocal","local","innerTransformable","textAlign","textVerticalAlign","textStyleChanged","parent","innerOrigin","copyTransform","position","layoutRect","copy","getBoundingRect","applyTransform","calculateTextPosition","x","y","align","verticalAlign","textOrigin","origin","rotation","relOriginX","relOriginY","width","height","parsePercent","originX","originY","textOffset","offset","isInside","inside","indexOf","innerTextDefaultStyle","_innerTextDefaultStyle","textFill","textStroke","autoStroke","canBeInsideText","insideFill","insideStroke","getInsideTextFill","getInsideTextStroke","outsideFill","outsideStroke","getOutsideFill","getOutsideStroke","fill","stroke","setDefaultTextStyle","REDRAW_BIT","dirtyStyle","__zr","isDarkMode","LIGHT_LABEL_COLOR","DARK_LABEL_COLOR","backgroundColor","getBackgroundColor","colorArr","parse","alpha","isDark","i","stringify","traverse","cb","context","attrKV","value","setTextConfig","setTextContent","setClipPath","extra","extend","hide","show","keyOrObj","isObject","keysArr","keys","length","saveCurrentToNormalState","toState","_innerSaveToNormal","normalState","_normalState","animator","fromStateTransition","__fromStateTransition","getLoop","targetName","target","saveTo","_savePrimaryToNormal","primaryKeys","hasState","getState","name","ensureState","clearStates","noAnimation","useState","stateName","keepCurrentStates","forceUseHoverLayer","toNormalState","hasStates","animationCfg","stateTransition","state","stateProxy","useHoverLayer","hoverLayer","_toggleHoverLayerFlag","_applyStateObj","__inHover","duration","textContent","textGuide","_textGuide","push","_updateAnimationTargets","logError","useStates","stateObjects","len","notChange","stateObj","lastStateObj","mergedState","_mergeStates","join","slice","isSilent","silent","ancestor","changeTarget","removeState","idx","splice","replaceState","oldState","newState","forceAdd","newStateExists","toggleState","enable","mergedTextConfig","transition","needsRestoreToNormal","transitionTarget","hasTransition","propNeedsTransition","__changeFinalValue","_transitionState","_attachComponent","componentEl","__hostTarget","zr","addSelfToZr","_detachComponent","removeSelfFromZr","getClipPath","_clipPath","clipPath","removeClipPath","getTextContent","previousTextContent","removeTextContent","Transformable","cfg","removeTextConfig","getTextGuideLine","setTextGuideLine","guideLine","removeTextGuideLine","refreshHover","refresh","dirty","inHover","animation","addAnimator","removeAnimator","animate","loop","allowDiscreteAnimation","Animator","el","during","updateDuringAnimation","done","wakeUp","stopAnimation","scope","forwardToLast","leftAnimators","stop","animateTo","animationProps","animateFrom","getPaintRect","initDefaultProps","elProto","type","isGroup","dragging","ignoreClip","createLegacyProperty","privateKey","xKey","yKey","enhanceArray","self","pos","Object","defineProperty","get","set","val","animatable","reverse","animateToShallow","finishCount","doneHappened","cfgDone","cfgAborted","aborted","doneCb","abortedCb","percent","force","start","easing","copyArrShallow","source","is2DArray","isArrayLike","copyValue","isTypedArray","constructor","sourceArr","targetArr","len0","len1","Array","call","isValueSame","val1","val2","is1DArraySame","arr0","arr1","topKey","animateObj","targetKeys","delay","additive","setToFinal","animateAll","existsAnimators","animationKeys","k","innerKey","targetVal","isGradientObject","keyLen","allAborted","stopTracks","filter","revertedSource","reversedTarget","sourceClone","cloneValue","whenWithKeys","mixin","Eventful","SILENT","makeEventPacket","eveType","targetInfo","event","topTarget","cancelBubble","offsetX","zrX","offsetY","zrY","gestureEvent","pinchX","pinchY","pinchScale","wheelDelta","zrDelta","zrByTouch","which","stopEvent","eventTool","EmptyProxy","_super","_this","apply","arguments","handler","__extends","dispose","setCursor","HoveredResult","handlerNames","tmpRect","Handler","storage","painter","proxy","painterRoot","pointerSize","_hovered","_pointerSize","setHandlerProxy","_draggingMgr","Draggable","util","on","mousemove","isOutside","isOutsideBoundary","lastHovered","lastHoveredTarget","findHover","hovered","hoveredTarget","cursor","dispatchToElement","mouseout","eventControl","zrEventControl","trigger","resize","dispatch","eventName","eventArgs","setCursorStyle","cursorStyle","eventKey","eventPacket","eachOtherLayer","layer","exclude","list","getDisplayList","out","setHoverTarget","candidates","targetSizeHalf","pointerRect","ignoreCoarsePointer","intersect","rStep","thetaStep","Math","PI","PI2","r","theta","x1","cos","y1","sin","processGesture","stage","_gestureMgr","GestureMgr","gestureMgr","clear","gestureInfo","recognize","dom","res","isHover","displayable","rectHover","contain","hostEl","hoverCheckResult","handlerInstance","getWidth","getHeight","_downEl","_downPoint","_upEl","vec2","invalidZErrorLogged","logInvalidZError","console","warn","shapeCompareFunc","a","b","zlevel","z","z2","Storage","_roots","_displayList","_displayListLen","displayableSortFunc","includeIgnore","displayList","updateDisplayList","roots","_updateAndAddDisplayable","timsort","clipPaths","userSetClipPath","currentClipPath","parentClipPath","childrenRef","children","child","disp","__clipPaths","isNaN","decalEl","getDecalElement","addRoot","delRoot","l","delAllRoots","getRoots","getTime","Date","Animation","opts","_running","_time","_pausedTime","_pauseStart","_paused","addClip","clip","removeClip","_head","_tail","next","prev","getClip","notTriggerFrameAndStageUpdate","time","delta","nextClip","finished","step","ondestroy","_startLoop","requestAnimationFrame","pause","resume","isFinished","options","easingFuncs","linear","quadraticIn","quadraticOut","quadraticInOut","cubicIn","cubicOut","cubicInOut","quarticIn","quarticOut","quarticInOut","quinticIn","quinticOut","quinticInOut","sinusoidalIn","sinusoidalOut","sinusoidalInOut","exponentialIn","pow","exponentialOut","exponentialInOut","circularIn","sqrt","circularOut","circularInOut","elasticIn","s","p","asin","elasticOut","elasticInOut","backIn","backOut","backInOut","bounceIn","bounceOut","bounceInOut","Clip","_inited","_startTime","_life","life","_delay","onframe","noop","onrestart","setEasing","globalTime","deltaTime","elapsedTime","min","easingFunc","schedule","remainder","isFunction","createCubicEasingFunc","arraySlice","interpolateNumber","p0","p1","interpolate1DArray","interpolate2DArray","len2","j","add1DArray","sign","add2DArray","fillColorStops","val0","shorterArr","shorterLen","last","color","max","fillArray","arrDim","arr0Len","arr1Len","isPreviousLarger","ret","rgba2String","rgba","floor","guessArrayDim","VALUE_TYPE_NUMBER","VALUE_TYPE_1D_ARRAY","VALUE_TYPE_2D_ARRAY","VALUE_TYPE_COLOR","VALUE_TYPE_LINEAR_GRADIENT","VALUE_TYPE_RADIAL_GRADIENT","VALUE_TYPE_UNKOWN","isGradientValueType","valType","isArrayValueType","tmpRgba","Track","propName","keyframes","discrete","_invalid","_needsSort","_lastFr","_lastFrP","_finished","setFinished","_additiveTrack","needsAnimate","getAdditiveTrack","addKeyframe","rawValue","arrayDim","isNumber","eqNaN","isString","colorArray","parsedGradient","colorStops","map","colorStop","isLinearGradient","isRadialGradient","kf","prepare","maxTime","additiveTrack","kfs","sort","kfsLen","lastKf","isDiscrete","isArr","isGradient","lastValue","startValue","additiveValue","frameIdx","frame","nextFrame","isAdditive","valueKey","kfsNum","isValueColor","lastFrame","mathMin","interval","w","_additiveValue","nextVal_1","isLinearGradient_1","nextColorStop","global","x2","y2","_addToTarget","additiveTo","_tracks","_trackKeys","_maxTime","_started","_clip","_target","_loop","_additiveAnimators","_allowDiscrete","getMaxTime","getDelay","getTarget","when","propNames","tracks","track","initialValue","_getAdditiveTrack","addtiveTrackKfs","lastFinalKf","isPaused","_force","_doneCallback","_setTracksFinished","doneList","_doneCbs","_abortedCallback","abortedList","_abortedCbs","tracksKeys","trackName","additiveAnimators","getTrack","stillHasAdditiveAnimator","onframeList","_onframeCbs","getTracks","trackKeys","firstOrLast","finalProps","pop","regexp","cubicEasingStr","cubic","exec","points","split","a_1","trim","b_1","c_1","d_1","roots_1","cubicRootAt","cubicAt","env","hasGlobalWindow","window","bind","msRequestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","func","setTimeout","createDom","dpr","newDom","platformApi","createCanvas","newDomStyle","style","left","top","setAttribute","Layer","motionBlur","lastFrameAlpha","virtual","config","incremental","maxRepaintRectCount","__firstTimePaint","__used","__drawIndex","__startIndex","__endIndex","__prevStartIndex","__prevEndIndex","devicePixelRatio","domStyle","onselectstart","padding","margin","borderWidth","getElementCount","afterBrush","initContext","ctx","getContext","setUnpainted","createBackBuffer","domBack","ctxBack","scale","createRepaintRects","prevList","viewWidth","viewHeight","hasIntersections","mergedRepaintRects","full","pendingRect","addRectToMergePool","rect","isFinite","isZero","boundingRect","isMerged","minDeltaArea","Infinity","bestRectToMergeIdx","mergedRect","pendingRect_1","union","aArea","bArea","pendingArea","deltaArea","shouldPaint","shouldBePainted","prevRect","__isRendered","getPrevPaintRect","curRect","_paintRects","debugGetPaintRects","clearAll","clearColor","repaintRects","haveMotionBLur","globalCompositeOperation","drawImage","doClear","clearRect","clearColorGradientOrPattern","shouldCache","__width","__height","__canvasGradient","getCanvasGradient","scaleX","scaleY","createCanvasPattern","save","fillStyle","fillRect","restore","globalAlpha","HOVER_LAYER_ZLEVEL","CANVAS_ZLEVEL","EL_AFTER_INCREMENTAL_INC","INCREMENTAL_INC","isLayerValid","__builtin__","createRoot","domRoot","document","createElement","cssText","CanvasPainter","root","_zlevelList","_prevDisplayList","_layers","_layerConfig","_needsManuallyCompositing","singleCanvas","nodeName","toUpperCase","_opts","_singleCanvas","rootStyle","innerHTML","zlevelList","layers","rootCanvas","_width","_height","mainLayer","_domRoot","getSize","appendChild","getType","isSingleCanvas","getViewportRoot","getViewportRootOffset","viewportRoot","offsetLeft","offsetTop","paintAll","_redrawId","random","_paintList","_backgroundColor","useDirtyRect","_paintHoverList","_hoverlayer","getLayer","brush","getHoverLayer","paintOne","brushSingle","redrawId","_updateLayerStatus","_a","_doPaintList","needsRefreshHover","_compositeManually","eachLayer","self_1","eachBuiltinLayer","layerList","zi","_loop_1","this_1","useTimer","now","startTime","firstEl","notClear","error","repaint","repaintRect","allClipped","prevEl","_doPaintEl","dTime","prevElClipPaths","beginPath","wxa","draw","currentLayer","isLast","paintRect","setPrevPaintRect","insertLayer","layersMap","prevLayer","prevDom","nextSibling","insertBefore","firstChild","getLayers","updatePrevLayer","i_1","prevZlevel","incrementalLayerCount","_clearLayer","setBackgroundColor","configLayer","layerConfig","_zlevel","delLayer","parentNode","removeChild","display","hasOwnProperty","clearLayer","getRenderedCanvas","imageLayer","pixelRatio","width_1","height_1","renderToCanvas","normalizeLineDash","lineType","lineWidth","isArray","getLineDash","lineDash","lineDashOffset","lineScale_1","strokeNoScale","getLineScale","rawVal","pathProxyForDraw","PathProxy","styleHasStroke","isValidStrokeFillStyle","strokeOrFill","styleHasFill","doFillPath","fillOpacity","originalGlobalAlpha","opacity","doStrokePath","strokeOpacity","pattern","image","createOrUpdateImage","__image","isImageReady","canvasPattern","createPattern","repeat","DOMMatrix","setTransform","matrix","translateSelf","rotateSelf","RADIAN_TO_DEGREE","scaleSelf","brushPath","inBatch","hasStroke","hasFill","strokePercent","strokePart","firstDraw","path","createPathProxy","dirtyFlag","hasFillGradient","hasStrokeGradient","hasFillPattern","hasStrokePattern","fillGradient","strokeGradient","fillPattern","strokePattern","__canvasFillGradient","__canvasStrokeGradient","__canvasFillPattern","__canvasStrokePattern","strokeStyle","getGlobalScale","setScale","segmentIgnoreThreshold","setLineDash","needsRebuild","SHAPE_CHANGED_BIT","setDPR","setContext","reset","buildPath","shape","toStatic","pathUpdated","rebuildPath","strokeFirst","brushImage","onload","aspect","sWidth","sHeight","sx","sy","brushText","text","font","DEFAULT_FONT","textBaseline","strokeText","fillText","SHADOW_NUMBER_PROPS","STROKE_PROPS","bindCommonProps","prevStyle","forceSetAll","styleChanged","flushPathDrawn","DEFAULT_COMMON_STYLE","blend","shadowColor","bindPathAndTextCommonStyle","getStyle","newLineWidth","prop","bindImageStyle","setContextTransform","updateClipStatus","isZeroArea","isTransformChanged","m0","m1","DRAW_TYPE_PATH","DRAW_TYPE_IMAGE","DRAW_TYPE_TEXT","DRAW_TYPE_INCREMENTAL","canPathBatch","batchFill","batchStroke","__hoverStyle","forceSetTransform","forceSetStyle","isClipPathChanged","beforeBrush","innerBeforeBrush","canBatchPath","Path","autoBatch","lastDrawType","TSpan","ZRImage","getTemporalDisplayables","brushIncremental","innerAfterBrush","displayables","getDisplayables","temporalDisplayables","innerScope","getCursor","len_1","clearTemporalDisplayables","isSafeNum","num","createLinearGradient","canvasGradient","createRadialGradient","addColorStop","prevClipPaths","parseInt10","parseInt","whIdx","wh","cwh","plt","prb","parseFloat","stl","defaultView","getComputedStyle","screen","deviceXDPI","logicalXDPI","DARK_MODE_THRESHOLD","LIGHTER_LABEL_COLOR"],"sourceRoot":""}