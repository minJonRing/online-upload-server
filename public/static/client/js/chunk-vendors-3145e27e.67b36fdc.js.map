{"version":3,"file":"static/client/js/chunk-vendors-3145e27e.67b36fdc.js","mappings":"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","sources":["webpack://d1/./node_modules/echarts/lib/label/LabelManager.js","webpack://d1/./node_modules/echarts/lib/label/installLabelLayout.js","webpack://d1/./node_modules/echarts/lib/label/labelGuideHelper.js","webpack://d1/./node_modules/echarts/lib/label/labelLayoutHelper.js","webpack://d1/./node_modules/echarts/lib/label/labelStyle.js","webpack://d1/./node_modules/echarts/lib/label/sectorLabel.js","webpack://d1/./node_modules/echarts/lib/layout/barGrid.js","webpack://d1/./node_modules/echarts/lib/layout/barPolar.js","webpack://d1/./node_modules/echarts/lib/layout/points.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// TODO: move labels out of viewport.\nimport { BoundingRect, updateProps, initProps, isElementRemoved } from '../util/graphic.js';\nimport { getECData } from '../util/innerStore.js';\nimport { parsePercent } from '../util/number.js';\nimport Transformable from 'zrender/lib/core/Transformable.js';\nimport { updateLabelLinePoints, setLabelLineStyle, getLabelLineStatesModels } from './labelGuideHelper.js';\nimport { makeInner } from '../util/model.js';\nimport { retrieve2, each, keys, isFunction, filter, indexOf } from 'zrender/lib/core/util.js';\nimport { prepareLayoutList, hideOverlap, shiftLayoutOnX, shiftLayoutOnY } from './labelLayoutHelper.js';\nimport { labelInner, animateLabelValue } from './labelStyle.js';\nimport { normalizeRadian } from 'zrender/lib/contain/util.js';\nfunction cloneArr(points) {\n  if (points) {\n    var newPoints = [];\n    for (var i = 0; i < points.length; i++) {\n      newPoints.push(points[i].slice());\n    }\n    return newPoints;\n  }\n}\nfunction prepareLayoutCallbackParams(labelItem, hostEl) {\n  var label = labelItem.label;\n  var labelLine = hostEl && hostEl.getTextGuideLine();\n  return {\n    dataIndex: labelItem.dataIndex,\n    dataType: labelItem.dataType,\n    seriesIndex: labelItem.seriesModel.seriesIndex,\n    text: labelItem.label.style.text,\n    rect: labelItem.hostRect,\n    labelRect: labelItem.rect,\n    // x: labelAttr.x,\n    // y: labelAttr.y,\n    align: label.style.align,\n    verticalAlign: label.style.verticalAlign,\n    labelLinePoints: cloneArr(labelLine && labelLine.shape.points)\n  };\n}\nvar LABEL_OPTION_TO_STYLE_KEYS = ['align', 'verticalAlign', 'width', 'height', 'fontSize'];\nvar dummyTransformable = new Transformable();\nvar labelLayoutInnerStore = makeInner();\nvar labelLineAnimationStore = makeInner();\nfunction extendWithKeys(target, source, keys) {\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (source[key] != null) {\n      target[key] = source[key];\n    }\n  }\n}\nvar LABEL_LAYOUT_PROPS = ['x', 'y', 'rotation'];\nvar LabelManager = /** @class */function () {\n  function LabelManager() {\n    this._labelList = [];\n    this._chartViewList = [];\n  }\n  LabelManager.prototype.clearLabels = function () {\n    this._labelList = [];\n    this._chartViewList = [];\n  };\n  /**\n   * Add label to manager\n   */\n  LabelManager.prototype._addLabel = function (dataIndex, dataType, seriesModel, label, layoutOption) {\n    var labelStyle = label.style;\n    var hostEl = label.__hostTarget;\n    var textConfig = hostEl.textConfig || {};\n    // TODO: If label is in other state.\n    var labelTransform = label.getComputedTransform();\n    var labelRect = label.getBoundingRect().plain();\n    BoundingRect.applyTransform(labelRect, labelRect, labelTransform);\n    if (labelTransform) {\n      dummyTransformable.setLocalTransform(labelTransform);\n    } else {\n      // Identity transform.\n      dummyTransformable.x = dummyTransformable.y = dummyTransformable.rotation = dummyTransformable.originX = dummyTransformable.originY = 0;\n      dummyTransformable.scaleX = dummyTransformable.scaleY = 1;\n    }\n    dummyTransformable.rotation = normalizeRadian(dummyTransformable.rotation);\n    var host = label.__hostTarget;\n    var hostRect;\n    if (host) {\n      hostRect = host.getBoundingRect().plain();\n      var transform = host.getComputedTransform();\n      BoundingRect.applyTransform(hostRect, hostRect, transform);\n    }\n    var labelGuide = hostRect && host.getTextGuideLine();\n    this._labelList.push({\n      label: label,\n      labelLine: labelGuide,\n      seriesModel: seriesModel,\n      dataIndex: dataIndex,\n      dataType: dataType,\n      layoutOption: layoutOption,\n      computedLayoutOption: null,\n      rect: labelRect,\n      hostRect: hostRect,\n      // Label with lower priority will be hidden when overlapped\n      // Use rect size as default priority\n      priority: hostRect ? hostRect.width * hostRect.height : 0,\n      // Save default label attributes.\n      // For restore if developers want get back to default value in callback.\n      defaultAttr: {\n        ignore: label.ignore,\n        labelGuideIgnore: labelGuide && labelGuide.ignore,\n        x: dummyTransformable.x,\n        y: dummyTransformable.y,\n        scaleX: dummyTransformable.scaleX,\n        scaleY: dummyTransformable.scaleY,\n        rotation: dummyTransformable.rotation,\n        style: {\n          x: labelStyle.x,\n          y: labelStyle.y,\n          align: labelStyle.align,\n          verticalAlign: labelStyle.verticalAlign,\n          width: labelStyle.width,\n          height: labelStyle.height,\n          fontSize: labelStyle.fontSize\n        },\n        cursor: label.cursor,\n        attachedPos: textConfig.position,\n        attachedRot: textConfig.rotation\n      }\n    });\n  };\n  LabelManager.prototype.addLabelsOfSeries = function (chartView) {\n    var _this = this;\n    this._chartViewList.push(chartView);\n    var seriesModel = chartView.__model;\n    var layoutOption = seriesModel.get('labelLayout');\n    /**\n     * Ignore layouting if it's not specified anything.\n     */\n    if (!(isFunction(layoutOption) || keys(layoutOption).length)) {\n      return;\n    }\n    chartView.group.traverse(function (child) {\n      if (child.ignore) {\n        return true; // Stop traverse descendants.\n      }\n      // Only support label being hosted on graphic elements.\n      var textEl = child.getTextContent();\n      var ecData = getECData(child);\n      // Can only attach the text on the element with dataIndex\n      if (textEl && !textEl.disableLabelLayout) {\n        _this._addLabel(ecData.dataIndex, ecData.dataType, seriesModel, textEl, layoutOption);\n      }\n    });\n  };\n  LabelManager.prototype.updateLayoutConfig = function (api) {\n    var width = api.getWidth();\n    var height = api.getHeight();\n    function createDragHandler(el, labelLineModel) {\n      return function () {\n        updateLabelLinePoints(el, labelLineModel);\n      };\n    }\n    for (var i = 0; i < this._labelList.length; i++) {\n      var labelItem = this._labelList[i];\n      var label = labelItem.label;\n      var hostEl = label.__hostTarget;\n      var defaultLabelAttr = labelItem.defaultAttr;\n      var layoutOption = void 0;\n      // TODO A global layout option?\n      if (isFunction(labelItem.layoutOption)) {\n        layoutOption = labelItem.layoutOption(prepareLayoutCallbackParams(labelItem, hostEl));\n      } else {\n        layoutOption = labelItem.layoutOption;\n      }\n      layoutOption = layoutOption || {};\n      labelItem.computedLayoutOption = layoutOption;\n      var degreeToRadian = Math.PI / 180;\n      // TODO hostEl should always exists.\n      // Or label should not have parent because the x, y is all in global space.\n      if (hostEl) {\n        hostEl.setTextConfig({\n          // Force to set local false.\n          local: false,\n          // Ignore position and rotation config on the host el if x or y is changed.\n          position: layoutOption.x != null || layoutOption.y != null ? null : defaultLabelAttr.attachedPos,\n          // Ignore rotation config on the host el if rotation is changed.\n          rotation: layoutOption.rotate != null ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.attachedRot,\n          offset: [layoutOption.dx || 0, layoutOption.dy || 0]\n        });\n      }\n      var needsUpdateLabelLine = false;\n      if (layoutOption.x != null) {\n        // TODO width of chart view.\n        label.x = parsePercent(layoutOption.x, width);\n        label.setStyle('x', 0); // Ignore movement in style. TODO: origin.\n        needsUpdateLabelLine = true;\n      } else {\n        label.x = defaultLabelAttr.x;\n        label.setStyle('x', defaultLabelAttr.style.x);\n      }\n      if (layoutOption.y != null) {\n        // TODO height of chart view.\n        label.y = parsePercent(layoutOption.y, height);\n        label.setStyle('y', 0); // Ignore movement in style.\n        needsUpdateLabelLine = true;\n      } else {\n        label.y = defaultLabelAttr.y;\n        label.setStyle('y', defaultLabelAttr.style.y);\n      }\n      if (layoutOption.labelLinePoints) {\n        var guideLine = hostEl.getTextGuideLine();\n        if (guideLine) {\n          guideLine.setShape({\n            points: layoutOption.labelLinePoints\n          });\n          // Not update\n          needsUpdateLabelLine = false;\n        }\n      }\n      var labelLayoutStore = labelLayoutInnerStore(label);\n      labelLayoutStore.needsUpdateLabelLine = needsUpdateLabelLine;\n      label.rotation = layoutOption.rotate != null ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.rotation;\n      label.scaleX = defaultLabelAttr.scaleX;\n      label.scaleY = defaultLabelAttr.scaleY;\n      for (var k = 0; k < LABEL_OPTION_TO_STYLE_KEYS.length; k++) {\n        var key = LABEL_OPTION_TO_STYLE_KEYS[k];\n        label.setStyle(key, layoutOption[key] != null ? layoutOption[key] : defaultLabelAttr.style[key]);\n      }\n      if (layoutOption.draggable) {\n        label.draggable = true;\n        label.cursor = 'move';\n        if (hostEl) {\n          var hostModel = labelItem.seriesModel;\n          if (labelItem.dataIndex != null) {\n            var data = labelItem.seriesModel.getData(labelItem.dataType);\n            hostModel = data.getItemModel(labelItem.dataIndex);\n          }\n          label.on('drag', createDragHandler(hostEl, hostModel.getModel('labelLine')));\n        }\n      } else {\n        // TODO Other drag functions?\n        label.off('drag');\n        label.cursor = defaultLabelAttr.cursor;\n      }\n    }\n  };\n  LabelManager.prototype.layout = function (api) {\n    var width = api.getWidth();\n    var height = api.getHeight();\n    var labelList = prepareLayoutList(this._labelList);\n    var labelsNeedsAdjustOnX = filter(labelList, function (item) {\n      return item.layoutOption.moveOverlap === 'shiftX';\n    });\n    var labelsNeedsAdjustOnY = filter(labelList, function (item) {\n      return item.layoutOption.moveOverlap === 'shiftY';\n    });\n    shiftLayoutOnX(labelsNeedsAdjustOnX, 0, width);\n    shiftLayoutOnY(labelsNeedsAdjustOnY, 0, height);\n    var labelsNeedsHideOverlap = filter(labelList, function (item) {\n      return item.layoutOption.hideOverlap;\n    });\n    hideOverlap(labelsNeedsHideOverlap);\n  };\n  /**\n   * Process all labels. Not only labels with layoutOption.\n   */\n  LabelManager.prototype.processLabelsOverall = function () {\n    var _this = this;\n    each(this._chartViewList, function (chartView) {\n      var seriesModel = chartView.__model;\n      var ignoreLabelLineUpdate = chartView.ignoreLabelLineUpdate;\n      var animationEnabled = seriesModel.isAnimationEnabled();\n      chartView.group.traverse(function (child) {\n        if (child.ignore && !child.forceLabelAnimation) {\n          return true; // Stop traverse descendants.\n        }\n\n        var needsUpdateLabelLine = !ignoreLabelLineUpdate;\n        var label = child.getTextContent();\n        if (!needsUpdateLabelLine && label) {\n          needsUpdateLabelLine = labelLayoutInnerStore(label).needsUpdateLabelLine;\n        }\n        if (needsUpdateLabelLine) {\n          _this._updateLabelLine(child, seriesModel);\n        }\n        if (animationEnabled) {\n          _this._animateLabels(child, seriesModel);\n        }\n      });\n    });\n  };\n  LabelManager.prototype._updateLabelLine = function (el, seriesModel) {\n    // Only support label being hosted on graphic elements.\n    var textEl = el.getTextContent();\n    // Update label line style.\n    var ecData = getECData(el);\n    var dataIndex = ecData.dataIndex;\n    // Only support labelLine on the labels represent data.\n    if (textEl && dataIndex != null) {\n      var data = seriesModel.getData(ecData.dataType);\n      var itemModel = data.getItemModel(dataIndex);\n      var defaultStyle = {};\n      var visualStyle = data.getItemVisual(dataIndex, 'style');\n      if (visualStyle) {\n        var visualType = data.getVisual('drawType');\n        // Default to be same with main color\n        defaultStyle.stroke = visualStyle[visualType];\n      }\n      var labelLineModel = itemModel.getModel('labelLine');\n      setLabelLineStyle(el, getLabelLineStatesModels(itemModel), defaultStyle);\n      updateLabelLinePoints(el, labelLineModel);\n    }\n  };\n  LabelManager.prototype._animateLabels = function (el, seriesModel) {\n    var textEl = el.getTextContent();\n    var guideLine = el.getTextGuideLine();\n    // Animate\n    if (textEl\n    // `forceLabelAnimation` has the highest priority\n    && (el.forceLabelAnimation || !textEl.ignore && !textEl.invisible && !el.disableLabelAnimation && !isElementRemoved(el))) {\n      var layoutStore = labelLayoutInnerStore(textEl);\n      var oldLayout = layoutStore.oldLayout;\n      var ecData = getECData(el);\n      var dataIndex = ecData.dataIndex;\n      var newProps = {\n        x: textEl.x,\n        y: textEl.y,\n        rotation: textEl.rotation\n      };\n      var data = seriesModel.getData(ecData.dataType);\n      if (!oldLayout) {\n        textEl.attr(newProps);\n        // Disable fade in animation if value animation is enabled.\n        if (!labelInner(textEl).valueAnimation) {\n          var oldOpacity = retrieve2(textEl.style.opacity, 1);\n          // Fade in animation\n          textEl.style.opacity = 0;\n          initProps(textEl, {\n            style: {\n              opacity: oldOpacity\n            }\n          }, seriesModel, dataIndex);\n        }\n      } else {\n        textEl.attr(oldLayout);\n        // Make sure the animation from is in the right status.\n        var prevStates = el.prevStates;\n        if (prevStates) {\n          if (indexOf(prevStates, 'select') >= 0) {\n            textEl.attr(layoutStore.oldLayoutSelect);\n          }\n          if (indexOf(prevStates, 'emphasis') >= 0) {\n            textEl.attr(layoutStore.oldLayoutEmphasis);\n          }\n        }\n        updateProps(textEl, newProps, seriesModel, dataIndex);\n      }\n      layoutStore.oldLayout = newProps;\n      if (textEl.states.select) {\n        var layoutSelect = layoutStore.oldLayoutSelect = {};\n        extendWithKeys(layoutSelect, newProps, LABEL_LAYOUT_PROPS);\n        extendWithKeys(layoutSelect, textEl.states.select, LABEL_LAYOUT_PROPS);\n      }\n      if (textEl.states.emphasis) {\n        var layoutEmphasis = layoutStore.oldLayoutEmphasis = {};\n        extendWithKeys(layoutEmphasis, newProps, LABEL_LAYOUT_PROPS);\n        extendWithKeys(layoutEmphasis, textEl.states.emphasis, LABEL_LAYOUT_PROPS);\n      }\n      animateLabelValue(textEl, dataIndex, data, seriesModel, seriesModel);\n    }\n    if (guideLine && !guideLine.ignore && !guideLine.invisible) {\n      var layoutStore = labelLineAnimationStore(guideLine);\n      var oldLayout = layoutStore.oldLayout;\n      var newLayout = {\n        points: guideLine.shape.points\n      };\n      if (!oldLayout) {\n        guideLine.setShape(newLayout);\n        guideLine.style.strokePercent = 0;\n        initProps(guideLine, {\n          style: {\n            strokePercent: 1\n          }\n        }, seriesModel);\n      } else {\n        guideLine.attr({\n          shape: oldLayout\n        });\n        updateProps(guideLine, {\n          shape: newLayout\n        }, seriesModel);\n      }\n      layoutStore.oldLayout = newLayout;\n    }\n  };\n  return LabelManager;\n}();\nexport default LabelManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner } from '../util/model.js';\nimport LabelManager from './LabelManager.js';\nvar getLabelManager = makeInner();\nexport function installLabelLayout(registers) {\n  registers.registerUpdateLifecycle('series:beforeupdate', function (ecModel, api, params) {\n    // TODO api provide an namespace that can save stuff per instance\n    var labelManager = getLabelManager(api).labelManager;\n    if (!labelManager) {\n      labelManager = getLabelManager(api).labelManager = new LabelManager();\n    }\n    labelManager.clearLabels();\n  });\n  registers.registerUpdateLifecycle('series:layoutlabels', function (ecModel, api, params) {\n    var labelManager = getLabelManager(api).labelManager;\n    params.updatedSeries.forEach(function (series) {\n      labelManager.addLabelsOfSeries(api.getViewOfSeriesModel(series));\n    });\n    labelManager.updateLayoutConfig(api);\n    labelManager.layout(api);\n    labelManager.processLabelsOverall();\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { Point, Path, Polyline } from '../util/graphic.js';\nimport PathProxy from 'zrender/lib/core/PathProxy.js';\nimport { normalizeRadian } from 'zrender/lib/contain/util.js';\nimport { cubicProjectPoint, quadraticProjectPoint } from 'zrender/lib/core/curve.js';\nimport { defaults, retrieve2 } from 'zrender/lib/core/util.js';\nimport { invert } from 'zrender/lib/core/matrix.js';\nimport * as vector from 'zrender/lib/core/vector.js';\nimport { DISPLAY_STATES, SPECIAL_STATES } from '../util/states.js';\nvar PI2 = Math.PI * 2;\nvar CMD = PathProxy.CMD;\nvar DEFAULT_SEARCH_SPACE = ['top', 'right', 'bottom', 'left'];\nfunction getCandidateAnchor(pos, distance, rect, outPt, outDir) {\n  var width = rect.width;\n  var height = rect.height;\n  switch (pos) {\n    case 'top':\n      outPt.set(rect.x + width / 2, rect.y - distance);\n      outDir.set(0, -1);\n      break;\n    case 'bottom':\n      outPt.set(rect.x + width / 2, rect.y + height + distance);\n      outDir.set(0, 1);\n      break;\n    case 'left':\n      outPt.set(rect.x - distance, rect.y + height / 2);\n      outDir.set(-1, 0);\n      break;\n    case 'right':\n      outPt.set(rect.x + width + distance, rect.y + height / 2);\n      outDir.set(1, 0);\n      break;\n  }\n}\nfunction projectPointToArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y, out) {\n  x -= cx;\n  y -= cy;\n  var d = Math.sqrt(x * x + y * y);\n  x /= d;\n  y /= d;\n  // Intersect point.\n  var ox = x * r + cx;\n  var oy = y * r + cy;\n  if (Math.abs(startAngle - endAngle) % PI2 < 1e-4) {\n    // Is a circle\n    out[0] = ox;\n    out[1] = oy;\n    return d - r;\n  }\n  if (anticlockwise) {\n    var tmp = startAngle;\n    startAngle = normalizeRadian(endAngle);\n    endAngle = normalizeRadian(tmp);\n  } else {\n    startAngle = normalizeRadian(startAngle);\n    endAngle = normalizeRadian(endAngle);\n  }\n  if (startAngle > endAngle) {\n    endAngle += PI2;\n  }\n  var angle = Math.atan2(y, x);\n  if (angle < 0) {\n    angle += PI2;\n  }\n  if (angle >= startAngle && angle <= endAngle || angle + PI2 >= startAngle && angle + PI2 <= endAngle) {\n    // Project point is on the arc.\n    out[0] = ox;\n    out[1] = oy;\n    return d - r;\n  }\n  var x1 = r * Math.cos(startAngle) + cx;\n  var y1 = r * Math.sin(startAngle) + cy;\n  var x2 = r * Math.cos(endAngle) + cx;\n  var y2 = r * Math.sin(endAngle) + cy;\n  var d1 = (x1 - x) * (x1 - x) + (y1 - y) * (y1 - y);\n  var d2 = (x2 - x) * (x2 - x) + (y2 - y) * (y2 - y);\n  if (d1 < d2) {\n    out[0] = x1;\n    out[1] = y1;\n    return Math.sqrt(d1);\n  } else {\n    out[0] = x2;\n    out[1] = y2;\n    return Math.sqrt(d2);\n  }\n}\nfunction projectPointToLine(x1, y1, x2, y2, x, y, out, limitToEnds) {\n  var dx = x - x1;\n  var dy = y - y1;\n  var dx1 = x2 - x1;\n  var dy1 = y2 - y1;\n  var lineLen = Math.sqrt(dx1 * dx1 + dy1 * dy1);\n  dx1 /= lineLen;\n  dy1 /= lineLen;\n  // dot product\n  var projectedLen = dx * dx1 + dy * dy1;\n  var t = projectedLen / lineLen;\n  if (limitToEnds) {\n    t = Math.min(Math.max(t, 0), 1);\n  }\n  t *= lineLen;\n  var ox = out[0] = x1 + t * dx1;\n  var oy = out[1] = y1 + t * dy1;\n  return Math.sqrt((ox - x) * (ox - x) + (oy - y) * (oy - y));\n}\nfunction projectPointToRect(x1, y1, width, height, x, y, out) {\n  if (width < 0) {\n    x1 = x1 + width;\n    width = -width;\n  }\n  if (height < 0) {\n    y1 = y1 + height;\n    height = -height;\n  }\n  var x2 = x1 + width;\n  var y2 = y1 + height;\n  var ox = out[0] = Math.min(Math.max(x, x1), x2);\n  var oy = out[1] = Math.min(Math.max(y, y1), y2);\n  return Math.sqrt((ox - x) * (ox - x) + (oy - y) * (oy - y));\n}\nvar tmpPt = [];\nfunction nearestPointOnRect(pt, rect, out) {\n  var dist = projectPointToRect(rect.x, rect.y, rect.width, rect.height, pt.x, pt.y, tmpPt);\n  out.set(tmpPt[0], tmpPt[1]);\n  return dist;\n}\n/**\n * Calculate min distance corresponding point.\n * This method won't evaluate if point is in the path.\n */\nfunction nearestPointOnPath(pt, path, out) {\n  var xi = 0;\n  var yi = 0;\n  var x0 = 0;\n  var y0 = 0;\n  var x1;\n  var y1;\n  var minDist = Infinity;\n  var data = path.data;\n  var x = pt.x;\n  var y = pt.y;\n  for (var i = 0; i < data.length;) {\n    var cmd = data[i++];\n    if (i === 1) {\n      xi = data[i];\n      yi = data[i + 1];\n      x0 = xi;\n      y0 = yi;\n    }\n    var d = minDist;\n    switch (cmd) {\n      case CMD.M:\n        // moveTo  subpath, \n        //  closePath \n        x0 = data[i++];\n        y0 = data[i++];\n        xi = x0;\n        yi = y0;\n        break;\n      case CMD.L:\n        d = projectPointToLine(xi, yi, data[i], data[i + 1], x, y, tmpPt, true);\n        xi = data[i++];\n        yi = data[i++];\n        break;\n      case CMD.C:\n        d = cubicProjectPoint(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y, tmpPt);\n        xi = data[i++];\n        yi = data[i++];\n        break;\n      case CMD.Q:\n        d = quadraticProjectPoint(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y, tmpPt);\n        xi = data[i++];\n        yi = data[i++];\n        break;\n      case CMD.A:\n        // TODO Arc \n        var cx = data[i++];\n        var cy = data[i++];\n        var rx = data[i++];\n        var ry = data[i++];\n        var theta = data[i++];\n        var dTheta = data[i++];\n        // TODO Arc \n        i += 1;\n        var anticlockwise = !!(1 - data[i++]);\n        x1 = Math.cos(theta) * rx + cx;\n        y1 = Math.sin(theta) * ry + cy;\n        //  arc \n        if (i <= 1) {\n          // \n          x0 = x1;\n          y0 = y1;\n        }\n        // zr scale, x\n        var _x = (x - cx) * ry / rx + cx;\n        d = projectPointToArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y, tmpPt);\n        xi = Math.cos(theta + dTheta) * rx + cx;\n        yi = Math.sin(theta + dTheta) * ry + cy;\n        break;\n      case CMD.R:\n        x0 = xi = data[i++];\n        y0 = yi = data[i++];\n        var width = data[i++];\n        var height = data[i++];\n        d = projectPointToRect(x0, y0, width, height, x, y, tmpPt);\n        break;\n      case CMD.Z:\n        d = projectPointToLine(xi, yi, x0, y0, x, y, tmpPt, true);\n        xi = x0;\n        yi = y0;\n        break;\n    }\n    if (d < minDist) {\n      minDist = d;\n      out.set(tmpPt[0], tmpPt[1]);\n    }\n  }\n  return minDist;\n}\n// Temporal variable for intermediate usage.\nvar pt0 = new Point();\nvar pt1 = new Point();\nvar pt2 = new Point();\nvar dir = new Point();\nvar dir2 = new Point();\n/**\n * Calculate a proper guide line based on the label position and graphic element definition\n * @param label\n * @param labelRect\n * @param target\n * @param targetRect\n */\nexport function updateLabelLinePoints(target, labelLineModel) {\n  if (!target) {\n    return;\n  }\n  var labelLine = target.getTextGuideLine();\n  var label = target.getTextContent();\n  // Needs to create text guide in each charts.\n  if (!(label && labelLine)) {\n    return;\n  }\n  var labelGuideConfig = target.textGuideLineConfig || {};\n  var points = [[0, 0], [0, 0], [0, 0]];\n  var searchSpace = labelGuideConfig.candidates || DEFAULT_SEARCH_SPACE;\n  var labelRect = label.getBoundingRect().clone();\n  labelRect.applyTransform(label.getComputedTransform());\n  var minDist = Infinity;\n  var anchorPoint = labelGuideConfig.anchor;\n  var targetTransform = target.getComputedTransform();\n  var targetInversedTransform = targetTransform && invert([], targetTransform);\n  var len = labelLineModel.get('length2') || 0;\n  if (anchorPoint) {\n    pt2.copy(anchorPoint);\n  }\n  for (var i = 0; i < searchSpace.length; i++) {\n    var candidate = searchSpace[i];\n    getCandidateAnchor(candidate, 0, labelRect, pt0, dir);\n    Point.scaleAndAdd(pt1, pt0, dir, len);\n    // Transform to target coord space.\n    pt1.transform(targetInversedTransform);\n    // Note: getBoundingRect will ensure the `path` being created.\n    var boundingRect = target.getBoundingRect();\n    var dist = anchorPoint ? anchorPoint.distance(pt1) : target instanceof Path ? nearestPointOnPath(pt1, target.path, pt2) : nearestPointOnRect(pt1, boundingRect, pt2);\n    // TODO pt2 is in the path\n    if (dist < minDist) {\n      minDist = dist;\n      // Transform back to global space.\n      pt1.transform(targetTransform);\n      pt2.transform(targetTransform);\n      pt2.toArray(points[0]);\n      pt1.toArray(points[1]);\n      pt0.toArray(points[2]);\n    }\n  }\n  limitTurnAngle(points, labelLineModel.get('minTurnAngle'));\n  labelLine.setShape({\n    points: points\n  });\n}\n// Temporal variable for the limitTurnAngle function\nvar tmpArr = [];\nvar tmpProjPoint = new Point();\n/**\n * Reduce the line segment attached to the label to limit the turn angle between two segments.\n * @param linePoints\n * @param minTurnAngle Radian of minimum turn angle. 0 - 180\n */\nexport function limitTurnAngle(linePoints, minTurnAngle) {\n  if (!(minTurnAngle <= 180 && minTurnAngle > 0)) {\n    return;\n  }\n  minTurnAngle = minTurnAngle / 180 * Math.PI;\n  // The line points can be\n  //      /pt1----pt2 (label)\n  //     /\n  // pt0/\n  pt0.fromArray(linePoints[0]);\n  pt1.fromArray(linePoints[1]);\n  pt2.fromArray(linePoints[2]);\n  Point.sub(dir, pt0, pt1);\n  Point.sub(dir2, pt2, pt1);\n  var len1 = dir.len();\n  var len2 = dir2.len();\n  if (len1 < 1e-3 || len2 < 1e-3) {\n    return;\n  }\n  dir.scale(1 / len1);\n  dir2.scale(1 / len2);\n  var angleCos = dir.dot(dir2);\n  var minTurnAngleCos = Math.cos(minTurnAngle);\n  if (minTurnAngleCos < angleCos) {\n    // Smaller than minTurnAngle\n    // Calculate project point of pt0 on pt1-pt2\n    var d = projectPointToLine(pt1.x, pt1.y, pt2.x, pt2.y, pt0.x, pt0.y, tmpArr, false);\n    tmpProjPoint.fromArray(tmpArr);\n    // Calculate new projected length with limited minTurnAngle and get the new connect point\n    tmpProjPoint.scaleAndAdd(dir2, d / Math.tan(Math.PI - minTurnAngle));\n    // Limit the new calculated connect point between pt1 and pt2.\n    var t = pt2.x !== pt1.x ? (tmpProjPoint.x - pt1.x) / (pt2.x - pt1.x) : (tmpProjPoint.y - pt1.y) / (pt2.y - pt1.y);\n    if (isNaN(t)) {\n      return;\n    }\n    if (t < 0) {\n      Point.copy(tmpProjPoint, pt1);\n    } else if (t > 1) {\n      Point.copy(tmpProjPoint, pt2);\n    }\n    tmpProjPoint.toArray(linePoints[1]);\n  }\n}\n/**\n * Limit the angle of line and the surface\n * @param maxSurfaceAngle Radian of minimum turn angle. 0 - 180. 0 is same direction to normal. 180 is opposite\n */\nexport function limitSurfaceAngle(linePoints, surfaceNormal, maxSurfaceAngle) {\n  if (!(maxSurfaceAngle <= 180 && maxSurfaceAngle > 0)) {\n    return;\n  }\n  maxSurfaceAngle = maxSurfaceAngle / 180 * Math.PI;\n  pt0.fromArray(linePoints[0]);\n  pt1.fromArray(linePoints[1]);\n  pt2.fromArray(linePoints[2]);\n  Point.sub(dir, pt1, pt0);\n  Point.sub(dir2, pt2, pt1);\n  var len1 = dir.len();\n  var len2 = dir2.len();\n  if (len1 < 1e-3 || len2 < 1e-3) {\n    return;\n  }\n  dir.scale(1 / len1);\n  dir2.scale(1 / len2);\n  var angleCos = dir.dot(surfaceNormal);\n  var maxSurfaceAngleCos = Math.cos(maxSurfaceAngle);\n  if (angleCos < maxSurfaceAngleCos) {\n    // Calculate project point of pt0 on pt1-pt2\n    var d = projectPointToLine(pt1.x, pt1.y, pt2.x, pt2.y, pt0.x, pt0.y, tmpArr, false);\n    tmpProjPoint.fromArray(tmpArr);\n    var HALF_PI = Math.PI / 2;\n    var angle2 = Math.acos(dir2.dot(surfaceNormal));\n    var newAngle = HALF_PI + angle2 - maxSurfaceAngle;\n    if (newAngle >= HALF_PI) {\n      // parallel\n      Point.copy(tmpProjPoint, pt2);\n    } else {\n      // Calculate new projected length with limited minTurnAngle and get the new connect point\n      tmpProjPoint.scaleAndAdd(dir2, d / Math.tan(Math.PI / 2 - newAngle));\n      // Limit the new calculated connect point between pt1 and pt2.\n      var t = pt2.x !== pt1.x ? (tmpProjPoint.x - pt1.x) / (pt2.x - pt1.x) : (tmpProjPoint.y - pt1.y) / (pt2.y - pt1.y);\n      if (isNaN(t)) {\n        return;\n      }\n      if (t < 0) {\n        Point.copy(tmpProjPoint, pt1);\n      } else if (t > 1) {\n        Point.copy(tmpProjPoint, pt2);\n      }\n    }\n    tmpProjPoint.toArray(linePoints[1]);\n  }\n}\nfunction setLabelLineState(labelLine, ignore, stateName, stateModel) {\n  var isNormal = stateName === 'normal';\n  var stateObj = isNormal ? labelLine : labelLine.ensureState(stateName);\n  // Make sure display.\n  stateObj.ignore = ignore;\n  // Set smooth\n  var smooth = stateModel.get('smooth');\n  if (smooth && smooth === true) {\n    smooth = 0.3;\n  }\n  stateObj.shape = stateObj.shape || {};\n  if (smooth > 0) {\n    stateObj.shape.smooth = smooth;\n  }\n  var styleObj = stateModel.getModel('lineStyle').getLineStyle();\n  isNormal ? labelLine.useStyle(styleObj) : stateObj.style = styleObj;\n}\nfunction buildLabelLinePath(path, shape) {\n  var smooth = shape.smooth;\n  var points = shape.points;\n  if (!points) {\n    return;\n  }\n  path.moveTo(points[0][0], points[0][1]);\n  if (smooth > 0 && points.length >= 3) {\n    var len1 = vector.dist(points[0], points[1]);\n    var len2 = vector.dist(points[1], points[2]);\n    if (!len1 || !len2) {\n      path.lineTo(points[1][0], points[1][1]);\n      path.lineTo(points[2][0], points[2][1]);\n      return;\n    }\n    var moveLen = Math.min(len1, len2) * smooth;\n    var midPoint0 = vector.lerp([], points[1], points[0], moveLen / len1);\n    var midPoint2 = vector.lerp([], points[1], points[2], moveLen / len2);\n    var midPoint1 = vector.lerp([], midPoint0, midPoint2, 0.5);\n    path.bezierCurveTo(midPoint0[0], midPoint0[1], midPoint0[0], midPoint0[1], midPoint1[0], midPoint1[1]);\n    path.bezierCurveTo(midPoint2[0], midPoint2[1], midPoint2[0], midPoint2[1], points[2][0], points[2][1]);\n  } else {\n    for (var i = 1; i < points.length; i++) {\n      path.lineTo(points[i][0], points[i][1]);\n    }\n  }\n}\n/**\n * Create a label line if necessary and set it's style.\n */\nexport function setLabelLineStyle(targetEl, statesModels, defaultStyle) {\n  var labelLine = targetEl.getTextGuideLine();\n  var label = targetEl.getTextContent();\n  if (!label) {\n    // Not show label line if there is no label.\n    if (labelLine) {\n      targetEl.removeTextGuideLine();\n    }\n    return;\n  }\n  var normalModel = statesModels.normal;\n  var showNormal = normalModel.get('show');\n  var labelIgnoreNormal = label.ignore;\n  for (var i = 0; i < DISPLAY_STATES.length; i++) {\n    var stateName = DISPLAY_STATES[i];\n    var stateModel = statesModels[stateName];\n    var isNormal = stateName === 'normal';\n    if (stateModel) {\n      var stateShow = stateModel.get('show');\n      var isLabelIgnored = isNormal ? labelIgnoreNormal : retrieve2(label.states[stateName] && label.states[stateName].ignore, labelIgnoreNormal);\n      if (isLabelIgnored // Not show when label is not shown in this state.\n      || !retrieve2(stateShow, showNormal) // Use normal state by default if not set.\n      ) {\n        var stateObj = isNormal ? labelLine : labelLine && labelLine.states[stateName];\n        if (stateObj) {\n          stateObj.ignore = true;\n        }\n        if (!!labelLine) {\n          setLabelLineState(labelLine, true, stateName, stateModel);\n        }\n        continue;\n      }\n      // Create labelLine if not exists\n      if (!labelLine) {\n        labelLine = new Polyline();\n        targetEl.setTextGuideLine(labelLine);\n        // Reset state of normal because it's new created.\n        // NOTE: NORMAL should always been the first!\n        if (!isNormal && (labelIgnoreNormal || !showNormal)) {\n          setLabelLineState(labelLine, true, 'normal', statesModels.normal);\n        }\n        // Use same state proxy.\n        if (targetEl.stateProxy) {\n          labelLine.stateProxy = targetEl.stateProxy;\n        }\n      }\n      setLabelLineState(labelLine, false, stateName, stateModel);\n    }\n  }\n  if (labelLine) {\n    defaults(labelLine.style, defaultStyle);\n    // Not fill.\n    labelLine.style.fill = null;\n    var showAbove = normalModel.get('showAbove');\n    var labelLineConfig = targetEl.textGuideLineConfig = targetEl.textGuideLineConfig || {};\n    labelLineConfig.showAbove = showAbove || false;\n    // Custom the buildPath.\n    labelLine.buildPath = buildLabelLinePath;\n  }\n}\nexport function getLabelLineStatesModels(itemModel, labelLineName) {\n  labelLineName = labelLineName || 'labelLine';\n  var statesModels = {\n    normal: itemModel.getModel(labelLineName)\n  };\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    statesModels[stateName] = itemModel.getModel([stateName, labelLineName]);\n  }\n  return statesModels;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { BoundingRect, OrientedBoundingRect } from '../util/graphic.js';\nexport function prepareLayoutList(input) {\n  var list = [];\n  for (var i = 0; i < input.length; i++) {\n    var rawItem = input[i];\n    if (rawItem.defaultAttr.ignore) {\n      continue;\n    }\n    var label = rawItem.label;\n    var transform = label.getComputedTransform();\n    // NOTE: Get bounding rect after getComputedTransform, or label may not been updated by the host el.\n    var localRect = label.getBoundingRect();\n    var isAxisAligned = !transform || transform[1] < 1e-5 && transform[2] < 1e-5;\n    var minMargin = label.style.margin || 0;\n    var globalRect = localRect.clone();\n    globalRect.applyTransform(transform);\n    globalRect.x -= minMargin / 2;\n    globalRect.y -= minMargin / 2;\n    globalRect.width += minMargin;\n    globalRect.height += minMargin;\n    var obb = isAxisAligned ? new OrientedBoundingRect(localRect, transform) : null;\n    list.push({\n      label: label,\n      labelLine: rawItem.labelLine,\n      rect: globalRect,\n      localRect: localRect,\n      obb: obb,\n      priority: rawItem.priority,\n      defaultAttr: rawItem.defaultAttr,\n      layoutOption: rawItem.computedLayoutOption,\n      axisAligned: isAxisAligned,\n      transform: transform\n    });\n  }\n  return list;\n}\nfunction shiftLayout(list, xyDim, sizeDim, minBound, maxBound, balanceShift) {\n  var len = list.length;\n  if (len < 2) {\n    return;\n  }\n  list.sort(function (a, b) {\n    return a.rect[xyDim] - b.rect[xyDim];\n  });\n  var lastPos = 0;\n  var delta;\n  var adjusted = false;\n  var shifts = [];\n  var totalShifts = 0;\n  for (var i = 0; i < len; i++) {\n    var item = list[i];\n    var rect = item.rect;\n    delta = rect[xyDim] - lastPos;\n    if (delta < 0) {\n      // shiftForward(i, len, -delta);\n      rect[xyDim] -= delta;\n      item.label[xyDim] -= delta;\n      adjusted = true;\n    }\n    var shift = Math.max(-delta, 0);\n    shifts.push(shift);\n    totalShifts += shift;\n    lastPos = rect[xyDim] + rect[sizeDim];\n  }\n  if (totalShifts > 0 && balanceShift) {\n    // Shift back to make the distribution more equally.\n    shiftList(-totalShifts / len, 0, len);\n  }\n  // TODO bleedMargin?\n  var first = list[0];\n  var last = list[len - 1];\n  var minGap;\n  var maxGap;\n  updateMinMaxGap();\n  // If ends exceed two bounds, squeeze at most 80%, then take the gap of two bounds.\n  minGap < 0 && squeezeGaps(-minGap, 0.8);\n  maxGap < 0 && squeezeGaps(maxGap, 0.8);\n  updateMinMaxGap();\n  takeBoundsGap(minGap, maxGap, 1);\n  takeBoundsGap(maxGap, minGap, -1);\n  // Handle bailout when there is not enough space.\n  updateMinMaxGap();\n  if (minGap < 0) {\n    squeezeWhenBailout(-minGap);\n  }\n  if (maxGap < 0) {\n    squeezeWhenBailout(maxGap);\n  }\n  function updateMinMaxGap() {\n    minGap = first.rect[xyDim] - minBound;\n    maxGap = maxBound - last.rect[xyDim] - last.rect[sizeDim];\n  }\n  function takeBoundsGap(gapThisBound, gapOtherBound, moveDir) {\n    if (gapThisBound < 0) {\n      // Move from other gap if can.\n      var moveFromMaxGap = Math.min(gapOtherBound, -gapThisBound);\n      if (moveFromMaxGap > 0) {\n        shiftList(moveFromMaxGap * moveDir, 0, len);\n        var remained = moveFromMaxGap + gapThisBound;\n        if (remained < 0) {\n          squeezeGaps(-remained * moveDir, 1);\n        }\n      } else {\n        squeezeGaps(-gapThisBound * moveDir, 1);\n      }\n    }\n  }\n  function shiftList(delta, start, end) {\n    if (delta !== 0) {\n      adjusted = true;\n    }\n    for (var i = start; i < end; i++) {\n      var item = list[i];\n      var rect = item.rect;\n      rect[xyDim] += delta;\n      item.label[xyDim] += delta;\n    }\n  }\n  // Squeeze gaps if the labels exceed margin.\n  function squeezeGaps(delta, maxSqeezePercent) {\n    var gaps = [];\n    var totalGaps = 0;\n    for (var i = 1; i < len; i++) {\n      var prevItemRect = list[i - 1].rect;\n      var gap = Math.max(list[i].rect[xyDim] - prevItemRect[xyDim] - prevItemRect[sizeDim], 0);\n      gaps.push(gap);\n      totalGaps += gap;\n    }\n    if (!totalGaps) {\n      return;\n    }\n    var squeezePercent = Math.min(Math.abs(delta) / totalGaps, maxSqeezePercent);\n    if (delta > 0) {\n      for (var i = 0; i < len - 1; i++) {\n        // Distribute the shift delta to all gaps.\n        var movement = gaps[i] * squeezePercent;\n        // Forward\n        shiftList(movement, 0, i + 1);\n      }\n    } else {\n      // Backward\n      for (var i = len - 1; i > 0; i--) {\n        // Distribute the shift delta to all gaps.\n        var movement = gaps[i - 1] * squeezePercent;\n        shiftList(-movement, i, len);\n      }\n    }\n  }\n  /**\n   * Squeeze to allow overlap if there is no more space available.\n   * Let other overlapping strategy like hideOverlap do the job instead of keep exceeding the bounds.\n   */\n  function squeezeWhenBailout(delta) {\n    var dir = delta < 0 ? -1 : 1;\n    delta = Math.abs(delta);\n    var moveForEachLabel = Math.ceil(delta / (len - 1));\n    for (var i = 0; i < len - 1; i++) {\n      if (dir > 0) {\n        // Forward\n        shiftList(moveForEachLabel, 0, i + 1);\n      } else {\n        // Backward\n        shiftList(-moveForEachLabel, len - i - 1, len);\n      }\n      delta -= moveForEachLabel;\n      if (delta <= 0) {\n        return;\n      }\n    }\n  }\n  return adjusted;\n}\n/**\n * Adjust labels on x direction to avoid overlap.\n */\nexport function shiftLayoutOnX(list, leftBound, rightBound,\n// If average the shifts on all labels and add them to 0\n// TODO: Not sure if should enable it.\n// Pros: The angle of lines will distribute more equally\n// Cons: In some layout. It may not what user wanted. like in pie. the label of last sector is usually changed unexpectedly.\nbalanceShift) {\n  return shiftLayout(list, 'x', 'width', leftBound, rightBound, balanceShift);\n}\n/**\n * Adjust labels on y direction to avoid overlap.\n */\nexport function shiftLayoutOnY(list, topBound, bottomBound,\n// If average the shifts on all labels and add them to 0\nbalanceShift) {\n  return shiftLayout(list, 'y', 'height', topBound, bottomBound, balanceShift);\n}\nexport function hideOverlap(labelList) {\n  var displayedLabels = [];\n  // TODO, render overflow visible first, put in the displayedLabels.\n  labelList.sort(function (a, b) {\n    return b.priority - a.priority;\n  });\n  var globalRect = new BoundingRect(0, 0, 0, 0);\n  function hideEl(el) {\n    if (!el.ignore) {\n      // Show on emphasis.\n      var emphasisState = el.ensureState('emphasis');\n      if (emphasisState.ignore == null) {\n        emphasisState.ignore = false;\n      }\n    }\n    el.ignore = true;\n  }\n  for (var i = 0; i < labelList.length; i++) {\n    var labelItem = labelList[i];\n    var isAxisAligned = labelItem.axisAligned;\n    var localRect = labelItem.localRect;\n    var transform = labelItem.transform;\n    var label = labelItem.label;\n    var labelLine = labelItem.labelLine;\n    globalRect.copy(labelItem.rect);\n    // Add a threshold because layout may be aligned precisely.\n    globalRect.width -= 0.1;\n    globalRect.height -= 0.1;\n    globalRect.x += 0.05;\n    globalRect.y += 0.05;\n    var obb = labelItem.obb;\n    var overlapped = false;\n    for (var j = 0; j < displayedLabels.length; j++) {\n      var existsTextCfg = displayedLabels[j];\n      // Fast rejection.\n      if (!globalRect.intersect(existsTextCfg.rect)) {\n        continue;\n      }\n      if (isAxisAligned && existsTextCfg.axisAligned) {\n        // Is overlapped\n        overlapped = true;\n        break;\n      }\n      if (!existsTextCfg.obb) {\n        // If self is not axis aligned. But other is.\n        existsTextCfg.obb = new OrientedBoundingRect(existsTextCfg.localRect, existsTextCfg.transform);\n      }\n      if (!obb) {\n        // If self is axis aligned. But other is not.\n        obb = new OrientedBoundingRect(localRect, transform);\n      }\n      if (obb.intersect(existsTextCfg.obb)) {\n        overlapped = true;\n        break;\n      }\n    }\n    // TODO Callback to determine if this overlap should be handled?\n    if (overlapped) {\n      hideEl(label);\n      labelLine && hideEl(labelLine);\n    } else {\n      label.attr('ignore', labelItem.defaultAttr.ignore);\n      labelLine && labelLine.attr('ignore', labelItem.defaultAttr.labelGuideIgnore);\n      displayedLabels.push(labelItem);\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { isFunction, retrieve2, extend, keys, trim } from 'zrender/lib/core/util.js';\nimport { SPECIAL_STATES, DISPLAY_STATES } from '../util/states.js';\nimport { deprecateReplaceLog } from '../util/log.js';\nimport { makeInner, interpolateRawValues } from '../util/model.js';\nimport { initProps, updateProps } from '../util/graphic.js';\nvar EMPTY_OBJ = {};\nexport function setLabelText(label, labelTexts) {\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    var text = labelTexts[stateName];\n    var state = label.ensureState(stateName);\n    state.style = state.style || {};\n    state.style.text = text;\n  }\n  var oldStates = label.currentStates.slice();\n  label.clearStates(true);\n  label.setStyle({\n    text: labelTexts.normal\n  });\n  label.useStates(oldStates, true);\n}\nfunction getLabelText(opt, stateModels, interpolatedValue) {\n  var labelFetcher = opt.labelFetcher;\n  var labelDataIndex = opt.labelDataIndex;\n  var labelDimIndex = opt.labelDimIndex;\n  var normalModel = stateModels.normal;\n  var baseText;\n  if (labelFetcher) {\n    baseText = labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex, normalModel && normalModel.get('formatter'), interpolatedValue != null ? {\n      interpolatedValue: interpolatedValue\n    } : null);\n  }\n  if (baseText == null) {\n    baseText = isFunction(opt.defaultText) ? opt.defaultText(labelDataIndex, opt, interpolatedValue) : opt.defaultText;\n  }\n  var statesText = {\n    normal: baseText\n  };\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    var stateModel = stateModels[stateName];\n    statesText[stateName] = retrieve2(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, stateName, null, labelDimIndex, stateModel && stateModel.get('formatter')) : null, baseText);\n  }\n  return statesText;\n}\nfunction setLabelStyle(targetEl, labelStatesModels, opt, stateSpecified\n// TODO specified position?\n) {\n  opt = opt || EMPTY_OBJ;\n  var isSetOnText = targetEl instanceof ZRText;\n  var needsCreateText = false;\n  for (var i = 0; i < DISPLAY_STATES.length; i++) {\n    var stateModel = labelStatesModels[DISPLAY_STATES[i]];\n    if (stateModel && stateModel.getShallow('show')) {\n      needsCreateText = true;\n      break;\n    }\n  }\n  var textContent = isSetOnText ? targetEl : targetEl.getTextContent();\n  if (needsCreateText) {\n    if (!isSetOnText) {\n      // Reuse the previous\n      if (!textContent) {\n        textContent = new ZRText();\n        targetEl.setTextContent(textContent);\n      }\n      // Use same state proxy\n      if (targetEl.stateProxy) {\n        textContent.stateProxy = targetEl.stateProxy;\n      }\n    }\n    var labelStatesTexts = getLabelText(opt, labelStatesModels);\n    var normalModel = labelStatesModels.normal;\n    var showNormal = !!normalModel.getShallow('show');\n    var normalStyle = createTextStyle(normalModel, stateSpecified && stateSpecified.normal, opt, false, !isSetOnText);\n    normalStyle.text = labelStatesTexts.normal;\n    if (!isSetOnText) {\n      // Always create new\n      targetEl.setTextConfig(createTextConfig(normalModel, opt, false));\n    }\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\n      var stateName = SPECIAL_STATES[i];\n      var stateModel = labelStatesModels[stateName];\n      if (stateModel) {\n        var stateObj = textContent.ensureState(stateName);\n        var stateShow = !!retrieve2(stateModel.getShallow('show'), showNormal);\n        if (stateShow !== showNormal) {\n          stateObj.ignore = !stateShow;\n        }\n        stateObj.style = createTextStyle(stateModel, stateSpecified && stateSpecified[stateName], opt, true, !isSetOnText);\n        stateObj.style.text = labelStatesTexts[stateName];\n        if (!isSetOnText) {\n          var targetElEmphasisState = targetEl.ensureState(stateName);\n          targetElEmphasisState.textConfig = createTextConfig(stateModel, opt, true);\n        }\n      }\n    }\n    // PENDING: if there is many requirements that emphasis position\n    // need to be different from normal position, we might consider\n    // auto silent is those cases.\n    textContent.silent = !!normalModel.getShallow('silent');\n    // Keep x and y\n    if (textContent.style.x != null) {\n      normalStyle.x = textContent.style.x;\n    }\n    if (textContent.style.y != null) {\n      normalStyle.y = textContent.style.y;\n    }\n    textContent.ignore = !showNormal;\n    // Always create new style.\n    textContent.useStyle(normalStyle);\n    textContent.dirty();\n    if (opt.enableTextSetter) {\n      labelInner(textContent).setLabelText = function (interpolatedValue) {\n        var labelStatesTexts = getLabelText(opt, labelStatesModels, interpolatedValue);\n        setLabelText(textContent, labelStatesTexts);\n      };\n    }\n  } else if (textContent) {\n    // Not display rich text.\n    textContent.ignore = true;\n  }\n  targetEl.dirty();\n}\nexport { setLabelStyle };\nexport function getLabelStatesModels(itemModel, labelName) {\n  labelName = labelName || 'label';\n  var statesModels = {\n    normal: itemModel.getModel(labelName)\n  };\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    statesModels[stateName] = itemModel.getModel([stateName, labelName]);\n  }\n  return statesModels;\n}\n/**\n * Set basic textStyle properties.\n */\nexport function createTextStyle(textStyleModel, specifiedTextStyle,\n// Fixed style in the code. Can't be set by model.\nopt, isNotNormal, isAttached // If text is attached on an element. If so, auto color will handling in zrender.\n) {\n  var textStyle = {};\n  setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached);\n  specifiedTextStyle && extend(textStyle, specifiedTextStyle);\n  // textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n  return textStyle;\n}\nexport function createTextConfig(textStyleModel, opt, isNotNormal) {\n  opt = opt || {};\n  var textConfig = {};\n  var labelPosition;\n  var labelRotate = textStyleModel.getShallow('rotate');\n  var labelDistance = retrieve2(textStyleModel.getShallow('distance'), isNotNormal ? null : 5);\n  var labelOffset = textStyleModel.getShallow('offset');\n  labelPosition = textStyleModel.getShallow('position') || (isNotNormal ? null : 'inside');\n  // 'outside' is not a valid zr textPostion value, but used\n  // in bar series, and magric type should be considered.\n  labelPosition === 'outside' && (labelPosition = opt.defaultOutsidePosition || 'top');\n  if (labelPosition != null) {\n    textConfig.position = labelPosition;\n  }\n  if (labelOffset != null) {\n    textConfig.offset = labelOffset;\n  }\n  if (labelRotate != null) {\n    labelRotate *= Math.PI / 180;\n    textConfig.rotation = labelRotate;\n  }\n  if (labelDistance != null) {\n    textConfig.distance = labelDistance;\n  }\n  // fill and auto is determined by the color of path fill if it's not specified by developers.\n  textConfig.outsideFill = textStyleModel.get('color') === 'inherit' ? opt.inheritColor || null : 'auto';\n  return textConfig;\n}\n/**\n * The uniform entry of set text style, that is, retrieve style definitions\n * from `model` and set to `textStyle` object.\n *\n * Never in merge mode, but in overwrite mode, that is, all of the text style\n * properties will be set. (Consider the states of normal and emphasis and\n * default value can be adopted, merge would make the logic too complicated\n * to manage.)\n */\nfunction setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached) {\n  // Consider there will be abnormal when merge hover style to normal style if given default value.\n  opt = opt || EMPTY_OBJ;\n  var ecModel = textStyleModel.ecModel;\n  var globalTextStyle = ecModel && ecModel.option.textStyle;\n  // Consider case:\n  // {\n  //     data: [{\n  //         value: 12,\n  //         label: {\n  //             rich: {\n  //                 // no 'a' here but using parent 'a'.\n  //             }\n  //         }\n  //     }],\n  //     rich: {\n  //         a: { ... }\n  //     }\n  // }\n  var richItemNames = getRichItemNames(textStyleModel);\n  var richResult;\n  if (richItemNames) {\n    richResult = {};\n    for (var name_1 in richItemNames) {\n      if (richItemNames.hasOwnProperty(name_1)) {\n        // Cascade is supported in rich.\n        var richTextStyle = textStyleModel.getModel(['rich', name_1]);\n        // In rich, never `disableBox`.\n        // FIXME: consider `label: {formatter: '{a|xx}', color: 'blue', rich: {a: {}}}`,\n        // the default color `'blue'` will not be adopted if no color declared in `rich`.\n        // That might confuses users. So probably we should put `textStyleModel` as the\n        // root ancestor of the `richTextStyle`. But that would be a break change.\n        setTokenTextStyle(richResult[name_1] = {}, richTextStyle, globalTextStyle, opt, isNotNormal, isAttached, false, true);\n      }\n    }\n  }\n  if (richResult) {\n    textStyle.rich = richResult;\n  }\n  var overflow = textStyleModel.get('overflow');\n  if (overflow) {\n    textStyle.overflow = overflow;\n  }\n  var margin = textStyleModel.get('minMargin');\n  if (margin != null) {\n    textStyle.margin = margin;\n  }\n  setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, true, false);\n}\n// Consider case:\n// {\n//     data: [{\n//         value: 12,\n//         label: {\n//             rich: {\n//                 // no 'a' here but using parent 'a'.\n//             }\n//         }\n//     }],\n//     rich: {\n//         a: { ... }\n//     }\n// }\n// TODO TextStyleModel\nfunction getRichItemNames(textStyleModel) {\n  // Use object to remove duplicated names.\n  var richItemNameMap;\n  while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\n    var rich = (textStyleModel.option || EMPTY_OBJ).rich;\n    if (rich) {\n      richItemNameMap = richItemNameMap || {};\n      var richKeys = keys(rich);\n      for (var i = 0; i < richKeys.length; i++) {\n        var richKey = richKeys[i];\n        richItemNameMap[richKey] = 1;\n      }\n    }\n    textStyleModel = textStyleModel.parentModel;\n  }\n  return richItemNameMap;\n}\nvar TEXT_PROPS_WITH_GLOBAL = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'];\nvar TEXT_PROPS_SELF = ['align', 'lineHeight', 'width', 'height', 'tag', 'verticalAlign', 'ellipsis'];\nvar TEXT_PROPS_BOX = ['padding', 'borderWidth', 'borderRadius', 'borderDashOffset', 'backgroundColor', 'borderColor', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\nfunction setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, isBlock, inRich) {\n  // In merge mode, default value should not be given.\n  globalTextStyle = !isNotNormal && globalTextStyle || EMPTY_OBJ;\n  var inheritColor = opt && opt.inheritColor;\n  var fillColor = textStyleModel.getShallow('color');\n  var strokeColor = textStyleModel.getShallow('textBorderColor');\n  var opacity = retrieve2(textStyleModel.getShallow('opacity'), globalTextStyle.opacity);\n  if (fillColor === 'inherit' || fillColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (fillColor === 'auto') {\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n    if (inheritColor) {\n      fillColor = inheritColor;\n    } else {\n      fillColor = null;\n    }\n  }\n  if (strokeColor === 'inherit' || strokeColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (strokeColor === 'auto') {\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n    if (inheritColor) {\n      strokeColor = inheritColor;\n    } else {\n      strokeColor = null;\n    }\n  }\n  if (!isAttached) {\n    // Only use default global textStyle.color if text is individual.\n    // Otherwise it will use the strategy of attached text color because text may be on a path.\n    fillColor = fillColor || globalTextStyle.color;\n    strokeColor = strokeColor || globalTextStyle.textBorderColor;\n  }\n  if (fillColor != null) {\n    textStyle.fill = fillColor;\n  }\n  if (strokeColor != null) {\n    textStyle.stroke = strokeColor;\n  }\n  var textBorderWidth = retrieve2(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\n  if (textBorderWidth != null) {\n    textStyle.lineWidth = textBorderWidth;\n  }\n  var textBorderType = retrieve2(textStyleModel.getShallow('textBorderType'), globalTextStyle.textBorderType);\n  if (textBorderType != null) {\n    textStyle.lineDash = textBorderType;\n  }\n  var textBorderDashOffset = retrieve2(textStyleModel.getShallow('textBorderDashOffset'), globalTextStyle.textBorderDashOffset);\n  if (textBorderDashOffset != null) {\n    textStyle.lineDashOffset = textBorderDashOffset;\n  }\n  if (!isNotNormal && opacity == null && !inRich) {\n    opacity = opt && opt.defaultOpacity;\n  }\n  if (opacity != null) {\n    textStyle.opacity = opacity;\n  }\n  // TODO\n  if (!isNotNormal && !isAttached) {\n    // Set default finally.\n    if (textStyle.fill == null && opt.inheritColor) {\n      textStyle.fill = opt.inheritColor;\n    }\n  }\n  // Do not use `getFont` here, because merge should be supported, where\n  // part of these properties may be changed in emphasis style, and the\n  // others should remain their original value got from normal style.\n  for (var i = 0; i < TEXT_PROPS_WITH_GLOBAL.length; i++) {\n    var key = TEXT_PROPS_WITH_GLOBAL[i];\n    var val = retrieve2(textStyleModel.getShallow(key), globalTextStyle[key]);\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n  for (var i = 0; i < TEXT_PROPS_SELF.length; i++) {\n    var key = TEXT_PROPS_SELF[i];\n    var val = textStyleModel.getShallow(key);\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n  if (textStyle.verticalAlign == null) {\n    var baseline = textStyleModel.getShallow('baseline');\n    if (baseline != null) {\n      textStyle.verticalAlign = baseline;\n    }\n  }\n  if (!isBlock || !opt.disableBox) {\n    for (var i = 0; i < TEXT_PROPS_BOX.length; i++) {\n      var key = TEXT_PROPS_BOX[i];\n      var val = textStyleModel.getShallow(key);\n      if (val != null) {\n        textStyle[key] = val;\n      }\n    }\n    var borderType = textStyleModel.getShallow('borderType');\n    if (borderType != null) {\n      textStyle.borderDash = borderType;\n    }\n    if ((textStyle.backgroundColor === 'auto' || textStyle.backgroundColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.backgroundColor === 'auto') {\n          deprecateReplaceLog('backgroundColor: \\'auto\\'', 'backgroundColor: \\'inherit\\'');\n        }\n      }\n      textStyle.backgroundColor = inheritColor;\n    }\n    if ((textStyle.borderColor === 'auto' || textStyle.borderColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.borderColor === 'auto') {\n          deprecateReplaceLog('borderColor: \\'auto\\'', 'borderColor: \\'inherit\\'');\n        }\n      }\n      textStyle.borderColor = inheritColor;\n    }\n  }\n}\nexport function getFont(opt, ecModel) {\n  var gTextStyleModel = ecModel && ecModel.getModel('textStyle');\n  return trim([\n  // FIXME in node-canvas fontWeight is before fontStyle\n  opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '', opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '', (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px', opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'].join(' '));\n}\nexport var labelInner = makeInner();\nexport function setLabelValueAnimation(label, labelStatesModels, value, getDefaultText) {\n  if (!label) {\n    return;\n  }\n  var obj = labelInner(label);\n  obj.prevValue = obj.value;\n  obj.value = value;\n  var normalLabelModel = labelStatesModels.normal;\n  obj.valueAnimation = normalLabelModel.get('valueAnimation');\n  if (obj.valueAnimation) {\n    obj.precision = normalLabelModel.get('precision');\n    obj.defaultInterpolatedText = getDefaultText;\n    obj.statesModels = labelStatesModels;\n  }\n}\nexport function animateLabelValue(textEl, dataIndex, data, animatableModel, labelFetcher) {\n  var labelInnerStore = labelInner(textEl);\n  if (!labelInnerStore.valueAnimation || labelInnerStore.prevValue === labelInnerStore.value) {\n    // Value not changed, no new label animation\n    return;\n  }\n  var defaultInterpolatedText = labelInnerStore.defaultInterpolatedText;\n  // Consider the case that being animating, do not use the `obj.value`,\n  // Otherwise it will jump to the `obj.value` when this new animation started.\n  var currValue = retrieve2(labelInnerStore.interpolatedValue, labelInnerStore.prevValue);\n  var targetValue = labelInnerStore.value;\n  function during(percent) {\n    var interpolated = interpolateRawValues(data, labelInnerStore.precision, currValue, targetValue, percent);\n    labelInnerStore.interpolatedValue = percent === 1 ? null : interpolated;\n    var labelText = getLabelText({\n      labelDataIndex: dataIndex,\n      labelFetcher: labelFetcher,\n      defaultText: defaultInterpolatedText ? defaultInterpolatedText(interpolated) : interpolated + ''\n    }, labelInnerStore.statesModels, interpolated);\n    setLabelText(textEl, labelText);\n  }\n  textEl.percent = 0;\n  (labelInnerStore.prevValue == null ? initProps : updateProps)(textEl, {\n    // percent is used to prevent animation from being aborted #15916\n    percent: 1\n  }, animatableModel, dataIndex, null, during);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { calculateTextPosition } from 'zrender/lib/contain/text.js';\nimport { isArray, isNumber } from 'zrender/lib/core/util.js';\nexport function createSectorCalculateTextPosition(positionMapping, opts) {\n  opts = opts || {};\n  var isRoundCap = opts.isRoundCap;\n  return function (out, opts, boundingRect) {\n    var textPosition = opts.position;\n    if (!textPosition || textPosition instanceof Array) {\n      return calculateTextPosition(out, opts, boundingRect);\n    }\n    var mappedSectorPosition = positionMapping(textPosition);\n    var distance = opts.distance != null ? opts.distance : 5;\n    var sector = this.shape;\n    var cx = sector.cx;\n    var cy = sector.cy;\n    var r = sector.r;\n    var r0 = sector.r0;\n    var middleR = (r + r0) / 2;\n    var startAngle = sector.startAngle;\n    var endAngle = sector.endAngle;\n    var middleAngle = (startAngle + endAngle) / 2;\n    var extraDist = isRoundCap ? Math.abs(r - r0) / 2 : 0;\n    var mathCos = Math.cos;\n    var mathSin = Math.sin;\n    // base position: top-left\n    var x = cx + r * mathCos(startAngle);\n    var y = cy + r * mathSin(startAngle);\n    var textAlign = 'left';\n    var textVerticalAlign = 'top';\n    switch (mappedSectorPosition) {\n      case 'startArc':\n        x = cx + (r0 - distance) * mathCos(middleAngle);\n        y = cy + (r0 - distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'top';\n        break;\n      case 'insideStartArc':\n        x = cx + (r0 + distance) * mathCos(middleAngle);\n        y = cy + (r0 + distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n      case 'startAngle':\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, distance + extraDist, false);\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, distance + extraDist, false);\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n      case 'insideStartAngle':\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, -distance + extraDist, false);\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, -distance + extraDist, false);\n        textAlign = 'left';\n        textVerticalAlign = 'middle';\n        break;\n      case 'middle':\n        x = cx + middleR * mathCos(middleAngle);\n        y = cy + middleR * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'middle';\n        break;\n      case 'endArc':\n        x = cx + (r + distance) * mathCos(middleAngle);\n        y = cy + (r + distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n      case 'insideEndArc':\n        x = cx + (r - distance) * mathCos(middleAngle);\n        y = cy + (r - distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'top';\n        break;\n      case 'endAngle':\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, distance + extraDist, true);\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, distance + extraDist, true);\n        textAlign = 'left';\n        textVerticalAlign = 'middle';\n        break;\n      case 'insideEndAngle':\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, -distance + extraDist, true);\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, -distance + extraDist, true);\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n      default:\n        return calculateTextPosition(out, opts, boundingRect);\n    }\n    out = out || {};\n    out.x = x;\n    out.y = y;\n    out.align = textAlign;\n    out.verticalAlign = textVerticalAlign;\n    return out;\n  };\n}\nexport function setSectorTextRotation(sector, textPosition, positionMapping, rotateType) {\n  if (isNumber(rotateType)) {\n    // user-set rotation\n    sector.setTextConfig({\n      rotation: rotateType\n    });\n    return;\n  } else if (isArray(textPosition)) {\n    // user-set position, use 0 as auto rotation\n    sector.setTextConfig({\n      rotation: 0\n    });\n    return;\n  }\n  var shape = sector.shape;\n  var startAngle = shape.clockwise ? shape.startAngle : shape.endAngle;\n  var endAngle = shape.clockwise ? shape.endAngle : shape.startAngle;\n  var middleAngle = (startAngle + endAngle) / 2;\n  var anchorAngle;\n  var mappedSectorPosition = positionMapping(textPosition);\n  switch (mappedSectorPosition) {\n    case 'startArc':\n    case 'insideStartArc':\n    case 'middle':\n    case 'insideEndArc':\n    case 'endArc':\n      anchorAngle = middleAngle;\n      break;\n    case 'startAngle':\n    case 'insideStartAngle':\n      anchorAngle = startAngle;\n      break;\n    case 'endAngle':\n    case 'insideEndAngle':\n      anchorAngle = endAngle;\n      break;\n    default:\n      sector.setTextConfig({\n        rotation: 0\n      });\n      return;\n  }\n  var rotate = Math.PI * 1.5 - anchorAngle;\n  /**\n   * TODO: labels with rotate > Math.PI / 2 should be rotate another\n   * half round flipped to increase readability. However, only middle\n   * position supports this for now, because in other positions, the\n   * anchor point is not at the center of the text, so the positions\n   * after rotating is not as expected.\n   */\n  if (mappedSectorPosition === 'middle' && rotate > Math.PI / 2 && rotate < Math.PI * 1.5) {\n    rotate -= Math.PI;\n  }\n  sector.setTextConfig({\n    rotation: rotate\n  });\n}\nfunction adjustAngleDistanceX(angle, distance, isEnd) {\n  return distance * Math.sin(angle) * (isEnd ? -1 : 1);\n}\nfunction adjustAngleDistanceY(angle, distance, isEnd) {\n  return distance * Math.cos(angle) * (isEnd ? 1 : -1);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, defaults, keys } from 'zrender/lib/core/util.js';\nimport { parsePercent } from '../util/number.js';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper.js';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\nimport { createFloat32Array } from '../util/vendor.js';\nvar STACK_PREFIX = '__ec_stack_';\nfunction getSeriesStackId(seriesModel) {\n  return seriesModel.get('stack') || STACK_PREFIX + seriesModel.seriesIndex;\n}\nfunction getAxisKey(axis) {\n  return axis.dim + axis.index;\n}\n/**\n * @return {Object} {width, offset, offsetCenter} If axis.type is not 'category', return undefined.\n */\nexport function getLayoutOnAxis(opt) {\n  var params = [];\n  var baseAxis = opt.axis;\n  var axisKey = 'axis0';\n  if (baseAxis.type !== 'category') {\n    return;\n  }\n  var bandWidth = baseAxis.getBandWidth();\n  for (var i = 0; i < opt.count || 0; i++) {\n    params.push(defaults({\n      bandWidth: bandWidth,\n      axisKey: axisKey,\n      stackId: STACK_PREFIX + i\n    }, opt));\n  }\n  var widthAndOffsets = doCalBarWidthAndOffset(params);\n  var result = [];\n  for (var i = 0; i < opt.count; i++) {\n    var item = widthAndOffsets[axisKey][STACK_PREFIX + i];\n    item.offsetCenter = item.offset + item.width / 2;\n    result.push(item);\n  }\n  return result;\n}\nexport function prepareLayoutBarSeries(seriesType, ecModel) {\n  var seriesModels = [];\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    // Check series coordinate, do layout for cartesian2d only\n    if (isOnCartesian(seriesModel)) {\n      seriesModels.push(seriesModel);\n    }\n  });\n  return seriesModels;\n}\n/**\n * Map from (baseAxis.dim + '_' + baseAxis.index) to min gap of two adjacent\n * values.\n * This works for time axes, value axes, and log axes.\n * For a single time axis, return value is in the form like\n * {'x_0': [1000000]}.\n * The value of 1000000 is in milliseconds.\n */\nfunction getValueAxesMinGaps(barSeries) {\n  /**\n   * Map from axis.index to values.\n   * For a single time axis, axisValues is in the form like\n   * {'x_0': [1495555200000, 1495641600000, 1495728000000]}.\n   * Items in axisValues[x], e.g. 1495555200000, are time values of all\n   * series.\n   */\n  var axisValues = {};\n  each(barSeries, function (seriesModel) {\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    if (baseAxis.type !== 'time' && baseAxis.type !== 'value') {\n      return;\n    }\n    var data = seriesModel.getData();\n    var key = baseAxis.dim + '_' + baseAxis.index;\n    var dimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\n    var store = data.getStore();\n    for (var i = 0, cnt = store.count(); i < cnt; ++i) {\n      var value = store.get(dimIdx, i);\n      if (!axisValues[key]) {\n        // No previous data for the axis\n        axisValues[key] = [value];\n      } else {\n        // No value in previous series\n        axisValues[key].push(value);\n      }\n      // Ignore duplicated time values in the same axis\n    }\n  });\n\n  var axisMinGaps = {};\n  for (var key in axisValues) {\n    if (axisValues.hasOwnProperty(key)) {\n      var valuesInAxis = axisValues[key];\n      if (valuesInAxis) {\n        // Sort axis values into ascending order to calculate gaps\n        valuesInAxis.sort(function (a, b) {\n          return a - b;\n        });\n        var min = null;\n        for (var j = 1; j < valuesInAxis.length; ++j) {\n          var delta = valuesInAxis[j] - valuesInAxis[j - 1];\n          if (delta > 0) {\n            // Ignore 0 delta because they are of the same axis value\n            min = min === null ? delta : Math.min(min, delta);\n          }\n        }\n        // Set to null if only have one data\n        axisMinGaps[key] = min;\n      }\n    }\n  }\n  return axisMinGaps;\n}\nexport function makeColumnLayout(barSeries) {\n  var axisMinGaps = getValueAxesMinGaps(barSeries);\n  var seriesInfoList = [];\n  each(barSeries, function (seriesModel) {\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var axisExtent = baseAxis.getExtent();\n    var bandWidth;\n    if (baseAxis.type === 'category') {\n      bandWidth = baseAxis.getBandWidth();\n    } else if (baseAxis.type === 'value' || baseAxis.type === 'time') {\n      var key = baseAxis.dim + '_' + baseAxis.index;\n      var minGap = axisMinGaps[key];\n      var extentSpan = Math.abs(axisExtent[1] - axisExtent[0]);\n      var scale = baseAxis.scale.getExtent();\n      var scaleSpan = Math.abs(scale[1] - scale[0]);\n      bandWidth = minGap ? extentSpan / scaleSpan * minGap : extentSpan; // When there is only one data value\n    } else {\n      var data = seriesModel.getData();\n      bandWidth = Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\n    }\n    var barWidth = parsePercent(seriesModel.get('barWidth'), bandWidth);\n    var barMaxWidth = parsePercent(seriesModel.get('barMaxWidth'), bandWidth);\n    var barMinWidth = parsePercent(\n    // barMinWidth by default is 0.5 / 1 in cartesian. Because in value axis,\n    // the auto-calculated bar width might be less than 0.5 / 1.\n    seriesModel.get('barMinWidth') || (isInLargeMode(seriesModel) ? 0.5 : 1), bandWidth);\n    var barGap = seriesModel.get('barGap');\n    var barCategoryGap = seriesModel.get('barCategoryGap');\n    seriesInfoList.push({\n      bandWidth: bandWidth,\n      barWidth: barWidth,\n      barMaxWidth: barMaxWidth,\n      barMinWidth: barMinWidth,\n      barGap: barGap,\n      barCategoryGap: barCategoryGap,\n      axisKey: getAxisKey(baseAxis),\n      stackId: getSeriesStackId(seriesModel)\n    });\n  });\n  return doCalBarWidthAndOffset(seriesInfoList);\n}\nfunction doCalBarWidthAndOffset(seriesInfoList) {\n  // Columns info on each category axis. Key is cartesian name\n  var columnsMap = {};\n  each(seriesInfoList, function (seriesInfo, idx) {\n    var axisKey = seriesInfo.axisKey;\n    var bandWidth = seriesInfo.bandWidth;\n    var columnsOnAxis = columnsMap[axisKey] || {\n      bandWidth: bandWidth,\n      remainedWidth: bandWidth,\n      autoWidthCount: 0,\n      categoryGap: null,\n      gap: '20%',\n      stacks: {}\n    };\n    var stacks = columnsOnAxis.stacks;\n    columnsMap[axisKey] = columnsOnAxis;\n    var stackId = seriesInfo.stackId;\n    if (!stacks[stackId]) {\n      columnsOnAxis.autoWidthCount++;\n    }\n    stacks[stackId] = stacks[stackId] || {\n      width: 0,\n      maxWidth: 0\n    };\n    // Caution: In a single coordinate system, these barGrid attributes\n    // will be shared by series. Consider that they have default values,\n    // only the attributes set on the last series will work.\n    // Do not change this fact unless there will be a break change.\n    var barWidth = seriesInfo.barWidth;\n    if (barWidth && !stacks[stackId].width) {\n      // See #6312, do not restrict width.\n      stacks[stackId].width = barWidth;\n      barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\n      columnsOnAxis.remainedWidth -= barWidth;\n    }\n    var barMaxWidth = seriesInfo.barMaxWidth;\n    barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\n    var barMinWidth = seriesInfo.barMinWidth;\n    barMinWidth && (stacks[stackId].minWidth = barMinWidth);\n    var barGap = seriesInfo.barGap;\n    barGap != null && (columnsOnAxis.gap = barGap);\n    var barCategoryGap = seriesInfo.barCategoryGap;\n    barCategoryGap != null && (columnsOnAxis.categoryGap = barCategoryGap);\n  });\n  var result = {};\n  each(columnsMap, function (columnsOnAxis, coordSysName) {\n    result[coordSysName] = {};\n    var stacks = columnsOnAxis.stacks;\n    var bandWidth = columnsOnAxis.bandWidth;\n    var categoryGapPercent = columnsOnAxis.categoryGap;\n    if (categoryGapPercent == null) {\n      var columnCount = keys(stacks).length;\n      // More columns in one group\n      // the spaces between group is smaller. Or the column will be too thin.\n      categoryGapPercent = Math.max(35 - columnCount * 4, 15) + '%';\n    }\n    var categoryGap = parsePercent(categoryGapPercent, bandWidth);\n    var barGapPercent = parsePercent(columnsOnAxis.gap, 1);\n    var remainedWidth = columnsOnAxis.remainedWidth;\n    var autoWidthCount = columnsOnAxis.autoWidthCount;\n    var autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    // Find if any auto calculated bar exceeded maxBarWidth\n    each(stacks, function (column) {\n      var maxWidth = column.maxWidth;\n      var minWidth = column.minWidth;\n      if (!column.width) {\n        var finalWidth = autoWidth;\n        if (maxWidth && maxWidth < finalWidth) {\n          finalWidth = Math.min(maxWidth, remainedWidth);\n        }\n        // `minWidth` has higher priority. `minWidth` decide that whether the\n        // bar is able to be visible. So `minWidth` should not be restricted\n        // by `maxWidth` or `remainedWidth` (which is from `bandWidth`). In\n        // the extreme cases for `value` axis, bars are allowed to overlap\n        // with each other if `minWidth` specified.\n        if (minWidth && minWidth > finalWidth) {\n          finalWidth = minWidth;\n        }\n        if (finalWidth !== autoWidth) {\n          column.width = finalWidth;\n          remainedWidth -= finalWidth + barGapPercent * finalWidth;\n          autoWidthCount--;\n        }\n      } else {\n        // `barMinWidth/barMaxWidth` has higher priority than `barWidth`, as\n        // CSS does. Because barWidth can be a percent value, where\n        // `barMaxWidth` can be used to restrict the final width.\n        var finalWidth = column.width;\n        if (maxWidth) {\n          finalWidth = Math.min(finalWidth, maxWidth);\n        }\n        // `minWidth` has higher priority, as described above\n        if (minWidth) {\n          finalWidth = Math.max(finalWidth, minWidth);\n        }\n        column.width = finalWidth;\n        remainedWidth -= finalWidth + barGapPercent * finalWidth;\n        autoWidthCount--;\n      }\n    });\n    // Recalculate width again\n    autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    var widthSum = 0;\n    var lastColumn;\n    each(stacks, function (column, idx) {\n      if (!column.width) {\n        column.width = autoWidth;\n      }\n      lastColumn = column;\n      widthSum += column.width * (1 + barGapPercent);\n    });\n    if (lastColumn) {\n      widthSum -= lastColumn.width * barGapPercent;\n    }\n    var offset = -widthSum / 2;\n    each(stacks, function (column, stackId) {\n      result[coordSysName][stackId] = result[coordSysName][stackId] || {\n        bandWidth: bandWidth,\n        offset: offset,\n        width: column.width\n      };\n      offset += column.width * (1 + barGapPercent);\n    });\n  });\n  return result;\n}\nfunction retrieveColumnLayout(barWidthAndOffset, axis, seriesModel) {\n  if (barWidthAndOffset && axis) {\n    var result = barWidthAndOffset[getAxisKey(axis)];\n    if (result != null && seriesModel != null) {\n      return result[getSeriesStackId(seriesModel)];\n    }\n    return result;\n  }\n}\nexport { retrieveColumnLayout };\nexport function layout(seriesType, ecModel) {\n  var seriesModels = prepareLayoutBarSeries(seriesType, ecModel);\n  var barWidthAndOffset = makeColumnLayout(seriesModels);\n  each(seriesModels, function (seriesModel) {\n    var data = seriesModel.getData();\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var stackId = getSeriesStackId(seriesModel);\n    var columnLayoutInfo = barWidthAndOffset[getAxisKey(baseAxis)][stackId];\n    var columnOffset = columnLayoutInfo.offset;\n    var columnWidth = columnLayoutInfo.width;\n    data.setLayout({\n      bandWidth: columnLayoutInfo.bandWidth,\n      offset: columnOffset,\n      size: columnWidth\n    });\n  });\n}\n// TODO: Do not support stack in large mode yet.\nexport function createProgressiveLayout(seriesType) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function (seriesModel) {\n      if (!isOnCartesian(seriesModel)) {\n        return;\n      }\n      var data = seriesModel.getData();\n      var cartesian = seriesModel.coordinateSystem;\n      var baseAxis = cartesian.getBaseAxis();\n      var valueAxis = cartesian.getOtherAxis(baseAxis);\n      var valueDimIdx = data.getDimensionIndex(data.mapDimension(valueAxis.dim));\n      var baseDimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\n      var drawBackground = seriesModel.get('showBackground', true);\n      var valueDim = data.mapDimension(valueAxis.dim);\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n      var stacked = isDimensionStacked(data, valueDim) && !!data.getCalculationInfo('stackedOnSeries');\n      var isValueAxisH = valueAxis.isHorizontal();\n      var valueAxisStart = getValueAxisStart(baseAxis, valueAxis);\n      var isLarge = isInLargeMode(seriesModel);\n      var barMinHeight = seriesModel.get('barMinHeight') || 0;\n      var stackedDimIdx = stackResultDim && data.getDimensionIndex(stackResultDim);\n      // Layout info.\n      var columnWidth = data.getLayout('size');\n      var columnOffset = data.getLayout('offset');\n      return {\n        progress: function (params, data) {\n          var count = params.count;\n          var largePoints = isLarge && createFloat32Array(count * 3);\n          var largeBackgroundPoints = isLarge && drawBackground && createFloat32Array(count * 3);\n          var largeDataIndices = isLarge && createFloat32Array(count);\n          var coordLayout = cartesian.master.getRect();\n          var bgSize = isValueAxisH ? coordLayout.width : coordLayout.height;\n          var dataIndex;\n          var store = data.getStore();\n          var idxOffset = 0;\n          while ((dataIndex = params.next()) != null) {\n            var value = store.get(stacked ? stackedDimIdx : valueDimIdx, dataIndex);\n            var baseValue = store.get(baseDimIdx, dataIndex);\n            var baseCoord = valueAxisStart;\n            var stackStartValue = void 0;\n            // Because of the barMinHeight, we can not use the value in\n            // stackResultDimension directly.\n            if (stacked) {\n              stackStartValue = +value - store.get(valueDimIdx, dataIndex);\n            }\n            var x = void 0;\n            var y = void 0;\n            var width = void 0;\n            var height = void 0;\n            if (isValueAxisH) {\n              var coord = cartesian.dataToPoint([value, baseValue]);\n              if (stacked) {\n                var startCoord = cartesian.dataToPoint([stackStartValue, baseValue]);\n                baseCoord = startCoord[0];\n              }\n              x = baseCoord;\n              y = coord[1] + columnOffset;\n              width = coord[0] - baseCoord;\n              height = columnWidth;\n              if (Math.abs(width) < barMinHeight) {\n                width = (width < 0 ? -1 : 1) * barMinHeight;\n              }\n            } else {\n              var coord = cartesian.dataToPoint([baseValue, value]);\n              if (stacked) {\n                var startCoord = cartesian.dataToPoint([baseValue, stackStartValue]);\n                baseCoord = startCoord[1];\n              }\n              x = coord[0] + columnOffset;\n              y = baseCoord;\n              width = columnWidth;\n              height = coord[1] - baseCoord;\n              if (Math.abs(height) < barMinHeight) {\n                // Include zero to has a positive bar\n                height = (height <= 0 ? -1 : 1) * barMinHeight;\n              }\n            }\n            if (!isLarge) {\n              data.setItemLayout(dataIndex, {\n                x: x,\n                y: y,\n                width: width,\n                height: height\n              });\n            } else {\n              largePoints[idxOffset] = x;\n              largePoints[idxOffset + 1] = y;\n              largePoints[idxOffset + 2] = isValueAxisH ? width : height;\n              if (largeBackgroundPoints) {\n                largeBackgroundPoints[idxOffset] = isValueAxisH ? coordLayout.x : x;\n                largeBackgroundPoints[idxOffset + 1] = isValueAxisH ? y : coordLayout.y;\n                largeBackgroundPoints[idxOffset + 2] = bgSize;\n              }\n              largeDataIndices[dataIndex] = dataIndex;\n            }\n            idxOffset += 3;\n          }\n          if (isLarge) {\n            data.setLayout({\n              largePoints: largePoints,\n              largeDataIndices: largeDataIndices,\n              largeBackgroundPoints: largeBackgroundPoints,\n              valueAxisHorizontal: isValueAxisH\n            });\n          }\n        }\n      };\n    }\n  };\n}\nfunction isOnCartesian(seriesModel) {\n  return seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'cartesian2d';\n}\nfunction isInLargeMode(seriesModel) {\n  return seriesModel.pipelineContext && seriesModel.pipelineContext.large;\n}\n// See cases in `test/bar-start.html` and `#7412`, `#8747`.\nfunction getValueAxisStart(baseAxis, valueAxis) {\n  var startValue = valueAxis.model.get('startValue');\n  if (!startValue) {\n    startValue = 0;\n  }\n  return valueAxis.toGlobalCoord(valueAxis.dataToCoord(valueAxis.type === 'log' ? startValue > 0 ? startValue : 1 : startValue));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parsePercent } from '../util/number.js';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper.js';\nfunction getSeriesStackId(seriesModel) {\n  return seriesModel.get('stack') || '__ec_stack_' + seriesModel.seriesIndex;\n}\nfunction getAxisKey(polar, axis) {\n  return axis.dim + polar.model.componentIndex;\n}\nfunction barLayoutPolar(seriesType, ecModel, api) {\n  var lastStackCoords = {};\n  var barWidthAndOffset = calRadialBar(zrUtil.filter(ecModel.getSeriesByType(seriesType), function (seriesModel) {\n    return !ecModel.isSeriesFiltered(seriesModel) && seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'polar';\n  }));\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    // Check series coordinate, do layout for polar only\n    if (seriesModel.coordinateSystem.type !== 'polar') {\n      return;\n    }\n    var data = seriesModel.getData();\n    var polar = seriesModel.coordinateSystem;\n    var baseAxis = polar.getBaseAxis();\n    var axisKey = getAxisKey(polar, baseAxis);\n    var stackId = getSeriesStackId(seriesModel);\n    var columnLayoutInfo = barWidthAndOffset[axisKey][stackId];\n    var columnOffset = columnLayoutInfo.offset;\n    var columnWidth = columnLayoutInfo.width;\n    var valueAxis = polar.getOtherAxis(baseAxis);\n    var cx = seriesModel.coordinateSystem.cx;\n    var cy = seriesModel.coordinateSystem.cy;\n    var barMinHeight = seriesModel.get('barMinHeight') || 0;\n    var barMinAngle = seriesModel.get('barMinAngle') || 0;\n    lastStackCoords[stackId] = lastStackCoords[stackId] || [];\n    var valueDim = data.mapDimension(valueAxis.dim);\n    var baseDim = data.mapDimension(baseAxis.dim);\n    var stacked = isDimensionStacked(data, valueDim /* , baseDim */);\n    var clampLayout = baseAxis.dim !== 'radius' || !seriesModel.get('roundCap', true);\n    var valueAxisModel = valueAxis.model;\n    var startValue = valueAxisModel.get('startValue');\n    var valueAxisStart = valueAxis.dataToCoord(startValue || 0);\n    for (var idx = 0, len = data.count(); idx < len; idx++) {\n      var value = data.get(valueDim, idx);\n      var baseValue = data.get(baseDim, idx);\n      var sign = value >= 0 ? 'p' : 'n';\n      var baseCoord = valueAxisStart;\n      // Because of the barMinHeight, we can not use the value in\n      // stackResultDimension directly.\n      // Only ordinal axis can be stacked.\n      if (stacked) {\n        if (!lastStackCoords[stackId][baseValue]) {\n          lastStackCoords[stackId][baseValue] = {\n            p: valueAxisStart,\n            n: valueAxisStart // Negative stack\n          };\n        }\n        // Should also consider #4243\n        baseCoord = lastStackCoords[stackId][baseValue][sign];\n      }\n      var r0 = void 0;\n      var r = void 0;\n      var startAngle = void 0;\n      var endAngle = void 0;\n      // radial sector\n      if (valueAxis.dim === 'radius') {\n        var radiusSpan = valueAxis.dataToCoord(value) - valueAxisStart;\n        var angle = baseAxis.dataToCoord(baseValue);\n        if (Math.abs(radiusSpan) < barMinHeight) {\n          radiusSpan = (radiusSpan < 0 ? -1 : 1) * barMinHeight;\n        }\n        r0 = baseCoord;\n        r = baseCoord + radiusSpan;\n        startAngle = angle - columnOffset;\n        endAngle = startAngle - columnWidth;\n        stacked && (lastStackCoords[stackId][baseValue][sign] = r);\n      }\n      // tangential sector\n      else {\n        var angleSpan = valueAxis.dataToCoord(value, clampLayout) - valueAxisStart;\n        var radius = baseAxis.dataToCoord(baseValue);\n        if (Math.abs(angleSpan) < barMinAngle) {\n          angleSpan = (angleSpan < 0 ? -1 : 1) * barMinAngle;\n        }\n        r0 = radius + columnOffset;\n        r = r0 + columnWidth;\n        startAngle = baseCoord;\n        endAngle = baseCoord + angleSpan;\n        // if the previous stack is at the end of the ring,\n        // add a round to differentiate it from origin\n        // let extent = angleAxis.getExtent();\n        // let stackCoord = angle;\n        // if (stackCoord === extent[0] && value > 0) {\n        //     stackCoord = extent[1];\n        // }\n        // else if (stackCoord === extent[1] && value < 0) {\n        //     stackCoord = extent[0];\n        // }\n        stacked && (lastStackCoords[stackId][baseValue][sign] = endAngle);\n      }\n      data.setItemLayout(idx, {\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: r,\n        // Consider that positive angle is anti-clockwise,\n        // while positive radian of sector is clockwise\n        startAngle: -startAngle * Math.PI / 180,\n        endAngle: -endAngle * Math.PI / 180,\n        /**\n         * Keep the same logic with bar in catesion: use end value to\n         * control direction. Notice that if clockwise is true (by\n         * default), the sector will always draw clockwisely, no matter\n         * whether endAngle is greater or less than startAngle.\n         */\n        clockwise: startAngle >= endAngle\n      });\n    }\n  });\n}\n/**\n * Calculate bar width and offset for radial bar charts\n */\nfunction calRadialBar(barSeries) {\n  // Columns info on each category axis. Key is polar name\n  var columnsMap = {};\n  zrUtil.each(barSeries, function (seriesModel, idx) {\n    var data = seriesModel.getData();\n    var polar = seriesModel.coordinateSystem;\n    var baseAxis = polar.getBaseAxis();\n    var axisKey = getAxisKey(polar, baseAxis);\n    var axisExtent = baseAxis.getExtent();\n    var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\n    var columnsOnAxis = columnsMap[axisKey] || {\n      bandWidth: bandWidth,\n      remainedWidth: bandWidth,\n      autoWidthCount: 0,\n      categoryGap: '20%',\n      gap: '30%',\n      stacks: {}\n    };\n    var stacks = columnsOnAxis.stacks;\n    columnsMap[axisKey] = columnsOnAxis;\n    var stackId = getSeriesStackId(seriesModel);\n    if (!stacks[stackId]) {\n      columnsOnAxis.autoWidthCount++;\n    }\n    stacks[stackId] = stacks[stackId] || {\n      width: 0,\n      maxWidth: 0\n    };\n    var barWidth = parsePercent(seriesModel.get('barWidth'), bandWidth);\n    var barMaxWidth = parsePercent(seriesModel.get('barMaxWidth'), bandWidth);\n    var barGap = seriesModel.get('barGap');\n    var barCategoryGap = seriesModel.get('barCategoryGap');\n    if (barWidth && !stacks[stackId].width) {\n      barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\n      stacks[stackId].width = barWidth;\n      columnsOnAxis.remainedWidth -= barWidth;\n    }\n    barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\n    barGap != null && (columnsOnAxis.gap = barGap);\n    barCategoryGap != null && (columnsOnAxis.categoryGap = barCategoryGap);\n  });\n  var result = {};\n  zrUtil.each(columnsMap, function (columnsOnAxis, coordSysName) {\n    result[coordSysName] = {};\n    var stacks = columnsOnAxis.stacks;\n    var bandWidth = columnsOnAxis.bandWidth;\n    var categoryGap = parsePercent(columnsOnAxis.categoryGap, bandWidth);\n    var barGapPercent = parsePercent(columnsOnAxis.gap, 1);\n    var remainedWidth = columnsOnAxis.remainedWidth;\n    var autoWidthCount = columnsOnAxis.autoWidthCount;\n    var autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    // Find if any auto calculated bar exceeded maxBarWidth\n    zrUtil.each(stacks, function (column, stack) {\n      var maxWidth = column.maxWidth;\n      if (maxWidth && maxWidth < autoWidth) {\n        maxWidth = Math.min(maxWidth, remainedWidth);\n        if (column.width) {\n          maxWidth = Math.min(maxWidth, column.width);\n        }\n        remainedWidth -= maxWidth;\n        column.width = maxWidth;\n        autoWidthCount--;\n      }\n    });\n    // Recalculate width again\n    autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    var widthSum = 0;\n    var lastColumn;\n    zrUtil.each(stacks, function (column, idx) {\n      if (!column.width) {\n        column.width = autoWidth;\n      }\n      lastColumn = column;\n      widthSum += column.width * (1 + barGapPercent);\n    });\n    if (lastColumn) {\n      widthSum -= lastColumn.width * barGapPercent;\n    }\n    var offset = -widthSum / 2;\n    zrUtil.each(stacks, function (column, stackId) {\n      result[coordSysName][stackId] = result[coordSysName][stackId] || {\n        offset: offset,\n        width: column.width\n      };\n      offset += column.width * (1 + barGapPercent);\n    });\n  });\n  return result;\n}\nexport default barLayoutPolar;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { map } from 'zrender/lib/core/util.js';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper.js';\nimport { createFloat32Array } from '../util/vendor.js';\nexport default function pointsLayout(seriesType, forceStoreInTypedArray) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function (seriesModel) {\n      var data = seriesModel.getData();\n      var coordSys = seriesModel.coordinateSystem;\n      var pipelineContext = seriesModel.pipelineContext;\n      var useTypedArray = forceStoreInTypedArray || pipelineContext.large;\n      if (!coordSys) {\n        return;\n      }\n      var dims = map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }).slice(0, 2);\n      var dimLen = dims.length;\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n      if (isDimensionStacked(data, dims[0])) {\n        dims[0] = stackResultDim;\n      }\n      if (isDimensionStacked(data, dims[1])) {\n        dims[1] = stackResultDim;\n      }\n      var store = data.getStore();\n      var dimIdx0 = data.getDimensionIndex(dims[0]);\n      var dimIdx1 = data.getDimensionIndex(dims[1]);\n      return dimLen && {\n        progress: function (params, data) {\n          var segCount = params.end - params.start;\n          var points = useTypedArray && createFloat32Array(segCount * dimLen);\n          var tmpIn = [];\n          var tmpOut = [];\n          for (var i = params.start, offset = 0; i < params.end; i++) {\n            var point = void 0;\n            if (dimLen === 1) {\n              var x = store.get(dimIdx0, i);\n              // NOTE: Make sure the second parameter is null to use default strategy.\n              point = coordSys.dataToPoint(x, null, tmpOut);\n            } else {\n              tmpIn[0] = store.get(dimIdx0, i);\n              tmpIn[1] = store.get(dimIdx1, i);\n              // Let coordinate system to handle the NaN data.\n              point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n            }\n            if (useTypedArray) {\n              points[offset++] = point[0];\n              points[offset++] = point[1];\n            } else {\n              data.setItemLayout(i, point.slice());\n            }\n          }\n          useTypedArray && data.setLayout('points', points);\n        }\n      };\n    }\n  };\n}\n;"],"names":["cloneArr","points","newPoints","i","length","push","slice","prepareLayoutCallbackParams","labelItem","hostEl","label","labelLine","getTextGuideLine","dataIndex","dataType","seriesIndex","seriesModel","text","style","rect","hostRect","labelRect","align","verticalAlign","labelLinePoints","shape","LABEL_OPTION_TO_STYLE_KEYS","dummyTransformable","Transformable","labelLayoutInnerStore","makeInner","labelLineAnimationStore","extendWithKeys","target","source","keys","key","LABEL_LAYOUT_PROPS","LabelManager","this","_labelList","_chartViewList","prototype","clearLabels","_addLabel","layoutOption","labelStyle","__hostTarget","textConfig","labelTransform","getComputedTransform","getBoundingRect","plain","BoundingRect","applyTransform","setLocalTransform","x","y","rotation","originX","originY","scaleX","scaleY","normalizeRadian","host","transform","labelGuide","computedLayoutOption","priority","width","height","defaultAttr","ignore","labelGuideIgnore","fontSize","cursor","attachedPos","position","attachedRot","addLabelsOfSeries","chartView","_this","__model","get","isFunction","group","traverse","child","textEl","getTextContent","ecData","getECData","disableLabelLayout","updateLayoutConfig","api","getWidth","getHeight","createDragHandler","el","labelLineModel","updateLabelLinePoints","defaultLabelAttr","degreeToRadian","Math","PI","setTextConfig","local","rotate","offset","dx","dy","needsUpdateLabelLine","parsePercent","setStyle","guideLine","setShape","labelLayoutStore","k","draggable","hostModel","data","getData","getItemModel","on","getModel","off","layout","labelList","prepareLayoutList","labelsNeedsAdjustOnX","filter","item","moveOverlap","labelsNeedsAdjustOnY","shiftLayoutOnX","shiftLayoutOnY","labelsNeedsHideOverlap","hideOverlap","processLabelsOverall","each","ignoreLabelLineUpdate","animationEnabled","isAnimationEnabled","forceLabelAnimation","_updateLabelLine","_animateLabels","itemModel","defaultStyle","visualStyle","getItemVisual","visualType","getVisual","stroke","setLabelLineStyle","getLabelLineStatesModels","invisible","disableLabelAnimation","isElementRemoved","layoutStore","oldLayout","newProps","attr","prevStates","indexOf","oldLayoutSelect","oldLayoutEmphasis","updateProps","labelInner","valueAnimation","oldOpacity","retrieve2","opacity","initProps","states","select","layoutSelect","emphasis","layoutEmphasis","animateLabelValue","newLayout","strokePercent","getLabelManager","installLabelLayout","registers","registerUpdateLifecycle","ecModel","params","labelManager","updatedSeries","forEach","series","getViewOfSeriesModel","PI2","CMD","PathProxy","DEFAULT_SEARCH_SPACE","getCandidateAnchor","pos","distance","outPt","outDir","set","projectPointToArc","cx","cy","r","startAngle","endAngle","anticlockwise","out","d","sqrt","ox","oy","abs","tmp","angle","atan2","x1","cos","y1","sin","x2","y2","d1","d2","projectPointToLine","limitToEnds","dx1","dy1","lineLen","projectedLen","t","min","max","projectPointToRect","tmpPt","nearestPointOnRect","pt","dist","nearestPointOnPath","path","xi","yi","x0","y0","minDist","Infinity","cmd","M","L","C","cubicProjectPoint","Q","quadraticProjectPoint","A","rx","ry","theta","dTheta","_x","R","Z","pt0","Point","pt1","pt2","dir","dir2","labelGuideConfig","textGuideLineConfig","searchSpace","candidates","clone","anchorPoint","anchor","targetTransform","targetInversedTransform","invert","len","copy","candidate","scaleAndAdd","boundingRect","Path","toArray","limitTurnAngle","tmpArr","tmpProjPoint","linePoints","minTurnAngle","fromArray","sub","len1","len2","scale","angleCos","dot","minTurnAngleCos","tan","isNaN","limitSurfaceAngle","surfaceNormal","maxSurfaceAngle","maxSurfaceAngleCos","HALF_PI","angle2","acos","newAngle","setLabelLineState","stateName","stateModel","isNormal","stateObj","ensureState","smooth","styleObj","getLineStyle","useStyle","buildLabelLinePath","moveTo","vector","lineTo","moveLen","midPoint0","midPoint2","midPoint1","bezierCurveTo","targetEl","statesModels","normalModel","normal","showNormal","labelIgnoreNormal","DISPLAY_STATES","stateShow","isLabelIgnored","Polyline","setTextGuideLine","stateProxy","defaults","fill","showAbove","labelLineConfig","buildPath","removeTextGuideLine","labelLineName","SPECIAL_STATES","input","list","rawItem","localRect","isAxisAligned","minMargin","margin","globalRect","obb","OrientedBoundingRect","axisAligned","shiftLayout","xyDim","sizeDim","minBound","maxBound","balanceShift","sort","a","b","delta","lastPos","adjusted","shifts","totalShifts","shift","shiftList","minGap","maxGap","first","last","updateMinMaxGap","squeezeGaps","takeBoundsGap","squeezeWhenBailout","gapThisBound","gapOtherBound","moveDir","moveFromMaxGap","remained","start","end","maxSqeezePercent","gaps","totalGaps","prevItemRect","gap","squeezePercent","movement","moveForEachLabel","ceil","leftBound","rightBound","topBound","bottomBound","displayedLabels","hideEl","emphasisState","overlapped","j","existsTextCfg","intersect","EMPTY_OBJ","setLabelText","labelTexts","state","oldStates","currentStates","clearStates","useStates","getLabelText","opt","stateModels","interpolatedValue","baseText","labelFetcher","labelDataIndex","labelDimIndex","getFormattedLabel","defaultText","statesText","setLabelStyle","labelStatesModels","stateSpecified","isSetOnText","ZRText","needsCreateText","getShallow","textContent","setTextContent","labelStatesTexts","normalStyle","createTextStyle","createTextConfig","targetElEmphasisState","silent","dirty","enableTextSetter","getLabelStatesModels","labelName","textStyleModel","specifiedTextStyle","isNotNormal","isAttached","textStyle","setTextStyleCommon","extend","labelPosition","labelRotate","labelDistance","labelOffset","defaultOutsidePosition","outsideFill","inheritColor","richResult","globalTextStyle","option","richItemNames","getRichItemNames","name_1","hasOwnProperty","richTextStyle","setTokenTextStyle","rich","overflow","richItemNameMap","richKeys","richKey","parentModel","TEXT_PROPS_WITH_GLOBAL","TEXT_PROPS_SELF","TEXT_PROPS_BOX","isBlock","inRich","fillColor","strokeColor","color","textBorderColor","textBorderWidth","lineWidth","textBorderType","lineDash","textBorderDashOffset","lineDashOffset","defaultOpacity","val","baseline","disableBox","borderType","borderDash","backgroundColor","borderColor","getFont","gTextStyleModel","trim","fontStyle","fontWeight","fontFamily","join","setLabelValueAnimation","value","getDefaultText","obj","prevValue","normalLabelModel","precision","defaultInterpolatedText","animatableModel","labelInnerStore","currValue","targetValue","percent","during","interpolated","interpolateRawValues","labelText","createSectorCalculateTextPosition","positionMapping","opts","isRoundCap","textPosition","Array","calculateTextPosition","mappedSectorPosition","sector","r0","middleR","middleAngle","extraDist","mathCos","mathSin","textAlign","textVerticalAlign","adjustAngleDistanceX","adjustAngleDistanceY","setSectorTextRotation","rotateType","isNumber","isArray","anchorAngle","clockwise","isEnd","STACK_PREFIX","getSeriesStackId","getAxisKey","axis","dim","index","getLayoutOnAxis","baseAxis","axisKey","type","bandWidth","getBandWidth","count","stackId","widthAndOffsets","doCalBarWidthAndOffset","result","offsetCenter","prepareLayoutBarSeries","seriesType","seriesModels","eachSeriesByType","isOnCartesian","getValueAxesMinGaps","barSeries","axisValues","cartesian","coordinateSystem","getBaseAxis","dimIdx","getDimensionIndex","mapDimension","store","getStore","cnt","axisMinGaps","valuesInAxis","makeColumnLayout","seriesInfoList","axisExtent","getExtent","extentSpan","scaleSpan","barWidth","barMaxWidth","barMinWidth","isInLargeMode","barGap","barCategoryGap","columnsMap","seriesInfo","idx","columnsOnAxis","remainedWidth","autoWidthCount","categoryGap","stacks","maxWidth","minWidth","coordSysName","categoryGapPercent","columnCount","barGapPercent","autoWidth","column","finalWidth","lastColumn","widthSum","retrieveColumnLayout","barWidthAndOffset","columnLayoutInfo","columnOffset","columnWidth","setLayout","size","createProgressiveLayout","plan","createRenderPlanner","reset","valueAxis","getOtherAxis","valueDimIdx","baseDimIdx","drawBackground","valueDim","stackResultDim","getCalculationInfo","stacked","isDimensionStacked","isValueAxisH","isHorizontal","valueAxisStart","getValueAxisStart","isLarge","barMinHeight","stackedDimIdx","getLayout","progress","largePoints","createFloat32Array","largeBackgroundPoints","largeDataIndices","coordLayout","master","getRect","bgSize","idxOffset","next","baseValue","baseCoord","stackStartValue","coord","dataToPoint","startCoord","setItemLayout","valueAxisHorizontal","pipelineContext","large","startValue","model","toGlobalCoord","dataToCoord","polar","componentIndex","barLayoutPolar","lastStackCoords","calRadialBar","zrUtil","getSeriesByType","isSeriesFiltered","barMinAngle","baseDim","clampLayout","valueAxisModel","sign","p","n","radiusSpan","angleSpan","radius","stack","pointsLayout","forceStoreInTypedArray","coordSys","useTypedArray","dims","map","dimensions","dimLen","dimIdx0","dimIdx1","segCount","tmpIn","tmpOut","point"],"sourceRoot":""}