{"version":3,"file":"static/client/js/chunk-vendors-0ee8b09c.e948ac96.js","mappings":"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","sources":["webpack://d1/./node_modules/echarts/lib/chart/bar/BaseBarSeries.js","webpack://d1/./node_modules/echarts/lib/chart/bar/BarSeries.js","webpack://d1/./node_modules/echarts/lib/chart/bar/BarView.js","webpack://d1/./node_modules/echarts/lib/chart/bar/install.js","webpack://d1/./node_modules/echarts/lib/chart/bar/PictorialBarView.js","webpack://d1/./node_modules/echarts/lib/chart/bar/PictorialBarSeries.js","webpack://d1/./node_modules/echarts/lib/chart/bar/installPictorialBar.js","webpack://d1/./node_modules/echarts/lib/chart/boxplot/BoxplotSeries.js","webpack://d1/./node_modules/echarts/lib/chart/boxplot/BoxplotView.js","webpack://d1/./node_modules/echarts/lib/chart/boxplot/boxplotLayout.js","webpack://d1/./node_modules/echarts/lib/chart/boxplot/prepareBoxplotData.js","webpack://d1/./node_modules/echarts/lib/chart/boxplot/boxplotTransform.js","webpack://d1/./node_modules/echarts/lib/chart/boxplot/install.js","webpack://d1/./node_modules/echarts/lib/chart/candlestick/CandlestickView.js","webpack://d1/./node_modules/echarts/lib/chart/candlestick/CandlestickSeries.js","webpack://d1/./node_modules/echarts/lib/chart/candlestick/preprocessor.js","webpack://d1/./node_modules/echarts/lib/chart/candlestick/candlestickVisual.js","webpack://d1/./node_modules/echarts/lib/chart/candlestick/candlestickLayout.js","webpack://d1/./node_modules/echarts/lib/chart/candlestick/install.js","webpack://d1/./node_modules/echarts/lib/chart/custom/CustomSeries.js","webpack://d1/./node_modules/echarts/lib/chart/custom/CustomView.js","webpack://d1/./node_modules/echarts/lib/chart/custom/install.js","webpack://d1/./node_modules/echarts/lib/chart/helper/EffectSymbol.js","webpack://d1/./node_modules/echarts/lib/chart/effectScatter/EffectScatterView.js","webpack://d1/./node_modules/echarts/lib/chart/effectScatter/EffectScatterSeries.js","webpack://d1/./node_modules/echarts/lib/chart/effectScatter/install.js","webpack://d1/./node_modules/echarts/lib/chart/funnel/FunnelView.js","webpack://d1/./node_modules/echarts/lib/chart/funnel/FunnelSeries.js","webpack://d1/./node_modules/echarts/lib/chart/funnel/funnelLayout.js","webpack://d1/./node_modules/echarts/lib/chart/funnel/install.js","webpack://d1/./node_modules/echarts/lib/chart/gauge/PointerPath.js","webpack://d1/./node_modules/echarts/lib/chart/gauge/GaugeView.js","webpack://d1/./node_modules/echarts/lib/chart/gauge/GaugeSeries.js","webpack://d1/./node_modules/echarts/lib/chart/gauge/install.js","webpack://d1/./node_modules/echarts/lib/chart/graph/categoryFilter.js","webpack://d1/./node_modules/echarts/lib/chart/graph/categoryVisual.js","webpack://d1/./node_modules/echarts/lib/chart/graph/edgeVisual.js","webpack://d1/./node_modules/echarts/lib/chart/helper/multipleGraphEdgeHelper.js","webpack://d1/./node_modules/echarts/lib/chart/graph/simpleLayoutHelper.js","webpack://d1/./node_modules/echarts/lib/chart/graph/simpleLayout.js","webpack://d1/./node_modules/echarts/lib/chart/graph/graphHelper.js","webpack://d1/./node_modules/echarts/lib/chart/graph/circularLayoutHelper.js","webpack://d1/./node_modules/echarts/lib/chart/graph/circularLayout.js","webpack://d1/./node_modules/echarts/lib/chart/graph/forceHelper.js","webpack://d1/./node_modules/echarts/lib/chart/graph/forceLayout.js","webpack://d1/./node_modules/echarts/lib/chart/graph/createView.js","webpack://d1/./node_modules/echarts/lib/chart/graph/adjustEdge.js","webpack://d1/./node_modules/echarts/lib/chart/graph/GraphView.js","webpack://d1/./node_modules/echarts/lib/chart/graph/GraphSeries.js","webpack://d1/./node_modules/echarts/lib/chart/graph/install.js","webpack://d1/./node_modules/echarts/lib/chart/heatmap/HeatmapLayer.js","webpack://d1/./node_modules/echarts/lib/chart/heatmap/HeatmapView.js","webpack://d1/./node_modules/echarts/lib/chart/heatmap/HeatmapSeries.js","webpack://d1/./node_modules/echarts/lib/chart/heatmap/install.js","webpack://d1/./node_modules/echarts/lib/chart/helper/EffectLine.js","webpack://d1/./node_modules/echarts/lib/chart/helper/EffectPolyline.js","webpack://d1/./node_modules/echarts/lib/chart/helper/LargeLineDraw.js","webpack://d1/./node_modules/echarts/lib/chart/helper/LargeSymbolDraw.js","webpack://d1/./node_modules/echarts/lib/chart/helper/LinePath.js","webpack://d1/./node_modules/echarts/lib/chart/helper/Line.js","webpack://d1/./node_modules/echarts/lib/chart/helper/LineDraw.js","webpack://d1/./node_modules/echarts/lib/chart/helper/Polyline.js","webpack://d1/./node_modules/echarts/lib/chart/helper/Symbol.js","webpack://d1/./node_modules/echarts/lib/chart/helper/SymbolDraw.js","webpack://d1/./node_modules/echarts/lib/chart/helper/createClipPathFromCoordSys.js","webpack://d1/./node_modules/echarts/lib/chart/helper/createGraphFromNodeEdge.js","webpack://d1/./node_modules/echarts/lib/chart/helper/createRenderPlanner.js","webpack://d1/./node_modules/echarts/lib/chart/helper/createSeriesData.js","webpack://d1/./node_modules/echarts/lib/chart/helper/createSeriesDataSimply.js","webpack://d1/./node_modules/echarts/lib/chart/helper/enableAriaDecalForTree.js","webpack://d1/./node_modules/echarts/lib/chart/helper/labelHelper.js","webpack://d1/./node_modules/echarts/lib/chart/helper/sectorHelper.js","webpack://d1/./node_modules/echarts/lib/chart/helper/treeHelper.js","webpack://d1/./node_modules/echarts/lib/chart/helper/whiskerBoxCommon.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nimport { each } from 'zrender/lib/core/util.js';\nvar BaseBarSeriesModel = /** @class */function (_super) {\n  __extends(BaseBarSeriesModel, _super);\n  function BaseBarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = BaseBarSeriesModel.type;\n    return _this;\n  }\n  BaseBarSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n  BaseBarSeriesModel.prototype.getMarkerPosition = function (value, dims, startingAtTick) {\n    var coordSys = this.coordinateSystem;\n    if (coordSys && coordSys.clampData) {\n      // PENDING if clamp ?\n      var clampData_1 = coordSys.clampData(value);\n      var pt_1 = coordSys.dataToPoint(clampData_1);\n      if (startingAtTick) {\n        each(coordSys.getAxes(), function (axis, idx) {\n          // If axis type is category, use tick coords instead\n          if (axis.type === 'category' && dims != null) {\n            var tickCoords = axis.getTicksCoords();\n            var alignTicksWithLabel = axis.getTickModel().get('alignWithLabel');\n            var targetTickId = clampData_1[idx];\n            // The index of rightmost tick of markArea is 1 larger than x1/y1 index\n            var isEnd = dims[idx] === 'x1' || dims[idx] === 'y1';\n            if (isEnd && !alignTicksWithLabel) {\n              targetTickId += 1;\n            }\n            // The only contains one tick, tickCoords is\n            // like [{coord: 0, tickValue: 0}, {coord: 0}]\n            // to the length should always be larger than 1\n            if (tickCoords.length < 2) {\n              return;\n            } else if (tickCoords.length === 2) {\n              // The left value and right value of the axis are\n              // the same. coord is 0 in both items. Use the max\n              // value of the axis as the coord\n              pt_1[idx] = axis.toGlobalCoord(axis.getExtent()[isEnd ? 1 : 0]);\n              return;\n            }\n            var leftCoord = void 0;\n            var coord = void 0;\n            var stepTickValue = 1;\n            for (var i = 0; i < tickCoords.length; i++) {\n              var tickCoord = tickCoords[i].coord;\n              // The last item of tickCoords doesn't contain\n              // tickValue\n              var tickValue = i === tickCoords.length - 1 ? tickCoords[i - 1].tickValue + stepTickValue : tickCoords[i].tickValue;\n              if (tickValue === targetTickId) {\n                coord = tickCoord;\n                break;\n              } else if (tickValue < targetTickId) {\n                leftCoord = tickCoord;\n              } else if (leftCoord != null && tickValue > targetTickId) {\n                coord = (tickCoord + leftCoord) / 2;\n                break;\n              }\n              if (i === 1) {\n                // Here we assume the step of category axes is\n                // the same\n                stepTickValue = tickValue - tickCoords[0].tickValue;\n              }\n            }\n            if (coord == null) {\n              if (!leftCoord) {\n                // targetTickId is smaller than all tick ids in the\n                // visible area, use the leftmost tick coord\n                coord = tickCoords[0].coord;\n              } else if (leftCoord) {\n                // targetTickId is larger than all tick ids in the\n                // visible area, use the rightmost tick coord\n                coord = tickCoords[tickCoords.length - 1].coord;\n              }\n            }\n            pt_1[idx] = axis.toGlobalCoord(coord);\n          }\n        });\n      } else {\n        var data = this.getData();\n        var offset = data.getLayout('offset');\n        var size = data.getLayout('size');\n        var offsetIndex = coordSys.getBaseAxis().isHorizontal() ? 0 : 1;\n        pt_1[offsetIndex] += offset + size / 2;\n      }\n      return pt_1;\n    }\n    return [NaN, NaN];\n  };\n  BaseBarSeriesModel.type = 'series.__base_bar__';\n  BaseBarSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // stack: null\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    barMinHeight: 0,\n    barMinAngle: 0,\n    // cursor: null,\n    large: false,\n    largeThreshold: 400,\n    progressive: 3e3,\n    progressiveChunkMode: 'mod'\n  };\n  return BaseBarSeriesModel;\n}(SeriesModel);\nSeriesModel.registerClass(BaseBarSeriesModel);\nexport default BaseBarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseBarSeriesModel from './BaseBarSeries.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar BarSeriesModel = /** @class */function (_super) {\n  __extends(BarSeriesModel, _super);\n  function BarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = BarSeriesModel.type;\n    return _this;\n  }\n  BarSeriesModel.prototype.getInitialData = function () {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true,\n      createInvertedIndices: !!this.get('realtimeSort', true) || null\n    });\n  };\n  /**\n   * @override\n   */\n  BarSeriesModel.prototype.getProgressive = function () {\n    // Do not support progressive in normal mode.\n    return this.get('large') ? this.get('progressive') : false;\n  };\n  /**\n   * @override\n   */\n  BarSeriesModel.prototype.getProgressiveThreshold = function () {\n    // Do not support progressive in normal mode.\n    var progressiveThreshold = this.get('progressiveThreshold');\n    var largeThreshold = this.get('largeThreshold');\n    if (largeThreshold > progressiveThreshold) {\n      progressiveThreshold = largeThreshold;\n    }\n    return progressiveThreshold;\n  };\n  BarSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.rect(data.getItemLayout(dataIndex));\n  };\n  BarSeriesModel.type = 'series.bar';\n  BarSeriesModel.dependencies = ['grid', 'polar'];\n  BarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\n    // If clipped\n    // Only available on cartesian2d\n    clip: true,\n    roundCap: false,\n    showBackground: false,\n    backgroundStyle: {\n      color: 'rgba(180, 180, 180, 0.2)',\n      borderColor: null,\n      borderWidth: 0,\n      borderType: 'solid',\n      borderRadius: 0,\n      shadowBlur: 0,\n      shadowColor: null,\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      opacity: 1\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    realtimeSort: false\n  });\n  return BarSeriesModel;\n}(BaseBarSeriesModel);\nexport default BarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Path from 'zrender/lib/graphic/Path.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport { extend, each, map } from 'zrender/lib/core/util.js';\nimport { Rect, Sector, updateProps, initProps, removeElementWithFadeOut, traverseElements } from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, getLabelStatesModels, setLabelValueAnimation, labelInner } from '../../label/labelStyle.js';\nimport { throttle } from '../../util/throttle.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport Sausage from '../../util/shape/sausage.js';\nimport ChartView from '../../view/Chart.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper.js';\nimport { warn } from '../../util/log.js';\nimport { createSectorCalculateTextPosition, setSectorTextRotation } from '../../label/sectorLabel.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nimport { getSectorCornerRadius } from '../helper/sectorHelper.js';\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nfunction getClipArea(coord, data) {\n  var coordSysClipArea = coord.getArea && coord.getArea();\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var baseAxis = coord.getBaseAxis();\n    // When boundaryGap is false or using time axis. bar may exceed the grid.\n    // We should not clip this part.\n    // See test/bar2.html\n    if (baseAxis.type !== 'category' || !baseAxis.onBand) {\n      var expandWidth = data.getLayout('bandWidth');\n      if (baseAxis.isHorizontal()) {\n        coordSysClipArea.x -= expandWidth;\n        coordSysClipArea.width += expandWidth * 2;\n      } else {\n        coordSysClipArea.y -= expandWidth;\n        coordSysClipArea.height += expandWidth * 2;\n      }\n    }\n  }\n  return coordSysClipArea;\n}\nvar BarView = /** @class */function (_super) {\n  __extends(BarView, _super);\n  function BarView() {\n    var _this = _super.call(this) || this;\n    _this.type = BarView.type;\n    _this._isFirstFrame = true;\n    return _this;\n  }\n  BarView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    this._model = seriesModel;\n    this._removeOnRenderedListener(api);\n    this._updateDrawMode(seriesModel);\n    var coordinateSystemType = seriesModel.get('coordinateSystem');\n    if (coordinateSystemType === 'cartesian2d' || coordinateSystemType === 'polar') {\n      // Clear previously rendered progressive elements.\n      this._progressiveEls = null;\n      this._isLargeDraw ? this._renderLarge(seriesModel, ecModel, api) : this._renderNormal(seriesModel, ecModel, api, payload);\n    } else if (process.env.NODE_ENV !== 'production') {\n      warn('Only cartesian2d and polar supported for bar.');\n    }\n  };\n  BarView.prototype.incrementalPrepareRender = function (seriesModel) {\n    this._clear();\n    this._updateDrawMode(seriesModel);\n    // incremental also need to clip, otherwise might be overlow.\n    // But must not set clip in each frame, otherwise all of the children will be marked redraw.\n    this._updateLargeClip(seriesModel);\n  };\n  BarView.prototype.incrementalRender = function (params, seriesModel) {\n    // Reset\n    this._progressiveEls = [];\n    // Do not support progressive in normal mode.\n    this._incrementalRenderLarge(params, seriesModel);\n  };\n  BarView.prototype.eachRendered = function (cb) {\n    traverseElements(this._progressiveEls || this.group, cb);\n  };\n  BarView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n      this._clear();\n    }\n  };\n  BarView.prototype._renderNormal = function (seriesModel, ecModel, api, payload) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coord = seriesModel.coordinateSystem;\n    var baseAxis = coord.getBaseAxis();\n    var isHorizontalOrRadial;\n    if (coord.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n    } else if (coord.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n    }\n    var animationModel = seriesModel.isAnimationEnabled() ? seriesModel : null;\n    var realtimeSortCfg = shouldRealtimeSort(seriesModel, coord);\n    if (realtimeSortCfg) {\n      this._enableRealtimeSort(realtimeSortCfg, data, api);\n    }\n    var needsClip = seriesModel.get('clip', true) || realtimeSortCfg;\n    var coordSysClipArea = getClipArea(coord, data);\n    // If there is clipPath created in large mode. Remove it.\n    group.removeClipPath();\n    // We don't use clipPath in normal mode because we needs a perfect animation\n    // And don't want the label are clipped.\n    var roundCap = seriesModel.get('roundCap', true);\n    var drawBackground = seriesModel.get('showBackground', true);\n    var backgroundModel = seriesModel.getModel('backgroundStyle');\n    var barBorderRadius = backgroundModel.get('borderRadius') || 0;\n    var bgEls = [];\n    var oldBgEls = this._backgroundEls;\n    var isInitSort = payload && payload.isInitSort;\n    var isChangeOrder = payload && payload.type === 'changeAxisOrder';\n    function createBackground(dataIndex) {\n      var bgLayout = getLayout[coord.type](data, dataIndex);\n      var bgEl = createBackgroundEl(coord, isHorizontalOrRadial, bgLayout);\n      bgEl.useStyle(backgroundModel.getItemStyle());\n      // Only cartesian2d support borderRadius.\n      if (coord.type === 'cartesian2d') {\n        bgEl.setShape('r', barBorderRadius);\n      } else {\n        bgEl.setShape('cornerRadius', barBorderRadius);\n      }\n      bgEls[dataIndex] = bgEl;\n      return bgEl;\n    }\n    ;\n    data.diff(oldData).add(function (dataIndex) {\n      var itemModel = data.getItemModel(dataIndex);\n      var layout = getLayout[coord.type](data, dataIndex, itemModel);\n      if (drawBackground) {\n        createBackground(dataIndex);\n      }\n      // If dataZoom in filteMode: 'empty', the baseValue can be set as NaN in \"axisProxy\".\n      if (!data.hasValue(dataIndex) || !isValidLayout[coord.type](layout)) {\n        return;\n      }\n      var isClipped = false;\n      if (needsClip) {\n        // Clip will modify the layout params.\n        // And return a boolean to determine if the shape are fully clipped.\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n      }\n      var el = elementCreator[coord.type](seriesModel, data, dataIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, false, roundCap);\n      if (realtimeSortCfg) {\n        /**\n         * Force label animation because even if the element is\n         * ignored because it's clipped, it may not be clipped after\n         * changing order. Then, if not using forceLabelAnimation,\n         * the label animation was never started, in which case,\n         * the label will be the final value and doesn't have label\n         * animation.\n         */\n        el.forceLabelAnimation = true;\n      }\n      updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, dataIndex, isHorizontalOrRadial, false, false);\n      } else {\n        initProps(el, {\n          shape: layout\n        }, seriesModel, dataIndex);\n      }\n      data.setItemGraphicEl(dataIndex, el);\n      group.add(el);\n      el.ignore = isClipped;\n    }).update(function (newIndex, oldIndex) {\n      var itemModel = data.getItemModel(newIndex);\n      var layout = getLayout[coord.type](data, newIndex, itemModel);\n      if (drawBackground) {\n        var bgEl = void 0;\n        if (oldBgEls.length === 0) {\n          bgEl = createBackground(oldIndex);\n        } else {\n          bgEl = oldBgEls[oldIndex];\n          bgEl.useStyle(backgroundModel.getItemStyle());\n          // Only cartesian2d support borderRadius.\n          if (coord.type === 'cartesian2d') {\n            bgEl.setShape('r', barBorderRadius);\n          } else {\n            bgEl.setShape('cornerRadius', barBorderRadius);\n          }\n          bgEls[newIndex] = bgEl;\n        }\n        var bgLayout = getLayout[coord.type](data, newIndex);\n        var shape = createBackgroundShape(isHorizontalOrRadial, bgLayout, coord);\n        updateProps(bgEl, {\n          shape: shape\n        }, animationModel, newIndex);\n      }\n      var el = oldData.getItemGraphicEl(oldIndex);\n      if (!data.hasValue(newIndex) || !isValidLayout[coord.type](layout)) {\n        group.remove(el);\n        return;\n      }\n      var isClipped = false;\n      if (needsClip) {\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n        if (isClipped) {\n          group.remove(el);\n        }\n      }\n      if (!el) {\n        el = elementCreator[coord.type](seriesModel, data, newIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, !!el, roundCap);\n      } else {\n        saveOldStyle(el);\n      }\n      if (realtimeSortCfg) {\n        el.forceLabelAnimation = true;\n      }\n      if (isChangeOrder) {\n        var textEl = el.getTextContent();\n        if (textEl) {\n          var labelInnerStore = labelInner(textEl);\n          if (labelInnerStore.prevValue != null) {\n            /**\n             * Set preValue to be value so that no new label\n             * should be started, otherwise, it will take a full\n             * `animationDurationUpdate` time to finish the\n             * animation, which is not expected.\n             */\n            labelInnerStore.prevValue = labelInnerStore.value;\n          }\n        }\n      }\n      // Not change anything if only order changed.\n      // Especially not change label.\n      else {\n        updateStyle(el, data, newIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n      }\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, newIndex, isHorizontalOrRadial, true, isChangeOrder);\n      } else {\n        updateProps(el, {\n          shape: layout\n        }, seriesModel, newIndex, null);\n      }\n      data.setItemGraphicEl(newIndex, el);\n      el.ignore = isClipped;\n      group.add(el);\n    }).remove(function (dataIndex) {\n      var el = oldData.getItemGraphicEl(dataIndex);\n      el && removeElementWithFadeOut(el, seriesModel, dataIndex);\n    }).execute();\n    var bgGroup = this._backgroundGroup || (this._backgroundGroup = new Group());\n    bgGroup.removeAll();\n    for (var i = 0; i < bgEls.length; ++i) {\n      bgGroup.add(bgEls[i]);\n    }\n    group.add(bgGroup);\n    this._backgroundEls = bgEls;\n    this._data = data;\n  };\n  BarView.prototype._renderLarge = function (seriesModel, ecModel, api) {\n    this._clear();\n    createLarge(seriesModel, this.group);\n    this._updateLargeClip(seriesModel);\n  };\n  BarView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    this._removeBackground();\n    createLarge(seriesModel, this.group, this._progressiveEls, true);\n  };\n  BarView.prototype._updateLargeClip = function (seriesModel) {\n    // Use clipPath in large mode.\n    var clipPath = seriesModel.get('clip', true) && createClipPath(seriesModel.coordinateSystem, false, seriesModel);\n    var group = this.group;\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n  };\n  BarView.prototype._enableRealtimeSort = function (realtimeSortCfg, data, api) {\n    var _this = this;\n    // If no data in the first frame, wait for data to initSort\n    if (!data.count()) {\n      return;\n    }\n    var baseAxis = realtimeSortCfg.baseAxis;\n    if (this._isFirstFrame) {\n      this._dispatchInitSort(data, realtimeSortCfg, api);\n      this._isFirstFrame = false;\n    } else {\n      var orderMapping_1 = function (idx) {\n        var el = data.getItemGraphicEl(idx);\n        var shape = el && el.shape;\n        return shape &&\n        // The result should be consistent with the initial sort by data value.\n        // Do not support the case that both positive and negative exist.\n        Math.abs(baseAxis.isHorizontal() ? shape.height : shape.width)\n        // If data is NaN, shape.xxx may be NaN, so use || 0 here in case\n        || 0;\n      };\n      this._onRendered = function () {\n        _this._updateSortWithinSameData(data, orderMapping_1, baseAxis, api);\n      };\n      api.getZr().on('rendered', this._onRendered);\n    }\n  };\n  BarView.prototype._dataSort = function (data, baseAxis, orderMapping) {\n    var info = [];\n    data.each(data.mapDimension(baseAxis.dim), function (ordinalNumber, dataIdx) {\n      var mappedValue = orderMapping(dataIdx);\n      mappedValue = mappedValue == null ? NaN : mappedValue;\n      info.push({\n        dataIndex: dataIdx,\n        mappedValue: mappedValue,\n        ordinalNumber: ordinalNumber\n      });\n    });\n    info.sort(function (a, b) {\n      // If NaN, it will be treated as min val.\n      return b.mappedValue - a.mappedValue;\n    });\n    return {\n      ordinalNumbers: map(info, function (item) {\n        return item.ordinalNumber;\n      })\n    };\n  };\n  BarView.prototype._isOrderChangedWithinSameData = function (data, orderMapping, baseAxis) {\n    var scale = baseAxis.scale;\n    var ordinalDataDim = data.mapDimension(baseAxis.dim);\n    var lastValue = Number.MAX_VALUE;\n    for (var tickNum = 0, len = scale.getOrdinalMeta().categories.length; tickNum < len; ++tickNum) {\n      var rawIdx = data.rawIndexOf(ordinalDataDim, scale.getRawOrdinalNumber(tickNum));\n      var value = rawIdx < 0\n      // If some tick have no bar, the tick will be treated as min.\n      ? Number.MIN_VALUE\n      // PENDING: if dataZoom on baseAxis exits, is it a performance issue?\n      : orderMapping(data.indexOfRawIndex(rawIdx));\n      if (value > lastValue) {\n        return true;\n      }\n      lastValue = value;\n    }\n    return false;\n  };\n  /*\n   * Consider the case when A and B changed order, whose representing\n   * bars are both out of sight, we don't wish to trigger reorder action\n   * as long as the order in the view doesn't change.\n   */\n  BarView.prototype._isOrderDifferentInView = function (orderInfo, baseAxis) {\n    var scale = baseAxis.scale;\n    var extent = scale.getExtent();\n    var tickNum = Math.max(0, extent[0]);\n    var tickMax = Math.min(extent[1], scale.getOrdinalMeta().categories.length - 1);\n    for (; tickNum <= tickMax; ++tickNum) {\n      if (orderInfo.ordinalNumbers[tickNum] !== scale.getRawOrdinalNumber(tickNum)) {\n        return true;\n      }\n    }\n  };\n  BarView.prototype._updateSortWithinSameData = function (data, orderMapping, baseAxis, api) {\n    if (!this._isOrderChangedWithinSameData(data, orderMapping, baseAxis)) {\n      return;\n    }\n    var sortInfo = this._dataSort(data, baseAxis, orderMapping);\n    if (this._isOrderDifferentInView(sortInfo, baseAxis)) {\n      this._removeOnRenderedListener(api);\n      api.dispatchAction({\n        type: 'changeAxisOrder',\n        componentType: baseAxis.dim + 'Axis',\n        axisId: baseAxis.index,\n        sortInfo: sortInfo\n      });\n    }\n  };\n  BarView.prototype._dispatchInitSort = function (data, realtimeSortCfg, api) {\n    var baseAxis = realtimeSortCfg.baseAxis;\n    var sortResult = this._dataSort(data, baseAxis, function (dataIdx) {\n      return data.get(data.mapDimension(realtimeSortCfg.otherAxis.dim), dataIdx);\n    });\n    api.dispatchAction({\n      type: 'changeAxisOrder',\n      componentType: baseAxis.dim + 'Axis',\n      isInitSort: true,\n      axisId: baseAxis.index,\n      sortInfo: sortResult\n    });\n  };\n  BarView.prototype.remove = function (ecModel, api) {\n    this._clear(this._model);\n    this._removeOnRenderedListener(api);\n  };\n  BarView.prototype.dispose = function (ecModel, api) {\n    this._removeOnRenderedListener(api);\n  };\n  BarView.prototype._removeOnRenderedListener = function (api) {\n    if (this._onRendered) {\n      api.getZr().off('rendered', this._onRendered);\n      this._onRendered = null;\n    }\n  };\n  BarView.prototype._clear = function (model) {\n    var group = this.group;\n    var data = this._data;\n    if (model && model.isAnimationEnabled() && data && !this._isLargeDraw) {\n      this._removeBackground();\n      this._backgroundEls = [];\n      data.eachItemGraphicEl(function (el) {\n        removeElementWithFadeOut(el, model, getECData(el).dataIndex);\n      });\n    } else {\n      group.removeAll();\n    }\n    this._data = null;\n    this._isFirstFrame = true;\n  };\n  BarView.prototype._removeBackground = function () {\n    this.group.remove(this._backgroundGroup);\n    this._backgroundGroup = null;\n  };\n  BarView.type = 'bar';\n  return BarView;\n}(ChartView);\nvar clip = {\n  cartesian2d: function (coordSysBoundingRect, layout) {\n    var signWidth = layout.width < 0 ? -1 : 1;\n    var signHeight = layout.height < 0 ? -1 : 1;\n    // Needs positive width and height\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n    var coordSysX2 = coordSysBoundingRect.x + coordSysBoundingRect.width;\n    var coordSysY2 = coordSysBoundingRect.y + coordSysBoundingRect.height;\n    var x = mathMax(layout.x, coordSysBoundingRect.x);\n    var x2 = mathMin(layout.x + layout.width, coordSysX2);\n    var y = mathMax(layout.y, coordSysBoundingRect.y);\n    var y2 = mathMin(layout.y + layout.height, coordSysY2);\n    var xClipped = x2 < x;\n    var yClipped = y2 < y;\n    // When xClipped or yClipped, the element will be marked as `ignore`.\n    // But we should also place the element at the edge of the coord sys bounding rect.\n    // Because if data changed and the bar shows again, its transition animation\n    // will begin at this place.\n    layout.x = xClipped && x > coordSysX2 ? x2 : x;\n    layout.y = yClipped && y > coordSysY2 ? y2 : y;\n    layout.width = xClipped ? 0 : x2 - x;\n    layout.height = yClipped ? 0 : y2 - y;\n    // Reverse back\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n    return xClipped || yClipped;\n  },\n  polar: function (coordSysClipArea, layout) {\n    var signR = layout.r0 <= layout.r ? 1 : -1;\n    // Make sure r is larger than r0\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n    var r = mathMin(layout.r, coordSysClipArea.r);\n    var r0 = mathMax(layout.r0, coordSysClipArea.r0);\n    layout.r = r;\n    layout.r0 = r0;\n    var clipped = r - r0 < 0;\n    // Reverse back\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n    return clipped;\n  }\n};\nvar elementCreator = {\n  cartesian2d: function (seriesModel, data, newIndex, layout, isHorizontal, animationModel, axisModel, isUpdate, roundCap) {\n    var rect = new Rect({\n      shape: extend({}, layout),\n      z2: 1\n    });\n    rect.__dataIndex = newIndex;\n    rect.name = 'item';\n    if (animationModel) {\n      var rectShape = rect.shape;\n      var animateProperty = isHorizontal ? 'height' : 'width';\n      rectShape[animateProperty] = 0;\n    }\n    return rect;\n  },\n  polar: function (seriesModel, data, newIndex, layout, isRadial, animationModel, axisModel, isUpdate, roundCap) {\n    var ShapeClass = !isRadial && roundCap ? Sausage : Sector;\n    var sector = new ShapeClass({\n      shape: layout,\n      z2: 1\n    });\n    sector.name = 'item';\n    var positionMap = createPolarPositionMapping(isRadial);\n    sector.calculateTextPosition = createSectorCalculateTextPosition(positionMap, {\n      isRoundCap: ShapeClass === Sausage\n    });\n    // Animation\n    if (animationModel) {\n      var sectorShape = sector.shape;\n      var animateProperty = isRadial ? 'r' : 'endAngle';\n      var animateTarget = {};\n      sectorShape[animateProperty] = isRadial ? layout.r0 : layout.startAngle;\n      animateTarget[animateProperty] = layout[animateProperty];\n      (isUpdate ? updateProps : initProps)(sector, {\n        shape: animateTarget\n        // __value: typeof dataValue === 'string' ? parseInt(dataValue, 10) : dataValue\n      }, animationModel);\n    }\n    return sector;\n  }\n};\nfunction shouldRealtimeSort(seriesModel, coordSys) {\n  var realtimeSortOption = seriesModel.get('realtimeSort', true);\n  var baseAxis = coordSys.getBaseAxis();\n  if (process.env.NODE_ENV !== 'production') {\n    if (realtimeSortOption) {\n      if (baseAxis.type !== 'category') {\n        warn('`realtimeSort` will not work because this bar series is not based on a category axis.');\n      }\n      if (coordSys.type !== 'cartesian2d') {\n        warn('`realtimeSort` will not work because this bar series is not on cartesian2d.');\n      }\n    }\n  }\n  if (realtimeSortOption && baseAxis.type === 'category' && coordSys.type === 'cartesian2d') {\n    return {\n      baseAxis: baseAxis,\n      otherAxis: coordSys.getOtherAxis(baseAxis)\n    };\n  }\n}\nfunction updateRealtimeAnimation(realtimeSortCfg, seriesAnimationModel, el, layout, newIndex, isHorizontal, isUpdate, isChangeOrder) {\n  var seriesTarget;\n  var axisTarget;\n  if (isHorizontal) {\n    axisTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n    seriesTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n  } else {\n    axisTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n    seriesTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n  }\n  if (!isChangeOrder) {\n    // Keep the original growth animation if only axis order changed.\n    // Not start a new animation.\n    (isUpdate ? updateProps : initProps)(el, {\n      shape: seriesTarget\n    }, seriesAnimationModel, newIndex, null);\n  }\n  var axisAnimationModel = seriesAnimationModel ? realtimeSortCfg.baseAxis.model : null;\n  (isUpdate ? updateProps : initProps)(el, {\n    shape: axisTarget\n  }, axisAnimationModel, newIndex);\n}\nfunction checkPropertiesNotValid(obj, props) {\n  for (var i = 0; i < props.length; i++) {\n    if (!isFinite(obj[props[i]])) {\n      return true;\n    }\n  }\n  return false;\n}\nvar rectPropties = ['x', 'y', 'width', 'height'];\nvar polarPropties = ['cx', 'cy', 'r', 'startAngle', 'endAngle'];\nvar isValidLayout = {\n  cartesian2d: function (layout) {\n    return !checkPropertiesNotValid(layout, rectPropties);\n  },\n  polar: function (layout) {\n    return !checkPropertiesNotValid(layout, polarPropties);\n  }\n};\nvar getLayout = {\n  // itemModel is only used to get borderWidth, which is not needed\n  // when calculating bar background layout.\n  cartesian2d: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    var fixedLineWidth = itemModel ? getLineWidth(itemModel, layout) : 0;\n    // fix layout with lineWidth\n    var signX = layout.width > 0 ? 1 : -1;\n    var signY = layout.height > 0 ? 1 : -1;\n    return {\n      x: layout.x + signX * fixedLineWidth / 2,\n      y: layout.y + signY * fixedLineWidth / 2,\n      width: layout.width - signX * fixedLineWidth,\n      height: layout.height - signY * fixedLineWidth\n    };\n  },\n  polar: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    return {\n      cx: layout.cx,\n      cy: layout.cy,\n      r0: layout.r0,\n      r: layout.r,\n      startAngle: layout.startAngle,\n      endAngle: layout.endAngle,\n      clockwise: layout.clockwise\n    };\n  }\n};\nfunction isZeroOnPolar(layout) {\n  return layout.startAngle != null && layout.endAngle != null && layout.startAngle === layout.endAngle;\n}\nfunction createPolarPositionMapping(isRadial) {\n  return function (isRadial) {\n    var arcOrAngle = isRadial ? 'Arc' : 'Angle';\n    return function (position) {\n      switch (position) {\n        case 'start':\n        case 'insideStart':\n        case 'end':\n        case 'insideEnd':\n          return position + arcOrAngle;\n        default:\n          return position;\n      }\n    };\n  }(isRadial);\n}\nfunction updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, isPolar) {\n  var style = data.getItemVisual(dataIndex, 'style');\n  if (!isPolar) {\n    var borderRadius = itemModel.get(['itemStyle', 'borderRadius']) || 0;\n    el.setShape('r', borderRadius);\n  } else if (!seriesModel.get('roundCap')) {\n    var sectorShape = el.shape;\n    var cornerRadius = getSectorCornerRadius(itemModel.getModel('itemStyle'), sectorShape, true);\n    extend(sectorShape, cornerRadius);\n    el.setShape(sectorShape);\n  }\n  el.useStyle(style);\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && el.attr('cursor', cursorStyle);\n  var labelPositionOutside = isPolar ? isHorizontalOrRadial ? layout.r >= layout.r0 ? 'endArc' : 'startArc' : layout.endAngle >= layout.startAngle ? 'endAngle' : 'startAngle' : isHorizontalOrRadial ? layout.height >= 0 ? 'bottom' : 'top' : layout.width >= 0 ? 'right' : 'left';\n  var labelStatesModels = getLabelStatesModels(itemModel);\n  setLabelStyle(el, labelStatesModels, {\n    labelFetcher: seriesModel,\n    labelDataIndex: dataIndex,\n    defaultText: getDefaultLabel(seriesModel.getData(), dataIndex),\n    inheritColor: style.fill,\n    defaultOpacity: style.opacity,\n    defaultOutsidePosition: labelPositionOutside\n  });\n  var label = el.getTextContent();\n  if (isPolar && label) {\n    var position = itemModel.get(['label', 'position']);\n    el.textConfig.inside = position === 'middle' ? true : null;\n    setSectorTextRotation(el, position === 'outside' ? labelPositionOutside : position, createPolarPositionMapping(isHorizontalOrRadial), itemModel.get(['label', 'rotate']));\n  }\n  setLabelValueAnimation(label, labelStatesModels, seriesModel.getRawValue(dataIndex), function (value) {\n    return getDefaultInterpolatedLabel(data, value);\n  });\n  var emphasisModel = itemModel.getModel(['emphasis']);\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  setStatesStylesFromModel(el, itemModel);\n  if (isZeroOnPolar(layout)) {\n    el.style.fill = 'none';\n    el.style.stroke = 'none';\n    each(el.states, function (state) {\n      if (state.style) {\n        state.style.fill = state.style.stroke = 'none';\n      }\n    });\n  }\n}\n// In case width or height are too small.\nfunction getLineWidth(itemModel, rawLayout) {\n  // Has no border.\n  var borderColor = itemModel.get(['itemStyle', 'borderColor']);\n  if (!borderColor || borderColor === 'none') {\n    return 0;\n  }\n  var lineWidth = itemModel.get(['itemStyle', 'borderWidth']) || 0;\n  // width or height may be NaN for empty data\n  var width = isNaN(rawLayout.width) ? Number.MAX_VALUE : Math.abs(rawLayout.width);\n  var height = isNaN(rawLayout.height) ? Number.MAX_VALUE : Math.abs(rawLayout.height);\n  return Math.min(lineWidth, width, height);\n}\nvar LagePathShape = /** @class */function () {\n  function LagePathShape() {}\n  return LagePathShape;\n}();\nvar LargePath = /** @class */function (_super) {\n  __extends(LargePath, _super);\n  function LargePath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'largeBar';\n    return _this;\n  }\n  LargePath.prototype.getDefaultShape = function () {\n    return new LagePathShape();\n  };\n  LargePath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n    var baseDimIdx = this.baseDimIdx;\n    var valueDimIdx = 1 - this.baseDimIdx;\n    var startPoint = [];\n    var size = [];\n    var barWidth = this.barWidth;\n    for (var i = 0; i < points.length; i += 3) {\n      size[baseDimIdx] = barWidth;\n      size[valueDimIdx] = points[i + 2];\n      startPoint[baseDimIdx] = points[i + baseDimIdx];\n      startPoint[valueDimIdx] = points[i + valueDimIdx];\n      ctx.rect(startPoint[0], startPoint[1], size[0], size[1]);\n    }\n  };\n  return LargePath;\n}(Path);\nfunction createLarge(seriesModel, group, progressiveEls, incremental) {\n  // TODO support polar\n  var data = seriesModel.getData();\n  var baseDimIdx = data.getLayout('valueAxisHorizontal') ? 1 : 0;\n  var largeDataIndices = data.getLayout('largeDataIndices');\n  var barWidth = data.getLayout('size');\n  var backgroundModel = seriesModel.getModel('backgroundStyle');\n  var bgPoints = data.getLayout('largeBackgroundPoints');\n  if (bgPoints) {\n    var bgEl = new LargePath({\n      shape: {\n        points: bgPoints\n      },\n      incremental: !!incremental,\n      silent: true,\n      z2: 0\n    });\n    bgEl.baseDimIdx = baseDimIdx;\n    bgEl.largeDataIndices = largeDataIndices;\n    bgEl.barWidth = barWidth;\n    bgEl.useStyle(backgroundModel.getItemStyle());\n    group.add(bgEl);\n    progressiveEls && progressiveEls.push(bgEl);\n  }\n  var el = new LargePath({\n    shape: {\n      points: data.getLayout('largePoints')\n    },\n    incremental: !!incremental,\n    ignoreCoarsePointer: true,\n    z2: 1\n  });\n  el.baseDimIdx = baseDimIdx;\n  el.largeDataIndices = largeDataIndices;\n  el.barWidth = barWidth;\n  group.add(el);\n  el.useStyle(data.getVisual('style'));\n  // Enable tooltip and user mouse/touch event handlers.\n  getECData(el).seriesIndex = seriesModel.seriesIndex;\n  if (!seriesModel.get('silent')) {\n    el.on('mousedown', largePathUpdateDataIndex);\n    el.on('mousemove', largePathUpdateDataIndex);\n  }\n  progressiveEls && progressiveEls.push(el);\n}\n// Use throttle to avoid frequently traverse to find dataIndex.\nvar largePathUpdateDataIndex = throttle(function (event) {\n  var largePath = this;\n  var dataIndex = largePathFindDataIndex(largePath, event.offsetX, event.offsetY);\n  getECData(largePath).dataIndex = dataIndex >= 0 ? dataIndex : null;\n}, 30, false);\nfunction largePathFindDataIndex(largePath, x, y) {\n  var baseDimIdx = largePath.baseDimIdx;\n  var valueDimIdx = 1 - baseDimIdx;\n  var points = largePath.shape.points;\n  var largeDataIndices = largePath.largeDataIndices;\n  var startPoint = [];\n  var size = [];\n  var barWidth = largePath.barWidth;\n  for (var i = 0, len = points.length / 3; i < len; i++) {\n    var ii = i * 3;\n    size[baseDimIdx] = barWidth;\n    size[valueDimIdx] = points[ii + 2];\n    startPoint[baseDimIdx] = points[ii + baseDimIdx];\n    startPoint[valueDimIdx] = points[ii + valueDimIdx];\n    if (size[valueDimIdx] < 0) {\n      startPoint[valueDimIdx] += size[valueDimIdx];\n      size[valueDimIdx] = -size[valueDimIdx];\n    }\n    if (x >= startPoint[0] && x <= startPoint[0] + size[0] && y >= startPoint[1] && y <= startPoint[1] + size[1]) {\n      return largeDataIndices[i];\n    }\n  }\n  return -1;\n}\nfunction createBackgroundShape(isHorizontalOrRadial, layout, coord) {\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var rectShape = layout;\n    var coordLayout = coord.getArea();\n    return {\n      x: isHorizontalOrRadial ? rectShape.x : coordLayout.x,\n      y: isHorizontalOrRadial ? coordLayout.y : rectShape.y,\n      width: isHorizontalOrRadial ? rectShape.width : coordLayout.width,\n      height: isHorizontalOrRadial ? coordLayout.height : rectShape.height\n    };\n  } else {\n    var coordLayout = coord.getArea();\n    var sectorShape = layout;\n    return {\n      cx: coordLayout.cx,\n      cy: coordLayout.cy,\n      r0: isHorizontalOrRadial ? coordLayout.r0 : sectorShape.r0,\n      r: isHorizontalOrRadial ? coordLayout.r : sectorShape.r,\n      startAngle: isHorizontalOrRadial ? sectorShape.startAngle : 0,\n      endAngle: isHorizontalOrRadial ? sectorShape.endAngle : Math.PI * 2\n    };\n  }\n}\nfunction createBackgroundEl(coord, isHorizontalOrRadial, layout) {\n  var ElementClz = coord.type === 'polar' ? Sector : Rect;\n  return new ElementClz({\n    shape: createBackgroundShape(isHorizontalOrRadial, layout, coord),\n    silent: true,\n    z2: 0\n  });\n}\nexport default BarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { layout, createProgressiveLayout } from '../../layout/barGrid.js';\nimport dataSample from '../../processor/dataSample.js';\nimport BarSeries from './BarSeries.js';\nimport BarView from './BarView.js';\nexport function install(registers) {\n  registers.registerChartView(BarView);\n  registers.registerSeriesModel(BarSeries);\n  registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT, zrUtil.curry(layout, 'bar'));\n  // Do layout after other overall layout, which can prepare some information.\n  registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, createProgressiveLayout('bar'));\n  // Down sample after filter\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('bar'));\n  /**\n   * @payload\n   * @property {string} [componentType=series]\n   * @property {number} [dx]\n   * @property {number} [dy]\n   * @property {number} [zoom]\n   * @property {number} [originX]\n   * @property {number} [originY]\n   */\n  registers.registerAction({\n    type: 'changeAxisOrder',\n    event: 'changeAxisOrder',\n    update: 'update'\n  }, function (payload, ecModel) {\n    var componentType = payload.componentType || 'series';\n    ecModel.eachComponent({\n      mainType: componentType,\n      query: payload\n    }, function (componentModel) {\n      if (payload.sortInfo) {\n        componentModel.axis.setCategorySortInfo(payload.sortInfo);\n      }\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis } from '../../util/states.js';\nimport { createSymbol, normalizeSymbolOffset } from '../../util/symbol.js';\nimport { parsePercent, isNumeric } from '../../util/number.js';\nimport ChartView from '../../view/Chart.js';\nimport { getDefaultLabel } from '../helper/labelHelper.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nvar BAR_BORDER_WIDTH_QUERY = ['itemStyle', 'borderWidth'];\n// index: +isHorizontal\nvar LAYOUT_ATTRS = [{\n  xy: 'x',\n  wh: 'width',\n  index: 0,\n  posDesc: ['left', 'right']\n}, {\n  xy: 'y',\n  wh: 'height',\n  index: 1,\n  posDesc: ['top', 'bottom']\n}];\nvar pathForLineWidth = new graphic.Circle();\nvar PictorialBarView = /** @class */function (_super) {\n  __extends(PictorialBarView, _super);\n  function PictorialBarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = PictorialBarView.type;\n    return _this;\n  }\n  PictorialBarView.prototype.render = function (seriesModel, ecModel, api) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = baseAxis.isHorizontal();\n    var coordSysRect = cartesian.master.getRect();\n    var opt = {\n      ecSize: {\n        width: api.getWidth(),\n        height: api.getHeight()\n      },\n      seriesModel: seriesModel,\n      coordSys: cartesian,\n      coordSysExtent: [[coordSysRect.x, coordSysRect.x + coordSysRect.width], [coordSysRect.y, coordSysRect.y + coordSysRect.height]],\n      isHorizontal: isHorizontal,\n      valueDim: LAYOUT_ATTRS[+isHorizontal],\n      categoryDim: LAYOUT_ATTRS[1 - +isHorizontal]\n    };\n    data.diff(oldData).add(function (dataIndex) {\n      if (!data.hasValue(dataIndex)) {\n        return;\n      }\n      var itemModel = getItemModel(data, dataIndex);\n      var symbolMeta = getSymbolMeta(data, dataIndex, itemModel, opt);\n      var bar = createBar(data, opt, symbolMeta);\n      data.setItemGraphicEl(dataIndex, bar);\n      group.add(bar);\n      updateCommon(bar, opt, symbolMeta);\n    }).update(function (newIndex, oldIndex) {\n      var bar = oldData.getItemGraphicEl(oldIndex);\n      if (!data.hasValue(newIndex)) {\n        group.remove(bar);\n        return;\n      }\n      var itemModel = getItemModel(data, newIndex);\n      var symbolMeta = getSymbolMeta(data, newIndex, itemModel, opt);\n      var pictorialShapeStr = getShapeStr(data, symbolMeta);\n      if (bar && pictorialShapeStr !== bar.__pictorialShapeStr) {\n        group.remove(bar);\n        data.setItemGraphicEl(newIndex, null);\n        bar = null;\n      }\n      if (bar) {\n        updateBar(bar, opt, symbolMeta);\n      } else {\n        bar = createBar(data, opt, symbolMeta, true);\n      }\n      data.setItemGraphicEl(newIndex, bar);\n      bar.__pictorialSymbolMeta = symbolMeta;\n      // Add back\n      group.add(bar);\n      updateCommon(bar, opt, symbolMeta);\n    }).remove(function (dataIndex) {\n      var bar = oldData.getItemGraphicEl(dataIndex);\n      bar && removeBar(oldData, dataIndex, bar.__pictorialSymbolMeta.animationModel, bar);\n    }).execute();\n    // Do clipping\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n    this._data = data;\n    return this.group;\n  };\n  PictorialBarView.prototype.remove = function (ecModel, api) {\n    var group = this.group;\n    var data = this._data;\n    if (ecModel.get('animation')) {\n      if (data) {\n        data.eachItemGraphicEl(function (bar) {\n          removeBar(data, getECData(bar).dataIndex, ecModel, bar);\n        });\n      }\n    } else {\n      group.removeAll();\n    }\n  };\n  PictorialBarView.type = 'pictorialBar';\n  return PictorialBarView;\n}(ChartView);\n// Set or calculate default value about symbol, and calculate layout info.\nfunction getSymbolMeta(data, dataIndex, itemModel, opt) {\n  var layout = data.getItemLayout(dataIndex);\n  var symbolRepeat = itemModel.get('symbolRepeat');\n  var symbolClip = itemModel.get('symbolClip');\n  var symbolPosition = itemModel.get('symbolPosition') || 'start';\n  var symbolRotate = itemModel.get('symbolRotate');\n  var rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n  var symbolPatternSize = itemModel.get('symbolPatternSize') || 2;\n  var isAnimationEnabled = itemModel.isAnimationEnabled();\n  var symbolMeta = {\n    dataIndex: dataIndex,\n    layout: layout,\n    itemModel: itemModel,\n    symbolType: data.getItemVisual(dataIndex, 'symbol') || 'circle',\n    style: data.getItemVisual(dataIndex, 'style'),\n    symbolClip: symbolClip,\n    symbolRepeat: symbolRepeat,\n    symbolRepeatDirection: itemModel.get('symbolRepeatDirection'),\n    symbolPatternSize: symbolPatternSize,\n    rotation: rotation,\n    animationModel: isAnimationEnabled ? itemModel : null,\n    hoverScale: isAnimationEnabled && itemModel.get(['emphasis', 'scale']),\n    z2: itemModel.getShallow('z', true) || 0\n  };\n  prepareBarLength(itemModel, symbolRepeat, layout, opt, symbolMeta);\n  prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, symbolMeta.boundingLength, symbolMeta.pxSign, symbolPatternSize, opt, symbolMeta);\n  prepareLineWidth(itemModel, symbolMeta.symbolScale, rotation, opt, symbolMeta);\n  var symbolSize = symbolMeta.symbolSize;\n  var symbolOffset = normalizeSymbolOffset(itemModel.get('symbolOffset'), symbolSize);\n  prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, symbolMeta.valueLineWidth, symbolMeta.boundingLength, symbolMeta.repeatCutLength, opt, symbolMeta);\n  return symbolMeta;\n}\n// bar length can be negative.\nfunction prepareBarLength(itemModel, symbolRepeat, layout, opt, outputSymbolMeta) {\n  var valueDim = opt.valueDim;\n  var symbolBoundingData = itemModel.get('symbolBoundingData');\n  var valueAxis = opt.coordSys.getOtherAxis(opt.coordSys.getBaseAxis());\n  var zeroPx = valueAxis.toGlobalCoord(valueAxis.dataToCoord(0));\n  var pxSignIdx = 1 - +(layout[valueDim.wh] <= 0);\n  var boundingLength;\n  if (zrUtil.isArray(symbolBoundingData)) {\n    var symbolBoundingExtent = [convertToCoordOnAxis(valueAxis, symbolBoundingData[0]) - zeroPx, convertToCoordOnAxis(valueAxis, symbolBoundingData[1]) - zeroPx];\n    symbolBoundingExtent[1] < symbolBoundingExtent[0] && symbolBoundingExtent.reverse();\n    boundingLength = symbolBoundingExtent[pxSignIdx];\n  } else if (symbolBoundingData != null) {\n    boundingLength = convertToCoordOnAxis(valueAxis, symbolBoundingData) - zeroPx;\n  } else if (symbolRepeat) {\n    boundingLength = opt.coordSysExtent[valueDim.index][pxSignIdx] - zeroPx;\n  } else {\n    boundingLength = layout[valueDim.wh];\n  }\n  outputSymbolMeta.boundingLength = boundingLength;\n  if (symbolRepeat) {\n    outputSymbolMeta.repeatCutLength = layout[valueDim.wh];\n  }\n  // if 'pxSign' means sign of pixel,  it can't be zero, or symbolScale will be zero\n  // and when borderWidth be settled, the actual linewidth will be NaN\n  outputSymbolMeta.pxSign = boundingLength > 0 ? 1 : -1;\n}\nfunction convertToCoordOnAxis(axis, value) {\n  return axis.toGlobalCoord(axis.dataToCoord(axis.scale.parse(value)));\n}\n// Support ['100%', '100%']\nfunction prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, boundingLength, pxSign, symbolPatternSize, opt, outputSymbolMeta) {\n  var valueDim = opt.valueDim;\n  var categoryDim = opt.categoryDim;\n  var categorySize = Math.abs(layout[categoryDim.wh]);\n  var symbolSize = data.getItemVisual(dataIndex, 'symbolSize');\n  var parsedSymbolSize;\n  if (zrUtil.isArray(symbolSize)) {\n    parsedSymbolSize = symbolSize.slice();\n  } else {\n    if (symbolSize == null) {\n      // will parse to number below\n      parsedSymbolSize = ['100%', '100%'];\n    } else {\n      parsedSymbolSize = [symbolSize, symbolSize];\n    }\n  }\n  // Note: percentage symbolSize (like '100%') do not consider lineWidth, because it is\n  // to complicated to calculate real percent value if considering scaled lineWidth.\n  // So the actual size will bigger than layout size if lineWidth is bigger than zero,\n  // which can be tolerated in pictorial chart.\n  parsedSymbolSize[categoryDim.index] = parsePercent(parsedSymbolSize[categoryDim.index], categorySize);\n  parsedSymbolSize[valueDim.index] = parsePercent(parsedSymbolSize[valueDim.index], symbolRepeat ? categorySize : Math.abs(boundingLength));\n  outputSymbolMeta.symbolSize = parsedSymbolSize;\n  // If x or y is less than zero, show reversed shape.\n  var symbolScale = outputSymbolMeta.symbolScale = [parsedSymbolSize[0] / symbolPatternSize, parsedSymbolSize[1] / symbolPatternSize];\n  // Follow convention, 'right' and 'top' is the normal scale.\n  symbolScale[valueDim.index] *= (opt.isHorizontal ? -1 : 1) * pxSign;\n}\nfunction prepareLineWidth(itemModel, symbolScale, rotation, opt, outputSymbolMeta) {\n  // In symbols are drawn with scale, so do not need to care about the case that width\n  // or height are too small. But symbol use strokeNoScale, where acture lineWidth should\n  // be calculated.\n  var valueLineWidth = itemModel.get(BAR_BORDER_WIDTH_QUERY) || 0;\n  if (valueLineWidth) {\n    pathForLineWidth.attr({\n      scaleX: symbolScale[0],\n      scaleY: symbolScale[1],\n      rotation: rotation\n    });\n    pathForLineWidth.updateTransform();\n    valueLineWidth /= pathForLineWidth.getLineScale();\n    valueLineWidth *= symbolScale[opt.valueDim.index];\n  }\n  outputSymbolMeta.valueLineWidth = valueLineWidth || 0;\n}\nfunction prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, valueLineWidth, boundingLength, repeatCutLength, opt, outputSymbolMeta) {\n  var categoryDim = opt.categoryDim;\n  var valueDim = opt.valueDim;\n  var pxSign = outputSymbolMeta.pxSign;\n  var unitLength = Math.max(symbolSize[valueDim.index] + valueLineWidth, 0);\n  var pathLen = unitLength;\n  // Note: rotation will not effect the layout of symbols, because user may\n  // want symbols to rotate on its center, which should not be translated\n  // when rotating.\n  if (symbolRepeat) {\n    var absBoundingLength = Math.abs(boundingLength);\n    var symbolMargin = zrUtil.retrieve(itemModel.get('symbolMargin'), '15%') + '';\n    var hasEndGap = false;\n    if (symbolMargin.lastIndexOf('!') === symbolMargin.length - 1) {\n      hasEndGap = true;\n      symbolMargin = symbolMargin.slice(0, symbolMargin.length - 1);\n    }\n    var symbolMarginNumeric = parsePercent(symbolMargin, symbolSize[valueDim.index]);\n    var uLenWithMargin = Math.max(unitLength + symbolMarginNumeric * 2, 0);\n    // When symbol margin is less than 0, margin at both ends will be subtracted\n    // to ensure that all of the symbols will not be overflow the given area.\n    var endFix = hasEndGap ? 0 : symbolMarginNumeric * 2;\n    // Both final repeatTimes and final symbolMarginNumeric area calculated based on\n    // boundingLength.\n    var repeatSpecified = isNumeric(symbolRepeat);\n    var repeatTimes = repeatSpecified ? symbolRepeat : toIntTimes((absBoundingLength + endFix) / uLenWithMargin);\n    // Adjust calculate margin, to ensure each symbol is displayed\n    // entirely in the given layout area.\n    var mDiff = absBoundingLength - repeatTimes * unitLength;\n    symbolMarginNumeric = mDiff / 2 / (hasEndGap ? repeatTimes : Math.max(repeatTimes - 1, 1));\n    uLenWithMargin = unitLength + symbolMarginNumeric * 2;\n    endFix = hasEndGap ? 0 : symbolMarginNumeric * 2;\n    // Update repeatTimes when not all symbol will be shown.\n    if (!repeatSpecified && symbolRepeat !== 'fixed') {\n      repeatTimes = repeatCutLength ? toIntTimes((Math.abs(repeatCutLength) + endFix) / uLenWithMargin) : 0;\n    }\n    pathLen = repeatTimes * uLenWithMargin - endFix;\n    outputSymbolMeta.repeatTimes = repeatTimes;\n    outputSymbolMeta.symbolMargin = symbolMarginNumeric;\n  }\n  var sizeFix = pxSign * (pathLen / 2);\n  var pathPosition = outputSymbolMeta.pathPosition = [];\n  pathPosition[categoryDim.index] = layout[categoryDim.wh] / 2;\n  pathPosition[valueDim.index] = symbolPosition === 'start' ? sizeFix : symbolPosition === 'end' ? boundingLength - sizeFix : boundingLength / 2; // 'center'\n  if (symbolOffset) {\n    pathPosition[0] += symbolOffset[0];\n    pathPosition[1] += symbolOffset[1];\n  }\n  var bundlePosition = outputSymbolMeta.bundlePosition = [];\n  bundlePosition[categoryDim.index] = layout[categoryDim.xy];\n  bundlePosition[valueDim.index] = layout[valueDim.xy];\n  var barRectShape = outputSymbolMeta.barRectShape = zrUtil.extend({}, layout);\n  barRectShape[valueDim.wh] = pxSign * Math.max(Math.abs(layout[valueDim.wh]), Math.abs(pathPosition[valueDim.index] + sizeFix));\n  barRectShape[categoryDim.wh] = layout[categoryDim.wh];\n  var clipShape = outputSymbolMeta.clipShape = {};\n  // Consider that symbol may be overflow layout rect.\n  clipShape[categoryDim.xy] = -layout[categoryDim.xy];\n  clipShape[categoryDim.wh] = opt.ecSize[categoryDim.wh];\n  clipShape[valueDim.xy] = 0;\n  clipShape[valueDim.wh] = layout[valueDim.wh];\n}\nfunction createPath(symbolMeta) {\n  var symbolPatternSize = symbolMeta.symbolPatternSize;\n  var path = createSymbol(\n  // Consider texture img, make a big size.\n  symbolMeta.symbolType, -symbolPatternSize / 2, -symbolPatternSize / 2, symbolPatternSize, symbolPatternSize);\n  path.attr({\n    culling: true\n  });\n  path.type !== 'image' && path.setStyle({\n    strokeNoScale: true\n  });\n  return path;\n}\nfunction createOrUpdateRepeatSymbols(bar, opt, symbolMeta, isUpdate) {\n  var bundle = bar.__pictorialBundle;\n  var symbolSize = symbolMeta.symbolSize;\n  var valueLineWidth = symbolMeta.valueLineWidth;\n  var pathPosition = symbolMeta.pathPosition;\n  var valueDim = opt.valueDim;\n  var repeatTimes = symbolMeta.repeatTimes || 0;\n  var index = 0;\n  var unit = symbolSize[opt.valueDim.index] + valueLineWidth + symbolMeta.symbolMargin * 2;\n  eachPath(bar, function (path) {\n    path.__pictorialAnimationIndex = index;\n    path.__pictorialRepeatTimes = repeatTimes;\n    if (index < repeatTimes) {\n      updateAttr(path, null, makeTarget(index), symbolMeta, isUpdate);\n    } else {\n      updateAttr(path, null, {\n        scaleX: 0,\n        scaleY: 0\n      }, symbolMeta, isUpdate, function () {\n        bundle.remove(path);\n      });\n    }\n    // updateHoverAnimation(path, symbolMeta);\n    index++;\n  });\n  for (; index < repeatTimes; index++) {\n    var path = createPath(symbolMeta);\n    path.__pictorialAnimationIndex = index;\n    path.__pictorialRepeatTimes = repeatTimes;\n    bundle.add(path);\n    var target = makeTarget(index);\n    updateAttr(path, {\n      x: target.x,\n      y: target.y,\n      scaleX: 0,\n      scaleY: 0\n    }, {\n      scaleX: target.scaleX,\n      scaleY: target.scaleY,\n      rotation: target.rotation\n    }, symbolMeta, isUpdate);\n  }\n  function makeTarget(index) {\n    var position = pathPosition.slice();\n    // (start && pxSign > 0) || (end && pxSign < 0): i = repeatTimes - index\n    // Otherwise: i = index;\n    var pxSign = symbolMeta.pxSign;\n    var i = index;\n    if (symbolMeta.symbolRepeatDirection === 'start' ? pxSign > 0 : pxSign < 0) {\n      i = repeatTimes - 1 - index;\n    }\n    position[valueDim.index] = unit * (i - repeatTimes / 2 + 0.5) + pathPosition[valueDim.index];\n    return {\n      x: position[0],\n      y: position[1],\n      scaleX: symbolMeta.symbolScale[0],\n      scaleY: symbolMeta.symbolScale[1],\n      rotation: symbolMeta.rotation\n    };\n  }\n}\nfunction createOrUpdateSingleSymbol(bar, opt, symbolMeta, isUpdate) {\n  var bundle = bar.__pictorialBundle;\n  var mainPath = bar.__pictorialMainPath;\n  if (!mainPath) {\n    mainPath = bar.__pictorialMainPath = createPath(symbolMeta);\n    bundle.add(mainPath);\n    updateAttr(mainPath, {\n      x: symbolMeta.pathPosition[0],\n      y: symbolMeta.pathPosition[1],\n      scaleX: 0,\n      scaleY: 0,\n      rotation: symbolMeta.rotation\n    }, {\n      scaleX: symbolMeta.symbolScale[0],\n      scaleY: symbolMeta.symbolScale[1]\n    }, symbolMeta, isUpdate);\n  } else {\n    updateAttr(mainPath, null, {\n      x: symbolMeta.pathPosition[0],\n      y: symbolMeta.pathPosition[1],\n      scaleX: symbolMeta.symbolScale[0],\n      scaleY: symbolMeta.symbolScale[1],\n      rotation: symbolMeta.rotation\n    }, symbolMeta, isUpdate);\n  }\n}\n// bar rect is used for label.\nfunction createOrUpdateBarRect(bar, symbolMeta, isUpdate) {\n  var rectShape = zrUtil.extend({}, symbolMeta.barRectShape);\n  var barRect = bar.__pictorialBarRect;\n  if (!barRect) {\n    barRect = bar.__pictorialBarRect = new graphic.Rect({\n      z2: 2,\n      shape: rectShape,\n      silent: true,\n      style: {\n        stroke: 'transparent',\n        fill: 'transparent',\n        lineWidth: 0\n      }\n    });\n    barRect.disableMorphing = true;\n    bar.add(barRect);\n  } else {\n    updateAttr(barRect, null, {\n      shape: rectShape\n    }, symbolMeta, isUpdate);\n  }\n}\nfunction createOrUpdateClip(bar, opt, symbolMeta, isUpdate) {\n  // If not clip, symbol will be remove and rebuilt.\n  if (symbolMeta.symbolClip) {\n    var clipPath = bar.__pictorialClipPath;\n    var clipShape = zrUtil.extend({}, symbolMeta.clipShape);\n    var valueDim = opt.valueDim;\n    var animationModel = symbolMeta.animationModel;\n    var dataIndex = symbolMeta.dataIndex;\n    if (clipPath) {\n      graphic.updateProps(clipPath, {\n        shape: clipShape\n      }, animationModel, dataIndex);\n    } else {\n      clipShape[valueDim.wh] = 0;\n      clipPath = new graphic.Rect({\n        shape: clipShape\n      });\n      bar.__pictorialBundle.setClipPath(clipPath);\n      bar.__pictorialClipPath = clipPath;\n      var target = {};\n      target[valueDim.wh] = symbolMeta.clipShape[valueDim.wh];\n      graphic[isUpdate ? 'updateProps' : 'initProps'](clipPath, {\n        shape: target\n      }, animationModel, dataIndex);\n    }\n  }\n}\nfunction getItemModel(data, dataIndex) {\n  var itemModel = data.getItemModel(dataIndex);\n  itemModel.getAnimationDelayParams = getAnimationDelayParams;\n  itemModel.isAnimationEnabled = isAnimationEnabled;\n  return itemModel;\n}\nfunction getAnimationDelayParams(path) {\n  // The order is the same as the z-order, see `symbolRepeatDiretion`.\n  return {\n    index: path.__pictorialAnimationIndex,\n    count: path.__pictorialRepeatTimes\n  };\n}\nfunction isAnimationEnabled() {\n  // `animation` prop can be set on itemModel in pictorial bar chart.\n  return this.parentModel.isAnimationEnabled() && !!this.getShallow('animation');\n}\nfunction createBar(data, opt, symbolMeta, isUpdate) {\n  // bar is the main element for each data.\n  var bar = new graphic.Group();\n  // bundle is used for location and clip.\n  var bundle = new graphic.Group();\n  bar.add(bundle);\n  bar.__pictorialBundle = bundle;\n  bundle.x = symbolMeta.bundlePosition[0];\n  bundle.y = symbolMeta.bundlePosition[1];\n  if (symbolMeta.symbolRepeat) {\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta);\n  } else {\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta);\n  }\n  createOrUpdateBarRect(bar, symbolMeta, isUpdate);\n  createOrUpdateClip(bar, opt, symbolMeta, isUpdate);\n  bar.__pictorialShapeStr = getShapeStr(data, symbolMeta);\n  bar.__pictorialSymbolMeta = symbolMeta;\n  return bar;\n}\nfunction updateBar(bar, opt, symbolMeta) {\n  var animationModel = symbolMeta.animationModel;\n  var dataIndex = symbolMeta.dataIndex;\n  var bundle = bar.__pictorialBundle;\n  graphic.updateProps(bundle, {\n    x: symbolMeta.bundlePosition[0],\n    y: symbolMeta.bundlePosition[1]\n  }, animationModel, dataIndex);\n  if (symbolMeta.symbolRepeat) {\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta, true);\n  } else {\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta, true);\n  }\n  createOrUpdateBarRect(bar, symbolMeta, true);\n  createOrUpdateClip(bar, opt, symbolMeta, true);\n}\nfunction removeBar(data, dataIndex, animationModel, bar) {\n  // Not show text when animating\n  var labelRect = bar.__pictorialBarRect;\n  labelRect && labelRect.removeTextContent();\n  var paths = [];\n  eachPath(bar, function (path) {\n    paths.push(path);\n  });\n  bar.__pictorialMainPath && paths.push(bar.__pictorialMainPath);\n  // I do not find proper remove animation for clip yet.\n  bar.__pictorialClipPath && (animationModel = null);\n  zrUtil.each(paths, function (path) {\n    graphic.removeElement(path, {\n      scaleX: 0,\n      scaleY: 0\n    }, animationModel, dataIndex, function () {\n      bar.parent && bar.parent.remove(bar);\n    });\n  });\n  data.setItemGraphicEl(dataIndex, null);\n}\nfunction getShapeStr(data, symbolMeta) {\n  return [data.getItemVisual(symbolMeta.dataIndex, 'symbol') || 'none', !!symbolMeta.symbolRepeat, !!symbolMeta.symbolClip].join(':');\n}\nfunction eachPath(bar, cb, context) {\n  // Do not use Group#eachChild, because it do not support remove.\n  zrUtil.each(bar.__pictorialBundle.children(), function (el) {\n    el !== bar.__pictorialBarRect && cb.call(context, el);\n  });\n}\nfunction updateAttr(el, immediateAttrs, animationAttrs, symbolMeta, isUpdate, cb) {\n  immediateAttrs && el.attr(immediateAttrs);\n  // when symbolCip used, only clip path has init animation, otherwise it would be weird effect.\n  if (symbolMeta.symbolClip && !isUpdate) {\n    animationAttrs && el.attr(animationAttrs);\n  } else {\n    animationAttrs && graphic[isUpdate ? 'updateProps' : 'initProps'](el, animationAttrs, symbolMeta.animationModel, symbolMeta.dataIndex, cb);\n  }\n}\nfunction updateCommon(bar, opt, symbolMeta) {\n  var dataIndex = symbolMeta.dataIndex;\n  var itemModel = symbolMeta.itemModel;\n  // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n  var emphasisModel = itemModel.getModel('emphasis');\n  var emphasisStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n  var blurStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n  var selectStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n  var cursorStyle = itemModel.getShallow('cursor');\n  var focus = emphasisModel.get('focus');\n  var blurScope = emphasisModel.get('blurScope');\n  var hoverScale = emphasisModel.get('scale');\n  eachPath(bar, function (path) {\n    if (path instanceof ZRImage) {\n      var pathStyle = path.style;\n      path.useStyle(zrUtil.extend({\n        // TODO other properties like dx, dy ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, symbolMeta.style));\n    } else {\n      path.useStyle(symbolMeta.style);\n    }\n    var emphasisState = path.ensureState('emphasis');\n    emphasisState.style = emphasisStyle;\n    if (hoverScale) {\n      // NOTE: Must after scale is set after updateAttr\n      emphasisState.scaleX = path.scaleX * 1.1;\n      emphasisState.scaleY = path.scaleY * 1.1;\n    }\n    path.ensureState('blur').style = blurStyle;\n    path.ensureState('select').style = selectStyle;\n    cursorStyle && (path.cursor = cursorStyle);\n    path.z2 = symbolMeta.z2;\n  });\n  var barPositionOutside = opt.valueDim.posDesc[+(symbolMeta.boundingLength > 0)];\n  var barRect = bar.__pictorialBarRect;\n  barRect.ignoreClip = true;\n  setLabelStyle(barRect, getLabelStatesModels(itemModel), {\n    labelFetcher: opt.seriesModel,\n    labelDataIndex: dataIndex,\n    defaultText: getDefaultLabel(opt.seriesModel.getData(), dataIndex),\n    inheritColor: symbolMeta.style.fill,\n    defaultOpacity: symbolMeta.style.opacity,\n    defaultOutsidePosition: barPositionOutside\n  });\n  toggleHoverEmphasis(bar, focus, blurScope, emphasisModel.get('disabled'));\n}\nfunction toIntTimes(times) {\n  var roundedTimes = Math.round(times);\n  // Escapse accurate error\n  return Math.abs(times - roundedTimes) < 1e-4 ? roundedTimes : Math.ceil(times);\n}\nexport default PictorialBarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseBarSeriesModel from './BaseBarSeries.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar PictorialBarSeriesModel = /** @class */function (_super) {\n  __extends(PictorialBarSeriesModel, _super);\n  function PictorialBarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = PictorialBarSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    _this.defaultSymbol = 'roundRect';\n    return _this;\n  }\n  PictorialBarSeriesModel.prototype.getInitialData = function (option) {\n    // Disable stack.\n    option.stack = null;\n    return _super.prototype.getInitialData.apply(this, arguments);\n  };\n  PictorialBarSeriesModel.type = 'series.pictorialBar';\n  PictorialBarSeriesModel.dependencies = ['grid'];\n  PictorialBarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\n    symbol: 'circle',\n    symbolSize: null,\n    symbolRotate: null,\n    symbolPosition: null,\n    symbolOffset: null,\n    symbolMargin: null,\n    symbolRepeat: false,\n    symbolRepeatDirection: 'end',\n    symbolClip: false,\n    symbolBoundingData: null,\n    symbolPatternSize: 400,\n    barGap: '-100%',\n    // Pictorial bar do not clip by default because in many cases\n    // xAxis and yAxis are not displayed and it's expected not to clip\n    clip: false,\n    // z can be set in data item, which is z2 actually.\n    // Disable progressive\n    progressive: 0,\n    emphasis: {\n      // By default pictorialBar do not hover scale. Hover scale is not suitable\n      // for the case that both has foreground and background.\n      scale: false\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  });\n  return PictorialBarSeriesModel;\n}(BaseBarSeriesModel);\nexport default PictorialBarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport PictorialBarView from './PictorialBarView.js';\nimport PictorialBarSeriesModel from './PictorialBarSeries.js';\nimport { createProgressiveLayout, layout } from '../../layout/barGrid.js';\nimport { curry } from 'zrender/lib/core/util.js';\nexport function install(registers) {\n  registers.registerChartView(PictorialBarView);\n  registers.registerSeriesModel(PictorialBarSeriesModel);\n  registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT, curry(layout, 'pictorialBar'));\n  // Do layout after other overall layout, which can prepare some information.\n  registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, createProgressiveLayout('pictorialBar'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon.js';\nimport { mixin } from 'zrender/lib/core/util.js';\nvar BoxplotSeriesModel = /** @class */function (_super) {\n  __extends(BoxplotSeriesModel, _super);\n  function BoxplotSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = BoxplotSeriesModel.type;\n    // TODO\n    // box width represents group size, so dimension should have 'size'.\n    /**\n     * @see <https://en.wikipedia.org/wiki/Box_plot>\n     * The meanings of 'min' and 'max' depend on user,\n     * and echarts do not need to know it.\n     * @readOnly\n     */\n    _this.defaultValueDimensions = [{\n      name: 'min',\n      defaultTooltip: true\n    }, {\n      name: 'Q1',\n      defaultTooltip: true\n    }, {\n      name: 'median',\n      defaultTooltip: true\n    }, {\n      name: 'Q3',\n      defaultTooltip: true\n    }, {\n      name: 'max',\n      defaultTooltip: true\n    }];\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n  BoxplotSeriesModel.type = 'series.boxplot';\n  BoxplotSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\n  BoxplotSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    layout: null,\n    boxWidth: [7, 50],\n    itemStyle: {\n      color: '#fff',\n      borderWidth: 1\n    },\n    emphasis: {\n      scale: true,\n      itemStyle: {\n        borderWidth: 2,\n        shadowBlur: 5,\n        shadowOffsetX: 1,\n        shadowOffsetY: 1,\n        shadowColor: 'rgba(0,0,0,0.2)'\n      }\n    },\n    animationDuration: 800\n  };\n  return BoxplotSeriesModel;\n}(SeriesModel);\nmixin(BoxplotSeriesModel, WhiskerBoxCommonMixin, true);\nexport default BoxplotSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar BoxplotView = /** @class */function (_super) {\n  __extends(BoxplotView, _super);\n  function BoxplotView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = BoxplotView.type;\n    return _this;\n  }\n  BoxplotView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var group = this.group;\n    var oldData = this._data;\n    // There is no old data only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n    if (!this._data) {\n      group.removeAll();\n    }\n    var constDim = seriesModel.get('layout') === 'horizontal' ? 1 : 0;\n    data.diff(oldData).add(function (newIdx) {\n      if (data.hasValue(newIdx)) {\n        var itemLayout = data.getItemLayout(newIdx);\n        var symbolEl = createNormalBox(itemLayout, data, newIdx, constDim, true);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      // Empty data\n      if (!data.hasValue(newIdx)) {\n        group.remove(symbolEl);\n        return;\n      }\n      var itemLayout = data.getItemLayout(newIdx);\n      if (!symbolEl) {\n        symbolEl = createNormalBox(itemLayout, data, newIdx, constDim);\n      } else {\n        saveOldStyle(symbolEl);\n        updateNormalBoxData(itemLayout, symbolEl, data, newIdx);\n      }\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  };\n  BoxplotView.prototype.remove = function (ecModel) {\n    var group = this.group;\n    var data = this._data;\n    this._data = null;\n    data && data.eachItemGraphicEl(function (el) {\n      el && group.remove(el);\n    });\n  };\n  BoxplotView.type = 'boxplot';\n  return BoxplotView;\n}(ChartView);\nvar BoxPathShape = /** @class */function () {\n  function BoxPathShape() {}\n  return BoxPathShape;\n}();\nvar BoxPath = /** @class */function (_super) {\n  __extends(BoxPath, _super);\n  function BoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'boxplotBoxPath';\n    return _this;\n  }\n  BoxPath.prototype.getDefaultShape = function () {\n    return new BoxPathShape();\n  };\n  BoxPath.prototype.buildPath = function (ctx, shape) {\n    var ends = shape.points;\n    var i = 0;\n    ctx.moveTo(ends[i][0], ends[i][1]);\n    i++;\n    for (; i < 4; i++) {\n      ctx.lineTo(ends[i][0], ends[i][1]);\n    }\n    ctx.closePath();\n    for (; i < ends.length; i++) {\n      ctx.moveTo(ends[i][0], ends[i][1]);\n      i++;\n      ctx.lineTo(ends[i][0], ends[i][1]);\n    }\n  };\n  return BoxPath;\n}(Path);\nfunction createNormalBox(itemLayout, data, dataIndex, constDim, isInit) {\n  var ends = itemLayout.ends;\n  var el = new BoxPath({\n    shape: {\n      points: isInit ? transInit(ends, constDim, itemLayout) : ends\n    }\n  });\n  updateNormalBoxData(itemLayout, el, data, dataIndex, isInit);\n  return el;\n}\nfunction updateNormalBoxData(itemLayout, el, data, dataIndex, isInit) {\n  var seriesModel = data.hostModel;\n  var updateMethod = graphic[isInit ? 'initProps' : 'updateProps'];\n  updateMethod(el, {\n    shape: {\n      points: itemLayout.ends\n    }\n  }, seriesModel, dataIndex);\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.strokeNoScale = true;\n  el.z2 = 100;\n  var itemModel = data.getItemModel(dataIndex);\n  var emphasisModel = itemModel.getModel('emphasis');\n  setStatesStylesFromModel(el, itemModel);\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n}\nfunction transInit(points, dim, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[dim] = itemLayout.initBaseline;\n    return point;\n  });\n}\nexport default BoxplotView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parsePercent } from '../../util/number.js';\nvar each = zrUtil.each;\nexport default function boxplotLayout(ecModel) {\n  var groupResult = groupSeriesByAxis(ecModel);\n  each(groupResult, function (groupItem) {\n    var seriesModels = groupItem.seriesModels;\n    if (!seriesModels.length) {\n      return;\n    }\n    calculateBase(groupItem);\n    each(seriesModels, function (seriesModel, idx) {\n      layoutSingleSeries(seriesModel, groupItem.boxOffsetList[idx], groupItem.boxWidthList[idx]);\n    });\n  });\n}\n/**\n * Group series by axis.\n */\nfunction groupSeriesByAxis(ecModel) {\n  var result = [];\n  var axisList = [];\n  ecModel.eachSeriesByType('boxplot', function (seriesModel) {\n    var baseAxis = seriesModel.getBaseAxis();\n    var idx = zrUtil.indexOf(axisList, baseAxis);\n    if (idx < 0) {\n      idx = axisList.length;\n      axisList[idx] = baseAxis;\n      result[idx] = {\n        axis: baseAxis,\n        seriesModels: []\n      };\n    }\n    result[idx].seriesModels.push(seriesModel);\n  });\n  return result;\n}\n/**\n * Calculate offset and box width for each series.\n */\nfunction calculateBase(groupItem) {\n  var baseAxis = groupItem.axis;\n  var seriesModels = groupItem.seriesModels;\n  var seriesCount = seriesModels.length;\n  var boxWidthList = groupItem.boxWidthList = [];\n  var boxOffsetList = groupItem.boxOffsetList = [];\n  var boundList = [];\n  var bandWidth;\n  if (baseAxis.type === 'category') {\n    bandWidth = baseAxis.getBandWidth();\n  } else {\n    var maxDataCount_1 = 0;\n    each(seriesModels, function (seriesModel) {\n      maxDataCount_1 = Math.max(maxDataCount_1, seriesModel.getData().count());\n    });\n    var extent = baseAxis.getExtent();\n    bandWidth = Math.abs(extent[1] - extent[0]) / maxDataCount_1;\n  }\n  each(seriesModels, function (seriesModel) {\n    var boxWidthBound = seriesModel.get('boxWidth');\n    if (!zrUtil.isArray(boxWidthBound)) {\n      boxWidthBound = [boxWidthBound, boxWidthBound];\n    }\n    boundList.push([parsePercent(boxWidthBound[0], bandWidth) || 0, parsePercent(boxWidthBound[1], bandWidth) || 0]);\n  });\n  var availableWidth = bandWidth * 0.8 - 2;\n  var boxGap = availableWidth / seriesCount * 0.3;\n  var boxWidth = (availableWidth - boxGap * (seriesCount - 1)) / seriesCount;\n  var base = boxWidth / 2 - availableWidth / 2;\n  each(seriesModels, function (seriesModel, idx) {\n    boxOffsetList.push(base);\n    base += boxGap + boxWidth;\n    boxWidthList.push(Math.min(Math.max(boxWidth, boundList[idx][0]), boundList[idx][1]));\n  });\n}\n/**\n * Calculate points location for each series.\n */\nfunction layoutSingleSeries(seriesModel, offset, boxWidth) {\n  var coordSys = seriesModel.coordinateSystem;\n  var data = seriesModel.getData();\n  var halfWidth = boxWidth / 2;\n  var cDimIdx = seriesModel.get('layout') === 'horizontal' ? 0 : 1;\n  var vDimIdx = 1 - cDimIdx;\n  var coordDims = ['x', 'y'];\n  var cDim = data.mapDimension(coordDims[cDimIdx]);\n  var vDims = data.mapDimensionsAll(coordDims[vDimIdx]);\n  if (cDim == null || vDims.length < 5) {\n    return;\n  }\n  for (var dataIndex = 0; dataIndex < data.count(); dataIndex++) {\n    var axisDimVal = data.get(cDim, dataIndex);\n    var median = getPoint(axisDimVal, vDims[2], dataIndex);\n    var end1 = getPoint(axisDimVal, vDims[0], dataIndex);\n    var end2 = getPoint(axisDimVal, vDims[1], dataIndex);\n    var end4 = getPoint(axisDimVal, vDims[3], dataIndex);\n    var end5 = getPoint(axisDimVal, vDims[4], dataIndex);\n    var ends = [];\n    addBodyEnd(ends, end2, false);\n    addBodyEnd(ends, end4, true);\n    ends.push(end1, end2, end5, end4);\n    layEndLine(ends, end1);\n    layEndLine(ends, end5);\n    layEndLine(ends, median);\n    data.setItemLayout(dataIndex, {\n      initBaseline: median[vDimIdx],\n      ends: ends\n    });\n  }\n  function getPoint(axisDimVal, dim, dataIndex) {\n    var val = data.get(dim, dataIndex);\n    var p = [];\n    p[cDimIdx] = axisDimVal;\n    p[vDimIdx] = val;\n    var point;\n    if (isNaN(axisDimVal) || isNaN(val)) {\n      point = [NaN, NaN];\n    } else {\n      point = coordSys.dataToPoint(p);\n      point[cDimIdx] += offset;\n    }\n    return point;\n  }\n  function addBodyEnd(ends, point, start) {\n    var point1 = point.slice();\n    var point2 = point.slice();\n    point1[cDimIdx] += halfWidth;\n    point2[cDimIdx] -= halfWidth;\n    start ? ends.push(point1, point2) : ends.push(point2, point1);\n  }\n  function layEndLine(ends, endCenter) {\n    var from = endCenter.slice();\n    var to = endCenter.slice();\n    from[cDimIdx] -= halfWidth;\n    to[cDimIdx] += halfWidth;\n    ends.push(from, to);\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { quantile, asc } from '../../util/number.js';\nimport { isFunction, isString } from 'zrender/lib/core/util.js';\n/**\n * See:\n *  <https://en.wikipedia.org/wiki/Box_plot#cite_note-frigge_hoaglin_iglewicz-2>\n *  <http://stat.ethz.ch/R-manual/R-devel/library/grDevices/html/boxplot.stats.html>\n *\n * Helper method for preparing data.\n *\n * @param rawData like\n *        [\n *            [12,232,443], (raw data set for the first box)\n *            [3843,5545,1232], (raw data set for the second box)\n *            ...\n *        ]\n * @param opt.boundIQR=1.5 Data less than min bound is outlier.\n *      default 1.5, means Q1 - 1.5 * (Q3 - Q1).\n *      If 'none'/0 passed, min bound will not be used.\n */\nexport default function prepareBoxplotData(rawData, opt) {\n  opt = opt || {};\n  var boxData = [];\n  var outliers = [];\n  var boundIQR = opt.boundIQR;\n  var useExtreme = boundIQR === 'none' || boundIQR === 0;\n  for (var i = 0; i < rawData.length; i++) {\n    var ascList = asc(rawData[i].slice());\n    var Q1 = quantile(ascList, 0.25);\n    var Q2 = quantile(ascList, 0.5);\n    var Q3 = quantile(ascList, 0.75);\n    var min = ascList[0];\n    var max = ascList[ascList.length - 1];\n    var bound = (boundIQR == null ? 1.5 : boundIQR) * (Q3 - Q1);\n    var low = useExtreme ? min : Math.max(min, Q1 - bound);\n    var high = useExtreme ? max : Math.min(max, Q3 + bound);\n    var itemNameFormatter = opt.itemNameFormatter;\n    var itemName = isFunction(itemNameFormatter) ? itemNameFormatter({\n      value: i\n    }) : isString(itemNameFormatter) ? itemNameFormatter.replace('{value}', i + '') : i + '';\n    boxData.push([itemName, low, Q1, Q2, Q3, high]);\n    for (var j = 0; j < ascList.length; j++) {\n      var dataItem = ascList[j];\n      if (dataItem < low || dataItem > high) {\n        var outlier = [itemName, dataItem];\n        outliers.push(outlier);\n      }\n    }\n  }\n  return {\n    boxData: boxData,\n    outliers: outliers\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport prepareBoxplotData from './prepareBoxplotData.js';\nimport { throwError, makePrintable } from '../../util/log.js';\nimport { SOURCE_FORMAT_ARRAY_ROWS } from '../../util/types.js';\nexport var boxplotTransform = {\n  type: 'echarts:boxplot',\n  transform: function transform(params) {\n    var upstream = params.upstream;\n    if (upstream.sourceFormat !== SOURCE_FORMAT_ARRAY_ROWS) {\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('source data is not applicable for this boxplot transform. Expect number[][].');\n      }\n      throwError(errMsg);\n    }\n    var result = prepareBoxplotData(upstream.getRawData(), params.config);\n    return [{\n      dimensions: ['ItemName', 'Low', 'Q1', 'Q2', 'Q3', 'High'],\n      data: result.boxData\n    }, {\n      data: result.outliers\n    }];\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport BoxplotSeriesModel from './BoxplotSeries.js';\nimport BoxplotView from './BoxplotView.js';\nimport boxplotLayout from './boxplotLayout.js';\nimport { boxplotTransform } from './boxplotTransform.js';\nexport function install(registers) {\n  registers.registerSeriesModel(BoxplotSeriesModel);\n  registers.registerChartView(BoxplotView);\n  registers.registerLayout(boxplotLayout);\n  registers.registerTransform(boxplotTransform);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel } from '../../util/states.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar SKIP_PROPS = ['color', 'borderColor'];\nvar CandlestickView = /** @class */function (_super) {\n  __extends(CandlestickView, _super);\n  function CandlestickView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CandlestickView.type;\n    return _this;\n  }\n  CandlestickView.prototype.render = function (seriesModel, ecModel, api) {\n    // If there is clipPath created in large mode. Remove it.\n    this.group.removeClipPath();\n    // Clear previously rendered progressive elements.\n    this._progressiveEls = null;\n    this._updateDrawMode(seriesModel);\n    this._isLargeDraw ? this._renderLarge(seriesModel) : this._renderNormal(seriesModel);\n  };\n  CandlestickView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this._clear();\n    this._updateDrawMode(seriesModel);\n  };\n  CandlestickView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\n    this._progressiveEls = [];\n    this._isLargeDraw ? this._incrementalRenderLarge(params, seriesModel) : this._incrementalRenderNormal(params, seriesModel);\n  };\n  CandlestickView.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  CandlestickView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n      this._clear();\n    }\n  };\n  CandlestickView.prototype._renderNormal = function (seriesModel) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var needsClip = seriesModel.get('clip', true);\n    var coord = seriesModel.coordinateSystem;\n    var clipArea = coord.getArea && coord.getArea();\n    // There is no old data only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n    if (!this._data) {\n      group.removeAll();\n    }\n    data.diff(oldData).add(function (newIdx) {\n      if (data.hasValue(newIdx)) {\n        var itemLayout = data.getItemLayout(newIdx);\n        if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n          return;\n        }\n        var el = createNormalBox(itemLayout, newIdx, true);\n        graphic.initProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        setBoxCommon(el, data, newIdx, isSimpleBox);\n        group.add(el);\n        data.setItemGraphicEl(newIdx, el);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      // Empty data\n      if (!data.hasValue(newIdx)) {\n        group.remove(el);\n        return;\n      }\n      var itemLayout = data.getItemLayout(newIdx);\n      if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n        group.remove(el);\n        return;\n      }\n      if (!el) {\n        el = createNormalBox(itemLayout, newIdx);\n      } else {\n        graphic.updateProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        saveOldStyle(el);\n      }\n      setBoxCommon(el, data, newIdx, isSimpleBox);\n      group.add(el);\n      data.setItemGraphicEl(newIdx, el);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  };\n  CandlestickView.prototype._renderLarge = function (seriesModel) {\n    this._clear();\n    createLarge(seriesModel, this.group);\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n  };\n  CandlestickView.prototype._incrementalRenderNormal = function (params, seriesModel) {\n    var data = seriesModel.getData();\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var dataIndex;\n    while ((dataIndex = params.next()) != null) {\n      var itemLayout = data.getItemLayout(dataIndex);\n      var el = createNormalBox(itemLayout, dataIndex);\n      setBoxCommon(el, data, dataIndex, isSimpleBox);\n      el.incremental = true;\n      this.group.add(el);\n      this._progressiveEls.push(el);\n    }\n  };\n  CandlestickView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    createLarge(seriesModel, this.group, this._progressiveEls, true);\n  };\n  CandlestickView.prototype.remove = function (ecModel) {\n    this._clear();\n  };\n  CandlestickView.prototype._clear = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n  CandlestickView.type = 'candlestick';\n  return CandlestickView;\n}(ChartView);\nvar NormalBoxPathShape = /** @class */function () {\n  function NormalBoxPathShape() {}\n  return NormalBoxPathShape;\n}();\nvar NormalBoxPath = /** @class */function (_super) {\n  __extends(NormalBoxPath, _super);\n  function NormalBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'normalCandlestickBox';\n    return _this;\n  }\n  NormalBoxPath.prototype.getDefaultShape = function () {\n    return new NormalBoxPathShape();\n  };\n  NormalBoxPath.prototype.buildPath = function (ctx, shape) {\n    var ends = shape.points;\n    if (this.__simpleBox) {\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[6][0], ends[6][1]);\n    } else {\n      ctx.moveTo(ends[0][0], ends[0][1]);\n      ctx.lineTo(ends[1][0], ends[1][1]);\n      ctx.lineTo(ends[2][0], ends[2][1]);\n      ctx.lineTo(ends[3][0], ends[3][1]);\n      ctx.closePath();\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[5][0], ends[5][1]);\n      ctx.moveTo(ends[6][0], ends[6][1]);\n      ctx.lineTo(ends[7][0], ends[7][1]);\n    }\n  };\n  return NormalBoxPath;\n}(Path);\nfunction createNormalBox(itemLayout, dataIndex, isInit) {\n  var ends = itemLayout.ends;\n  return new NormalBoxPath({\n    shape: {\n      points: isInit ? transInit(ends, itemLayout) : ends\n    },\n    z2: 100\n  });\n}\nfunction isNormalBoxClipped(clipArea, itemLayout) {\n  var clipped = true;\n  for (var i = 0; i < itemLayout.ends.length; i++) {\n    // If any point are in the region.\n    if (clipArea.contain(itemLayout.ends[i][0], itemLayout.ends[i][1])) {\n      clipped = false;\n      break;\n    }\n  }\n  return clipped;\n}\nfunction setBoxCommon(el, data, dataIndex, isSimpleBox) {\n  var itemModel = data.getItemModel(dataIndex);\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.strokeNoScale = true;\n  el.__simpleBox = isSimpleBox;\n  setStatesStylesFromModel(el, itemModel);\n}\nfunction transInit(points, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[1] = itemLayout.initBaseline;\n    return point;\n  });\n}\nvar LargeBoxPathShape = /** @class */function () {\n  function LargeBoxPathShape() {}\n  return LargeBoxPathShape;\n}();\nvar LargeBoxPath = /** @class */function (_super) {\n  __extends(LargeBoxPath, _super);\n  function LargeBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'largeCandlestickBox';\n    return _this;\n  }\n  LargeBoxPath.prototype.getDefaultShape = function () {\n    return new LargeBoxPathShape();\n  };\n  LargeBoxPath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n    for (var i = 0; i < points.length;) {\n      if (this.__sign === points[i++]) {\n        var x = points[i++];\n        ctx.moveTo(x, points[i++]);\n        ctx.lineTo(x, points[i++]);\n      } else {\n        i += 3;\n      }\n    }\n  };\n  return LargeBoxPath;\n}(Path);\nfunction createLarge(seriesModel, group, progressiveEls, incremental) {\n  var data = seriesModel.getData();\n  var largePoints = data.getLayout('largePoints');\n  var elP = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: 1,\n    ignoreCoarsePointer: true\n  });\n  group.add(elP);\n  var elN = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: -1,\n    ignoreCoarsePointer: true\n  });\n  group.add(elN);\n  var elDoji = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: 0,\n    ignoreCoarsePointer: true\n  });\n  group.add(elDoji);\n  setLargeStyle(1, elP, seriesModel, data);\n  setLargeStyle(-1, elN, seriesModel, data);\n  setLargeStyle(0, elDoji, seriesModel, data);\n  if (incremental) {\n    elP.incremental = true;\n    elN.incremental = true;\n  }\n  if (progressiveEls) {\n    progressiveEls.push(elP, elN);\n  }\n}\nfunction setLargeStyle(sign, el, seriesModel, data) {\n  // TODO put in visual?\n  var borderColor = seriesModel.get(['itemStyle', sign > 0 ? 'borderColor' : 'borderColor0'])\n  // Use color for border color by default.\n  || seriesModel.get(['itemStyle', sign > 0 ? 'color' : 'color0']);\n  if (sign === 0) {\n    borderColor = seriesModel.get(['itemStyle', 'borderColorDoji']);\n  }\n  // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n  var itemStyle = seriesModel.getModel('itemStyle').getItemStyle(SKIP_PROPS);\n  el.useStyle(itemStyle);\n  el.style.fill = null;\n  el.style.stroke = borderColor;\n}\nexport default CandlestickView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon.js';\nimport { mixin } from 'zrender/lib/core/util.js';\nvar CandlestickSeriesModel = /** @class */function (_super) {\n  __extends(CandlestickSeriesModel, _super);\n  function CandlestickSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CandlestickSeriesModel.type;\n    _this.defaultValueDimensions = [{\n      name: 'open',\n      defaultTooltip: true\n    }, {\n      name: 'close',\n      defaultTooltip: true\n    }, {\n      name: 'lowest',\n      defaultTooltip: true\n    }, {\n      name: 'highest',\n      defaultTooltip: true\n    }];\n    return _this;\n  }\n  /**\n   * Get dimension for shadow in dataZoom\n   * @return dimension name\n   */\n  CandlestickSeriesModel.prototype.getShadowDim = function () {\n    return 'open';\n  };\n  CandlestickSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    var itemLayout = data.getItemLayout(dataIndex);\n    return itemLayout && selectors.rect(itemLayout.brushRect);\n  };\n  CandlestickSeriesModel.type = 'series.candlestick';\n  CandlestickSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\n  CandlestickSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    layout: null,\n    clip: true,\n    itemStyle: {\n      color: '#eb5454',\n      color0: '#47b262',\n      borderColor: '#eb5454',\n      borderColor0: '#47b262',\n      borderColorDoji: null,\n      // borderColor: '#d24040',\n      // borderColor0: '#398f4f',\n      borderWidth: 1\n    },\n    emphasis: {\n      scale: true,\n      itemStyle: {\n        borderWidth: 2\n      }\n    },\n    barMaxWidth: null,\n    barMinWidth: null,\n    barWidth: null,\n    large: true,\n    largeThreshold: 600,\n    progressive: 3e3,\n    progressiveThreshold: 1e4,\n    progressiveChunkMode: 'mod',\n    animationEasing: 'linear',\n    animationDuration: 300\n  };\n  return CandlestickSeriesModel;\n}(SeriesModel);\nmixin(CandlestickSeriesModel, WhiskerBoxCommonMixin, true);\nexport default CandlestickSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function candlestickPreprocessor(option) {\n  if (!option || !zrUtil.isArray(option.series)) {\n    return;\n  }\n  // Translate 'k' to 'candlestick'.\n  zrUtil.each(option.series, function (seriesItem) {\n    if (zrUtil.isObject(seriesItem) && seriesItem.type === 'k') {\n      seriesItem.type = 'candlestick';\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\nimport { extend } from 'zrender/lib/core/util.js';\nvar positiveBorderColorQuery = ['itemStyle', 'borderColor'];\nvar negativeBorderColorQuery = ['itemStyle', 'borderColor0'];\nvar dojiBorderColorQuery = ['itemStyle', 'borderColorDoji'];\nvar positiveColorQuery = ['itemStyle', 'color'];\nvar negativeColorQuery = ['itemStyle', 'color0'];\nvar candlestickVisual = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    function getColor(sign, model) {\n      return model.get(sign > 0 ? positiveColorQuery : negativeColorQuery);\n    }\n    function getBorderColor(sign, model) {\n      return model.get(sign === 0 ? dojiBorderColorQuery : sign > 0 ? positiveBorderColorQuery : negativeBorderColorQuery);\n    }\n    // Only visible series has each data be visual encoded\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var isLargeRender = seriesModel.pipelineContext.large;\n    return !isLargeRender && {\n      progress: function (params, data) {\n        var dataIndex;\n        while ((dataIndex = params.next()) != null) {\n          var itemModel = data.getItemModel(dataIndex);\n          var sign = data.getItemLayout(dataIndex).sign;\n          var style = itemModel.getItemStyle();\n          style.fill = getColor(sign, itemModel);\n          style.stroke = getBorderColor(sign, itemModel) || style.fill;\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\n          extend(existsStyle, style);\n        }\n      }\n    };\n  }\n};\nexport default candlestickVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { subPixelOptimize } from '../../util/graphic.js';\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\nimport { parsePercent } from '../../util/number.js';\nimport { map, retrieve2 } from 'zrender/lib/core/util.js';\nimport { createFloat32Array } from '../../util/vendor.js';\nvar candlestickLayout = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  reset: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var data = seriesModel.getData();\n    var candleWidth = calculateCandleWidth(seriesModel, data);\n    var cDimIdx = 0;\n    var vDimIdx = 1;\n    var coordDims = ['x', 'y'];\n    var cDimI = data.getDimensionIndex(data.mapDimension(coordDims[cDimIdx]));\n    var vDimsI = map(data.mapDimensionsAll(coordDims[vDimIdx]), data.getDimensionIndex, data);\n    var openDimI = vDimsI[0];\n    var closeDimI = vDimsI[1];\n    var lowestDimI = vDimsI[2];\n    var highestDimI = vDimsI[3];\n    data.setLayout({\n      candleWidth: candleWidth,\n      // The value is experimented visually.\n      isSimpleBox: candleWidth <= 1.3\n    });\n    if (cDimI < 0 || vDimsI.length < 4) {\n      return;\n    }\n    return {\n      progress: seriesModel.pipelineContext.large ? largeProgress : normalProgress\n    };\n    function normalProgress(params, data) {\n      var dataIndex;\n      var store = data.getStore();\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n        var ocLow = Math.min(openVal, closeVal);\n        var ocHigh = Math.max(openVal, closeVal);\n        var ocLowPoint = getPoint(ocLow, axisDimVal);\n        var ocHighPoint = getPoint(ocHigh, axisDimVal);\n        var lowestPoint = getPoint(lowestVal, axisDimVal);\n        var highestPoint = getPoint(highestVal, axisDimVal);\n        var ends = [];\n        addBodyEnd(ends, ocHighPoint, 0);\n        addBodyEnd(ends, ocLowPoint, 1);\n        ends.push(subPixelOptimizePoint(highestPoint), subPixelOptimizePoint(ocHighPoint), subPixelOptimizePoint(lowestPoint), subPixelOptimizePoint(ocLowPoint));\n        var itemModel = data.getItemModel(dataIndex);\n        var hasDojiColor = !!itemModel.get(['itemStyle', 'borderColorDoji']);\n        data.setItemLayout(dataIndex, {\n          sign: getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor),\n          initBaseline: openVal > closeVal ? ocHighPoint[vDimIdx] : ocLowPoint[vDimIdx],\n          ends: ends,\n          brushRect: makeBrushRect(lowestVal, highestVal, axisDimVal)\n        });\n      }\n      function getPoint(val, axisDimVal) {\n        var p = [];\n        p[cDimIdx] = axisDimVal;\n        p[vDimIdx] = val;\n        return isNaN(axisDimVal) || isNaN(val) ? [NaN, NaN] : coordSys.dataToPoint(p);\n      }\n      function addBodyEnd(ends, point, start) {\n        var point1 = point.slice();\n        var point2 = point.slice();\n        point1[cDimIdx] = subPixelOptimize(point1[cDimIdx] + candleWidth / 2, 1, false);\n        point2[cDimIdx] = subPixelOptimize(point2[cDimIdx] - candleWidth / 2, 1, true);\n        start ? ends.push(point1, point2) : ends.push(point2, point1);\n      }\n      function makeBrushRect(lowestVal, highestVal, axisDimVal) {\n        var pmin = getPoint(lowestVal, axisDimVal);\n        var pmax = getPoint(highestVal, axisDimVal);\n        pmin[cDimIdx] -= candleWidth / 2;\n        pmax[cDimIdx] -= candleWidth / 2;\n        return {\n          x: pmin[0],\n          y: pmin[1],\n          width: vDimIdx ? candleWidth : pmax[0] - pmin[0],\n          height: vDimIdx ? pmax[1] - pmin[1] : candleWidth\n        };\n      }\n      function subPixelOptimizePoint(point) {\n        point[cDimIdx] = subPixelOptimize(point[cDimIdx], 1);\n        return point;\n      }\n    }\n    function largeProgress(params, data) {\n      // Structure: [sign, x, yhigh, ylow, sign, x, yhigh, ylow, ...]\n      var points = createFloat32Array(params.count * 4);\n      var offset = 0;\n      var point;\n      var tmpIn = [];\n      var tmpOut = [];\n      var dataIndex;\n      var store = data.getStore();\n      var hasDojiColor = !!seriesModel.get(['itemStyle', 'borderColorDoji']);\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n        if (isNaN(axisDimVal) || isNaN(lowestVal) || isNaN(highestVal)) {\n          points[offset++] = NaN;\n          offset += 3;\n          continue;\n        }\n        points[offset++] = getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor);\n        tmpIn[cDimIdx] = axisDimVal;\n        tmpIn[vDimIdx] = lowestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[0] : NaN;\n        points[offset++] = point ? point[1] : NaN;\n        tmpIn[vDimIdx] = highestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[1] : NaN;\n      }\n      data.setLayout('largePoints', points);\n    }\n  }\n};\n/**\n * Get the sign of a single data.\n *\n * @returns 0 for doji with hasDojiColor: true,\n *          1 for positive,\n *          -1 for negative.\n */\nfunction getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor) {\n  var sign;\n  if (openVal > closeVal) {\n    sign = -1;\n  } else if (openVal < closeVal) {\n    sign = 1;\n  } else {\n    sign = hasDojiColor\n    // When doji color is set, use it instead of color/color0.\n    ? 0 : dataIndex > 0\n    // If close === open, compare with close of last record\n    ? store.get(closeDimI, dataIndex - 1) <= closeVal ? 1 : -1\n    // No record of previous, set to be positive\n    : 1;\n  }\n  return sign;\n}\nfunction calculateCandleWidth(seriesModel, data) {\n  var baseAxis = seriesModel.getBaseAxis();\n  var extent;\n  var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : (extent = baseAxis.getExtent(), Math.abs(extent[1] - extent[0]) / data.count());\n  var barMaxWidth = parsePercent(retrieve2(seriesModel.get('barMaxWidth'), bandWidth), bandWidth);\n  var barMinWidth = parsePercent(retrieve2(seriesModel.get('barMinWidth'), 1), bandWidth);\n  var barWidth = seriesModel.get('barWidth');\n  return barWidth != null ? parsePercent(barWidth, bandWidth)\n  // Put max outer to ensure bar visible in spite of overlap.\n  : Math.max(Math.min(bandWidth / 2, barMaxWidth), barMinWidth);\n}\nexport default candlestickLayout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CandlestickView from './CandlestickView.js';\nimport CandlestickSeriesModel from './CandlestickSeries.js';\nimport preprocessor from './preprocessor.js';\nimport candlestickVisual from './candlestickVisual.js';\nimport candlestickLayout from './candlestickLayout.js';\nexport function install(registers) {\n  registers.registerChartView(CandlestickView);\n  registers.registerSeriesModel(CandlestickSeriesModel);\n  registers.registerPreprocessor(preprocessor);\n  registers.registerVisual(candlestickVisual);\n  registers.registerLayout(candlestickLayout);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport { makeInner } from '../../util/model.js';\nimport SeriesModel from '../../model/Series.js';\n// Also compat with ec4, where\n// `visual('color') visual('borderColor')` is supported.\nexport var STYLE_VISUAL_TYPE = {\n  color: 'fill',\n  borderColor: 'stroke'\n};\nexport var NON_STYLE_VISUAL_PROPS = {\n  symbol: 1,\n  symbolSize: 1,\n  symbolKeepAspect: 1,\n  legendIcon: 1,\n  visualMeta: 1,\n  liftZ: 1,\n  decal: 1\n};\n;\nexport var customInnerStore = makeInner();\nvar CustomSeriesModel = /** @class */function (_super) {\n  __extends(CustomSeriesModel, _super);\n  function CustomSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CustomSeriesModel.type;\n    return _this;\n  }\n  CustomSeriesModel.prototype.optionUpdated = function () {\n    this.currentZLevel = this.get('zlevel', true);\n    this.currentZ = this.get('z', true);\n  };\n  CustomSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this);\n  };\n  CustomSeriesModel.prototype.getDataParams = function (dataIndex, dataType, el) {\n    var params = _super.prototype.getDataParams.call(this, dataIndex, dataType);\n    el && (params.info = customInnerStore(el).info);\n    return params;\n  };\n  CustomSeriesModel.type = 'series.custom';\n  CustomSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  CustomSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    // Custom series will not clip by default.\n    // Some case will use custom series to draw label\n    // For example https://echarts.apache.org/examples/en/editor.html?c=custom-gantt-flight\n    clip: false\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n  };\n\n  return CustomSeriesModel;\n}(SeriesModel);\nexport default CustomSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { hasOwn, assert, isString, retrieve2, retrieve3, defaults, each, indexOf } from 'zrender/lib/core/util.js';\nimport * as graphicUtil from '../../util/graphic.js';\nimport { setDefaultStateProxy, toggleHoverEmphasis } from '../../util/states.js';\nimport * as labelStyleHelper from '../../label/labelStyle.js';\nimport { getDefaultLabel } from '../helper/labelHelper.js';\nimport { getLayoutOnAxis } from '../../layout/barGrid.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport ChartView from '../../view/Chart.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport prepareCartesian2d from '../../coord/cartesian/prepareCustom.js';\nimport prepareGeo from '../../coord/geo/prepareCustom.js';\nimport prepareSingleAxis from '../../coord/single/prepareCustom.js';\nimport preparePolar from '../../coord/polar/prepareCustom.js';\nimport prepareCalendar from '../../coord/calendar/prepareCustom.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport { convertToEC4StyleForCustomSerise, isEC4CompatibleStyle, convertFromEC4CompatibleStyle, warnDeprecated } from '../../util/styleCompat.js';\nimport { throwError } from '../../util/log.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nimport { STYLE_VISUAL_TYPE, NON_STYLE_VISUAL_PROPS, customInnerStore } from './CustomSeries.js';\nimport { applyLeaveTransition, applyUpdateTransition } from '../../animation/customGraphicTransition.js';\nimport { applyKeyframeAnimation, stopPreviousKeyframeAnimationAndRestore } from '../../animation/customGraphicKeyframeAnimation.js';\nvar EMPHASIS = 'emphasis';\nvar NORMAL = 'normal';\nvar BLUR = 'blur';\nvar SELECT = 'select';\nvar STATES = [NORMAL, EMPHASIS, BLUR, SELECT];\nvar PATH_ITEM_STYLE = {\n  normal: ['itemStyle'],\n  emphasis: [EMPHASIS, 'itemStyle'],\n  blur: [BLUR, 'itemStyle'],\n  select: [SELECT, 'itemStyle']\n};\nvar PATH_LABEL = {\n  normal: ['label'],\n  emphasis: [EMPHASIS, 'label'],\n  blur: [BLUR, 'label'],\n  select: [SELECT, 'label']\n};\nvar DEFAULT_TRANSITION = ['x', 'y'];\n// Use prefix to avoid index to be the same as el.name,\n// which will cause weird update animation.\nvar GROUP_DIFF_PREFIX = 'e\\0\\0';\nvar attachedTxInfoTmp = {\n  normal: {},\n  emphasis: {},\n  blur: {},\n  select: {}\n};\n/**\n * To reduce total package size of each coordinate systems, the modules `prepareCustom`\n * of each coordinate systems are not required by each coordinate systems directly, but\n * required by the module `custom`.\n *\n * prepareInfoForCustomSeries {Function}: optional\n *     @return {Object} {coordSys: {...}, api: {\n *         coord: function (data, clamp) {}, // return point in global.\n *         size: function (dataSize, dataItem) {} // return size of each axis in coordSys.\n *     }}\n */\nvar prepareCustoms = {\n  cartesian2d: prepareCartesian2d,\n  geo: prepareGeo,\n  single: prepareSingleAxis,\n  polar: preparePolar,\n  calendar: prepareCalendar\n};\nfunction isPath(el) {\n  return el instanceof graphicUtil.Path;\n}\nfunction isDisplayable(el) {\n  return el instanceof Displayable;\n}\nfunction copyElement(sourceEl, targetEl) {\n  targetEl.copyTransform(sourceEl);\n  if (isDisplayable(targetEl) && isDisplayable(sourceEl)) {\n    targetEl.setStyle(sourceEl.style);\n    targetEl.z = sourceEl.z;\n    targetEl.z2 = sourceEl.z2;\n    targetEl.zlevel = sourceEl.zlevel;\n    targetEl.invisible = sourceEl.invisible;\n    targetEl.ignore = sourceEl.ignore;\n    if (isPath(targetEl) && isPath(sourceEl)) {\n      targetEl.setShape(sourceEl.shape);\n    }\n  }\n}\nvar CustomChartView = /** @class */function (_super) {\n  __extends(CustomChartView, _super);\n  function CustomChartView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CustomChartView.type;\n    return _this;\n  }\n  CustomChartView.prototype.render = function (customSeries, ecModel, api, payload) {\n    // Clear previously rendered progressive elements.\n    this._progressiveEls = null;\n    var oldData = this._data;\n    var data = customSeries.getData();\n    var group = this.group;\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n    if (!oldData) {\n      // Previous render is incremental render or first render.\n      // Needs remove the incremental rendered elements.\n      group.removeAll();\n    }\n    data.diff(oldData).add(function (newIdx) {\n      createOrUpdateItem(api, null, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && applyLeaveTransition(el, customInnerStore(el).option, customSeries);\n    }).update(function (newIdx, oldIdx) {\n      var oldEl = oldData.getItemGraphicEl(oldIdx);\n      createOrUpdateItem(api, oldEl, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).execute();\n    // Do clipping\n    var clipPath = customSeries.get('clip', true) ? createClipPath(customSeries.coordinateSystem, false, customSeries) : null;\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n    this._data = data;\n  };\n  CustomChartView.prototype.incrementalPrepareRender = function (customSeries, ecModel, api) {\n    this.group.removeAll();\n    this._data = null;\n  };\n  CustomChartView.prototype.incrementalRender = function (params, customSeries, ecModel, api, payload) {\n    var data = customSeries.getData();\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n    var progressiveEls = this._progressiveEls = [];\n    function setIncrementalAndHoverLayer(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n    for (var idx = params.start; idx < params.end; idx++) {\n      var el = createOrUpdateItem(null, null, idx, renderItem(idx, payload), customSeries, this.group, data);\n      if (el) {\n        el.traverse(setIncrementalAndHoverLayer);\n        progressiveEls.push(el);\n      }\n    }\n  };\n  CustomChartView.prototype.eachRendered = function (cb) {\n    graphicUtil.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  CustomChartView.prototype.filterForExposedEvent = function (eventType, query, targetEl, packedEvent) {\n    var elementName = query.element;\n    if (elementName == null || targetEl.name === elementName) {\n      return true;\n    }\n    // Enable to give a name on a group made by `renderItem`, and listen\n    // events that are triggered by its descendents.\n    while ((targetEl = targetEl.__hostTarget || targetEl.parent) && targetEl !== this.group) {\n      if (targetEl.name === elementName) {\n        return true;\n      }\n    }\n    return false;\n  };\n  CustomChartView.type = 'custom';\n  return CustomChartView;\n}(ChartView);\nexport default CustomChartView;\nfunction createEl(elOption) {\n  var graphicType = elOption.type;\n  var el;\n  // Those graphic elements are not shapes. They should not be\n  // overwritten by users, so do them first.\n  if (graphicType === 'path') {\n    var shape = elOption.shape;\n    // Using pathRect brings convenience to users sacle svg path.\n    var pathRect = shape.width != null && shape.height != null ? {\n      x: shape.x || 0,\n      y: shape.y || 0,\n      width: shape.width,\n      height: shape.height\n    } : null;\n    var pathData = getPathData(shape);\n    // Path is also used for icon, so layout 'center' by default.\n    el = graphicUtil.makePath(pathData, null, pathRect, shape.layout || 'center');\n    customInnerStore(el).customPathData = pathData;\n  } else if (graphicType === 'image') {\n    el = new graphicUtil.Image({});\n    customInnerStore(el).customImagePath = elOption.style.image;\n  } else if (graphicType === 'text') {\n    el = new graphicUtil.Text({});\n    // customInnerStore(el).customText = (elOption.style as TextStyleProps).text;\n  } else if (graphicType === 'group') {\n    el = new graphicUtil.Group();\n  } else if (graphicType === 'compoundPath') {\n    throw new Error('\"compoundPath\" is not supported yet.');\n  } else {\n    var Clz = graphicUtil.getShapeClass(graphicType);\n    if (!Clz) {\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'graphic type \"' + graphicType + '\" can not be found.';\n      }\n      throwError(errMsg);\n    }\n    el = new Clz();\n  }\n  customInnerStore(el).customGraphicType = graphicType;\n  el.name = elOption.name;\n  // Compat ec4: the default z2 lift is 1. If changing the number,\n  // some cases probably be broken: hierarchy layout along z, like circle packing,\n  // where emphasis only intending to modify color/border rather than lift z2.\n  el.z2EmphasisLift = 1;\n  el.z2SelectLift = 1;\n  return el;\n}\nfunction updateElNormal(\n// Can be null/undefined\napi, el, dataIndex, elOption, attachedTxInfo, seriesModel, isInit) {\n  // Stop and restore before update any other attributes.\n  stopPreviousKeyframeAnimationAndRestore(el);\n  var txCfgOpt = attachedTxInfo && attachedTxInfo.normal.cfg;\n  if (txCfgOpt) {\n    // PENDING: whether use user object directly rather than clone?\n    // TODO:5.0 textConfig transition animation?\n    el.setTextConfig(txCfgOpt);\n  }\n  // Default transition ['x', 'y']\n  if (elOption && elOption.transition == null) {\n    elOption.transition = DEFAULT_TRANSITION;\n  }\n  // Do some normalization on style.\n  var styleOpt = elOption && elOption.style;\n  if (styleOpt) {\n    if (el.type === 'text') {\n      var textOptionStyle = styleOpt;\n      // Compatible with ec4: if `textFill` or `textStroke` exists use them.\n      hasOwn(textOptionStyle, 'textFill') && (textOptionStyle.fill = textOptionStyle.textFill);\n      hasOwn(textOptionStyle, 'textStroke') && (textOptionStyle.stroke = textOptionStyle.textStroke);\n    }\n    var decalPattern = void 0;\n    var decalObj = isPath(el) ? styleOpt.decal : null;\n    if (api && decalObj) {\n      decalObj.dirty = true;\n      decalPattern = createOrUpdatePatternFromDecal(decalObj, api);\n    }\n    // Always overwrite in case user specify this prop.\n    styleOpt.__decalPattern = decalPattern;\n  }\n  if (isDisplayable(el)) {\n    if (styleOpt) {\n      var decalPattern = styleOpt.__decalPattern;\n      if (decalPattern) {\n        styleOpt.decal = decalPattern;\n      }\n    }\n  }\n  applyUpdateTransition(el, elOption, seriesModel, {\n    dataIndex: dataIndex,\n    isInit: isInit,\n    clearStyle: true\n  });\n  applyKeyframeAnimation(el, elOption.keyframeAnimation, seriesModel);\n}\nfunction updateElOnState(state, el, elStateOpt, styleOpt, attachedTxInfo) {\n  var elDisplayable = el.isGroup ? null : el;\n  var txCfgOpt = attachedTxInfo && attachedTxInfo[state].cfg;\n  // PENDING:5.0 support customize scale change and transition animation?\n  if (elDisplayable) {\n    // By default support auto lift color when hover whether `emphasis` specified.\n    var stateObj = elDisplayable.ensureState(state);\n    if (styleOpt === false) {\n      var existingEmphasisState = elDisplayable.getState(state);\n      if (existingEmphasisState) {\n        existingEmphasisState.style = null;\n      }\n    } else {\n      // style is needed to enable default emphasis.\n      stateObj.style = styleOpt || null;\n    }\n    // If `elOption.styleEmphasis` or `elOption.emphasis.style` is `false`,\n    // remove hover style.\n    // If `elOption.textConfig` or `elOption.emphasis.textConfig` is null/undefined, it does not\n    // make sense. So for simplicity, we do not ditinguish `hasOwnProperty` and null/undefined.\n    if (txCfgOpt) {\n      stateObj.textConfig = txCfgOpt;\n    }\n    setDefaultStateProxy(elDisplayable);\n  }\n}\nfunction updateZ(el, elOption, seriesModel) {\n  // Group not support textContent and not support z yet.\n  if (el.isGroup) {\n    return;\n  }\n  var elDisplayable = el;\n  var currentZ = seriesModel.currentZ;\n  var currentZLevel = seriesModel.currentZLevel;\n  // Always erase.\n  elDisplayable.z = currentZ;\n  elDisplayable.zlevel = currentZLevel;\n  // z2 must not be null/undefined, otherwise sort error may occur.\n  var optZ2 = elOption.z2;\n  optZ2 != null && (elDisplayable.z2 = optZ2 || 0);\n  for (var i = 0; i < STATES.length; i++) {\n    updateZForEachState(elDisplayable, elOption, STATES[i]);\n  }\n}\nfunction updateZForEachState(elDisplayable, elOption, state) {\n  var isNormal = state === NORMAL;\n  var elStateOpt = isNormal ? elOption : retrieveStateOption(elOption, state);\n  var optZ2 = elStateOpt ? elStateOpt.z2 : null;\n  var stateObj;\n  if (optZ2 != null) {\n    // Do not `ensureState` until required.\n    stateObj = isNormal ? elDisplayable : elDisplayable.ensureState(state);\n    stateObj.z2 = optZ2 || 0;\n  }\n}\nfunction makeRenderItem(customSeries, data, ecModel, api) {\n  var renderItem = customSeries.get('renderItem');\n  var coordSys = customSeries.coordinateSystem;\n  var prepareResult = {};\n  if (coordSys) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(renderItem, 'series.render is required.');\n      assert(coordSys.prepareCustoms || prepareCustoms[coordSys.type], 'This coordSys does not support custom series.');\n    }\n    // `coordSys.prepareCustoms` is used for external coord sys like bmap.\n    prepareResult = coordSys.prepareCustoms ? coordSys.prepareCustoms(coordSys) : prepareCustoms[coordSys.type](coordSys);\n  }\n  var userAPI = defaults({\n    getWidth: api.getWidth,\n    getHeight: api.getHeight,\n    getZr: api.getZr,\n    getDevicePixelRatio: api.getDevicePixelRatio,\n    value: value,\n    style: style,\n    ordinalRawValue: ordinalRawValue,\n    styleEmphasis: styleEmphasis,\n    visual: visual,\n    barLayout: barLayout,\n    currentSeriesIndices: currentSeriesIndices,\n    font: font\n  }, prepareResult.api || {});\n  var userParams = {\n    // The life cycle of context: current round of rendering.\n    // The global life cycle is probably not necessary, because\n    // user can store global status by themselves.\n    context: {},\n    seriesId: customSeries.id,\n    seriesName: customSeries.name,\n    seriesIndex: customSeries.seriesIndex,\n    coordSys: prepareResult.coordSys,\n    dataInsideLength: data.count(),\n    encode: wrapEncodeDef(customSeries.getData())\n  };\n  // If someday intending to refactor them to a class, should consider do not\n  // break change: currently these attribute member are encapsulated in a closure\n  // so that do not need to force user to call these method with a scope.\n  // Do not support call `api` asynchronously without dataIndexInside input.\n  var currDataIndexInside;\n  var currItemModel;\n  var currItemStyleModels = {};\n  var currLabelModels = {};\n  var seriesItemStyleModels = {};\n  var seriesLabelModels = {};\n  for (var i = 0; i < STATES.length; i++) {\n    var stateName = STATES[i];\n    seriesItemStyleModels[stateName] = customSeries.getModel(PATH_ITEM_STYLE[stateName]);\n    seriesLabelModels[stateName] = customSeries.getModel(PATH_LABEL[stateName]);\n  }\n  function getItemModel(dataIndexInside) {\n    return dataIndexInside === currDataIndexInside ? currItemModel || (currItemModel = data.getItemModel(dataIndexInside)) : data.getItemModel(dataIndexInside);\n  }\n  function getItemStyleModel(dataIndexInside, state) {\n    return !data.hasItemOption ? seriesItemStyleModels[state] : dataIndexInside === currDataIndexInside ? currItemStyleModels[state] || (currItemStyleModels[state] = getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state])) : getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state]);\n  }\n  function getLabelModel(dataIndexInside, state) {\n    return !data.hasItemOption ? seriesLabelModels[state] : dataIndexInside === currDataIndexInside ? currLabelModels[state] || (currLabelModels[state] = getItemModel(dataIndexInside).getModel(PATH_LABEL[state])) : getItemModel(dataIndexInside).getModel(PATH_LABEL[state]);\n  }\n  return function (dataIndexInside, payload) {\n    currDataIndexInside = dataIndexInside;\n    currItemModel = null;\n    currItemStyleModels = {};\n    currLabelModels = {};\n    return renderItem && renderItem(defaults({\n      dataIndexInside: dataIndexInside,\n      dataIndex: data.getRawIndex(dataIndexInside),\n      // Can be used for optimization when zoom or roam.\n      actionType: payload ? payload.type : null\n    }, userParams), userAPI);\n  };\n  /**\n   * @public\n   * @param dim by default 0.\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n  function value(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.getStore().get(data.getDimensionIndex(dim || 0), dataIndexInside);\n  }\n  /**\n   * @public\n   * @param dim by default 0.\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n  function ordinalRawValue(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    dim = dim || 0;\n    var dimInfo = data.getDimensionInfo(dim);\n    if (!dimInfo) {\n      var dimIndex = data.getDimensionIndex(dim);\n      return dimIndex >= 0 ? data.getStore().get(dimIndex, dataIndexInside) : undefined;\n    }\n    var val = data.get(dimInfo.name, dataIndexInside);\n    var ordinalMeta = dimInfo && dimInfo.ordinalMeta;\n    return ordinalMeta ? ordinalMeta.categories[val] : val;\n  }\n  /**\n   * @deprecated The original intention of `api.style` is enable to set itemStyle\n   * like other series. But it is not necessary and not easy to give a strict definition\n   * of what it returns. And since echarts5 it needs to be make compat work. So\n   * deprecates it since echarts5.\n   *\n   * By default, `visual` is applied to style (to support visualMap).\n   * `visual.color` is applied at `fill`. If user want apply visual.color on `stroke`,\n   * it can be implemented as:\n   * `api.style({stroke: api.visual('color'), fill: null})`;\n   *\n   * [Compat]: since ec5, RectText has been separated from its hosts el.\n   * so `api.style()` will only return the style from `itemStyle` but not handle `label`\n   * any more. But `series.label` config is never published in doc.\n   * We still compat it in `api.style()`. But not encourage to use it and will still not\n   * to pulish it to doc.\n   * @public\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n  function style(userProps, dataIndexInside) {\n    if (process.env.NODE_ENV !== 'production') {\n      warnDeprecated('api.style', 'Please write literal style directly instead.');\n    }\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    var style = data.getItemVisual(dataIndexInside, 'style');\n    var visualColor = style && style.fill;\n    var opacity = style && style.opacity;\n    var itemStyle = getItemStyleModel(dataIndexInside, NORMAL).getItemStyle();\n    visualColor != null && (itemStyle.fill = visualColor);\n    opacity != null && (itemStyle.opacity = opacity);\n    var opt = {\n      inheritColor: isString(visualColor) ? visualColor : '#000'\n    };\n    var labelModel = getLabelModel(dataIndexInside, NORMAL);\n    // Now that the feature of \"auto adjust text fill/stroke\" has been migrated to zrender\n    // since ec5, we should set `isAttached` as `false` here and make compat in\n    // `convertToEC4StyleForCustomSerise`.\n    var textStyle = labelStyleHelper.createTextStyle(labelModel, null, opt, false, true);\n    textStyle.text = labelModel.getShallow('show') ? retrieve2(customSeries.getFormattedLabel(dataIndexInside, NORMAL), getDefaultLabel(data, dataIndexInside)) : null;\n    var textConfig = labelStyleHelper.createTextConfig(labelModel, opt, false);\n    preFetchFromExtra(userProps, itemStyle);\n    itemStyle = convertToEC4StyleForCustomSerise(itemStyle, textStyle, textConfig);\n    userProps && applyUserPropsAfter(itemStyle, userProps);\n    itemStyle.legacy = true;\n    return itemStyle;\n  }\n  /**\n   * @deprecated The reason see `api.style()`\n   * @public\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n  function styleEmphasis(userProps, dataIndexInside) {\n    if (process.env.NODE_ENV !== 'production') {\n      warnDeprecated('api.styleEmphasis', 'Please write literal style directly instead.');\n    }\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    var itemStyle = getItemStyleModel(dataIndexInside, EMPHASIS).getItemStyle();\n    var labelModel = getLabelModel(dataIndexInside, EMPHASIS);\n    var textStyle = labelStyleHelper.createTextStyle(labelModel, null, null, true, true);\n    textStyle.text = labelModel.getShallow('show') ? retrieve3(customSeries.getFormattedLabel(dataIndexInside, EMPHASIS), customSeries.getFormattedLabel(dataIndexInside, NORMAL), getDefaultLabel(data, dataIndexInside)) : null;\n    var textConfig = labelStyleHelper.createTextConfig(labelModel, null, true);\n    preFetchFromExtra(userProps, itemStyle);\n    itemStyle = convertToEC4StyleForCustomSerise(itemStyle, textStyle, textConfig);\n    userProps && applyUserPropsAfter(itemStyle, userProps);\n    itemStyle.legacy = true;\n    return itemStyle;\n  }\n  function applyUserPropsAfter(itemStyle, extra) {\n    for (var key in extra) {\n      if (hasOwn(extra, key)) {\n        itemStyle[key] = extra[key];\n      }\n    }\n  }\n  function preFetchFromExtra(extra, itemStyle) {\n    // A trick to retrieve those props firstly, which are used to\n    // apply auto inside fill/stroke in `convertToEC4StyleForCustomSerise`.\n    // (It's not reasonable but only for a degree of compat)\n    if (extra) {\n      extra.textFill && (itemStyle.textFill = extra.textFill);\n      extra.textPosition && (itemStyle.textPosition = extra.textPosition);\n    }\n  }\n  /**\n   * @public\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n  function visual(visualType, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    if (hasOwn(STYLE_VISUAL_TYPE, visualType)) {\n      var style_1 = data.getItemVisual(dataIndexInside, 'style');\n      return style_1 ? style_1[STYLE_VISUAL_TYPE[visualType]] : null;\n    }\n    // Only support these visuals. Other visual might be inner tricky\n    // for performance (like `style`), do not expose to users.\n    if (hasOwn(NON_STYLE_VISUAL_PROPS, visualType)) {\n      return data.getItemVisual(dataIndexInside, visualType);\n    }\n  }\n  /**\n   * @public\n   * @return If not support, return undefined.\n   */\n  function barLayout(opt) {\n    if (coordSys.type === 'cartesian2d') {\n      var baseAxis = coordSys.getBaseAxis();\n      return getLayoutOnAxis(defaults({\n        axis: baseAxis\n      }, opt));\n    }\n  }\n  /**\n   * @public\n   */\n  function currentSeriesIndices() {\n    return ecModel.getCurrentSeriesIndices();\n  }\n  /**\n   * @public\n   * @return font string\n   */\n  function font(opt) {\n    return labelStyleHelper.getFont(opt, ecModel);\n  }\n}\nfunction wrapEncodeDef(data) {\n  var encodeDef = {};\n  each(data.dimensions, function (dimName) {\n    var dimInfo = data.getDimensionInfo(dimName);\n    if (!dimInfo.isExtraCoord) {\n      var coordDim = dimInfo.coordDim;\n      var dataDims = encodeDef[coordDim] = encodeDef[coordDim] || [];\n      dataDims[dimInfo.coordDimIndex] = data.getDimensionIndex(dimName);\n    }\n  });\n  return encodeDef;\n}\nfunction createOrUpdateItem(api, existsEl, dataIndex, elOption, seriesModel, group, data) {\n  // [Rule]\n  // If `renderItem` returns `null`/`undefined`/`false`, remove the previous el if existing.\n  //     (It seems that violate the \"merge\" principle, but most of users probably intuitively\n  //     regard \"return;\" as \"show nothing element whatever\", so make a exception to meet the\n  //     most cases.)\n  // The rule or \"merge\" see [STRATEGY_MERGE].\n  // If `elOption` is `null`/`undefined`/`false` (when `renderItem` returns nothing).\n  if (!elOption) {\n    group.remove(existsEl);\n    return;\n  }\n  var el = doCreateOrUpdateEl(api, existsEl, dataIndex, elOption, seriesModel, group);\n  el && data.setItemGraphicEl(dataIndex, el);\n  el && toggleHoverEmphasis(el, elOption.focus, elOption.blurScope, elOption.emphasisDisabled);\n  return el;\n}\nfunction doCreateOrUpdateEl(api, existsEl, dataIndex, elOption, seriesModel, group) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(elOption, 'should not have an null/undefined element setting');\n  }\n  var toBeReplacedIdx = -1;\n  var oldEl = existsEl;\n  if (existsEl && doesElNeedRecreate(existsEl, elOption, seriesModel)\n  // || (\n  //     // PENDING: even in one-to-one mapping case, if el is marked as morph,\n  //     // do not sure whether the el will be mapped to another el with different\n  //     // hierarchy in Group tree. So always recreate el rather than reuse the el.\n  //     morphHelper && morphHelper.isOneToOneFrom(el)\n  // )\n  ) {\n    // Should keep at the original index, otherwise \"merge by index\" will be incorrect.\n    toBeReplacedIdx = indexOf(group.childrenRef(), existsEl);\n    existsEl = null;\n  }\n  var isInit = !existsEl;\n  var el = existsEl;\n  if (!el) {\n    el = createEl(elOption);\n    if (oldEl) {\n      copyElement(oldEl, el);\n    }\n  } else {\n    // FIMXE:NEXT unified clearState?\n    // If in some case the performance issue arised, consider\n    // do not clearState but update cached normal state directly.\n    el.clearStates();\n  }\n  // Need to set morph: false explictly to disable automatically morphing.\n  if (elOption.morph === false) {\n    el.disableMorphing = true;\n  } else if (el.disableMorphing) {\n    el.disableMorphing = false;\n  }\n  attachedTxInfoTmp.normal.cfg = attachedTxInfoTmp.normal.conOpt = attachedTxInfoTmp.emphasis.cfg = attachedTxInfoTmp.emphasis.conOpt = attachedTxInfoTmp.blur.cfg = attachedTxInfoTmp.blur.conOpt = attachedTxInfoTmp.select.cfg = attachedTxInfoTmp.select.conOpt = null;\n  attachedTxInfoTmp.isLegacy = false;\n  doCreateOrUpdateAttachedTx(el, dataIndex, elOption, seriesModel, isInit, attachedTxInfoTmp);\n  doCreateOrUpdateClipPath(el, dataIndex, elOption, seriesModel, isInit);\n  updateElNormal(api, el, dataIndex, elOption, attachedTxInfoTmp, seriesModel, isInit);\n  // `elOption.info` enables user to mount some info on\n  // elements and use them in event handlers.\n  // Update them only when user specified, otherwise, remain.\n  hasOwn(elOption, 'info') && (customInnerStore(el).info = elOption.info);\n  for (var i = 0; i < STATES.length; i++) {\n    var stateName = STATES[i];\n    if (stateName !== NORMAL) {\n      var otherStateOpt = retrieveStateOption(elOption, stateName);\n      var otherStyleOpt = retrieveStyleOptionOnState(elOption, otherStateOpt, stateName);\n      updateElOnState(stateName, el, otherStateOpt, otherStyleOpt, attachedTxInfoTmp);\n    }\n  }\n  updateZ(el, elOption, seriesModel);\n  if (elOption.type === 'group') {\n    mergeChildren(api, el, dataIndex, elOption, seriesModel);\n  }\n  if (toBeReplacedIdx >= 0) {\n    group.replaceAt(el, toBeReplacedIdx);\n  } else {\n    group.add(el);\n  }\n  return el;\n}\n// `el` must not be null/undefined.\nfunction doesElNeedRecreate(el, elOption, seriesModel) {\n  var elInner = customInnerStore(el);\n  var elOptionType = elOption.type;\n  var elOptionShape = elOption.shape;\n  var elOptionStyle = elOption.style;\n  return (\n    // Always create new if universal transition is enabled.\n    // Because we do transition after render. It needs to know what old element is. Replacement will loose it.\n    seriesModel.isUniversalTransitionEnabled()\n    // If `elOptionType` is `null`, follow the merge principle.\n    || elOptionType != null && elOptionType !== elInner.customGraphicType || elOptionType === 'path' && hasOwnPathData(elOptionShape) && getPathData(elOptionShape) !== elInner.customPathData || elOptionType === 'image' && hasOwn(elOptionStyle, 'image') && elOptionStyle.image !== elInner.customImagePath\n    // // FIXME test and remove this restriction?\n    // || (elOptionType === 'text'\n    //     && hasOwn(elOptionStyle, 'text')\n    //     && (elOptionStyle as TextStyleProps).text !== elInner.customText\n    // )\n  );\n}\n\nfunction doCreateOrUpdateClipPath(el, dataIndex, elOption, seriesModel, isInit) {\n  // Based on the \"merge\" principle, if no clipPath provided,\n  // do nothing. The exists clip will be totally removed only if\n  // `el.clipPath` is `false`. Otherwise it will be merged/replaced.\n  var clipPathOpt = elOption.clipPath;\n  if (clipPathOpt === false) {\n    if (el && el.getClipPath()) {\n      el.removeClipPath();\n    }\n  } else if (clipPathOpt) {\n    var clipPath = el.getClipPath();\n    if (clipPath && doesElNeedRecreate(clipPath, clipPathOpt, seriesModel)) {\n      clipPath = null;\n    }\n    if (!clipPath) {\n      clipPath = createEl(clipPathOpt);\n      if (process.env.NODE_ENV !== 'production') {\n        assert(isPath(clipPath), 'Only any type of `path` can be used in `clipPath`, rather than ' + clipPath.type + '.');\n      }\n      el.setClipPath(clipPath);\n    }\n    updateElNormal(null, clipPath, dataIndex, clipPathOpt, null, seriesModel, isInit);\n  }\n  // If not define `clipPath` in option, do nothing unnecessary.\n}\n\nfunction doCreateOrUpdateAttachedTx(el, dataIndex, elOption, seriesModel, isInit, attachedTxInfo) {\n  // Group does not support textContent temporarily until necessary.\n  if (el.isGroup) {\n    return;\n  }\n  // Normal must be called before emphasis, for `isLegacy` detection.\n  processTxInfo(elOption, null, attachedTxInfo);\n  processTxInfo(elOption, EMPHASIS, attachedTxInfo);\n  // If `elOption.textConfig` or `elOption.textContent` is null/undefined, it does not make sense.\n  // So for simplicity, if \"elOption hasOwnProperty of them but be null/undefined\", we do not\n  // trade them as set to null to el.\n  // Especially:\n  // `elOption.textContent: false` means remove textContent.\n  // `elOption.textContent.emphasis.style: false` means remove the style from emphasis state.\n  var txConOptNormal = attachedTxInfo.normal.conOpt;\n  var txConOptEmphasis = attachedTxInfo.emphasis.conOpt;\n  var txConOptBlur = attachedTxInfo.blur.conOpt;\n  var txConOptSelect = attachedTxInfo.select.conOpt;\n  if (txConOptNormal != null || txConOptEmphasis != null || txConOptSelect != null || txConOptBlur != null) {\n    var textContent = el.getTextContent();\n    if (txConOptNormal === false) {\n      textContent && el.removeTextContent();\n    } else {\n      txConOptNormal = attachedTxInfo.normal.conOpt = txConOptNormal || {\n        type: 'text'\n      };\n      if (!textContent) {\n        textContent = createEl(txConOptNormal);\n        el.setTextContent(textContent);\n      } else {\n        // If in some case the performance issue arised, consider\n        // do not clearState but update cached normal state directly.\n        textContent.clearStates();\n      }\n      updateElNormal(null, textContent, dataIndex, txConOptNormal, null, seriesModel, isInit);\n      var txConStlOptNormal = txConOptNormal && txConOptNormal.style;\n      for (var i = 0; i < STATES.length; i++) {\n        var stateName = STATES[i];\n        if (stateName !== NORMAL) {\n          var txConOptOtherState = attachedTxInfo[stateName].conOpt;\n          updateElOnState(stateName, textContent, txConOptOtherState, retrieveStyleOptionOnState(txConOptNormal, txConOptOtherState, stateName), null);\n        }\n      }\n      txConStlOptNormal ? textContent.dirty() : textContent.markRedraw();\n    }\n  }\n}\nfunction processTxInfo(elOption, state, attachedTxInfo) {\n  var stateOpt = !state ? elOption : retrieveStateOption(elOption, state);\n  var styleOpt = !state ? elOption.style : retrieveStyleOptionOnState(elOption, stateOpt, EMPHASIS);\n  var elType = elOption.type;\n  var txCfg = stateOpt ? stateOpt.textConfig : null;\n  var txConOptNormal = elOption.textContent;\n  var txConOpt = !txConOptNormal ? null : !state ? txConOptNormal : retrieveStateOption(txConOptNormal, state);\n  if (styleOpt && (\n  // Because emphasis style has little info to detect legacy,\n  // if normal is legacy, emphasis is trade as legacy.\n  attachedTxInfo.isLegacy || isEC4CompatibleStyle(styleOpt, elType, !!txCfg, !!txConOpt))) {\n    attachedTxInfo.isLegacy = true;\n    var convertResult = convertFromEC4CompatibleStyle(styleOpt, elType, !state);\n    // Explicitly specified `textConfig` and `textContent` has higher priority than\n    // the ones generated by legacy style. Otherwise if users use them and `api.style`\n    // at the same time, they not both work and hardly to known why.\n    if (!txCfg && convertResult.textConfig) {\n      txCfg = convertResult.textConfig;\n    }\n    if (!txConOpt && convertResult.textContent) {\n      txConOpt = convertResult.textContent;\n    }\n  }\n  if (!state && txConOpt) {\n    var txConOptNormal_1 = txConOpt;\n    // `textContent: {type: 'text'}`, the \"type\" is easy to be missing. So we tolerate it.\n    !txConOptNormal_1.type && (txConOptNormal_1.type = 'text');\n    if (process.env.NODE_ENV !== 'production') {\n      // Do not tolerate incorrcet type for forward compat.\n      assert(txConOptNormal_1.type === 'text', 'textContent.type must be \"text\"');\n    }\n  }\n  var info = !state ? attachedTxInfo.normal : attachedTxInfo[state];\n  info.cfg = txCfg;\n  info.conOpt = txConOpt;\n}\nfunction retrieveStateOption(elOption, state) {\n  return !state ? elOption : elOption ? elOption[state] : null;\n}\nfunction retrieveStyleOptionOnState(stateOptionNormal, stateOption, state) {\n  var style = stateOption && stateOption.style;\n  if (style == null && state === EMPHASIS && stateOptionNormal) {\n    style = stateOptionNormal.styleEmphasis;\n  }\n  return style;\n}\n// Usage:\n// (1) By default, `elOption.$mergeChildren` is `'byIndex'`, which indicates\n//     that the existing children will not be removed, and enables the feature\n//     that update some of the props of some of the children simply by construct\n//     the returned children of `renderItem` like:\n//     `var children = group.children = []; children[3] = {opacity: 0.5};`\n// (2) If `elOption.$mergeChildren` is `'byName'`, add/update/remove children\n//     by child.name. But that might be lower performance.\n// (3) If `elOption.$mergeChildren` is `false`, the existing children will be\n//     replaced totally.\n// (4) If `!elOption.children`, following the \"merge\" principle, nothing will\n//     happen.\n// (5) If `elOption.$mergeChildren` is not `false` neither `'byName'` and the\n//     `el` is a group, and if any of the new child is null, it means to remove\n//     the element at the same index, if exists. On the other hand, if the new\n//     child is and empty object `{}`, it means to keep the element not changed.\n//\n// For implementation simpleness, do not provide a direct way to remove single\n// child (otherwise the total indices of the children array have to be modified).\n// User can remove a single child by setting its `ignore` to `true`.\nfunction mergeChildren(api, el, dataIndex, elOption, seriesModel) {\n  var newChildren = elOption.children;\n  var newLen = newChildren ? newChildren.length : 0;\n  var mergeChildren = elOption.$mergeChildren;\n  // `diffChildrenByName` has been deprecated.\n  var byName = mergeChildren === 'byName' || elOption.diffChildrenByName;\n  var notMerge = mergeChildren === false;\n  // For better performance on roam update, only enter if necessary.\n  if (!newLen && !byName && !notMerge) {\n    return;\n  }\n  if (byName) {\n    diffGroupChildren({\n      api: api,\n      oldChildren: el.children() || [],\n      newChildren: newChildren || [],\n      dataIndex: dataIndex,\n      seriesModel: seriesModel,\n      group: el\n    });\n    return;\n  }\n  notMerge && el.removeAll();\n  // Mapping children of a group simply by index, which\n  // might be better performance.\n  var index = 0;\n  for (; index < newLen; index++) {\n    var newChild = newChildren[index];\n    var oldChild = el.childAt(index);\n    if (newChild) {\n      if (newChild.ignore == null) {\n        // The old child is set to be ignored if null (see comments\n        // below). So we need to set ignore to be false back.\n        newChild.ignore = false;\n      }\n      doCreateOrUpdateEl(api, oldChild, dataIndex, newChild, seriesModel, el);\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(oldChild, 'renderItem should not return a group containing elements' + ' as null/undefined/{} if they do not exist before.');\n      }\n      // If the new element option is null, it means to remove the old\n      // element. But we cannot really remove the element from the group\n      // directly, because the element order may not be stable when this\n      // element is added back. So we set the element to be ignored.\n      oldChild.ignore = true;\n    }\n  }\n  for (var i = el.childCount() - 1; i >= index; i--) {\n    var child = el.childAt(i);\n    removeChildFromGroup(el, child, seriesModel);\n  }\n}\nfunction removeChildFromGroup(group, child, seriesModel) {\n  // Do not support leave elements that are not mentioned in the latest\n  // `renderItem` return. Otherwise users may not have a clear and simple\n  // concept that how to control all of the elements.\n  child && applyLeaveTransition(child, customInnerStore(group).option, seriesModel);\n}\nfunction diffGroupChildren(context) {\n  new DataDiffer(context.oldChildren, context.newChildren, getKey, getKey, context).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute();\n}\nfunction getKey(item, idx) {\n  var name = item && item.name;\n  return name != null ? name : GROUP_DIFF_PREFIX + idx;\n}\nfunction processAddUpdate(newIndex, oldIndex) {\n  var context = this.context;\n  var childOption = newIndex != null ? context.newChildren[newIndex] : null;\n  var child = oldIndex != null ? context.oldChildren[oldIndex] : null;\n  doCreateOrUpdateEl(context.api, child, context.dataIndex, childOption, context.seriesModel, context.group);\n}\nfunction processRemove(oldIndex) {\n  var context = this.context;\n  var child = context.oldChildren[oldIndex];\n  child && applyLeaveTransition(child, customInnerStore(child).option, context.seriesModel);\n}\n/**\n * @return SVG Path data.\n */\nfunction getPathData(shape) {\n  // \"d\" follows the SVG convention.\n  return shape && (shape.pathData || shape.d);\n}\nfunction hasOwnPathData(shape) {\n  return shape && (hasOwn(shape, 'pathData') || hasOwn(shape, 'd'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CustomSeriesModel from './CustomSeries.js';\nimport CustomChartView from './CustomView.js';\nexport function install(registers) {\n  registers.registerChartView(CustomChartView);\n  registers.registerSeriesModel(CustomSeriesModel);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\nimport { Group } from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis } from '../../util/states.js';\nimport SymbolClz from './Symbol.js';\nfunction updateRipplePath(rippleGroup, effectCfg) {\n  var color = effectCfg.rippleEffectColor || effectCfg.color;\n  rippleGroup.eachChild(function (ripplePath) {\n    ripplePath.attr({\n      z: effectCfg.z,\n      zlevel: effectCfg.zlevel,\n      style: {\n        stroke: effectCfg.brushType === 'stroke' ? color : null,\n        fill: effectCfg.brushType === 'fill' ? color : null\n      }\n    });\n  });\n}\nvar EffectSymbol = /** @class */function (_super) {\n  __extends(EffectSymbol, _super);\n  function EffectSymbol(data, idx) {\n    var _this = _super.call(this) || this;\n    var symbol = new SymbolClz(data, idx);\n    var rippleGroup = new Group();\n    _this.add(symbol);\n    _this.add(rippleGroup);\n    _this.updateData(data, idx);\n    return _this;\n  }\n  EffectSymbol.prototype.stopEffectAnimation = function () {\n    this.childAt(1).removeAll();\n  };\n  EffectSymbol.prototype.startEffectAnimation = function (effectCfg) {\n    var symbolType = effectCfg.symbolType;\n    var color = effectCfg.color;\n    var rippleNumber = effectCfg.rippleNumber;\n    var rippleGroup = this.childAt(1);\n    for (var i = 0; i < rippleNumber; i++) {\n      // If width/height are set too small (e.g., set to 1) on ios10\n      // and macOS Sierra, a circle stroke become a rect, no matter what\n      // the scale is set. So we set width/height as 2. See #4136.\n      var ripplePath = createSymbol(symbolType, -1, -1, 2, 2, color);\n      ripplePath.attr({\n        style: {\n          strokeNoScale: true\n        },\n        z2: 99,\n        silent: true,\n        scaleX: 0.5,\n        scaleY: 0.5\n      });\n      var delay = -i / rippleNumber * effectCfg.period + effectCfg.effectOffset;\n      ripplePath.animate('', true).when(effectCfg.period, {\n        scaleX: effectCfg.rippleScale / 2,\n        scaleY: effectCfg.rippleScale / 2\n      }).delay(delay).start();\n      ripplePath.animateStyle(true).when(effectCfg.period, {\n        opacity: 0\n      }).delay(delay).start();\n      rippleGroup.add(ripplePath);\n    }\n    updateRipplePath(rippleGroup, effectCfg);\n  };\n  /**\n   * Update effect symbol\n   */\n  EffectSymbol.prototype.updateEffectAnimation = function (effectCfg) {\n    var oldEffectCfg = this._effectCfg;\n    var rippleGroup = this.childAt(1);\n    // Must reinitialize effect if following configuration changed\n    var DIFFICULT_PROPS = ['symbolType', 'period', 'rippleScale', 'rippleNumber'];\n    for (var i = 0; i < DIFFICULT_PROPS.length; i++) {\n      var propName = DIFFICULT_PROPS[i];\n      if (oldEffectCfg[propName] !== effectCfg[propName]) {\n        this.stopEffectAnimation();\n        this.startEffectAnimation(effectCfg);\n        return;\n      }\n    }\n    updateRipplePath(rippleGroup, effectCfg);\n  };\n  /**\n   * Highlight symbol\n   */\n  EffectSymbol.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n  /**\n   * Downplay symbol\n   */\n  EffectSymbol.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n  EffectSymbol.prototype.getSymbolType = function () {\n    var symbol = this.childAt(0);\n    return symbol && symbol.getSymbolType();\n  };\n  /**\n   * Update symbol properties\n   */\n  EffectSymbol.prototype.updateData = function (data, idx) {\n    var _this = this;\n    var seriesModel = data.hostModel;\n    this.childAt(0).updateData(data, idx);\n    var rippleGroup = this.childAt(1);\n    var itemModel = data.getItemModel(idx);\n    var symbolType = data.getItemVisual(idx, 'symbol');\n    var symbolSize = normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n    var symbolStyle = data.getItemVisual(idx, 'style');\n    var color = symbolStyle && symbolStyle.fill;\n    var emphasisModel = itemModel.getModel('emphasis');\n    rippleGroup.setScale(symbolSize);\n    rippleGroup.traverse(function (ripplePath) {\n      ripplePath.setStyle('fill', color);\n    });\n    var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\n    if (symbolOffset) {\n      rippleGroup.x = symbolOffset[0];\n      rippleGroup.y = symbolOffset[1];\n    }\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n    rippleGroup.rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n    var effectCfg = {};\n    effectCfg.showEffectOn = seriesModel.get('showEffectOn');\n    effectCfg.rippleScale = itemModel.get(['rippleEffect', 'scale']);\n    effectCfg.brushType = itemModel.get(['rippleEffect', 'brushType']);\n    effectCfg.period = itemModel.get(['rippleEffect', 'period']) * 1000;\n    effectCfg.effectOffset = idx / data.count();\n    effectCfg.z = seriesModel.getShallow('z') || 0;\n    effectCfg.zlevel = seriesModel.getShallow('zlevel') || 0;\n    effectCfg.symbolType = symbolType;\n    effectCfg.color = color;\n    effectCfg.rippleEffectColor = itemModel.get(['rippleEffect', 'color']);\n    effectCfg.rippleNumber = itemModel.get(['rippleEffect', 'number']);\n    if (effectCfg.showEffectOn === 'render') {\n      this._effectCfg ? this.updateEffectAnimation(effectCfg) : this.startEffectAnimation(effectCfg);\n      this._effectCfg = effectCfg;\n    } else {\n      // Not keep old effect config\n      this._effectCfg = null;\n      this.stopEffectAnimation();\n      this.onHoverStateChange = function (toState) {\n        if (toState === 'emphasis') {\n          if (effectCfg.showEffectOn !== 'render') {\n            _this.startEffectAnimation(effectCfg);\n          }\n        } else if (toState === 'normal') {\n          if (effectCfg.showEffectOn !== 'render') {\n            _this.stopEffectAnimation();\n          }\n        }\n      };\n    }\n    this._effectCfg = effectCfg;\n    toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n  ;\n  EffectSymbol.prototype.fadeOut = function (cb) {\n    cb && cb();\n  };\n  ;\n  return EffectSymbol;\n}(Group);\nexport default EffectSymbol;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport EffectSymbol from '../helper/EffectSymbol.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport pointsLayout from '../../layout/points.js';\nimport ChartView from '../../view/Chart.js';\nvar EffectScatterView = /** @class */function (_super) {\n  __extends(EffectScatterView, _super);\n  function EffectScatterView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = EffectScatterView.type;\n    return _this;\n  }\n  EffectScatterView.prototype.init = function () {\n    this._symbolDraw = new SymbolDraw(EffectSymbol);\n  };\n  EffectScatterView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var effectSymbolDraw = this._symbolDraw;\n    effectSymbolDraw.updateData(data, {\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this.group.add(effectSymbolDraw.group);\n  };\n  EffectScatterView.prototype._getClipShape = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\n    return seriesModel.get('clip', true) ? clipArea : null;\n  };\n  EffectScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    this.group.dirty();\n    var res = pointsLayout('').reset(seriesModel, ecModel, api);\n    if (res.progress) {\n      res.progress({\n        start: 0,\n        end: data.count(),\n        count: data.count()\n      }, data);\n    }\n    this._symbolDraw.updateLayout();\n  };\n  EffectScatterView.prototype._updateGroupTransform = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && coordSys.getRoamTransform) {\n      this.group.transform = matrix.clone(coordSys.getRoamTransform());\n      this.group.decomposeTransform();\n    }\n  };\n  EffectScatterView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(true);\n  };\n  EffectScatterView.type = 'effectScatter';\n  return EffectScatterView;\n}(ChartView);\nexport default EffectScatterView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport SeriesModel from '../../model/Series.js';\nvar EffectScatterSeriesModel = /** @class */function (_super) {\n  __extends(EffectScatterSeriesModel, _super);\n  function EffectScatterSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = EffectScatterSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n  EffectScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n  EffectScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.point(data.getItemLayout(dataIndex));\n  };\n  EffectScatterSeriesModel.type = 'series.effectScatter';\n  EffectScatterSeriesModel.dependencies = ['grid', 'polar'];\n  EffectScatterSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    effectType: 'ripple',\n    progressive: 0,\n    // When to show the effect, option: 'render'|'emphasis'\n    showEffectOn: 'render',\n    clip: true,\n    // Ripple effect config\n    rippleEffect: {\n      period: 4,\n      // Scale of ripple\n      scale: 2.5,\n      // Brush type can be fill or stroke\n      brushType: 'fill',\n      // Ripple number\n      number: 3\n    },\n    universalTransition: {\n      divideShape: 'clone'\n    },\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n    // symbol: null,        // \n    symbolSize: 10 // symbolSize * 2\n    // symbolRotate: null,  // \n    // itemStyle: {\n    //     opacity: 1\n    // }\n  };\n\n  return EffectScatterSeriesModel;\n}(SeriesModel);\nexport default EffectScatterSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport EffectScatterView from './EffectScatterView.js';\nimport EffectScatterSeriesModel from './EffectScatterSeries.js';\nimport layoutPoints from '../../layout/points.js';\nexport function install(registers) {\n  registers.registerChartView(EffectScatterView);\n  registers.registerSeriesModel(EffectScatterSeriesModel);\n  registers.registerLayout(layoutPoints('effectScatter'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelLineStyle, getLabelLineStatesModels } from '../../label/labelGuideHelper.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar opacityAccessPath = ['itemStyle', 'opacity'];\n/**\n * Piece of pie including Sector, Label, LabelLine\n */\nvar FunnelPiece = /** @class */function (_super) {\n  __extends(FunnelPiece, _super);\n  function FunnelPiece(data, idx) {\n    var _this = _super.call(this) || this;\n    var polygon = _this;\n    var labelLine = new graphic.Polyline();\n    var text = new graphic.Text();\n    polygon.setTextContent(text);\n    _this.setTextGuideLine(labelLine);\n    _this.updateData(data, idx, true);\n    return _this;\n  }\n  FunnelPiece.prototype.updateData = function (data, idx, firstCreate) {\n    var polygon = this;\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var layout = data.getItemLayout(idx);\n    var emphasisModel = itemModel.getModel('emphasis');\n    var opacity = itemModel.get(opacityAccessPath);\n    opacity = opacity == null ? 1 : opacity;\n    if (!firstCreate) {\n      saveOldStyle(polygon);\n    }\n    // Update common style\n    polygon.useStyle(data.getItemVisual(idx, 'style'));\n    polygon.style.lineJoin = 'round';\n    if (firstCreate) {\n      polygon.setShape({\n        points: layout.points\n      });\n      polygon.style.opacity = 0;\n      graphic.initProps(polygon, {\n        style: {\n          opacity: opacity\n        }\n      }, seriesModel, idx);\n    } else {\n      graphic.updateProps(polygon, {\n        style: {\n          opacity: opacity\n        },\n        shape: {\n          points: layout.points\n        }\n      }, seriesModel, idx);\n    }\n    setStatesStylesFromModel(polygon, itemModel);\n    this._updateLabel(data, idx);\n    toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n  FunnelPiece.prototype._updateLabel = function (data, idx) {\n    var polygon = this;\n    var labelLine = this.getTextGuideLine();\n    var labelText = polygon.getTextContent();\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var layout = data.getItemLayout(idx);\n    var labelLayout = layout.label;\n    var style = data.getItemVisual(idx, 'style');\n    var visualColor = style.fill;\n    setLabelStyle(\n    // position will not be used in setLabelStyle\n    labelText, getLabelStatesModels(itemModel), {\n      labelFetcher: data.hostModel,\n      labelDataIndex: idx,\n      defaultOpacity: style.opacity,\n      defaultText: data.getName(idx)\n    }, {\n      normal: {\n        align: labelLayout.textAlign,\n        verticalAlign: labelLayout.verticalAlign\n      }\n    });\n    polygon.setTextConfig({\n      local: true,\n      inside: !!labelLayout.inside,\n      insideStroke: visualColor,\n      // insideFill: 'auto',\n      outsideFill: visualColor\n    });\n    var linePoints = labelLayout.linePoints;\n    labelLine.setShape({\n      points: linePoints\n    });\n    polygon.textGuideLineConfig = {\n      anchor: linePoints ? new graphic.Point(linePoints[0][0], linePoints[0][1]) : null\n    };\n    // Make sure update style on labelText after setLabelStyle.\n    // Because setLabelStyle will replace a new style on it.\n    graphic.updateProps(labelText, {\n      style: {\n        x: labelLayout.x,\n        y: labelLayout.y\n      }\n    }, seriesModel, idx);\n    labelText.attr({\n      rotation: labelLayout.rotation,\n      originX: labelLayout.x,\n      originY: labelLayout.y,\n      z2: 10\n    });\n    setLabelLineStyle(polygon, getLabelLineStatesModels(itemModel), {\n      // Default use item visual color\n      stroke: visualColor\n    });\n  };\n  return FunnelPiece;\n}(graphic.Polygon);\nvar FunnelView = /** @class */function (_super) {\n  __extends(FunnelView, _super);\n  function FunnelView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = FunnelView.type;\n    _this.ignoreLabelLineUpdate = true;\n    return _this;\n  }\n  FunnelView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    data.diff(oldData).add(function (idx) {\n      var funnelPiece = new FunnelPiece(data, idx);\n      data.setItemGraphicEl(idx, funnelPiece);\n      group.add(funnelPiece);\n    }).update(function (newIdx, oldIdx) {\n      var piece = oldData.getItemGraphicEl(oldIdx);\n      piece.updateData(data, newIdx);\n      group.add(piece);\n      data.setItemGraphicEl(newIdx, piece);\n    }).remove(function (idx) {\n      var piece = oldData.getItemGraphicEl(idx);\n      graphic.removeElementWithFadeOut(piece, seriesModel, idx);\n    }).execute();\n    this._data = data;\n  };\n  FunnelView.prototype.remove = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n  FunnelView.prototype.dispose = function () {};\n  FunnelView.type = 'funnel';\n  return FunnelView;\n}(ChartView);\nexport default FunnelView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport { defaultEmphasis } from '../../util/model.js';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport SeriesModel from '../../model/Series.js';\nvar FunnelSeriesModel = /** @class */function (_super) {\n  __extends(FunnelSeriesModel, _super);\n  function FunnelSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = FunnelSeriesModel.type;\n    return _this;\n  }\n  FunnelSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments);\n    // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n    // Extend labelLine emphasis\n    this._defaultLabelLine(option);\n  };\n  FunnelSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesDataSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n  };\n  FunnelSeriesModel.prototype._defaultLabelLine = function (option) {\n    // Extend labelLine emphasis\n    defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine;\n    // Not show label line if `label.normal.show = false`\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  };\n  // Overwrite\n  FunnelSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var data = this.getData();\n    var params = _super.prototype.getDataParams.call(this, dataIndex);\n    var valueDim = data.mapDimension('value');\n    var sum = data.getSum(valueDim);\n    // Percent is 0 if sum is 0\n    params.percent = !sum ? 0 : +(data.get(valueDim, dataIndex) / sum * 100).toFixed(2);\n    params.$vars.push('percent');\n    return params;\n  };\n  FunnelSeriesModel.type = 'series.funnel';\n  FunnelSeriesModel.defaultOption = {\n    // zlevel: 0,                  // \n    z: 2,\n    legendHoverLink: true,\n    colorBy: 'data',\n    left: 80,\n    top: 60,\n    right: 80,\n    bottom: 60,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    // \n    // min: 0,\n    // max: 100,\n    minSize: '0%',\n    maxSize: '100%',\n    sort: 'descending',\n    orient: 'vertical',\n    gap: 0,\n    funnelAlign: 'center',\n    label: {\n      show: true,\n      position: 'outer'\n      // formatter: Tooltip.formatter\n    },\n\n    labelLine: {\n      show: true,\n      length: 20,\n      lineStyle: {\n        // color: ,\n        width: 1\n      }\n    },\n    itemStyle: {\n      // color: ,\n      borderColor: '#fff',\n      borderWidth: 1\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return FunnelSeriesModel;\n}(SeriesModel);\nexport default FunnelSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as layout from '../../util/layout.js';\nimport { parsePercent, linearMap } from '../../util/number.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\nfunction getSortedIndices(data, sort) {\n  var valueDim = data.mapDimension('value');\n  var valueArr = data.mapArray(valueDim, function (val) {\n    return val;\n  });\n  var indices = [];\n  var isAscending = sort === 'ascending';\n  for (var i = 0, len = data.count(); i < len; i++) {\n    indices[i] = i;\n  }\n  // Add custom sortable function & none sortable opetion by \"options.sort\"\n  if (isFunction(sort)) {\n    indices.sort(sort);\n  } else if (sort !== 'none') {\n    indices.sort(function (a, b) {\n      return isAscending ? valueArr[a] - valueArr[b] : valueArr[b] - valueArr[a];\n    });\n  }\n  return indices;\n}\nfunction labelLayout(data) {\n  var seriesModel = data.hostModel;\n  var orient = seriesModel.get('orient');\n  data.each(function (idx) {\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label');\n    var labelPosition = labelModel.get('position');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var layout = data.getItemLayout(idx);\n    var points = layout.points;\n    var isLabelInside = labelPosition === 'inner' || labelPosition === 'inside' || labelPosition === 'center' || labelPosition === 'insideLeft' || labelPosition === 'insideRight';\n    var textAlign;\n    var textX;\n    var textY;\n    var linePoints;\n    if (isLabelInside) {\n      if (labelPosition === 'insideLeft') {\n        textX = (points[0][0] + points[3][0]) / 2 + 5;\n        textY = (points[0][1] + points[3][1]) / 2;\n        textAlign = 'left';\n      } else if (labelPosition === 'insideRight') {\n        textX = (points[1][0] + points[2][0]) / 2 - 5;\n        textY = (points[1][1] + points[2][1]) / 2;\n        textAlign = 'right';\n      } else {\n        textX = (points[0][0] + points[1][0] + points[2][0] + points[3][0]) / 4;\n        textY = (points[0][1] + points[1][1] + points[2][1] + points[3][1]) / 4;\n        textAlign = 'center';\n      }\n      linePoints = [[textX, textY], [textX, textY]];\n    } else {\n      var x1 = void 0;\n      var y1 = void 0;\n      var x2 = void 0;\n      var y2 = void 0;\n      var labelLineLen = labelLineModel.get('length');\n      if (process.env.NODE_ENV !== 'production') {\n        if (orient === 'vertical' && ['top', 'bottom'].indexOf(labelPosition) > -1) {\n          labelPosition = 'left';\n          console.warn('Position error: Funnel chart on vertical orient dose not support top and bottom.');\n        }\n        if (orient === 'horizontal' && ['left', 'right'].indexOf(labelPosition) > -1) {\n          labelPosition = 'bottom';\n          console.warn('Position error: Funnel chart on horizontal orient dose not support left and right.');\n        }\n      }\n      if (labelPosition === 'left') {\n        // Left side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        x2 = x1 - labelLineLen;\n        textX = x2 - 5;\n        textAlign = 'right';\n      } else if (labelPosition === 'right') {\n        // Right side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        x2 = x1 + labelLineLen;\n        textX = x2 + 5;\n        textAlign = 'left';\n      } else if (labelPosition === 'top') {\n        // Top side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        y2 = y1 - labelLineLen;\n        textY = y2 - 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'bottom') {\n        // Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        y2 = y1 + labelLineLen;\n        textY = y2 + 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'rightTop') {\n        // RightTop side\n        x1 = orient === 'horizontal' ? points[3][0] : points[1][0];\n        y1 = orient === 'horizontal' ? points[3][1] : points[1][1];\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'top';\n        }\n      } else if (labelPosition === 'rightBottom') {\n        // RightBottom side\n        x1 = points[2][0];\n        y1 = points[2][1];\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'bottom';\n        }\n      } else if (labelPosition === 'leftTop') {\n        // LeftTop side\n        x1 = points[0][0];\n        y1 = orient === 'horizontal' ? points[0][1] : points[1][1];\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else if (labelPosition === 'leftBottom') {\n        // LeftBottom side\n        x1 = orient === 'horizontal' ? points[1][0] : points[3][0];\n        y1 = orient === 'horizontal' ? points[1][1] : points[2][1];\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else {\n        // Right side or Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'left';\n        }\n      }\n      if (orient === 'horizontal') {\n        x2 = x1;\n        textX = x2;\n      } else {\n        y2 = y1;\n        textY = y2;\n      }\n      linePoints = [[x1, y1], [x2, y2]];\n    }\n    layout.label = {\n      linePoints: linePoints,\n      x: textX,\n      y: textY,\n      verticalAlign: 'middle',\n      textAlign: textAlign,\n      inside: isLabelInside\n    };\n  });\n}\nexport default function funnelLayout(ecModel, api) {\n  ecModel.eachSeriesByType('funnel', function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var sort = seriesModel.get('sort');\n    var viewRect = getViewRect(seriesModel, api);\n    var orient = seriesModel.get('orient');\n    var viewWidth = viewRect.width;\n    var viewHeight = viewRect.height;\n    var indices = getSortedIndices(data, sort);\n    var x = viewRect.x;\n    var y = viewRect.y;\n    var sizeExtent = orient === 'horizontal' ? [parsePercent(seriesModel.get('minSize'), viewHeight), parsePercent(seriesModel.get('maxSize'), viewHeight)] : [parsePercent(seriesModel.get('minSize'), viewWidth), parsePercent(seriesModel.get('maxSize'), viewWidth)];\n    var dataExtent = data.getDataExtent(valueDim);\n    var min = seriesModel.get('min');\n    var max = seriesModel.get('max');\n    if (min == null) {\n      min = Math.min(dataExtent[0], 0);\n    }\n    if (max == null) {\n      max = dataExtent[1];\n    }\n    var funnelAlign = seriesModel.get('funnelAlign');\n    var gap = seriesModel.get('gap');\n    var viewSize = orient === 'horizontal' ? viewWidth : viewHeight;\n    var itemSize = (viewSize - gap * (data.count() - 1)) / data.count();\n    var getLinePoints = function (idx, offset) {\n      // End point index is data.count() and we assign it 0\n      if (orient === 'horizontal') {\n        var val_1 = data.get(valueDim, idx) || 0;\n        var itemHeight = linearMap(val_1, [min, max], sizeExtent, true);\n        var y0 = void 0;\n        switch (funnelAlign) {\n          case 'top':\n            y0 = y;\n            break;\n          case 'center':\n            y0 = y + (viewHeight - itemHeight) / 2;\n            break;\n          case 'bottom':\n            y0 = y + (viewHeight - itemHeight);\n            break;\n        }\n        return [[offset, y0], [offset, y0 + itemHeight]];\n      }\n      var val = data.get(valueDim, idx) || 0;\n      var itemWidth = linearMap(val, [min, max], sizeExtent, true);\n      var x0;\n      switch (funnelAlign) {\n        case 'left':\n          x0 = x;\n          break;\n        case 'center':\n          x0 = x + (viewWidth - itemWidth) / 2;\n          break;\n        case 'right':\n          x0 = x + viewWidth - itemWidth;\n          break;\n      }\n      return [[x0, offset], [x0 + itemWidth, offset]];\n    };\n    if (sort === 'ascending') {\n      // From bottom to top\n      itemSize = -itemSize;\n      gap = -gap;\n      if (orient === 'horizontal') {\n        x += viewWidth;\n      } else {\n        y += viewHeight;\n      }\n      indices = indices.reverse();\n    }\n    for (var i = 0; i < indices.length; i++) {\n      var idx = indices[i];\n      var nextIdx = indices[i + 1];\n      var itemModel = data.getItemModel(idx);\n      if (orient === 'horizontal') {\n        var width = itemModel.get(['itemStyle', 'width']);\n        if (width == null) {\n          width = itemSize;\n        } else {\n          width = parsePercent(width, viewWidth);\n          if (sort === 'ascending') {\n            width = -width;\n          }\n        }\n        var start = getLinePoints(idx, x);\n        var end = getLinePoints(nextIdx, x + width);\n        x += width + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      } else {\n        var height = itemModel.get(['itemStyle', 'height']);\n        if (height == null) {\n          height = itemSize;\n        } else {\n          height = parsePercent(height, viewHeight);\n          if (sort === 'ascending') {\n            height = -height;\n          }\n        }\n        var start = getLinePoints(idx, y);\n        var end = getLinePoints(nextIdx, y + height);\n        y += height + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      }\n    }\n    labelLayout(data);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport FunnelView from './FunnelView.js';\nimport FunnelSeriesModel from './FunnelSeries.js';\nimport funnelLayout from './funnelLayout.js';\nimport dataFilter from '../../processor/dataFilter.js';\nexport function install(registers) {\n  registers.registerChartView(FunnelView);\n  registers.registerSeriesModel(FunnelSeriesModel);\n  registers.registerLayout(funnelLayout);\n  registers.registerProcessor(dataFilter('funnel'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Path from 'zrender/lib/graphic/Path.js';\nvar PointerShape = /** @class */function () {\n  function PointerShape() {\n    this.angle = 0;\n    this.width = 10;\n    this.r = 10;\n    this.x = 0;\n    this.y = 0;\n  }\n  return PointerShape;\n}();\nvar PointerPath = /** @class */function (_super) {\n  __extends(PointerPath, _super);\n  function PointerPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'pointer';\n    return _this;\n  }\n  PointerPath.prototype.getDefaultShape = function () {\n    return new PointerShape();\n  };\n  PointerPath.prototype.buildPath = function (ctx, shape) {\n    var mathCos = Math.cos;\n    var mathSin = Math.sin;\n    var r = shape.r;\n    var width = shape.width;\n    var angle = shape.angle;\n    var x = shape.x - mathCos(angle) * width * (width >= r / 3 ? 1 : 2);\n    var y = shape.y - mathSin(angle) * width * (width >= r / 3 ? 1 : 2);\n    angle = shape.angle - Math.PI / 2;\n    ctx.moveTo(x, y);\n    ctx.lineTo(shape.x + mathCos(angle) * width, shape.y + mathSin(angle) * width);\n    ctx.lineTo(shape.x + mathCos(shape.angle) * r, shape.y + mathSin(shape.angle) * r);\n    ctx.lineTo(shape.x - mathCos(angle) * width, shape.y - mathSin(angle) * width);\n    ctx.lineTo(x, y);\n  };\n  return PointerPath;\n}(Path);\nexport default PointerPath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport PointerPath from './PointerPath.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport { createTextStyle, setLabelValueAnimation, animateLabelValue } from '../../label/labelStyle.js';\nimport ChartView from '../../view/Chart.js';\nimport { parsePercent, round, linearMap } from '../../util/number.js';\nimport Sausage from '../../util/shape/sausage.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { extend, isFunction, isString, isNumber, each } from 'zrender/lib/core/util.js';\nimport { setCommonECData } from '../../util/innerStore.js';\nimport { normalizeArcAngles } from 'zrender/lib/core/PathProxy.js';\nfunction parsePosition(seriesModel, api) {\n  var center = seriesModel.get('center');\n  var width = api.getWidth();\n  var height = api.getHeight();\n  var size = Math.min(width, height);\n  var cx = parsePercent(center[0], api.getWidth());\n  var cy = parsePercent(center[1], api.getHeight());\n  var r = parsePercent(seriesModel.get('radius'), size / 2);\n  return {\n    cx: cx,\n    cy: cy,\n    r: r\n  };\n}\nfunction formatLabel(value, labelFormatter) {\n  var label = value == null ? '' : value + '';\n  if (labelFormatter) {\n    if (isString(labelFormatter)) {\n      label = labelFormatter.replace('{value}', label);\n    } else if (isFunction(labelFormatter)) {\n      label = labelFormatter(value);\n    }\n  }\n  return label;\n}\nvar GaugeView = /** @class */function (_super) {\n  __extends(GaugeView, _super);\n  function GaugeView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GaugeView.type;\n    return _this;\n  }\n  GaugeView.prototype.render = function (seriesModel, ecModel, api) {\n    this.group.removeAll();\n    var colorList = seriesModel.get(['axisLine', 'lineStyle', 'color']);\n    var posInfo = parsePosition(seriesModel, api);\n    this._renderMain(seriesModel, ecModel, api, colorList, posInfo);\n    this._data = seriesModel.getData();\n  };\n  GaugeView.prototype.dispose = function () {};\n  GaugeView.prototype._renderMain = function (seriesModel, ecModel, api, colorList, posInfo) {\n    var group = this.group;\n    var clockwise = seriesModel.get('clockwise');\n    var startAngle = -seriesModel.get('startAngle') / 180 * Math.PI;\n    var endAngle = -seriesModel.get('endAngle') / 180 * Math.PI;\n    var axisLineModel = seriesModel.getModel('axisLine');\n    var roundCap = axisLineModel.get('roundCap');\n    var MainPath = roundCap ? Sausage : graphic.Sector;\n    var showAxis = axisLineModel.get('show');\n    var lineStyleModel = axisLineModel.getModel('lineStyle');\n    var axisLineWidth = lineStyleModel.get('width');\n    var angles = [startAngle, endAngle];\n    normalizeArcAngles(angles, !clockwise);\n    startAngle = angles[0];\n    endAngle = angles[1];\n    var angleRangeSpan = endAngle - startAngle;\n    var prevEndAngle = startAngle;\n    var sectors = [];\n    for (var i = 0; showAxis && i < colorList.length; i++) {\n      // Clamp\n      var percent = Math.min(Math.max(colorList[i][0], 0), 1);\n      endAngle = startAngle + angleRangeSpan * percent;\n      var sector = new MainPath({\n        shape: {\n          startAngle: prevEndAngle,\n          endAngle: endAngle,\n          cx: posInfo.cx,\n          cy: posInfo.cy,\n          clockwise: clockwise,\n          r0: posInfo.r - axisLineWidth,\n          r: posInfo.r\n        },\n        silent: true\n      });\n      sector.setStyle({\n        fill: colorList[i][1]\n      });\n      sector.setStyle(lineStyleModel.getLineStyle(\n      // Because we use sector to simulate arc\n      // so the properties for stroking are useless\n      ['color', 'width']));\n      sectors.push(sector);\n      prevEndAngle = endAngle;\n    }\n    sectors.reverse();\n    each(sectors, function (sector) {\n      return group.add(sector);\n    });\n    var getColor = function (percent) {\n      // Less than 0\n      if (percent <= 0) {\n        return colorList[0][1];\n      }\n      var i;\n      for (i = 0; i < colorList.length; i++) {\n        if (colorList[i][0] >= percent && (i === 0 ? 0 : colorList[i - 1][0]) < percent) {\n          return colorList[i][1];\n        }\n      }\n      // More than 1\n      return colorList[i - 1][1];\n    };\n    this._renderTicks(seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth);\n    this._renderTitleAndDetail(seriesModel, ecModel, api, getColor, posInfo);\n    this._renderAnchor(seriesModel, posInfo);\n    this._renderPointer(seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth);\n  };\n  GaugeView.prototype._renderTicks = function (seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth) {\n    var group = this.group;\n    var cx = posInfo.cx;\n    var cy = posInfo.cy;\n    var r = posInfo.r;\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var splitLineModel = seriesModel.getModel('splitLine');\n    var tickModel = seriesModel.getModel('axisTick');\n    var labelModel = seriesModel.getModel('axisLabel');\n    var splitNumber = seriesModel.get('splitNumber');\n    var subSplitNumber = tickModel.get('splitNumber');\n    var splitLineLen = parsePercent(splitLineModel.get('length'), r);\n    var tickLen = parsePercent(tickModel.get('length'), r);\n    var angle = startAngle;\n    var step = (endAngle - startAngle) / splitNumber;\n    var subStep = step / subSplitNumber;\n    var splitLineStyle = splitLineModel.getModel('lineStyle').getLineStyle();\n    var tickLineStyle = tickModel.getModel('lineStyle').getLineStyle();\n    var splitLineDistance = splitLineModel.get('distance');\n    var unitX;\n    var unitY;\n    for (var i = 0; i <= splitNumber; i++) {\n      unitX = Math.cos(angle);\n      unitY = Math.sin(angle);\n      // Split line\n      if (splitLineModel.get('show')) {\n        var distance = splitLineDistance ? splitLineDistance + axisLineWidth : axisLineWidth;\n        var splitLine = new graphic.Line({\n          shape: {\n            x1: unitX * (r - distance) + cx,\n            y1: unitY * (r - distance) + cy,\n            x2: unitX * (r - splitLineLen - distance) + cx,\n            y2: unitY * (r - splitLineLen - distance) + cy\n          },\n          style: splitLineStyle,\n          silent: true\n        });\n        if (splitLineStyle.stroke === 'auto') {\n          splitLine.setStyle({\n            stroke: getColor(i / splitNumber)\n          });\n        }\n        group.add(splitLine);\n      }\n      // Label\n      if (labelModel.get('show')) {\n        var distance = labelModel.get('distance') + splitLineDistance;\n        var label = formatLabel(round(i / splitNumber * (maxVal - minVal) + minVal), labelModel.get('formatter'));\n        var autoColor = getColor(i / splitNumber);\n        var textStyleX = unitX * (r - splitLineLen - distance) + cx;\n        var textStyleY = unitY * (r - splitLineLen - distance) + cy;\n        var rotateType = labelModel.get('rotate');\n        var rotate = 0;\n        if (rotateType === 'radial') {\n          rotate = -angle + 2 * Math.PI;\n          if (rotate > Math.PI / 2) {\n            rotate += Math.PI;\n          }\n        } else if (rotateType === 'tangential') {\n          rotate = -angle - Math.PI / 2;\n        } else if (isNumber(rotateType)) {\n          rotate = rotateType * Math.PI / 180;\n        }\n        if (rotate === 0) {\n          group.add(new graphic.Text({\n            style: createTextStyle(labelModel, {\n              text: label,\n              x: textStyleX,\n              y: textStyleY,\n              verticalAlign: unitY < -0.8 ? 'top' : unitY > 0.8 ? 'bottom' : 'middle',\n              align: unitX < -0.4 ? 'left' : unitX > 0.4 ? 'right' : 'center'\n            }, {\n              inheritColor: autoColor\n            }),\n            silent: true\n          }));\n        } else {\n          group.add(new graphic.Text({\n            style: createTextStyle(labelModel, {\n              text: label,\n              x: textStyleX,\n              y: textStyleY,\n              verticalAlign: 'middle',\n              align: 'center'\n            }, {\n              inheritColor: autoColor\n            }),\n            silent: true,\n            originX: textStyleX,\n            originY: textStyleY,\n            rotation: rotate\n          }));\n        }\n      }\n      // Axis tick\n      if (tickModel.get('show') && i !== splitNumber) {\n        var distance = tickModel.get('distance');\n        distance = distance ? distance + axisLineWidth : axisLineWidth;\n        for (var j = 0; j <= subSplitNumber; j++) {\n          unitX = Math.cos(angle);\n          unitY = Math.sin(angle);\n          var tickLine = new graphic.Line({\n            shape: {\n              x1: unitX * (r - distance) + cx,\n              y1: unitY * (r - distance) + cy,\n              x2: unitX * (r - tickLen - distance) + cx,\n              y2: unitY * (r - tickLen - distance) + cy\n            },\n            silent: true,\n            style: tickLineStyle\n          });\n          if (tickLineStyle.stroke === 'auto') {\n            tickLine.setStyle({\n              stroke: getColor((i + j / subSplitNumber) / splitNumber)\n            });\n          }\n          group.add(tickLine);\n          angle += subStep;\n        }\n        angle -= subStep;\n      } else {\n        angle += step;\n      }\n    }\n  };\n  GaugeView.prototype._renderPointer = function (seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth) {\n    var group = this.group;\n    var oldData = this._data;\n    var oldProgressData = this._progressEls;\n    var progressList = [];\n    var showPointer = seriesModel.get(['pointer', 'show']);\n    var progressModel = seriesModel.getModel('progress');\n    var showProgress = progressModel.get('show');\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var valueExtent = [minVal, maxVal];\n    var angleExtent = [startAngle, endAngle];\n    function createPointer(idx, angle) {\n      var itemModel = data.getItemModel(idx);\n      var pointerModel = itemModel.getModel('pointer');\n      var pointerWidth = parsePercent(pointerModel.get('width'), posInfo.r);\n      var pointerLength = parsePercent(pointerModel.get('length'), posInfo.r);\n      var pointerStr = seriesModel.get(['pointer', 'icon']);\n      var pointerOffset = pointerModel.get('offsetCenter');\n      var pointerOffsetX = parsePercent(pointerOffset[0], posInfo.r);\n      var pointerOffsetY = parsePercent(pointerOffset[1], posInfo.r);\n      var pointerKeepAspect = pointerModel.get('keepAspect');\n      var pointer;\n      // not exist icon type will be set 'rect'\n      if (pointerStr) {\n        pointer = createSymbol(pointerStr, pointerOffsetX - pointerWidth / 2, pointerOffsetY - pointerLength, pointerWidth, pointerLength, null, pointerKeepAspect);\n      } else {\n        pointer = new PointerPath({\n          shape: {\n            angle: -Math.PI / 2,\n            width: pointerWidth,\n            r: pointerLength,\n            x: pointerOffsetX,\n            y: pointerOffsetY\n          }\n        });\n      }\n      pointer.rotation = -(angle + Math.PI / 2);\n      pointer.x = posInfo.cx;\n      pointer.y = posInfo.cy;\n      return pointer;\n    }\n    function createProgress(idx, endAngle) {\n      var roundCap = progressModel.get('roundCap');\n      var ProgressPath = roundCap ? Sausage : graphic.Sector;\n      var isOverlap = progressModel.get('overlap');\n      var progressWidth = isOverlap ? progressModel.get('width') : axisLineWidth / data.count();\n      var r0 = isOverlap ? posInfo.r - progressWidth : posInfo.r - (idx + 1) * progressWidth;\n      var r = isOverlap ? posInfo.r : posInfo.r - idx * progressWidth;\n      var progress = new ProgressPath({\n        shape: {\n          startAngle: startAngle,\n          endAngle: endAngle,\n          cx: posInfo.cx,\n          cy: posInfo.cy,\n          clockwise: clockwise,\n          r0: r0,\n          r: r\n        }\n      });\n      isOverlap && (progress.z2 = maxVal - data.get(valueDim, idx) % maxVal);\n      return progress;\n    }\n    if (showProgress || showPointer) {\n      data.diff(oldData).add(function (idx) {\n        var val = data.get(valueDim, idx);\n        if (showPointer) {\n          var pointer = createPointer(idx, startAngle);\n          // TODO hide pointer on NaN value?\n          graphic.initProps(pointer, {\n            rotation: -((isNaN(+val) ? angleExtent[0] : linearMap(val, valueExtent, angleExtent, true)) + Math.PI / 2)\n          }, seriesModel);\n          group.add(pointer);\n          data.setItemGraphicEl(idx, pointer);\n        }\n        if (showProgress) {\n          var progress = createProgress(idx, startAngle);\n          var isClip = progressModel.get('clip');\n          graphic.initProps(progress, {\n            shape: {\n              endAngle: linearMap(val, valueExtent, angleExtent, isClip)\n            }\n          }, seriesModel);\n          group.add(progress);\n          // Add data index and series index for indexing the data by element\n          // Useful in tooltip\n          setCommonECData(seriesModel.seriesIndex, data.dataType, idx, progress);\n          progressList[idx] = progress;\n        }\n      }).update(function (newIdx, oldIdx) {\n        var val = data.get(valueDim, newIdx);\n        if (showPointer) {\n          var previousPointer = oldData.getItemGraphicEl(oldIdx);\n          var previousRotate = previousPointer ? previousPointer.rotation : startAngle;\n          var pointer = createPointer(newIdx, previousRotate);\n          pointer.rotation = previousRotate;\n          graphic.updateProps(pointer, {\n            rotation: -((isNaN(+val) ? angleExtent[0] : linearMap(val, valueExtent, angleExtent, true)) + Math.PI / 2)\n          }, seriesModel);\n          group.add(pointer);\n          data.setItemGraphicEl(newIdx, pointer);\n        }\n        if (showProgress) {\n          var previousProgress = oldProgressData[oldIdx];\n          var previousEndAngle = previousProgress ? previousProgress.shape.endAngle : startAngle;\n          var progress = createProgress(newIdx, previousEndAngle);\n          var isClip = progressModel.get('clip');\n          graphic.updateProps(progress, {\n            shape: {\n              endAngle: linearMap(val, valueExtent, angleExtent, isClip)\n            }\n          }, seriesModel);\n          group.add(progress);\n          // Add data index and series index for indexing the data by element\n          // Useful in tooltip\n          setCommonECData(seriesModel.seriesIndex, data.dataType, newIdx, progress);\n          progressList[newIdx] = progress;\n        }\n      }).execute();\n      data.each(function (idx) {\n        var itemModel = data.getItemModel(idx);\n        var emphasisModel = itemModel.getModel('emphasis');\n        var focus = emphasisModel.get('focus');\n        var blurScope = emphasisModel.get('blurScope');\n        var emphasisDisabled = emphasisModel.get('disabled');\n        if (showPointer) {\n          var pointer = data.getItemGraphicEl(idx);\n          var symbolStyle = data.getItemVisual(idx, 'style');\n          var visualColor = symbolStyle.fill;\n          if (pointer instanceof ZRImage) {\n            var pathStyle = pointer.style;\n            pointer.useStyle(extend({\n              image: pathStyle.image,\n              x: pathStyle.x,\n              y: pathStyle.y,\n              width: pathStyle.width,\n              height: pathStyle.height\n            }, symbolStyle));\n          } else {\n            pointer.useStyle(symbolStyle);\n            pointer.type !== 'pointer' && pointer.setColor(visualColor);\n          }\n          pointer.setStyle(itemModel.getModel(['pointer', 'itemStyle']).getItemStyle());\n          if (pointer.style.fill === 'auto') {\n            pointer.setStyle('fill', getColor(linearMap(data.get(valueDim, idx), valueExtent, [0, 1], true)));\n          }\n          pointer.z2EmphasisLift = 0;\n          setStatesStylesFromModel(pointer, itemModel);\n          toggleHoverEmphasis(pointer, focus, blurScope, emphasisDisabled);\n        }\n        if (showProgress) {\n          var progress = progressList[idx];\n          progress.useStyle(data.getItemVisual(idx, 'style'));\n          progress.setStyle(itemModel.getModel(['progress', 'itemStyle']).getItemStyle());\n          progress.z2EmphasisLift = 0;\n          setStatesStylesFromModel(progress, itemModel);\n          toggleHoverEmphasis(progress, focus, blurScope, emphasisDisabled);\n        }\n      });\n      this._progressEls = progressList;\n    }\n  };\n  GaugeView.prototype._renderAnchor = function (seriesModel, posInfo) {\n    var anchorModel = seriesModel.getModel('anchor');\n    var showAnchor = anchorModel.get('show');\n    if (showAnchor) {\n      var anchorSize = anchorModel.get('size');\n      var anchorType = anchorModel.get('icon');\n      var offsetCenter = anchorModel.get('offsetCenter');\n      var anchorKeepAspect = anchorModel.get('keepAspect');\n      var anchor = createSymbol(anchorType, posInfo.cx - anchorSize / 2 + parsePercent(offsetCenter[0], posInfo.r), posInfo.cy - anchorSize / 2 + parsePercent(offsetCenter[1], posInfo.r), anchorSize, anchorSize, null, anchorKeepAspect);\n      anchor.z2 = anchorModel.get('showAbove') ? 1 : 0;\n      anchor.setStyle(anchorModel.getModel('itemStyle').getItemStyle());\n      this.group.add(anchor);\n    }\n  };\n  GaugeView.prototype._renderTitleAndDetail = function (seriesModel, ecModel, api, getColor, posInfo) {\n    var _this = this;\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var contentGroup = new graphic.Group();\n    var newTitleEls = [];\n    var newDetailEls = [];\n    var hasAnimation = seriesModel.isAnimationEnabled();\n    var showPointerAbove = seriesModel.get(['pointer', 'showAbove']);\n    data.diff(this._data).add(function (idx) {\n      newTitleEls[idx] = new graphic.Text({\n        silent: true\n      });\n      newDetailEls[idx] = new graphic.Text({\n        silent: true\n      });\n    }).update(function (idx, oldIdx) {\n      newTitleEls[idx] = _this._titleEls[oldIdx];\n      newDetailEls[idx] = _this._detailEls[oldIdx];\n    }).execute();\n    data.each(function (idx) {\n      var itemModel = data.getItemModel(idx);\n      var value = data.get(valueDim, idx);\n      var itemGroup = new graphic.Group();\n      var autoColor = getColor(linearMap(value, [minVal, maxVal], [0, 1], true));\n      var itemTitleModel = itemModel.getModel('title');\n      if (itemTitleModel.get('show')) {\n        var titleOffsetCenter = itemTitleModel.get('offsetCenter');\n        var titleX = posInfo.cx + parsePercent(titleOffsetCenter[0], posInfo.r);\n        var titleY = posInfo.cy + parsePercent(titleOffsetCenter[1], posInfo.r);\n        var labelEl = newTitleEls[idx];\n        labelEl.attr({\n          z2: showPointerAbove ? 0 : 2,\n          style: createTextStyle(itemTitleModel, {\n            x: titleX,\n            y: titleY,\n            text: data.getName(idx),\n            align: 'center',\n            verticalAlign: 'middle'\n          }, {\n            inheritColor: autoColor\n          })\n        });\n        itemGroup.add(labelEl);\n      }\n      var itemDetailModel = itemModel.getModel('detail');\n      if (itemDetailModel.get('show')) {\n        var detailOffsetCenter = itemDetailModel.get('offsetCenter');\n        var detailX = posInfo.cx + parsePercent(detailOffsetCenter[0], posInfo.r);\n        var detailY = posInfo.cy + parsePercent(detailOffsetCenter[1], posInfo.r);\n        var width = parsePercent(itemDetailModel.get('width'), posInfo.r);\n        var height = parsePercent(itemDetailModel.get('height'), posInfo.r);\n        var detailColor = seriesModel.get(['progress', 'show']) ? data.getItemVisual(idx, 'style').fill : autoColor;\n        var labelEl = newDetailEls[idx];\n        var formatter_1 = itemDetailModel.get('formatter');\n        labelEl.attr({\n          z2: showPointerAbove ? 0 : 2,\n          style: createTextStyle(itemDetailModel, {\n            x: detailX,\n            y: detailY,\n            text: formatLabel(value, formatter_1),\n            width: isNaN(width) ? null : width,\n            height: isNaN(height) ? null : height,\n            align: 'center',\n            verticalAlign: 'middle'\n          }, {\n            inheritColor: detailColor\n          })\n        });\n        setLabelValueAnimation(labelEl, {\n          normal: itemDetailModel\n        }, value, function (value) {\n          return formatLabel(value, formatter_1);\n        });\n        hasAnimation && animateLabelValue(labelEl, idx, data, seriesModel, {\n          getFormattedLabel: function (labelDataIndex, status, dataType, labelDimIndex, fmt, extendParams) {\n            return formatLabel(extendParams ? extendParams.interpolatedValue : value, formatter_1);\n          }\n        });\n        itemGroup.add(labelEl);\n      }\n      contentGroup.add(itemGroup);\n    });\n    this.group.add(contentGroup);\n    this._titleEls = newTitleEls;\n    this._detailEls = newDetailEls;\n  };\n  GaugeView.type = 'gauge';\n  return GaugeView;\n}(ChartView);\nexport default GaugeView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport SeriesModel from '../../model/Series.js';\nvar GaugeSeriesModel = /** @class */function (_super) {\n  __extends(GaugeSeriesModel, _super);\n  function GaugeSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GaugeSeriesModel.type;\n    _this.visualStyleAccessPath = 'itemStyle';\n    return _this;\n  }\n  GaugeSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesDataSimply(this, ['value']);\n  };\n  GaugeSeriesModel.type = 'series.gauge';\n  GaugeSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    colorBy: 'data',\n    // \n    center: ['50%', '50%'],\n    legendHoverLink: true,\n    radius: '75%',\n    startAngle: 225,\n    endAngle: -45,\n    clockwise: true,\n    // \n    min: 0,\n    // \n    max: 100,\n    // 10\n    splitNumber: 10,\n    // \n    axisLine: {\n      // show\n      show: true,\n      roundCap: false,\n      lineStyle: {\n        color: [[1, '#E6EBF8']],\n        width: 10\n      }\n    },\n    // \n    progress: {\n      // show\n      show: false,\n      overlap: true,\n      width: 10,\n      roundCap: false,\n      clip: true\n    },\n    // \n    splitLine: {\n      // show\n      show: true,\n      // length\n      length: 10,\n      distance: 10,\n      // lineStylelineStyle\n      lineStyle: {\n        color: '#63677A',\n        width: 3,\n        type: 'solid'\n      }\n    },\n    // \n    axisTick: {\n      // show\n      show: true,\n      // split\n      splitNumber: 5,\n      // length\n      length: 6,\n      distance: 10,\n      // lineStyle\n      lineStyle: {\n        color: '#63677A',\n        width: 1,\n        type: 'solid'\n      }\n    },\n    axisLabel: {\n      show: true,\n      distance: 15,\n      // formatter: null,\n      color: '#464646',\n      fontSize: 12,\n      rotate: 0\n    },\n    pointer: {\n      icon: null,\n      offsetCenter: [0, 0],\n      show: true,\n      showAbove: true,\n      length: '60%',\n      width: 6,\n      keepAspect: false\n    },\n    anchor: {\n      show: false,\n      showAbove: false,\n      size: 6,\n      icon: 'circle',\n      offsetCenter: [0, 0],\n      keepAspect: false,\n      itemStyle: {\n        color: '#fff',\n        borderWidth: 0,\n        borderColor: '#5470c6'\n      }\n    },\n    title: {\n      show: true,\n      // x, ypx\n      offsetCenter: [0, '20%'],\n      // TEXTSTYLE\n      color: '#464646',\n      fontSize: 16,\n      valueAnimation: false\n    },\n    detail: {\n      show: true,\n      backgroundColor: 'rgba(0,0,0,0)',\n      borderWidth: 0,\n      borderColor: '#ccc',\n      width: 100,\n      height: null,\n      padding: [5, 10],\n      // x, ypx\n      offsetCenter: [0, '40%'],\n      // formatter: null,\n      // TEXTSTYLE\n      color: '#464646',\n      fontSize: 30,\n      fontWeight: 'bold',\n      lineHeight: 30,\n      valueAnimation: false\n    }\n  };\n  return GaugeSeriesModel;\n}(SeriesModel);\nexport default GaugeSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport GaugeView from './GaugeView.js';\nimport GaugeSeriesModel from './GaugeSeries.js';\nexport function install(registers) {\n  registers.registerChartView(GaugeView);\n  registers.registerSeriesModel(GaugeSeriesModel);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isNumber } from 'zrender/lib/core/util.js';\nexport default function categoryFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n  if (!legendModels || !legendModels.length) {\n    return;\n  }\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var categoriesData = graphSeries.getCategoriesData();\n    var graph = graphSeries.getGraph();\n    var data = graph.data;\n    var categoryNames = categoriesData.mapArray(categoriesData.getName);\n    data.filterSelf(function (idx) {\n      var model = data.getItemModel(idx);\n      var category = model.getShallow('category');\n      if (category != null) {\n        if (isNumber(category)) {\n          category = categoryNames[category];\n        }\n        // If in any legend component the status is not selected.\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(category)) {\n            return false;\n          }\n        }\n      }\n      return true;\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend, isString } from 'zrender/lib/core/util.js';\nexport default function categoryVisual(ecModel) {\n  var paletteScope = {};\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var categoriesData = seriesModel.getCategoriesData();\n    var data = seriesModel.getData();\n    var categoryNameIdxMap = {};\n    categoriesData.each(function (idx) {\n      var name = categoriesData.getName(idx);\n      // Add prefix to avoid conflict with Object.prototype.\n      categoryNameIdxMap['ec-' + name] = idx;\n      var itemModel = categoriesData.getItemModel(idx);\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n      if (!style.fill) {\n        // Get color from palette.\n        style.fill = seriesModel.getColorFromPalette(name, paletteScope);\n      }\n      categoriesData.setItemVisual(idx, 'style', style);\n      var symbolVisualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n      for (var i = 0; i < symbolVisualList.length; i++) {\n        var symbolVisual = itemModel.getShallow(symbolVisualList[i], true);\n        if (symbolVisual != null) {\n          categoriesData.setItemVisual(idx, symbolVisualList[i], symbolVisual);\n        }\n      }\n    });\n    // Assign category color to visual\n    if (categoriesData.count()) {\n      data.each(function (idx) {\n        var model = data.getItemModel(idx);\n        var categoryIdx = model.getShallow('category');\n        if (categoryIdx != null) {\n          if (isString(categoryIdx)) {\n            categoryIdx = categoryNameIdxMap['ec-' + categoryIdx];\n          }\n          var categoryStyle = categoriesData.getItemVisual(categoryIdx, 'style');\n          var style = data.ensureUniqueItemVisual(idx, 'style');\n          extend(style, categoryStyle);\n          var visualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n          for (var i = 0; i < visualList.length; i++) {\n            data.setItemVisual(idx, visualList[i], categoriesData.getItemVisual(categoryIdx, visualList[i]));\n          }\n        }\n      });\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util.js';\nfunction normalize(a) {\n  if (!(a instanceof Array)) {\n    a = [a, a];\n  }\n  return a;\n}\nexport default function graphEdgeVisual(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var edgeData = seriesModel.getEdgeData();\n    var symbolType = normalize(seriesModel.get('edgeSymbol'));\n    var symbolSize = normalize(seriesModel.get('edgeSymbolSize'));\n    // const colorQuery = ['lineStyle', 'color'] as const;\n    // const opacityQuery = ['lineStyle', 'opacity'] as const;\n    edgeData.setVisual('fromSymbol', symbolType && symbolType[0]);\n    edgeData.setVisual('toSymbol', symbolType && symbolType[1]);\n    edgeData.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\n    edgeData.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\n    edgeData.setVisual('style', seriesModel.getModel('lineStyle').getLineStyle());\n    edgeData.each(function (idx) {\n      var itemModel = edgeData.getItemModel(idx);\n      var edge = graph.getEdgeByIndex(idx);\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true));\n      // Edge visual must after node visual\n      var style = itemModel.getModel('lineStyle').getLineStyle();\n      var existsStyle = edgeData.ensureUniqueItemVisual(idx, 'style');\n      extend(existsStyle, style);\n      switch (existsStyle.stroke) {\n        case 'source':\n          {\n            var nodeStyle = edge.node1.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n        case 'target':\n          {\n            var nodeStyle = edge.node2.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n      }\n      symbolType[0] && edge.setVisual('fromSymbol', symbolType[0]);\n      symbolType[1] && edge.setVisual('toSymbol', symbolType[1]);\n      symbolSize[0] && edge.setVisual('fromSymbolSize', symbolSize[0]);\n      symbolSize[1] && edge.setVisual('toSymbolSize', symbolSize[1]);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar KEY_DELIMITER = '-->';\n/**\n * params handler\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @returns {*}\n */\nvar getAutoCurvenessParams = function (seriesModel) {\n  return seriesModel.get('autoCurveness') || null;\n};\n/**\n * Generate a list of edge curvatures, 20 is the default\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param {number} appendLength\n * @return  20 => [0, -0.2, 0.2, -0.4, 0.4, -0.6, 0.6, -0.8, 0.8, -1, 1, -1.2, 1.2, -1.4, 1.4, -1.6, 1.6, -1.8, 1.8, -2]\n */\nvar createCurveness = function (seriesModel, appendLength) {\n  var autoCurvenessParmas = getAutoCurvenessParams(seriesModel);\n  var length = 20;\n  var curvenessList = [];\n  // handler the function set\n  if (zrUtil.isNumber(autoCurvenessParmas)) {\n    length = autoCurvenessParmas;\n  } else if (zrUtil.isArray(autoCurvenessParmas)) {\n    seriesModel.__curvenessList = autoCurvenessParmas;\n    return;\n  }\n  // append length\n  if (appendLength > length) {\n    length = appendLength;\n  }\n  // make sure the length is even\n  var len = length % 2 ? length + 2 : length + 3;\n  curvenessList = [];\n  for (var i = 0; i < len; i++) {\n    curvenessList.push((i % 2 ? i + 1 : i) / 10 * (i % 2 ? -1 : 1));\n  }\n  seriesModel.__curvenessList = curvenessList;\n};\n/**\n * Create different cache key data in the positive and negative directions, in order to set the curvature later\n * @param {number|string|module:echarts/data/Graph.Node} n1\n * @param {number|string|module:echarts/data/Graph.Node} n2\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @returns {string} key\n */\nvar getKeyOfEdges = function (n1, n2, seriesModel) {\n  var source = [n1.id, n1.dataIndex].join('.');\n  var target = [n2.id, n2.dataIndex].join('.');\n  return [seriesModel.uid, source, target].join(KEY_DELIMITER);\n};\n/**\n * get opposite key\n * @param {string} key\n * @returns {string}\n */\nvar getOppositeKey = function (key) {\n  var keys = key.split(KEY_DELIMITER);\n  return [keys[0], keys[2], keys[1]].join(KEY_DELIMITER);\n};\n/**\n * get edgeMap with key\n * @param edge\n * @param {module:echarts/model/SeriesModel} seriesModel\n */\nvar getEdgeFromMap = function (edge, seriesModel) {\n  var key = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  return seriesModel.__edgeMap[key];\n};\n/**\n * calculate all cases total length\n * @param edge\n * @param seriesModel\n * @returns {number}\n */\nvar getTotalLengthBetweenNodes = function (edge, seriesModel) {\n  var len = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node1, edge.node2, seriesModel), seriesModel);\n  var lenV = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node2, edge.node1, seriesModel), seriesModel);\n  return len + lenV;\n};\n/**\n *\n * @param key\n */\nvar getEdgeMapLengthWithKey = function (key, seriesModel) {\n  var edgeMap = seriesModel.__edgeMap;\n  return edgeMap[key] ? edgeMap[key].length : 0;\n};\n/**\n * Count the number of edges between the same two points, used to obtain the curvature table and the parity of the edge\n * @see /graph/GraphSeries.js@getInitialData\n * @param {module:echarts/model/SeriesModel} seriesModel\n */\nexport function initCurvenessList(seriesModel) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n  seriesModel.__curvenessList = [];\n  seriesModel.__edgeMap = {};\n  // calc the array of curveness List\n  createCurveness(seriesModel);\n}\n/**\n * set edgeMap with key\n * @param {number|string|module:echarts/data/Graph.Node} n1\n * @param {number|string|module:echarts/data/Graph.Node} n2\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param {number} index\n */\nexport function createEdgeMapForCurveness(n1, n2, seriesModel, index) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n  var key = getKeyOfEdges(n1, n2, seriesModel);\n  var edgeMap = seriesModel.__edgeMap;\n  var oppositeEdges = edgeMap[getOppositeKey(key)];\n  // set direction\n  if (edgeMap[key] && !oppositeEdges) {\n    edgeMap[key].isForward = true;\n  } else if (oppositeEdges && edgeMap[key]) {\n    oppositeEdges.isForward = true;\n    edgeMap[key].isForward = false;\n  }\n  edgeMap[key] = edgeMap[key] || [];\n  edgeMap[key].push(index);\n}\n/**\n * get curvature for edge\n * @param edge\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param index\n */\nexport function getCurvenessForEdge(edge, seriesModel, index, needReverse) {\n  var autoCurvenessParams = getAutoCurvenessParams(seriesModel);\n  var isArrayParam = zrUtil.isArray(autoCurvenessParams);\n  if (!autoCurvenessParams) {\n    return null;\n  }\n  var edgeArray = getEdgeFromMap(edge, seriesModel);\n  if (!edgeArray) {\n    return null;\n  }\n  var edgeIndex = -1;\n  for (var i = 0; i < edgeArray.length; i++) {\n    if (edgeArray[i] === index) {\n      edgeIndex = i;\n      break;\n    }\n  }\n  // if totalLen is Longer createCurveness\n  var totalLen = getTotalLengthBetweenNodes(edge, seriesModel);\n  createCurveness(seriesModel, totalLen);\n  edge.lineStyle = edge.lineStyle || {};\n  // if is opposite edge, must set curvenss to opposite number\n  var curKey = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  var curvenessList = seriesModel.__curvenessList;\n  // if pass array no need parity\n  var parityCorrection = isArrayParam ? 0 : totalLen % 2 ? 0 : 1;\n  if (!edgeArray.isForward) {\n    // the opposite edge show outside\n    var oppositeKey = getOppositeKey(curKey);\n    var len = getEdgeMapLengthWithKey(oppositeKey, seriesModel);\n    var resValue = curvenessList[edgeIndex + len + parityCorrection];\n    // isNeedReverse, simple, force type need reverse the curveness in the junction of the forword and the opposite\n    if (needReverse) {\n      // set as array may make the parity handle with the len of opposite\n      if (isArrayParam) {\n        if (autoCurvenessParams && autoCurvenessParams[0] === 0) {\n          return (len + parityCorrection) % 2 ? resValue : -resValue;\n        } else {\n          return ((len % 2 ? 0 : 1) + parityCorrection) % 2 ? resValue : -resValue;\n        }\n      } else {\n        return (len + parityCorrection) % 2 ? resValue : -resValue;\n      }\n    } else {\n      return curvenessList[edgeIndex + len + parityCorrection];\n    }\n  } else {\n    return curvenessList[parityCorrection + edgeIndex];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nexport function simpleLayout(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n  var graph = seriesModel.getGraph();\n  graph.eachNode(function (node) {\n    var model = node.getModel();\n    node.setLayout([+model.get('x'), +model.get('y')]);\n  });\n  simpleLayoutEdge(graph, seriesModel);\n}\nexport function simpleLayoutEdge(graph, seriesModel) {\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, seriesModel, index, true), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var points = [p1, p2];\n    if (+curveness) {\n      points.push([(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * curveness]);\n    }\n    edge.setLayout(points);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each } from 'zrender/lib/core/util.js';\nimport { simpleLayout, simpleLayoutEdge } from './simpleLayoutHelper.js';\nexport default function graphSimpleLayout(ecModel, api) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var layout = seriesModel.get('layout');\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && coordSys.type !== 'view') {\n      var data_1 = seriesModel.getData();\n      var dimensions_1 = [];\n      each(coordSys.dimensions, function (coordDim) {\n        dimensions_1 = dimensions_1.concat(data_1.mapDimensionsAll(coordDim));\n      });\n      for (var dataIndex = 0; dataIndex < data_1.count(); dataIndex++) {\n        var value = [];\n        var hasValue = false;\n        for (var i = 0; i < dimensions_1.length; i++) {\n          var val = data_1.get(dimensions_1[i], dataIndex);\n          if (!isNaN(val)) {\n            hasValue = true;\n          }\n          value.push(val);\n        }\n        if (hasValue) {\n          data_1.setItemLayout(dataIndex, coordSys.dataToPoint(value));\n        } else {\n          // Also {Array.<number>}, not undefined to avoid if...else... statement\n          data_1.setItemLayout(dataIndex, [NaN, NaN]);\n        }\n      }\n      simpleLayoutEdge(data_1.graph, seriesModel);\n    } else if (!layout || layout === 'none') {\n      simpleLayout(seriesModel);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function getNodeGlobalScale(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n  if (coordSys.type !== 'view') {\n    return 1;\n  }\n  var nodeScaleRatio = seriesModel.option.nodeScaleRatio;\n  var groupZoom = coordSys.scaleX;\n  // Scale node when zoom changes\n  var roamZoom = coordSys.getZoom();\n  var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n  return nodeScale / groupZoom;\n}\nexport function getSymbolSize(node) {\n  var symbolSize = node.getVisual('symbolSize');\n  if (symbolSize instanceof Array) {\n    symbolSize = (symbolSize[0] + symbolSize[1]) / 2;\n  }\n  return +symbolSize;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport { getSymbolSize, getNodeGlobalScale } from './graphHelper.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nvar PI = Math.PI;\nvar _symbolRadiansHalf = [];\n/**\n * `basedOn` can be:\n * 'value':\n *     This layout is not accurate and have same bad case. For example,\n *     if the min value is very smaller than the max value, the nodes\n *     with the min value probably overlap even though there is enough\n *     space to layout them. So we only use this approach in the as the\n *     init layout of the force layout.\n *     FIXME\n *     Probably we do not need this method any more but use\n *     `basedOn: 'symbolSize'` in force layout if\n *     delay its init operations to GraphView.\n * 'symbolSize':\n *     This approach work only if all of the symbol size calculated.\n *     That is, the progressive rendering is not applied to graph.\n *     FIXME\n *     If progressive rendering is applied to graph some day,\n *     probably we have to use `basedOn: 'value'`.\n */\nexport function circularLayout(seriesModel, basedOn, draggingNode, pointer) {\n  var coordSys = seriesModel.coordinateSystem;\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n  var rect = coordSys.getBoundingRect();\n  var nodeData = seriesModel.getData();\n  var graph = nodeData.graph;\n  var cx = rect.width / 2 + rect.x;\n  var cy = rect.height / 2 + rect.y;\n  var r = Math.min(rect.width, rect.height) / 2;\n  var count = nodeData.count();\n  nodeData.setLayout({\n    cx: cx,\n    cy: cy\n  });\n  if (!count) {\n    return;\n  }\n  if (draggingNode) {\n    var _a = coordSys.pointToData(pointer),\n      tempX = _a[0],\n      tempY = _a[1];\n    var v = [tempX - cx, tempY - cy];\n    vec2.normalize(v, v);\n    vec2.scale(v, v, r);\n    draggingNode.setLayout([cx + v[0], cy + v[1]], true);\n    var circularRotateLabel = seriesModel.get(['circular', 'rotateLabel']);\n    rotateNodeLabel(draggingNode, circularRotateLabel, cx, cy);\n  }\n  _layoutNodesBasedOn[basedOn](seriesModel, graph, nodeData, r, cx, cy, count);\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), getCurvenessForEdge(edge, seriesModel, index), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var cp1;\n    var x12 = (p1[0] + p2[0]) / 2;\n    var y12 = (p1[1] + p2[1]) / 2;\n    if (+curveness) {\n      curveness *= 3;\n      cp1 = [cx * curveness + x12 * (1 - curveness), cy * curveness + y12 * (1 - curveness)];\n    }\n    edge.setLayout([p1, p2, cp1]);\n  });\n}\nvar _layoutNodesBasedOn = {\n  value: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var angle = 0;\n    var sum = nodeData.getSum('value');\n    var unitAngle = Math.PI * 2 / (sum || count);\n    graph.eachNode(function (node) {\n      var value = node.getValue('value');\n      var radianHalf = unitAngle * (sum ? value : 1) / 2;\n      angle += radianHalf;\n      node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  },\n  symbolSize: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var sumRadian = 0;\n    _symbolRadiansHalf.length = count;\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    graph.eachNode(function (node) {\n      var symbolSize = getSymbolSize(node);\n      // Normally this case will not happen, but we still add\n      // some the defensive code (2px is an arbitrary value).\n      isNaN(symbolSize) && (symbolSize = 2);\n      symbolSize < 0 && (symbolSize = 0);\n      symbolSize *= nodeScale;\n      var symbolRadianHalf = Math.asin(symbolSize / 2 / r);\n      // when `symbolSize / 2` is bigger than `r`.\n      isNaN(symbolRadianHalf) && (symbolRadianHalf = PI / 2);\n      _symbolRadiansHalf[node.dataIndex] = symbolRadianHalf;\n      sumRadian += symbolRadianHalf * 2;\n    });\n    var halfRemainRadian = (2 * PI - sumRadian) / count / 2;\n    var angle = 0;\n    graph.eachNode(function (node) {\n      var radianHalf = halfRemainRadian + _symbolRadiansHalf[node.dataIndex];\n      angle += radianHalf;\n      // init circular layout for\n      // 1. layout undefined node\n      // 2. not fixed node\n      (!node.getLayout() || !node.getLayout().fixed) && node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  }\n};\nexport function rotateNodeLabel(node, circularRotateLabel, cx, cy) {\n  var el = node.getGraphicEl();\n  // need to check if el exists. '-' value may not create node element.\n  if (!el) {\n    return;\n  }\n  var nodeModel = node.getModel();\n  var labelRotate = nodeModel.get(['label', 'rotate']) || 0;\n  var symbolPath = el.getSymbolPath();\n  if (circularRotateLabel) {\n    var pos = node.getLayout();\n    var rad = Math.atan2(pos[1] - cy, pos[0] - cx);\n    if (rad < 0) {\n      rad = Math.PI * 2 + rad;\n    }\n    var isLeft = pos[0] < cx;\n    if (isLeft) {\n      rad = rad - Math.PI;\n    }\n    var textPosition = isLeft ? 'left' : 'right';\n    symbolPath.setTextConfig({\n      rotation: -rad,\n      position: textPosition,\n      origin: 'center'\n    });\n    var emphasisState = symbolPath.ensureState('emphasis');\n    zrUtil.extend(emphasisState.textConfig || (emphasisState.textConfig = {}), {\n      position: textPosition\n    });\n  } else {\n    symbolPath.setTextConfig({\n      rotation: labelRotate *= Math.PI / 180\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { circularLayout } from './circularLayoutHelper.js';\nexport default function graphCircularLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    if (seriesModel.get('layout') === 'circular') {\n      circularLayout(seriesModel, 'symbolSize');\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/*\n* A third-party license is embedded for some of the code in this file:\n* Some formulas were originally copied from \"d3.js\" with some\n* modifications made for this project.\n* (See more details in the comment of the method \"step\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nvar scaleAndAdd = vec2.scaleAndAdd;\n// function adjacentNode(n, e) {\n//     return e.n1 === n ? e.n2 : e.n1;\n// }\nexport function forceLayout(inNodes, inEdges, opts) {\n  var nodes = inNodes;\n  var edges = inEdges;\n  var rect = opts.rect;\n  var width = rect.width;\n  var height = rect.height;\n  var center = [rect.x + width / 2, rect.y + height / 2];\n  // let scale = opts.scale || 1;\n  var gravity = opts.gravity == null ? 0.1 : opts.gravity;\n  // for (let i = 0; i < edges.length; i++) {\n  //     let e = edges[i];\n  //     let n1 = e.n1;\n  //     let n2 = e.n2;\n  //     n1.edges = n1.edges || [];\n  //     n2.edges = n2.edges || [];\n  //     n1.edges.push(e);\n  //     n2.edges.push(e);\n  // }\n  // Init position\n  for (var i = 0; i < nodes.length; i++) {\n    var n = nodes[i];\n    if (!n.p) {\n      n.p = vec2.create(width * (Math.random() - 0.5) + center[0], height * (Math.random() - 0.5) + center[1]);\n    }\n    n.pp = vec2.clone(n.p);\n    n.edges = null;\n  }\n  // Formula in 'Graph Drawing by Force-directed Placement'\n  // let k = scale * Math.sqrt(width * height / nodes.length);\n  // let k2 = k * k;\n  var initialFriction = opts.friction == null ? 0.6 : opts.friction;\n  var friction = initialFriction;\n  var beforeStepCallback;\n  var afterStepCallback;\n  return {\n    warmUp: function () {\n      friction = initialFriction * 0.8;\n    },\n    setFixed: function (idx) {\n      nodes[idx].fixed = true;\n    },\n    setUnfixed: function (idx) {\n      nodes[idx].fixed = false;\n    },\n    /**\n     * Before step hook\n     */\n    beforeStep: function (cb) {\n      beforeStepCallback = cb;\n    },\n    /**\n     * After step hook\n     */\n    afterStep: function (cb) {\n      afterStepCallback = cb;\n    },\n    /**\n     * Some formulas were originally copied from \"d3.js\"\n     * https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/layout/force.js\n     * with some modifications made for this project.\n     * See the license statement at the head of this file.\n     */\n    step: function (cb) {\n      beforeStepCallback && beforeStepCallback(nodes, edges);\n      var v12 = [];\n      var nLen = nodes.length;\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n        if (e.ignoreForceLayout) {\n          continue;\n        }\n        var n1 = e.n1;\n        var n2 = e.n2;\n        vec2.sub(v12, n2.p, n1.p);\n        var d = vec2.len(v12) - e.d;\n        var w = n2.w / (n1.w + n2.w);\n        if (isNaN(w)) {\n          w = 0;\n        }\n        vec2.normalize(v12, v12);\n        !n1.fixed && scaleAndAdd(n1.p, n1.p, v12, w * d * friction);\n        !n2.fixed && scaleAndAdd(n2.p, n2.p, v12, -(1 - w) * d * friction);\n      }\n      // Gravity\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n        if (!n.fixed) {\n          vec2.sub(v12, center, n.p);\n          // let d = vec2.len(v12);\n          // vec2.scale(v12, v12, 1 / d);\n          // let gravityFactor = gravity;\n          scaleAndAdd(n.p, n.p, v12, gravity * friction);\n        }\n      }\n      // Repulsive\n      // PENDING\n      for (var i = 0; i < nLen; i++) {\n        var n1 = nodes[i];\n        for (var j = i + 1; j < nLen; j++) {\n          var n2 = nodes[j];\n          vec2.sub(v12, n2.p, n1.p);\n          var d = vec2.len(v12);\n          if (d === 0) {\n            // Random repulse\n            vec2.set(v12, Math.random() - 0.5, Math.random() - 0.5);\n            d = 1;\n          }\n          var repFact = (n1.rep + n2.rep) / d / d;\n          !n1.fixed && scaleAndAdd(n1.pp, n1.pp, v12, repFact);\n          !n2.fixed && scaleAndAdd(n2.pp, n2.pp, v12, -repFact);\n        }\n      }\n      var v = [];\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n        if (!n.fixed) {\n          vec2.sub(v, n.p, n.pp);\n          scaleAndAdd(n.p, n.p, v, friction);\n          vec2.copy(n.pp, n.p);\n        }\n      }\n      friction = friction * 0.992;\n      var finished = friction < 0.01;\n      afterStepCallback && afterStepCallback(nodes, edges, finished);\n      cb && cb(finished);\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { forceLayout } from './forceHelper.js';\nimport { simpleLayout } from './simpleLayoutHelper.js';\nimport { circularLayout } from './circularLayoutHelper.js';\nimport { linearMap } from '../../util/number.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nexport default function graphForceLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var coordSys = graphSeries.coordinateSystem;\n    if (coordSys && coordSys.type !== 'view') {\n      return;\n    }\n    if (graphSeries.get('layout') === 'force') {\n      var preservedPoints_1 = graphSeries.preservedPoints || {};\n      var graph_1 = graphSeries.getGraph();\n      var nodeData_1 = graph_1.data;\n      var edgeData = graph_1.edgeData;\n      var forceModel = graphSeries.getModel('force');\n      var initLayout = forceModel.get('initLayout');\n      if (graphSeries.preservedPoints) {\n        nodeData_1.each(function (idx) {\n          var id = nodeData_1.getId(idx);\n          nodeData_1.setItemLayout(idx, preservedPoints_1[id] || [NaN, NaN]);\n        });\n      } else if (!initLayout || initLayout === 'none') {\n        simpleLayout(graphSeries);\n      } else if (initLayout === 'circular') {\n        circularLayout(graphSeries, 'value');\n      }\n      var nodeDataExtent_1 = nodeData_1.getDataExtent('value');\n      var edgeDataExtent_1 = edgeData.getDataExtent('value');\n      // let edgeDataExtent = edgeData.getDataExtent('value');\n      var repulsion = forceModel.get('repulsion');\n      var edgeLength = forceModel.get('edgeLength');\n      var repulsionArr_1 = zrUtil.isArray(repulsion) ? repulsion : [repulsion, repulsion];\n      var edgeLengthArr_1 = zrUtil.isArray(edgeLength) ? edgeLength : [edgeLength, edgeLength];\n      // Larger value has smaller length\n      edgeLengthArr_1 = [edgeLengthArr_1[1], edgeLengthArr_1[0]];\n      var nodes_1 = nodeData_1.mapArray('value', function (value, idx) {\n        var point = nodeData_1.getItemLayout(idx);\n        var rep = linearMap(value, nodeDataExtent_1, repulsionArr_1);\n        if (isNaN(rep)) {\n          rep = (repulsionArr_1[0] + repulsionArr_1[1]) / 2;\n        }\n        return {\n          w: rep,\n          rep: rep,\n          fixed: nodeData_1.getItemModel(idx).get('fixed'),\n          p: !point || isNaN(point[0]) || isNaN(point[1]) ? null : point\n        };\n      });\n      var edges = edgeData.mapArray('value', function (value, idx) {\n        var edge = graph_1.getEdgeByIndex(idx);\n        var d = linearMap(value, edgeDataExtent_1, edgeLengthArr_1);\n        if (isNaN(d)) {\n          d = (edgeLengthArr_1[0] + edgeLengthArr_1[1]) / 2;\n        }\n        var edgeModel = edge.getModel();\n        var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, graphSeries, idx, true), 0);\n        return {\n          n1: nodes_1[edge.node1.dataIndex],\n          n2: nodes_1[edge.node2.dataIndex],\n          d: d,\n          curveness: curveness,\n          ignoreForceLayout: edgeModel.get('ignoreForceLayout')\n        };\n      });\n      // let coordSys = graphSeries.coordinateSystem;\n      var rect = coordSys.getBoundingRect();\n      var forceInstance = forceLayout(nodes_1, edges, {\n        rect: rect,\n        gravity: forceModel.get('gravity'),\n        friction: forceModel.get('friction')\n      });\n      forceInstance.beforeStep(function (nodes, edges) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (nodes[i].fixed) {\n            // Write back to layout instance\n            vec2.copy(nodes[i].p, graph_1.getNodeByIndex(i).getLayout());\n          }\n        }\n      });\n      forceInstance.afterStep(function (nodes, edges, stopped) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (!nodes[i].fixed) {\n            graph_1.getNodeByIndex(i).setLayout(nodes[i].p);\n          }\n          preservedPoints_1[nodeData_1.getId(i)] = nodes[i].p;\n        }\n        for (var i = 0, l = edges.length; i < l; i++) {\n          var e = edges[i];\n          var edge = graph_1.getEdgeByIndex(i);\n          var p1 = e.n1.p;\n          var p2 = e.n2.p;\n          var points = edge.getLayout();\n          points = points ? points.slice() : [];\n          points[0] = points[0] || [];\n          points[1] = points[1] || [];\n          vec2.copy(points[0], p1);\n          vec2.copy(points[1], p2);\n          if (+e.curveness) {\n            points[2] = [(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * e.curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * e.curveness];\n          }\n          edge.setLayout(points);\n        }\n      });\n      graphSeries.forceLayout = forceInstance;\n      graphSeries.preservedPoints = preservedPoints_1;\n      // Step to get the layout\n      forceInstance.step();\n    } else {\n      // Remove prev injected forceLayout instance\n      graphSeries.forceLayout = null;\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME Where to create the simple view coordinate system\nimport View from '../../coord/View.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport * as bbox from 'zrender/lib/core/bbox.js';\nimport { extend } from 'zrender/lib/core/util.js';\nfunction getViewRect(seriesModel, api, aspect) {\n  var option = extend(seriesModel.getBoxLayoutParams(), {\n    aspect: aspect\n  });\n  return getLayoutRect(option, {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\nexport default function createViewCoordSys(ecModel, api) {\n  var viewList = [];\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var coordSysType = seriesModel.get('coordinateSystem');\n    if (!coordSysType || coordSysType === 'view') {\n      var data_1 = seriesModel.getData();\n      var positions = data_1.mapArray(function (idx) {\n        var itemModel = data_1.getItemModel(idx);\n        return [+itemModel.get('x'), +itemModel.get('y')];\n      });\n      var min = [];\n      var max = [];\n      bbox.fromPoints(positions, min, max);\n      // If width or height is 0\n      if (max[0] - min[0] === 0) {\n        max[0] += 1;\n        min[0] -= 1;\n      }\n      if (max[1] - min[1] === 0) {\n        max[1] += 1;\n        min[1] -= 1;\n      }\n      var aspect = (max[0] - min[0]) / (max[1] - min[1]);\n      // FIXME If get view rect after data processed?\n      var viewRect = getViewRect(seriesModel, api, aspect);\n      // Position may be NaN, use view rect instead\n      if (isNaN(aspect)) {\n        min = [viewRect.x, viewRect.y];\n        max = [viewRect.x + viewRect.width, viewRect.y + viewRect.height];\n      }\n      var bbWidth = max[0] - min[0];\n      var bbHeight = max[1] - min[1];\n      var viewWidth = viewRect.width;\n      var viewHeight = viewRect.height;\n      var viewCoordSys = seriesModel.coordinateSystem = new View();\n      viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n      viewCoordSys.setBoundingRect(min[0], min[1], bbWidth, bbHeight);\n      viewCoordSys.setViewRect(viewRect.x, viewRect.y, viewWidth, viewHeight);\n      // Update roam info\n      viewCoordSys.setCenter(seriesModel.get('center'), api);\n      viewCoordSys.setZoom(seriesModel.get('zoom'));\n      viewList.push(viewCoordSys);\n    }\n  });\n  return viewList;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as curveTool from 'zrender/lib/core/curve.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport { getSymbolSize } from './graphHelper.js';\nvar v1 = [];\nvar v2 = [];\nvar v3 = [];\nvar quadraticAt = curveTool.quadraticAt;\nvar v2DistSquare = vec2.distSquare;\nvar mathAbs = Math.abs;\nfunction intersectCurveCircle(curvePoints, center, radius) {\n  var p0 = curvePoints[0];\n  var p1 = curvePoints[1];\n  var p2 = curvePoints[2];\n  var d = Infinity;\n  var t;\n  var radiusSquare = radius * radius;\n  var interval = 0.1;\n  for (var _t = 0.1; _t <= 0.9; _t += 0.1) {\n    v1[0] = quadraticAt(p0[0], p1[0], p2[0], _t);\n    v1[1] = quadraticAt(p0[1], p1[1], p2[1], _t);\n    var diff = mathAbs(v2DistSquare(v1, center) - radiusSquare);\n    if (diff < d) {\n      d = diff;\n      t = _t;\n    }\n  }\n  // Assume the segment is monotoneFind root through Bisection method\n  // At most 32 iteration\n  for (var i = 0; i < 32; i++) {\n    // let prev = t - interval;\n    var next = t + interval;\n    // v1[0] = quadraticAt(p0[0], p1[0], p2[0], prev);\n    // v1[1] = quadraticAt(p0[1], p1[1], p2[1], prev);\n    v2[0] = quadraticAt(p0[0], p1[0], p2[0], t);\n    v2[1] = quadraticAt(p0[1], p1[1], p2[1], t);\n    v3[0] = quadraticAt(p0[0], p1[0], p2[0], next);\n    v3[1] = quadraticAt(p0[1], p1[1], p2[1], next);\n    var diff = v2DistSquare(v2, center) - radiusSquare;\n    if (mathAbs(diff) < 1e-2) {\n      break;\n    }\n    // let prevDiff = v2DistSquare(v1, center) - radiusSquare;\n    var nextDiff = v2DistSquare(v3, center) - radiusSquare;\n    interval /= 2;\n    if (diff < 0) {\n      if (nextDiff >= 0) {\n        t = t + interval;\n      } else {\n        t = t - interval;\n      }\n    } else {\n      if (nextDiff >= 0) {\n        t = t - interval;\n      } else {\n        t = t + interval;\n      }\n    }\n  }\n  return t;\n}\n// Adjust edge to avoid\nexport default function adjustEdge(graph, scale) {\n  var tmp0 = [];\n  var quadraticSubdivide = curveTool.quadraticSubdivide;\n  var pts = [[], [], []];\n  var pts2 = [[], []];\n  var v = [];\n  scale /= 2;\n  graph.eachEdge(function (edge, idx) {\n    var linePoints = edge.getLayout();\n    var fromSymbol = edge.getVisual('fromSymbol');\n    var toSymbol = edge.getVisual('toSymbol');\n    if (!linePoints.__original) {\n      linePoints.__original = [vec2.clone(linePoints[0]), vec2.clone(linePoints[1])];\n      if (linePoints[2]) {\n        linePoints.__original.push(vec2.clone(linePoints[2]));\n      }\n    }\n    var originalPoints = linePoints.__original;\n    // Quadratic curve\n    if (linePoints[2] != null) {\n      vec2.copy(pts[0], originalPoints[0]);\n      vec2.copy(pts[1], originalPoints[2]);\n      vec2.copy(pts[2], originalPoints[1]);\n      if (fromSymbol && fromSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node1);\n        var t = intersectCurveCircle(pts, originalPoints[0], symbolSize * scale);\n        // Subdivide and get the second\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[0][0] = tmp0[3];\n        pts[1][0] = tmp0[4];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[0][1] = tmp0[3];\n        pts[1][1] = tmp0[4];\n      }\n      if (toSymbol && toSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node2);\n        var t = intersectCurveCircle(pts, originalPoints[1], symbolSize * scale);\n        // Subdivide and get the first\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[1][0] = tmp0[1];\n        pts[2][0] = tmp0[2];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[1][1] = tmp0[1];\n        pts[2][1] = tmp0[2];\n      }\n      // Copy back to layout\n      vec2.copy(linePoints[0], pts[0]);\n      vec2.copy(linePoints[1], pts[2]);\n      vec2.copy(linePoints[2], pts[1]);\n    }\n    // Line\n    else {\n      vec2.copy(pts2[0], originalPoints[0]);\n      vec2.copy(pts2[1], originalPoints[1]);\n      vec2.sub(v, pts2[1], pts2[0]);\n      vec2.normalize(v, v);\n      if (fromSymbol && fromSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node1);\n        vec2.scaleAndAdd(pts2[0], pts2[0], v, symbolSize * scale);\n      }\n      if (toSymbol && toSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node2);\n        vec2.scaleAndAdd(pts2[1], pts2[1], v, -symbolSize * scale);\n      }\n      vec2.copy(linePoints[0], pts2[0]);\n      vec2.copy(linePoints[1], pts2[1]);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport LineDraw from '../helper/LineDraw.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport * as roamHelper from '../../component/helper/roamHelper.js';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper.js';\nimport * as graphic from '../../util/graphic.js';\nimport adjustEdge from './adjustEdge.js';\nimport { getNodeGlobalScale } from './graphHelper.js';\nimport ChartView from '../../view/Chart.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { simpleLayoutEdge } from './simpleLayoutHelper.js';\nimport { circularLayout, rotateNodeLabel } from './circularLayoutHelper.js';\nfunction isViewCoordSys(coordSys) {\n  return coordSys.type === 'view';\n}\nvar GraphView = /** @class */function (_super) {\n  __extends(GraphView, _super);\n  function GraphView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GraphView.type;\n    return _this;\n  }\n  GraphView.prototype.init = function (ecModel, api) {\n    var symbolDraw = new SymbolDraw();\n    var lineDraw = new LineDraw();\n    var group = this.group;\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: group\n    };\n    group.add(symbolDraw.group);\n    group.add(lineDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineDraw = lineDraw;\n    this._firstRender = true;\n  };\n  GraphView.prototype.render = function (seriesModel, ecModel, api) {\n    var _this = this;\n    var coordSys = seriesModel.coordinateSystem;\n    this._model = seriesModel;\n    var symbolDraw = this._symbolDraw;\n    var lineDraw = this._lineDraw;\n    var group = this.group;\n    if (isViewCoordSys(coordSys)) {\n      var groupNewProp = {\n        x: coordSys.x,\n        y: coordSys.y,\n        scaleX: coordSys.scaleX,\n        scaleY: coordSys.scaleY\n      };\n      if (this._firstRender) {\n        group.attr(groupNewProp);\n      } else {\n        graphic.updateProps(group, groupNewProp, seriesModel);\n      }\n    }\n    // Fix edge contact point with node\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n    var data = seriesModel.getData();\n    symbolDraw.updateData(data);\n    var edgeData = seriesModel.getEdgeData();\n    // TODO: TYPE\n    lineDraw.updateData(edgeData);\n    this._updateNodeAndLinkScale();\n    this._updateController(seriesModel, ecModel, api);\n    clearTimeout(this._layoutTimeout);\n    var forceLayout = seriesModel.forceLayout;\n    var layoutAnimation = seriesModel.get(['force', 'layoutAnimation']);\n    if (forceLayout) {\n      this._startForceLayoutIteration(forceLayout, layoutAnimation);\n    }\n    var layout = seriesModel.get('layout');\n    data.graph.eachNode(function (node) {\n      var idx = node.dataIndex;\n      var el = node.getGraphicEl();\n      var itemModel = node.getModel();\n      if (!el) {\n        return;\n      }\n      // Update draggable\n      el.off('drag').off('dragend');\n      var draggable = itemModel.get('draggable');\n      if (draggable) {\n        el.on('drag', function (e) {\n          switch (layout) {\n            case 'force':\n              forceLayout.warmUp();\n              !_this._layouting && _this._startForceLayoutIteration(forceLayout, layoutAnimation);\n              forceLayout.setFixed(idx);\n              // Write position back to layout\n              data.setItemLayout(idx, [el.x, el.y]);\n              break;\n            case 'circular':\n              data.setItemLayout(idx, [el.x, el.y]);\n              // mark node fixed\n              node.setLayout({\n                fixed: true\n              }, true);\n              // recalculate circular layout\n              circularLayout(seriesModel, 'symbolSize', node, [e.offsetX, e.offsetY]);\n              _this.updateLayout(seriesModel);\n              break;\n            case 'none':\n            default:\n              data.setItemLayout(idx, [el.x, el.y]);\n              // update edge\n              simpleLayoutEdge(seriesModel.getGraph(), seriesModel);\n              _this.updateLayout(seriesModel);\n              break;\n          }\n        }).on('dragend', function () {\n          if (forceLayout) {\n            forceLayout.setUnfixed(idx);\n          }\n        });\n      }\n      el.setDraggable(draggable, !!itemModel.get('cursor'));\n      var focus = itemModel.get(['emphasis', 'focus']);\n      if (focus === 'adjacency') {\n        getECData(el).focus = node.getAdjacentDataIndices();\n      }\n    });\n    data.graph.eachEdge(function (edge) {\n      var el = edge.getGraphicEl();\n      var focus = edge.getModel().get(['emphasis', 'focus']);\n      if (!el) {\n        return;\n      }\n      if (focus === 'adjacency') {\n        getECData(el).focus = {\n          edge: [edge.dataIndex],\n          node: [edge.node1.dataIndex, edge.node2.dataIndex]\n        };\n      }\n    });\n    var circularRotateLabel = seriesModel.get('layout') === 'circular' && seriesModel.get(['circular', 'rotateLabel']);\n    var cx = data.getLayout('cx');\n    var cy = data.getLayout('cy');\n    data.graph.eachNode(function (node) {\n      rotateNodeLabel(node, circularRotateLabel, cx, cy);\n    });\n    this._firstRender = false;\n  };\n  GraphView.prototype.dispose = function () {\n    this.remove();\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n  GraphView.prototype._startForceLayoutIteration = function (forceLayout, layoutAnimation) {\n    var self = this;\n    (function step() {\n      forceLayout.step(function (stopped) {\n        self.updateLayout(self._model);\n        (self._layouting = !stopped) && (layoutAnimation ? self._layoutTimeout = setTimeout(step, 16) : step());\n      });\n    })();\n  };\n  GraphView.prototype._updateController = function (seriesModel, ecModel, api) {\n    var _this = this;\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n    if (!isViewCoordSys(seriesModel.coordinateSystem)) {\n      controller.disable();\n      return;\n    }\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }).on('zoom', function (e) {\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n      _this._updateNodeAndLinkScale();\n      adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n      _this._lineDraw.updateLayout();\n      // Only update label layout on zoom\n      api.updateLabelLayout();\n    });\n  };\n  GraphView.prototype._updateNodeAndLinkScale = function () {\n    var seriesModel = this._model;\n    var data = seriesModel.getData();\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    data.eachItemGraphicEl(function (el, idx) {\n      el && el.setSymbolScale(nodeScale);\n    });\n  };\n  GraphView.prototype.updateLayout = function (seriesModel) {\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n    this._symbolDraw.updateLayout();\n    this._lineDraw.updateLayout();\n  };\n  GraphView.prototype.remove = function () {\n    clearTimeout(this._layoutTimeout);\n    this._layouting = false;\n    this._layoutTimeout = null;\n    this._symbolDraw && this._symbolDraw.remove();\n    this._lineDraw && this._lineDraw.remove();\n  };\n  GraphView.type = 'graph';\n  return GraphView;\n}(ChartView);\nexport default GraphView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesData from '../../data/SeriesData.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { defaultEmphasis } from '../../util/model.js';\nimport Model from '../../model/Model.js';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport SeriesModel from '../../model/Series.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport { defaultSeriesFormatTooltip } from '../../component/tooltip/seriesFormatTooltip.js';\nimport { initCurvenessList, createEdgeMapForCurveness } from '../helper/multipleGraphEdgeHelper.js';\nvar GraphSeriesModel = /** @class */function (_super) {\n  __extends(GraphSeriesModel, _super);\n  function GraphSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GraphSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n  GraphSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments);\n    var self = this;\n    function getCategoriesData() {\n      return self._categoriesData;\n    }\n    // Provide data for legend select\n    this.legendVisualProvider = new LegendVisualProvider(getCategoriesData, getCategoriesData);\n    this.fillDataTextStyle(option.edges || option.links);\n    this._updateCategoriesData();\n  };\n  GraphSeriesModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n    this.fillDataTextStyle(option.edges || option.links);\n    this._updateCategoriesData();\n  };\n  GraphSeriesModel.prototype.mergeDefaultAndTheme = function (option) {\n    _super.prototype.mergeDefaultAndTheme.apply(this, arguments);\n    defaultEmphasis(option, 'edgeLabel', ['show']);\n  };\n  GraphSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var edges = option.edges || option.links || [];\n    var nodes = option.data || option.nodes || [];\n    var self = this;\n    if (nodes && edges) {\n      // auto curveness\n      initCurvenessList(this);\n      var graph = createGraphFromNodeEdge(nodes, edges, this, true, beforeLink);\n      zrUtil.each(graph.edges, function (edge) {\n        createEdgeMapForCurveness(edge.node1, edge.node2, this, edge.dataIndex);\n      }, this);\n      return graph.data;\n    }\n    function beforeLink(nodeData, edgeData) {\n      // Overwrite nodeData.getItemModel to\n      nodeData.wrapMethod('getItemModel', function (model) {\n        var categoriesModels = self._categoriesModels;\n        var categoryIdx = model.getShallow('category');\n        var categoryModel = categoriesModels[categoryIdx];\n        if (categoryModel) {\n          categoryModel.parentModel = model.parentModel;\n          model.parentModel = categoryModel;\n        }\n        return model;\n      });\n      // TODO Inherit resolveParentPath by default in Model#getModel?\n      var oldGetModel = Model.prototype.getModel;\n      function newGetModel(path, parentModel) {\n        var model = oldGetModel.call(this, path, parentModel);\n        model.resolveParentPath = resolveParentPath;\n        return model;\n      }\n      edgeData.wrapMethod('getItemModel', function (model) {\n        model.resolveParentPath = resolveParentPath;\n        model.getModel = newGetModel;\n        return model;\n      });\n      function resolveParentPath(pathArr) {\n        if (pathArr && (pathArr[0] === 'label' || pathArr[1] === 'label')) {\n          var newPathArr = pathArr.slice();\n          if (pathArr[0] === 'label') {\n            newPathArr[0] = 'edgeLabel';\n          } else if (pathArr[1] === 'label') {\n            newPathArr[1] = 'edgeLabel';\n          }\n          return newPathArr;\n        }\n        return pathArr;\n      }\n    }\n  };\n  GraphSeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n  GraphSeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n  GraphSeriesModel.prototype.getCategoriesData = function () {\n    return this._categoriesData;\n  };\n  GraphSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    if (dataType === 'edge') {\n      var nodeData = this.getData();\n      var params = this.getDataParams(dataIndex, dataType);\n      var edge = nodeData.graph.getEdgeByIndex(dataIndex);\n      var sourceName = nodeData.getName(edge.node1.dataIndex);\n      var targetName = nodeData.getName(edge.node2.dataIndex);\n      var nameArr = [];\n      sourceName != null && nameArr.push(sourceName);\n      targetName != null && nameArr.push(targetName);\n      return createTooltipMarkup('nameValue', {\n        name: nameArr.join(' > '),\n        value: params.value,\n        noValue: params.value == null\n      });\n    }\n    // dataType === 'node' or empty\n    var nodeMarkup = defaultSeriesFormatTooltip({\n      series: this,\n      dataIndex: dataIndex,\n      multipleSeries: multipleSeries\n    });\n    return nodeMarkup;\n  };\n  GraphSeriesModel.prototype._updateCategoriesData = function () {\n    var categories = zrUtil.map(this.option.categories || [], function (category) {\n      // Data must has value\n      return category.value != null ? category : zrUtil.extend({\n        value: 0\n      }, category);\n    });\n    var categoriesData = new SeriesData(['value'], this);\n    categoriesData.initData(categories);\n    this._categoriesData = categoriesData;\n    this._categoriesModels = categoriesData.mapArray(function (idx) {\n      return categoriesData.getItemModel(idx);\n    });\n  };\n  GraphSeriesModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n  GraphSeriesModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n  GraphSeriesModel.prototype.isAnimationEnabled = function () {\n    return _super.prototype.isAnimationEnabled.call(this)\n    // Not enable animation when do force layout\n    && !(this.get('layout') === 'force' && this.get(['force', 'layoutAnimation']));\n  };\n  GraphSeriesModel.type = 'series.graph';\n  GraphSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  GraphSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // Default option for all coordinate systems\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // polarIndex: 0,\n    // geoIndex: 0,\n    legendHoverLink: true,\n    layout: null,\n    // Configuration of circular layout\n    circular: {\n      rotateLabel: false\n    },\n    // Configuration of force directed layout\n    force: {\n      initLayout: null,\n      // Node repulsion. Can be an array to represent range.\n      repulsion: [0, 50],\n      gravity: 0.1,\n      // Initial friction\n      friction: 0.6,\n      // Edge length. Can be an array to represent range.\n      edgeLength: 30,\n      layoutAnimation: true\n    },\n    left: 'center',\n    top: 'center',\n    // right: null,\n    // bottom: null,\n    // width: '80%',\n    // height: '80%',\n    symbol: 'circle',\n    symbolSize: 10,\n    edgeSymbol: ['none', 'none'],\n    edgeSymbolSize: 10,\n    edgeLabel: {\n      position: 'middle',\n      distance: 5\n    },\n    draggable: false,\n    roam: false,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.6,\n    // cursor: null,\n    // categories: [],\n    // data: []\n    // Or\n    // nodes: []\n    //\n    // links: []\n    // Or\n    // edges: []\n    label: {\n      show: false,\n      formatter: '{b}'\n    },\n    itemStyle: {},\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      opacity: 0.5\n    },\n    emphasis: {\n      scale: true,\n      label: {\n        show: true\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return GraphSeriesModel;\n}(SeriesModel);\nexport default GraphSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport categoryFilter from './categoryFilter.js';\nimport categoryVisual from './categoryVisual.js';\nimport edgeVisual from './edgeVisual.js';\nimport simpleLayout from './simpleLayout.js';\nimport circularLayout from './circularLayout.js';\nimport forceLayout from './forceLayout.js';\nimport createView from './createView.js';\nimport View from '../../coord/View.js';\nimport GraphView from './GraphView.js';\nimport GraphSeriesModel from './GraphSeries.js';\nimport { updateCenterAndZoom } from '../../action/roamHelper.js';\nimport { noop } from 'zrender/lib/core/util.js';\nvar actionInfo = {\n  type: 'graphRoam',\n  event: 'graphRoam',\n  update: 'none'\n};\nexport function install(registers) {\n  registers.registerChartView(GraphView);\n  registers.registerSeriesModel(GraphSeriesModel);\n  registers.registerProcessor(categoryFilter);\n  registers.registerVisual(categoryVisual);\n  registers.registerVisual(edgeVisual);\n  registers.registerLayout(simpleLayout);\n  registers.registerLayout(registers.PRIORITY.VISUAL.POST_CHART_LAYOUT, circularLayout);\n  registers.registerLayout(forceLayout);\n  registers.registerCoordinateSystem('graphView', {\n    dimensions: View.dimensions,\n    create: createView\n  });\n  // Register legacy focus actions\n  registers.registerAction({\n    type: 'focusNodeAdjacency',\n    event: 'focusNodeAdjacency',\n    update: 'series:focusNodeAdjacency'\n  }, noop);\n  registers.registerAction({\n    type: 'unfocusNodeAdjacency',\n    event: 'unfocusNodeAdjacency',\n    update: 'series:unfocusNodeAdjacency'\n  }, noop);\n  // Register roam action.\n  registers.registerAction(actionInfo, function (payload, ecModel, api) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: payload\n    }, function (seriesModel) {\n      var coordSys = seriesModel.coordinateSystem;\n      var res = updateCenterAndZoom(coordSys, payload, undefined, api);\n      seriesModel.setCenter && seriesModel.setCenter(res.center);\n      seriesModel.setZoom && seriesModel.setZoom(res.zoom);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/* global Uint8ClampedArray */\nimport { platformApi } from 'zrender/lib/core/platform.js';\nvar GRADIENT_LEVELS = 256;\nvar HeatmapLayer = /** @class */function () {\n  function HeatmapLayer() {\n    this.blurSize = 30;\n    this.pointSize = 20;\n    this.maxOpacity = 1;\n    this.minOpacity = 0;\n    this._gradientPixels = {\n      inRange: null,\n      outOfRange: null\n    };\n    var canvas = platformApi.createCanvas();\n    this.canvas = canvas;\n  }\n  /**\n   * Renders Heatmap and returns the rendered canvas\n   * @param data array of data, each has x, y, value\n   * @param width canvas width\n   * @param height canvas height\n   */\n  HeatmapLayer.prototype.update = function (data, width, height, normalize, colorFunc, isInRange) {\n    var brush = this._getBrush();\n    var gradientInRange = this._getGradient(colorFunc, 'inRange');\n    var gradientOutOfRange = this._getGradient(colorFunc, 'outOfRange');\n    var r = this.pointSize + this.blurSize;\n    var canvas = this.canvas;\n    var ctx = canvas.getContext('2d');\n    var len = data.length;\n    canvas.width = width;\n    canvas.height = height;\n    for (var i = 0; i < len; ++i) {\n      var p = data[i];\n      var x = p[0];\n      var y = p[1];\n      var value = p[2];\n      // calculate alpha using value\n      var alpha = normalize(value);\n      // draw with the circle brush with alpha\n      ctx.globalAlpha = alpha;\n      ctx.drawImage(brush, x - r, y - r);\n    }\n    if (!canvas.width || !canvas.height) {\n      // Avoid \"Uncaught DOMException: Failed to execute 'getImageData' on\n      // 'CanvasRenderingContext2D': The source height is 0.\"\n      return canvas;\n    }\n    // colorize the canvas using alpha value and set with gradient\n    var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    var pixels = imageData.data;\n    var offset = 0;\n    var pixelLen = pixels.length;\n    var minOpacity = this.minOpacity;\n    var maxOpacity = this.maxOpacity;\n    var diffOpacity = maxOpacity - minOpacity;\n    while (offset < pixelLen) {\n      var alpha = pixels[offset + 3] / 256;\n      var gradientOffset = Math.floor(alpha * (GRADIENT_LEVELS - 1)) * 4;\n      // Simple optimize to ignore the empty data\n      if (alpha > 0) {\n        var gradient = isInRange(alpha) ? gradientInRange : gradientOutOfRange;\n        // Any alpha > 0 will be mapped to [minOpacity, maxOpacity]\n        alpha > 0 && (alpha = alpha * diffOpacity + minOpacity);\n        pixels[offset++] = gradient[gradientOffset];\n        pixels[offset++] = gradient[gradientOffset + 1];\n        pixels[offset++] = gradient[gradientOffset + 2];\n        pixels[offset++] = gradient[gradientOffset + 3] * alpha * 256;\n      } else {\n        offset += 4;\n      }\n    }\n    ctx.putImageData(imageData, 0, 0);\n    return canvas;\n  };\n  /**\n   * get canvas of a black circle brush used for canvas to draw later\n   */\n  HeatmapLayer.prototype._getBrush = function () {\n    var brushCanvas = this._brushCanvas || (this._brushCanvas = platformApi.createCanvas());\n    // set brush size\n    var r = this.pointSize + this.blurSize;\n    var d = r * 2;\n    brushCanvas.width = d;\n    brushCanvas.height = d;\n    var ctx = brushCanvas.getContext('2d');\n    ctx.clearRect(0, 0, d, d);\n    // in order to render shadow without the distinct circle,\n    // draw the distinct circle in an invisible place,\n    // and use shadowOffset to draw shadow in the center of the canvas\n    ctx.shadowOffsetX = d;\n    ctx.shadowBlur = this.blurSize;\n    // draw the shadow in black, and use alpha and shadow blur to generate\n    // color in color map\n    ctx.shadowColor = '#000';\n    // draw circle in the left to the canvas\n    ctx.beginPath();\n    ctx.arc(-r, r, this.pointSize, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.fill();\n    return brushCanvas;\n  };\n  /**\n   * get gradient color map\n   * @private\n   */\n  HeatmapLayer.prototype._getGradient = function (colorFunc, state) {\n    var gradientPixels = this._gradientPixels;\n    var pixelsSingleState = gradientPixels[state] || (gradientPixels[state] = new Uint8ClampedArray(256 * 4));\n    var color = [0, 0, 0, 0];\n    var off = 0;\n    for (var i = 0; i < 256; i++) {\n      colorFunc[state](i / 255, true, color);\n      pixelsSingleState[off++] = color[0];\n      pixelsSingleState[off++] = color[1];\n      pixelsSingleState[off++] = color[2];\n      pixelsSingleState[off++] = color[3];\n    }\n    return pixelsSingleState;\n  };\n  return HeatmapLayer;\n}();\nexport default HeatmapLayer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis } from '../../util/states.js';\nimport HeatmapLayer from './HeatmapLayer.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nfunction getIsInPiecewiseRange(dataExtent, pieceList, selected) {\n  var dataSpan = dataExtent[1] - dataExtent[0];\n  pieceList = zrUtil.map(pieceList, function (piece) {\n    return {\n      interval: [(piece.interval[0] - dataExtent[0]) / dataSpan, (piece.interval[1] - dataExtent[0]) / dataSpan]\n    };\n  });\n  var len = pieceList.length;\n  var lastIndex = 0;\n  return function (val) {\n    var i;\n    // Try to find in the location of the last found\n    for (i = lastIndex; i < len; i++) {\n      var interval = pieceList[i].interval;\n      if (interval[0] <= val && val <= interval[1]) {\n        lastIndex = i;\n        break;\n      }\n    }\n    if (i === len) {\n      // Not found, back interation\n      for (i = lastIndex - 1; i >= 0; i--) {\n        var interval = pieceList[i].interval;\n        if (interval[0] <= val && val <= interval[1]) {\n          lastIndex = i;\n          break;\n        }\n      }\n    }\n    return i >= 0 && i < len && selected[i];\n  };\n}\nfunction getIsInContinuousRange(dataExtent, range) {\n  var dataSpan = dataExtent[1] - dataExtent[0];\n  range = [(range[0] - dataExtent[0]) / dataSpan, (range[1] - dataExtent[0]) / dataSpan];\n  return function (val) {\n    return val >= range[0] && val <= range[1];\n  };\n}\nfunction isGeoCoordSys(coordSys) {\n  var dimensions = coordSys.dimensions;\n  // Not use coordSys.type === 'geo' because coordSys maybe extended\n  return dimensions[0] === 'lng' && dimensions[1] === 'lat';\n}\nvar HeatmapView = /** @class */function (_super) {\n  __extends(HeatmapView, _super);\n  function HeatmapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = HeatmapView.type;\n    return _this;\n  }\n  HeatmapView.prototype.render = function (seriesModel, ecModel, api) {\n    var visualMapOfThisSeries;\n    ecModel.eachComponent('visualMap', function (visualMap) {\n      visualMap.eachTargetSeries(function (targetSeries) {\n        if (targetSeries === seriesModel) {\n          visualMapOfThisSeries = visualMap;\n        }\n      });\n    });\n    if (process.env.NODE_ENV !== 'production') {\n      if (!visualMapOfThisSeries) {\n        throw new Error('Heatmap must use with visualMap');\n      }\n    }\n    // Clear previously rendered progressive elements.\n    this._progressiveEls = null;\n    this.group.removeAll();\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys.type === 'cartesian2d' || coordSys.type === 'calendar') {\n      this._renderOnCartesianAndCalendar(seriesModel, api, 0, seriesModel.getData().count());\n    } else if (isGeoCoordSys(coordSys)) {\n      this._renderOnGeo(coordSys, seriesModel, visualMapOfThisSeries, api);\n    }\n  };\n  HeatmapView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this.group.removeAll();\n  };\n  HeatmapView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys) {\n      // geo does not support incremental rendering?\n      if (isGeoCoordSys(coordSys)) {\n        this.render(seriesModel, ecModel, api);\n      } else {\n        this._progressiveEls = [];\n        this._renderOnCartesianAndCalendar(seriesModel, api, params.start, params.end, true);\n      }\n    }\n  };\n  HeatmapView.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  HeatmapView.prototype._renderOnCartesianAndCalendar = function (seriesModel, api, start, end, incremental) {\n    var coordSys = seriesModel.coordinateSystem;\n    var isCartesian2d = isCoordinateSystemType(coordSys, 'cartesian2d');\n    var width;\n    var height;\n    var xAxisExtent;\n    var yAxisExtent;\n    if (isCartesian2d) {\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      if (process.env.NODE_ENV !== 'production') {\n        if (!(xAxis.type === 'category' && yAxis.type === 'category')) {\n          throw new Error('Heatmap on cartesian must have two category axes');\n        }\n        if (!(xAxis.onBand && yAxis.onBand)) {\n          throw new Error('Heatmap on cartesian must have two axes with boundaryGap true');\n        }\n      }\n      // add 0.5px to avoid the gaps\n      width = xAxis.getBandWidth() + .5;\n      height = yAxis.getBandWidth() + .5;\n      xAxisExtent = xAxis.scale.getExtent();\n      yAxisExtent = yAxis.scale.getExtent();\n    }\n    var group = this.group;\n    var data = seriesModel.getData();\n    var emphasisStyle = seriesModel.getModel(['emphasis', 'itemStyle']).getItemStyle();\n    var blurStyle = seriesModel.getModel(['blur', 'itemStyle']).getItemStyle();\n    var selectStyle = seriesModel.getModel(['select', 'itemStyle']).getItemStyle();\n    var borderRadius = seriesModel.get(['itemStyle', 'borderRadius']);\n    var labelStatesModels = getLabelStatesModels(seriesModel);\n    var emphasisModel = seriesModel.getModel('emphasis');\n    var focus = emphasisModel.get('focus');\n    var blurScope = emphasisModel.get('blurScope');\n    var emphasisDisabled = emphasisModel.get('disabled');\n    var dataDims = isCartesian2d ? [data.mapDimension('x'), data.mapDimension('y'), data.mapDimension('value')] : [data.mapDimension('time'), data.mapDimension('value')];\n    for (var idx = start; idx < end; idx++) {\n      var rect = void 0;\n      var style = data.getItemVisual(idx, 'style');\n      if (isCartesian2d) {\n        var dataDimX = data.get(dataDims[0], idx);\n        var dataDimY = data.get(dataDims[1], idx);\n        // Ignore empty data and out of extent data\n        if (isNaN(data.get(dataDims[2], idx)) || isNaN(dataDimX) || isNaN(dataDimY) || dataDimX < xAxisExtent[0] || dataDimX > xAxisExtent[1] || dataDimY < yAxisExtent[0] || dataDimY > yAxisExtent[1]) {\n          continue;\n        }\n        var point = coordSys.dataToPoint([dataDimX, dataDimY]);\n        rect = new graphic.Rect({\n          shape: {\n            x: point[0] - width / 2,\n            y: point[1] - height / 2,\n            width: width,\n            height: height\n          },\n          style: style\n        });\n      } else {\n        // Ignore empty data\n        if (isNaN(data.get(dataDims[1], idx))) {\n          continue;\n        }\n        rect = new graphic.Rect({\n          z2: 1,\n          shape: coordSys.dataToRect([data.get(dataDims[0], idx)]).contentShape,\n          style: style\n        });\n      }\n      // Optimization for large dataset\n      if (data.hasItemOption) {\n        var itemModel = data.getItemModel(idx);\n        var emphasisModel_1 = itemModel.getModel('emphasis');\n        emphasisStyle = emphasisModel_1.getModel('itemStyle').getItemStyle();\n        blurStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n        selectStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n        // Each item value struct in the data would be firstly\n        // {\n        //     itemStyle: { borderRadius: [30, 30] },\n        //     value: [2022, 02, 22]\n        // }\n        borderRadius = itemModel.get(['itemStyle', 'borderRadius']);\n        focus = emphasisModel_1.get('focus');\n        blurScope = emphasisModel_1.get('blurScope');\n        emphasisDisabled = emphasisModel_1.get('disabled');\n        labelStatesModels = getLabelStatesModels(itemModel);\n      }\n      rect.shape.r = borderRadius;\n      var rawValue = seriesModel.getRawValue(idx);\n      var defaultText = '-';\n      if (rawValue && rawValue[2] != null) {\n        defaultText = rawValue[2] + '';\n      }\n      setLabelStyle(rect, labelStatesModels, {\n        labelFetcher: seriesModel,\n        labelDataIndex: idx,\n        defaultOpacity: style.opacity,\n        defaultText: defaultText\n      });\n      rect.ensureState('emphasis').style = emphasisStyle;\n      rect.ensureState('blur').style = blurStyle;\n      rect.ensureState('select').style = selectStyle;\n      toggleHoverEmphasis(rect, focus, blurScope, emphasisDisabled);\n      rect.incremental = incremental;\n      // PENDING\n      if (incremental) {\n        // Rect must use hover layer if it's incremental.\n        rect.states.emphasis.hoverLayer = true;\n      }\n      group.add(rect);\n      data.setItemGraphicEl(idx, rect);\n      if (this._progressiveEls) {\n        this._progressiveEls.push(rect);\n      }\n    }\n  };\n  HeatmapView.prototype._renderOnGeo = function (geo, seriesModel, visualMapModel, api) {\n    var inRangeVisuals = visualMapModel.targetVisuals.inRange;\n    var outOfRangeVisuals = visualMapModel.targetVisuals.outOfRange;\n    // if (!visualMapping) {\n    //     throw new Error('Data range must have color visuals');\n    // }\n    var data = seriesModel.getData();\n    var hmLayer = this._hmLayer || this._hmLayer || new HeatmapLayer();\n    hmLayer.blurSize = seriesModel.get('blurSize');\n    hmLayer.pointSize = seriesModel.get('pointSize');\n    hmLayer.minOpacity = seriesModel.get('minOpacity');\n    hmLayer.maxOpacity = seriesModel.get('maxOpacity');\n    var rect = geo.getViewRect().clone();\n    var roamTransform = geo.getRoamTransform();\n    rect.applyTransform(roamTransform);\n    // Clamp on viewport\n    var x = Math.max(rect.x, 0);\n    var y = Math.max(rect.y, 0);\n    var x2 = Math.min(rect.width + rect.x, api.getWidth());\n    var y2 = Math.min(rect.height + rect.y, api.getHeight());\n    var width = x2 - x;\n    var height = y2 - y;\n    var dims = [data.mapDimension('lng'), data.mapDimension('lat'), data.mapDimension('value')];\n    var points = data.mapArray(dims, function (lng, lat, value) {\n      var pt = geo.dataToPoint([lng, lat]);\n      pt[0] -= x;\n      pt[1] -= y;\n      pt.push(value);\n      return pt;\n    });\n    var dataExtent = visualMapModel.getExtent();\n    var isInRange = visualMapModel.type === 'visualMap.continuous' ? getIsInContinuousRange(dataExtent, visualMapModel.option.range) : getIsInPiecewiseRange(dataExtent, visualMapModel.getPieceList(), visualMapModel.option.selected);\n    hmLayer.update(points, width, height, inRangeVisuals.color.getNormalizer(), {\n      inRange: inRangeVisuals.color.getColorMapper(),\n      outOfRange: outOfRangeVisuals.color.getColorMapper()\n    }, isInRange);\n    var img = new graphic.Image({\n      style: {\n        width: width,\n        height: height,\n        x: x,\n        y: y,\n        image: hmLayer.canvas\n      },\n      silent: true\n    });\n    this.group.add(img);\n  };\n  HeatmapView.type = 'heatmap';\n  return HeatmapView;\n}(ChartView);\nexport default HeatmapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nvar HeatmapSeriesModel = /** @class */function (_super) {\n  __extends(HeatmapSeriesModel, _super);\n  function HeatmapSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = HeatmapSeriesModel.type;\n    return _this;\n  }\n  HeatmapSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      generateCoord: 'value'\n    });\n  };\n  HeatmapSeriesModel.prototype.preventIncremental = function () {\n    var coordSysCreator = CoordinateSystem.get(this.get('coordinateSystem'));\n    if (coordSysCreator && coordSysCreator.dimensions) {\n      return coordSysCreator.dimensions[0] === 'lng' && coordSysCreator.dimensions[1] === 'lat';\n    }\n  };\n  HeatmapSeriesModel.type = 'series.heatmap';\n  HeatmapSeriesModel.dependencies = ['grid', 'geo', 'calendar'];\n  HeatmapSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Geo coordinate system\n    geoIndex: 0,\n    blurSize: 30,\n    pointSize: 20,\n    maxOpacity: 1,\n    minOpacity: 0,\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return HeatmapSeriesModel;\n}(SeriesModel);\nexport default HeatmapSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport HeatmapView from './HeatmapView.js';\nimport HeatmapSeriesModel from './HeatmapSeries.js';\nexport function install(registers) {\n  registers.registerChartView(HeatmapView);\n  registers.registerSeriesModel(HeatmapSeriesModel);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Provide effect for line\n */\nimport * as graphic from '../../util/graphic.js';\nimport Line from './Line.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as curveUtil from 'zrender/lib/core/curve.js';\nvar EffectLine = /** @class */function (_super) {\n  __extends(EffectLine, _super);\n  function EffectLine(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n    _this.add(_this.createLine(lineData, idx, seriesScope));\n    _this._updateEffectSymbol(lineData, idx);\n    return _this;\n  }\n  EffectLine.prototype.createLine = function (lineData, idx, seriesScope) {\n    return new Line(lineData, idx, seriesScope);\n  };\n  EffectLine.prototype._updateEffectSymbol = function (lineData, idx) {\n    var itemModel = lineData.getItemModel(idx);\n    var effectModel = itemModel.getModel('effect');\n    var size = effectModel.get('symbolSize');\n    var symbolType = effectModel.get('symbol');\n    if (!zrUtil.isArray(size)) {\n      size = [size, size];\n    }\n    var lineStyle = lineData.getItemVisual(idx, 'style');\n    var color = effectModel.get('color') || lineStyle && lineStyle.stroke;\n    var symbol = this.childAt(1);\n    if (this._symbolType !== symbolType) {\n      // Remove previous\n      this.remove(symbol);\n      symbol = createSymbol(symbolType, -0.5, -0.5, 1, 1, color);\n      symbol.z2 = 100;\n      symbol.culling = true;\n      this.add(symbol);\n    }\n    // Symbol may be removed if loop is false\n    if (!symbol) {\n      return;\n    }\n    // Shadow color is same with color in default\n    symbol.setStyle('shadowColor', color);\n    symbol.setStyle(effectModel.getItemStyle(['color']));\n    symbol.scaleX = size[0];\n    symbol.scaleY = size[1];\n    symbol.setColor(color);\n    this._symbolType = symbolType;\n    this._symbolScale = size;\n    this._updateEffectAnimation(lineData, effectModel, idx);\n  };\n  EffectLine.prototype._updateEffectAnimation = function (lineData, effectModel, idx) {\n    var symbol = this.childAt(1);\n    if (!symbol) {\n      return;\n    }\n    var points = lineData.getItemLayout(idx);\n    var period = effectModel.get('period') * 1000;\n    var loop = effectModel.get('loop');\n    var roundTrip = effectModel.get('roundTrip');\n    var constantSpeed = effectModel.get('constantSpeed');\n    var delayExpr = zrUtil.retrieve(effectModel.get('delay'), function (idx) {\n      return idx / lineData.count() * period / 3;\n    });\n    // Ignore when updating\n    symbol.ignore = true;\n    this._updateAnimationPoints(symbol, points);\n    if (constantSpeed > 0) {\n      period = this._getLineLength(symbol) / constantSpeed * 1000;\n    }\n    if (period !== this._period || loop !== this._loop || roundTrip !== this._roundTrip) {\n      symbol.stopAnimation();\n      var delayNum = void 0;\n      if (zrUtil.isFunction(delayExpr)) {\n        delayNum = delayExpr(idx);\n      } else {\n        delayNum = delayExpr;\n      }\n      if (symbol.__t > 0) {\n        delayNum = -period * symbol.__t;\n      }\n      this._animateSymbol(symbol, period, delayNum, loop, roundTrip);\n    }\n    this._period = period;\n    this._loop = loop;\n    this._roundTrip = roundTrip;\n  };\n  EffectLine.prototype._animateSymbol = function (symbol, period, delayNum, loop, roundTrip) {\n    if (period > 0) {\n      symbol.__t = 0;\n      var self_1 = this;\n      var animator = symbol.animate('', loop).when(roundTrip ? period * 2 : period, {\n        __t: roundTrip ? 2 : 1\n      }).delay(delayNum).during(function () {\n        self_1._updateSymbolPosition(symbol);\n      });\n      if (!loop) {\n        animator.done(function () {\n          self_1.remove(symbol);\n        });\n      }\n      animator.start();\n    }\n  };\n  EffectLine.prototype._getLineLength = function (symbol) {\n    // Not so accurate\n    return vec2.dist(symbol.__p1, symbol.__cp1) + vec2.dist(symbol.__cp1, symbol.__p2);\n  };\n  EffectLine.prototype._updateAnimationPoints = function (symbol, points) {\n    symbol.__p1 = points[0];\n    symbol.__p2 = points[1];\n    symbol.__cp1 = points[2] || [(points[0][0] + points[1][0]) / 2, (points[0][1] + points[1][1]) / 2];\n  };\n  EffectLine.prototype.updateData = function (lineData, idx, seriesScope) {\n    this.childAt(0).updateData(lineData, idx, seriesScope);\n    this._updateEffectSymbol(lineData, idx);\n  };\n  EffectLine.prototype._updateSymbolPosition = function (symbol) {\n    var p1 = symbol.__p1;\n    var p2 = symbol.__p2;\n    var cp1 = symbol.__cp1;\n    var t = symbol.__t < 1 ? symbol.__t : 2 - symbol.__t;\n    var pos = [symbol.x, symbol.y];\n    var lastPos = pos.slice();\n    var quadraticAt = curveUtil.quadraticAt;\n    var quadraticDerivativeAt = curveUtil.quadraticDerivativeAt;\n    pos[0] = quadraticAt(p1[0], cp1[0], p2[0], t);\n    pos[1] = quadraticAt(p1[1], cp1[1], p2[1], t);\n    // Tangent\n    var tx = symbol.__t < 1 ? quadraticDerivativeAt(p1[0], cp1[0], p2[0], t) : quadraticDerivativeAt(p2[0], cp1[0], p1[0], 1 - t);\n    var ty = symbol.__t < 1 ? quadraticDerivativeAt(p1[1], cp1[1], p2[1], t) : quadraticDerivativeAt(p2[1], cp1[1], p1[1], 1 - t);\n    symbol.rotation = -Math.atan2(ty, tx) - Math.PI / 2;\n    // enable continuity trail for 'line', 'rect', 'roundRect' symbolType\n    if (this._symbolType === 'line' || this._symbolType === 'rect' || this._symbolType === 'roundRect') {\n      if (symbol.__lastT !== undefined && symbol.__lastT < symbol.__t) {\n        symbol.scaleY = vec2.dist(lastPos, pos) * 1.05;\n        // make sure the last segment render within endPoint\n        if (t === 1) {\n          pos[0] = lastPos[0] + (pos[0] - lastPos[0]) / 2;\n          pos[1] = lastPos[1] + (pos[1] - lastPos[1]) / 2;\n        }\n      } else if (symbol.__lastT === 1) {\n        // After first loop, symbol.__t does NOT start with 0, so connect p1 to pos directly.\n        symbol.scaleY = 2 * vec2.dist(p1, pos);\n      } else {\n        symbol.scaleY = this._symbolScale[1];\n      }\n    }\n    symbol.__lastT = symbol.__t;\n    symbol.ignore = false;\n    symbol.x = pos[0];\n    symbol.y = pos[1];\n  };\n  EffectLine.prototype.updateLayout = function (lineData, idx) {\n    this.childAt(0).updateLayout(lineData, idx);\n    var effectModel = lineData.getItemModel(idx).getModel('effect');\n    this._updateEffectAnimation(lineData, effectModel, idx);\n  };\n  return EffectLine;\n}(graphic.Group);\nexport default EffectLine;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Polyline from './Polyline.js';\nimport EffectLine from './EffectLine.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nvar EffectPolyline = /** @class */function (_super) {\n  __extends(EffectPolyline, _super);\n  function EffectPolyline() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._lastFrame = 0;\n    _this._lastFramePercent = 0;\n    return _this;\n  }\n  // Override\n  EffectPolyline.prototype.createLine = function (lineData, idx, seriesScope) {\n    return new Polyline(lineData, idx, seriesScope);\n  };\n  ;\n  // Override\n  EffectPolyline.prototype._updateAnimationPoints = function (symbol, points) {\n    this._points = points;\n    var accLenArr = [0];\n    var len = 0;\n    for (var i = 1; i < points.length; i++) {\n      var p1 = points[i - 1];\n      var p2 = points[i];\n      len += vec2.dist(p1, p2);\n      accLenArr.push(len);\n    }\n    if (len === 0) {\n      this._length = 0;\n      return;\n    }\n    for (var i = 0; i < accLenArr.length; i++) {\n      accLenArr[i] /= len;\n    }\n    this._offsets = accLenArr;\n    this._length = len;\n  };\n  ;\n  // Override\n  EffectPolyline.prototype._getLineLength = function () {\n    return this._length;\n  };\n  ;\n  // Override\n  EffectPolyline.prototype._updateSymbolPosition = function (symbol) {\n    var t = symbol.__t < 1 ? symbol.__t : 2 - symbol.__t;\n    var points = this._points;\n    var offsets = this._offsets;\n    var len = points.length;\n    if (!offsets) {\n      // Has length 0\n      return;\n    }\n    var lastFrame = this._lastFrame;\n    var frame;\n    if (t < this._lastFramePercent) {\n      // Start from the next frame\n      // PENDING start from lastFrame ?\n      var start = Math.min(lastFrame + 1, len - 1);\n      for (frame = start; frame >= 0; frame--) {\n        if (offsets[frame] <= t) {\n          break;\n        }\n      }\n      // PENDING really need to do this ?\n      frame = Math.min(frame, len - 2);\n    } else {\n      for (frame = lastFrame; frame < len; frame++) {\n        if (offsets[frame] > t) {\n          break;\n        }\n      }\n      frame = Math.min(frame - 1, len - 2);\n    }\n    var p = (t - offsets[frame]) / (offsets[frame + 1] - offsets[frame]);\n    var p0 = points[frame];\n    var p1 = points[frame + 1];\n    symbol.x = p0[0] * (1 - p) + p * p1[0];\n    symbol.y = p0[1] * (1 - p) + p * p1[1];\n    var tx = symbol.__t < 1 ? p1[0] - p0[0] : p0[0] - p1[0];\n    var ty = symbol.__t < 1 ? p1[1] - p0[1] : p0[1] - p1[1];\n    symbol.rotation = -Math.atan2(ty, tx) - Math.PI / 2;\n    this._lastFrame = frame;\n    this._lastFramePercent = t;\n    symbol.ignore = false;\n  };\n  ;\n  return EffectPolyline;\n}(EffectLine);\nexport default EffectPolyline;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n// TODO Batch by color\nimport * as graphic from '../../util/graphic.js';\nimport * as lineContain from 'zrender/lib/contain/line.js';\nimport * as quadraticContain from 'zrender/lib/contain/quadratic.js';\nimport { getECData } from '../../util/innerStore.js';\nvar LargeLinesPathShape = /** @class */function () {\n  function LargeLinesPathShape() {\n    this.polyline = false;\n    this.curveness = 0;\n    this.segs = [];\n  }\n  return LargeLinesPathShape;\n}();\nvar LargeLinesPath = /** @class */function (_super) {\n  __extends(LargeLinesPath, _super);\n  function LargeLinesPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this._off = 0;\n    _this.hoverDataIdx = -1;\n    return _this;\n  }\n  LargeLinesPath.prototype.reset = function () {\n    this.notClear = false;\n    this._off = 0;\n  };\n  LargeLinesPath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n  LargeLinesPath.prototype.getDefaultShape = function () {\n    return new LargeLinesPathShape();\n  };\n  LargeLinesPath.prototype.buildPath = function (ctx, shape) {\n    var segs = shape.segs;\n    var curveness = shape.curveness;\n    var i;\n    if (shape.polyline) {\n      for (i = this._off; i < segs.length;) {\n        var count = segs[i++];\n        if (count > 0) {\n          ctx.moveTo(segs[i++], segs[i++]);\n          for (var k = 1; k < count; k++) {\n            ctx.lineTo(segs[i++], segs[i++]);\n          }\n        }\n      }\n    } else {\n      for (i = this._off; i < segs.length;) {\n        var x0 = segs[i++];\n        var y0 = segs[i++];\n        var x1 = segs[i++];\n        var y1 = segs[i++];\n        ctx.moveTo(x0, y0);\n        if (curveness > 0) {\n          var x2 = (x0 + x1) / 2 - (y0 - y1) * curveness;\n          var y2 = (y0 + y1) / 2 - (x1 - x0) * curveness;\n          ctx.quadraticCurveTo(x2, y2, x1, y1);\n        } else {\n          ctx.lineTo(x1, y1);\n        }\n      }\n    }\n    if (this.incremental) {\n      this._off = i;\n      this.notClear = true;\n    }\n  };\n  LargeLinesPath.prototype.findDataIndex = function (x, y) {\n    var shape = this.shape;\n    var segs = shape.segs;\n    var curveness = shape.curveness;\n    var lineWidth = this.style.lineWidth;\n    if (shape.polyline) {\n      var dataIndex = 0;\n      for (var i = 0; i < segs.length;) {\n        var count = segs[i++];\n        if (count > 0) {\n          var x0 = segs[i++];\n          var y0 = segs[i++];\n          for (var k = 1; k < count; k++) {\n            var x1 = segs[i++];\n            var y1 = segs[i++];\n            if (lineContain.containStroke(x0, y0, x1, y1, lineWidth, x, y)) {\n              return dataIndex;\n            }\n          }\n        }\n        dataIndex++;\n      }\n    } else {\n      var dataIndex = 0;\n      for (var i = 0; i < segs.length;) {\n        var x0 = segs[i++];\n        var y0 = segs[i++];\n        var x1 = segs[i++];\n        var y1 = segs[i++];\n        if (curveness > 0) {\n          var x2 = (x0 + x1) / 2 - (y0 - y1) * curveness;\n          var y2 = (y0 + y1) / 2 - (x1 - x0) * curveness;\n          if (quadraticContain.containStroke(x0, y0, x2, y2, x1, y1, lineWidth, x, y)) {\n            return dataIndex;\n          }\n        } else {\n          if (lineContain.containStroke(x0, y0, x1, y1, lineWidth, x, y)) {\n            return dataIndex;\n          }\n        }\n        dataIndex++;\n      }\n    }\n    return -1;\n  };\n  LargeLinesPath.prototype.contain = function (x, y) {\n    var localPos = this.transformCoordToLocal(x, y);\n    var rect = this.getBoundingRect();\n    x = localPos[0];\n    y = localPos[1];\n    if (rect.contain(x, y)) {\n      // Cache found data index.\n      var dataIdx = this.hoverDataIdx = this.findDataIndex(x, y);\n      return dataIdx >= 0;\n    }\n    this.hoverDataIdx = -1;\n    return false;\n  };\n  LargeLinesPath.prototype.getBoundingRect = function () {\n    // Ignore stroke for large symbol draw.\n    var rect = this._rect;\n    if (!rect) {\n      var shape = this.shape;\n      var points = shape.segs;\n      var minX = Infinity;\n      var minY = Infinity;\n      var maxX = -Infinity;\n      var maxY = -Infinity;\n      for (var i = 0; i < points.length;) {\n        var x = points[i++];\n        var y = points[i++];\n        minX = Math.min(x, minX);\n        maxX = Math.max(x, maxX);\n        minY = Math.min(y, minY);\n        maxY = Math.max(y, maxY);\n      }\n      rect = this._rect = new graphic.BoundingRect(minX, minY, maxX, maxY);\n    }\n    return rect;\n  };\n  return LargeLinesPath;\n}(graphic.Path);\nvar LargeLineDraw = /** @class */function () {\n  function LargeLineDraw() {\n    this.group = new graphic.Group();\n  }\n  /**\n   * Update symbols draw by new data\n   */\n  LargeLineDraw.prototype.updateData = function (data) {\n    this._clear();\n    var lineEl = this._create();\n    lineEl.setShape({\n      segs: data.getLayout('linesPoints')\n    });\n    this._setCommon(lineEl, data);\n  };\n  ;\n  /**\n   * @override\n   */\n  LargeLineDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this.group.removeAll();\n    this._clear();\n  };\n  ;\n  /**\n   * @override\n   */\n  LargeLineDraw.prototype.incrementalUpdate = function (taskParams, data) {\n    var lastAdded = this._newAdded[0];\n    var linePoints = data.getLayout('linesPoints');\n    var oldSegs = lastAdded && lastAdded.shape.segs;\n    // Merging the exists. Each element has 1e4 points.\n    // Consider the performance balance between too much elements and too much points in one shape(may affect hover optimization)\n    if (oldSegs && oldSegs.length < 2e4) {\n      var oldLen = oldSegs.length;\n      var newSegs = new Float32Array(oldLen + linePoints.length);\n      // Concat two array\n      newSegs.set(oldSegs);\n      newSegs.set(linePoints, oldLen);\n      lastAdded.setShape({\n        segs: newSegs\n      });\n    } else {\n      // Clear\n      this._newAdded = [];\n      var lineEl = this._create();\n      lineEl.incremental = true;\n      lineEl.setShape({\n        segs: linePoints\n      });\n      this._setCommon(lineEl, data);\n      lineEl.__startIndex = taskParams.start;\n    }\n  };\n  /**\n   * @override\n   */\n  LargeLineDraw.prototype.remove = function () {\n    this._clear();\n  };\n  LargeLineDraw.prototype.eachRendered = function (cb) {\n    this._newAdded[0] && cb(this._newAdded[0]);\n  };\n  LargeLineDraw.prototype._create = function () {\n    var lineEl = new LargeLinesPath({\n      cursor: 'default',\n      ignoreCoarsePointer: true\n    });\n    this._newAdded.push(lineEl);\n    this.group.add(lineEl);\n    return lineEl;\n  };\n  LargeLineDraw.prototype._setCommon = function (lineEl, data, isIncremental) {\n    var hostModel = data.hostModel;\n    lineEl.setShape({\n      polyline: hostModel.get('polyline'),\n      curveness: hostModel.get(['lineStyle', 'curveness'])\n    });\n    lineEl.useStyle(hostModel.getModel('lineStyle').getLineStyle());\n    lineEl.style.strokeNoScale = true;\n    var style = data.getVisual('style');\n    if (style && style.stroke) {\n      lineEl.setStyle('stroke', style.stroke);\n    }\n    lineEl.setStyle('fill', null);\n    var ecData = getECData(lineEl);\n    // Enable tooltip\n    // PENDING May have performance issue when path is extremely large\n    ecData.seriesIndex = hostModel.seriesIndex;\n    lineEl.on('mousemove', function (e) {\n      ecData.dataIndex = null;\n      var dataIndex = lineEl.hoverDataIdx;\n      if (dataIndex > 0) {\n        // Provide dataIndex for tooltip\n        ecData.dataIndex = dataIndex + lineEl.__startIndex;\n      }\n    });\n  };\n  ;\n  LargeLineDraw.prototype._clear = function () {\n    this._newAdded = [];\n    this.group.removeAll();\n  };\n  ;\n  return LargeLineDraw;\n}();\nexport default LargeLineDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Float32Array */\n// TODO Batch by color\nimport * as graphic from '../../util/graphic.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport { getECData } from '../../util/innerStore.js';\nvar BOOST_SIZE_THRESHOLD = 4;\nvar LargeSymbolPathShape = /** @class */function () {\n  function LargeSymbolPathShape() {}\n  return LargeSymbolPathShape;\n}();\nvar LargeSymbolPath = /** @class */function (_super) {\n  __extends(LargeSymbolPath, _super);\n  function LargeSymbolPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this._off = 0;\n    _this.hoverDataIdx = -1;\n    return _this;\n  }\n  LargeSymbolPath.prototype.getDefaultShape = function () {\n    return new LargeSymbolPathShape();\n  };\n  LargeSymbolPath.prototype.reset = function () {\n    this.notClear = false;\n    this._off = 0;\n  };\n  LargeSymbolPath.prototype.buildPath = function (path, shape) {\n    var points = shape.points;\n    var size = shape.size;\n    var symbolProxy = this.symbolProxy;\n    var symbolProxyShape = symbolProxy.shape;\n    var ctx = path.getContext ? path.getContext() : path;\n    var canBoost = ctx && size[0] < BOOST_SIZE_THRESHOLD;\n    var softClipShape = this.softClipShape;\n    var i;\n    // Do draw in afterBrush.\n    if (canBoost) {\n      this._ctx = ctx;\n      return;\n    }\n    this._ctx = null;\n    for (i = this._off; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n      if (softClipShape && !softClipShape.contain(x, y)) {\n        continue;\n      }\n      symbolProxyShape.x = x - size[0] / 2;\n      symbolProxyShape.y = y - size[1] / 2;\n      symbolProxyShape.width = size[0];\n      symbolProxyShape.height = size[1];\n      symbolProxy.buildPath(path, symbolProxyShape, true);\n    }\n    if (this.incremental) {\n      this._off = i;\n      this.notClear = true;\n    }\n  };\n  LargeSymbolPath.prototype.afterBrush = function () {\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var ctx = this._ctx;\n    var softClipShape = this.softClipShape;\n    var i;\n    if (!ctx) {\n      return;\n    }\n    // PENDING If style or other canvas status changed?\n    for (i = this._off; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n      if (softClipShape && !softClipShape.contain(x, y)) {\n        continue;\n      }\n      // fillRect is faster than building a rect path and draw.\n      // And it support light globalCompositeOperation.\n      ctx.fillRect(x - size[0] / 2, y - size[1] / 2, size[0], size[1]);\n    }\n    if (this.incremental) {\n      this._off = i;\n      this.notClear = true;\n    }\n  };\n  LargeSymbolPath.prototype.findDataIndex = function (x, y) {\n    // TODO ???\n    // Consider transform\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var w = Math.max(size[0], 4);\n    var h = Math.max(size[1], 4);\n    // Not consider transform\n    // Treat each element as a rect\n    // top down traverse\n    for (var idx = points.length / 2 - 1; idx >= 0; idx--) {\n      var i = idx * 2;\n      var x0 = points[i] - w / 2;\n      var y0 = points[i + 1] - h / 2;\n      if (x >= x0 && y >= y0 && x <= x0 + w && y <= y0 + h) {\n        return idx;\n      }\n    }\n    return -1;\n  };\n  LargeSymbolPath.prototype.contain = function (x, y) {\n    var localPos = this.transformCoordToLocal(x, y);\n    var rect = this.getBoundingRect();\n    x = localPos[0];\n    y = localPos[1];\n    if (rect.contain(x, y)) {\n      // Cache found data index.\n      var dataIdx = this.hoverDataIdx = this.findDataIndex(x, y);\n      return dataIdx >= 0;\n    }\n    this.hoverDataIdx = -1;\n    return false;\n  };\n  LargeSymbolPath.prototype.getBoundingRect = function () {\n    // Ignore stroke for large symbol draw.\n    var rect = this._rect;\n    if (!rect) {\n      var shape = this.shape;\n      var points = shape.points;\n      var size = shape.size;\n      var w = size[0];\n      var h = size[1];\n      var minX = Infinity;\n      var minY = Infinity;\n      var maxX = -Infinity;\n      var maxY = -Infinity;\n      for (var i = 0; i < points.length;) {\n        var x = points[i++];\n        var y = points[i++];\n        minX = Math.min(x, minX);\n        maxX = Math.max(x, maxX);\n        minY = Math.min(y, minY);\n        maxY = Math.max(y, maxY);\n      }\n      rect = this._rect = new graphic.BoundingRect(minX - w / 2, minY - h / 2, maxX - minX + w, maxY - minY + h);\n    }\n    return rect;\n  };\n  return LargeSymbolPath;\n}(graphic.Path);\nvar LargeSymbolDraw = /** @class */function () {\n  function LargeSymbolDraw() {\n    this.group = new graphic.Group();\n  }\n  /**\n   * Update symbols draw by new data\n   */\n  LargeSymbolDraw.prototype.updateData = function (data, opt) {\n    this._clear();\n    var symbolEl = this._create();\n    symbolEl.setShape({\n      points: data.getLayout('points')\n    });\n    this._setCommon(symbolEl, data, opt);\n  };\n  LargeSymbolDraw.prototype.updateLayout = function (data) {\n    var points = data.getLayout('points');\n    this.group.eachChild(function (child) {\n      if (child.startIndex != null) {\n        var len = (child.endIndex - child.startIndex) * 2;\n        var byteOffset = child.startIndex * 4 * 2;\n        points = new Float32Array(points.buffer, byteOffset, len);\n      }\n      child.setShape('points', points);\n      // Reset draw cursor.\n      child.reset();\n    });\n  };\n  LargeSymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this._clear();\n  };\n  LargeSymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    var lastAdded = this._newAdded[0];\n    var points = data.getLayout('points');\n    var oldPoints = lastAdded && lastAdded.shape.points;\n    // Merging the exists. Each element has 1e4 points.\n    // Consider the performance balance between too much elements and too much points in one shape(may affect hover optimization)\n    if (oldPoints && oldPoints.length < 2e4) {\n      var oldLen = oldPoints.length;\n      var newPoints = new Float32Array(oldLen + points.length);\n      // Concat two array\n      newPoints.set(oldPoints);\n      newPoints.set(points, oldLen);\n      // Update endIndex\n      lastAdded.endIndex = taskParams.end;\n      lastAdded.setShape({\n        points: newPoints\n      });\n    } else {\n      // Clear\n      this._newAdded = [];\n      var symbolEl = this._create();\n      symbolEl.startIndex = taskParams.start;\n      symbolEl.endIndex = taskParams.end;\n      symbolEl.incremental = true;\n      symbolEl.setShape({\n        points: points\n      });\n      this._setCommon(symbolEl, data, opt);\n    }\n  };\n  LargeSymbolDraw.prototype.eachRendered = function (cb) {\n    this._newAdded[0] && cb(this._newAdded[0]);\n  };\n  LargeSymbolDraw.prototype._create = function () {\n    var symbolEl = new LargeSymbolPath({\n      cursor: 'default'\n    });\n    symbolEl.ignoreCoarsePointer = true;\n    this.group.add(symbolEl);\n    this._newAdded.push(symbolEl);\n    return symbolEl;\n  };\n  LargeSymbolDraw.prototype._setCommon = function (symbolEl, data, opt) {\n    var hostModel = data.hostModel;\n    opt = opt || {};\n    var size = data.getVisual('symbolSize');\n    symbolEl.setShape('size', size instanceof Array ? size : [size, size]);\n    symbolEl.softClipShape = opt.clipShape || null;\n    // Create symbolProxy to build path for each data\n    symbolEl.symbolProxy = createSymbol(data.getVisual('symbol'), 0, 0, 0, 0);\n    // Use symbolProxy setColor method\n    symbolEl.setColor = symbolEl.symbolProxy.setColor;\n    var extrudeShadow = symbolEl.shape.size[0] < BOOST_SIZE_THRESHOLD;\n    symbolEl.useStyle(\n    // Draw shadow when doing fillRect is extremely slow.\n    hostModel.getModel('itemStyle').getItemStyle(extrudeShadow ? ['color', 'shadowBlur', 'shadowColor'] : ['color']));\n    var globalStyle = data.getVisual('style');\n    var visualColor = globalStyle && globalStyle.fill;\n    if (visualColor) {\n      symbolEl.setColor(visualColor);\n    }\n    var ecData = getECData(symbolEl);\n    // Enable tooltip\n    // PENDING May have performance issue when path is extremely large\n    ecData.seriesIndex = hostModel.seriesIndex;\n    symbolEl.on('mousemove', function (e) {\n      ecData.dataIndex = null;\n      var dataIndex = symbolEl.hoverDataIdx;\n      if (dataIndex >= 0) {\n        // Provide dataIndex for tooltip\n        ecData.dataIndex = dataIndex + (symbolEl.startIndex || 0);\n      }\n    });\n  };\n  LargeSymbolDraw.prototype.remove = function () {\n    this._clear();\n  };\n  LargeSymbolDraw.prototype._clear = function () {\n    this._newAdded = [];\n    this.group.removeAll();\n  };\n  return LargeSymbolDraw;\n}();\nexport default LargeSymbolDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Line path for bezier and straight line draw\n */\nimport * as graphic from '../../util/graphic.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nvar straightLineProto = graphic.Line.prototype;\nvar bezierCurveProto = graphic.BezierCurve.prototype;\nvar StraightLineShape = /** @class */function () {\n  function StraightLineShape() {\n    // Start point\n    this.x1 = 0;\n    this.y1 = 0;\n    // End point\n    this.x2 = 0;\n    this.y2 = 0;\n    this.percent = 1;\n  }\n  return StraightLineShape;\n}();\nvar CurveShape = /** @class */function (_super) {\n  __extends(CurveShape, _super);\n  function CurveShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return CurveShape;\n}(StraightLineShape);\nfunction isStraightLine(shape) {\n  return isNaN(+shape.cpx1) || isNaN(+shape.cpy1);\n}\nvar ECLinePath = /** @class */function (_super) {\n  __extends(ECLinePath, _super);\n  function ECLinePath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'ec-line';\n    return _this;\n  }\n  ECLinePath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n  ECLinePath.prototype.getDefaultShape = function () {\n    return new StraightLineShape();\n  };\n  ECLinePath.prototype.buildPath = function (ctx, shape) {\n    if (isStraightLine(shape)) {\n      straightLineProto.buildPath.call(this, ctx, shape);\n    } else {\n      bezierCurveProto.buildPath.call(this, ctx, shape);\n    }\n  };\n  ECLinePath.prototype.pointAt = function (t) {\n    if (isStraightLine(this.shape)) {\n      return straightLineProto.pointAt.call(this, t);\n    } else {\n      return bezierCurveProto.pointAt.call(this, t);\n    }\n  };\n  ECLinePath.prototype.tangentAt = function (t) {\n    var shape = this.shape;\n    var p = isStraightLine(shape) ? [shape.x2 - shape.x1, shape.y2 - shape.y1] : bezierCurveProto.tangentAt.call(this, t);\n    return vec2.normalize(p, p);\n  };\n  return ECLinePath;\n}(graphic.Path);\nexport default ECLinePath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { isArray, each } from 'zrender/lib/core/util.js';\nimport * as vector from 'zrender/lib/core/vector.js';\nimport * as symbolUtil from '../../util/symbol.js';\nimport ECLinePath from './LinePath.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis, enterEmphasis, leaveEmphasis, SPECIAL_STATES } from '../../util/states.js';\nimport { getLabelStatesModels, setLabelStyle } from '../../label/labelStyle.js';\nimport { round } from '../../util/number.js';\nvar SYMBOL_CATEGORIES = ['fromSymbol', 'toSymbol'];\nfunction makeSymbolTypeKey(symbolCategory) {\n  return '_' + symbolCategory + 'Type';\n}\nfunction makeSymbolTypeValue(name, lineData, idx) {\n  var symbolType = lineData.getItemVisual(idx, name);\n  if (!symbolType || symbolType === 'none') {\n    return symbolType;\n  }\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  var symbolRotate = lineData.getItemVisual(idx, name + 'Rotate');\n  var symbolOffset = lineData.getItemVisual(idx, name + 'Offset');\n  var symbolKeepAspect = lineData.getItemVisual(idx, name + 'KeepAspect');\n  var symbolSizeArr = symbolUtil.normalizeSymbolSize(symbolSize);\n  var symbolOffsetArr = symbolUtil.normalizeSymbolOffset(symbolOffset || 0, symbolSizeArr);\n  return symbolType + symbolSizeArr + symbolOffsetArr + (symbolRotate || '') + (symbolKeepAspect || '');\n}\n/**\n * @inner\n */\nfunction createSymbol(name, lineData, idx) {\n  var symbolType = lineData.getItemVisual(idx, name);\n  if (!symbolType || symbolType === 'none') {\n    return;\n  }\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  var symbolRotate = lineData.getItemVisual(idx, name + 'Rotate');\n  var symbolOffset = lineData.getItemVisual(idx, name + 'Offset');\n  var symbolKeepAspect = lineData.getItemVisual(idx, name + 'KeepAspect');\n  var symbolSizeArr = symbolUtil.normalizeSymbolSize(symbolSize);\n  var symbolOffsetArr = symbolUtil.normalizeSymbolOffset(symbolOffset || 0, symbolSizeArr);\n  var symbolPath = symbolUtil.createSymbol(symbolType, -symbolSizeArr[0] / 2 + symbolOffsetArr[0], -symbolSizeArr[1] / 2 + symbolOffsetArr[1], symbolSizeArr[0], symbolSizeArr[1], null, symbolKeepAspect);\n  symbolPath.__specifiedRotation = symbolRotate == null || isNaN(symbolRotate) ? void 0 : +symbolRotate * Math.PI / 180 || 0;\n  symbolPath.name = name;\n  return symbolPath;\n}\nfunction createLine(points) {\n  var line = new ECLinePath({\n    name: 'line',\n    subPixelOptimize: true\n  });\n  setLinePoints(line.shape, points);\n  return line;\n}\nfunction setLinePoints(targetShape, points) {\n  targetShape.x1 = points[0][0];\n  targetShape.y1 = points[0][1];\n  targetShape.x2 = points[1][0];\n  targetShape.y2 = points[1][1];\n  targetShape.percent = 1;\n  var cp1 = points[2];\n  if (cp1) {\n    targetShape.cpx1 = cp1[0];\n    targetShape.cpy1 = cp1[1];\n  } else {\n    targetShape.cpx1 = NaN;\n    targetShape.cpy1 = NaN;\n  }\n}\nvar Line = /** @class */function (_super) {\n  __extends(Line, _super);\n  function Line(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n    _this._createLine(lineData, idx, seriesScope);\n    return _this;\n  }\n  Line.prototype._createLine = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var linePoints = lineData.getItemLayout(idx);\n    var line = createLine(linePoints);\n    line.shape.percent = 0;\n    graphic.initProps(line, {\n      shape: {\n        percent: 1\n      }\n    }, seriesModel, idx);\n    this.add(line);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = createSymbol(symbolCategory, lineData, idx);\n      // symbols must added after line to make sure\n      // it will be updated after line#update.\n      // Or symbol position and rotation update in line#beforeUpdate will be one frame slow\n      this.add(symbol);\n      this[makeSymbolTypeKey(symbolCategory)] = makeSymbolTypeValue(symbolCategory, lineData, idx);\n    }, this);\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n  // TODO More strict on the List type in parameters?\n  Line.prototype.updateData = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var linePoints = lineData.getItemLayout(idx);\n    var target = {\n      shape: {}\n    };\n    setLinePoints(target.shape, linePoints);\n    graphic.updateProps(line, target, seriesModel, idx);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbolType = makeSymbolTypeValue(symbolCategory, lineData, idx);\n      var key = makeSymbolTypeKey(symbolCategory);\n      // Symbol changed\n      if (this[key] !== symbolType) {\n        this.remove(this.childOfName(symbolCategory));\n        var symbol = createSymbol(symbolCategory, lineData, idx);\n        this.add(symbol);\n      }\n      this[key] = symbolType;\n    }, this);\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n  ;\n  Line.prototype.getLinePath = function () {\n    return this.childAt(0);\n  };\n  Line.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var emphasisLineStyle = seriesScope && seriesScope.emphasisLineStyle;\n    var blurLineStyle = seriesScope && seriesScope.blurLineStyle;\n    var selectLineStyle = seriesScope && seriesScope.selectLineStyle;\n    var labelStatesModels = seriesScope && seriesScope.labelStatesModels;\n    var emphasisDisabled = seriesScope && seriesScope.emphasisDisabled;\n    var focus = seriesScope && seriesScope.focus;\n    var blurScope = seriesScope && seriesScope.blurScope;\n    // Optimization for large dataset\n    if (!seriesScope || lineData.hasItemOption) {\n      var itemModel = lineData.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisLineStyle = emphasisModel.getModel('lineStyle').getLineStyle();\n      blurLineStyle = itemModel.getModel(['blur', 'lineStyle']).getLineStyle();\n      selectLineStyle = itemModel.getModel(['select', 'lineStyle']).getLineStyle();\n      emphasisDisabled = emphasisModel.get('disabled');\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      labelStatesModels = getLabelStatesModels(itemModel);\n    }\n    var lineStyle = lineData.getItemVisual(idx, 'style');\n    var visualColor = lineStyle.stroke;\n    line.useStyle(lineStyle);\n    line.style.fill = null;\n    line.style.strokeNoScale = true;\n    line.ensureState('emphasis').style = emphasisLineStyle;\n    line.ensureState('blur').style = blurLineStyle;\n    line.ensureState('select').style = selectLineStyle;\n    // Update symbol\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = this.childOfName(symbolCategory);\n      if (symbol) {\n        // Share opacity and color with line.\n        symbol.setColor(visualColor);\n        symbol.style.opacity = lineStyle.opacity;\n        for (var i = 0; i < SPECIAL_STATES.length; i++) {\n          var stateName = SPECIAL_STATES[i];\n          var lineState = line.getState(stateName);\n          if (lineState) {\n            var lineStateStyle = lineState.style || {};\n            var state = symbol.ensureState(stateName);\n            var stateStyle = state.style || (state.style = {});\n            if (lineStateStyle.stroke != null) {\n              stateStyle[symbol.__isEmptyBrush ? 'stroke' : 'fill'] = lineStateStyle.stroke;\n            }\n            if (lineStateStyle.opacity != null) {\n              stateStyle.opacity = lineStateStyle.opacity;\n            }\n          }\n        }\n        symbol.markRedraw();\n      }\n    }, this);\n    var rawVal = seriesModel.getRawValue(idx);\n    setLabelStyle(this, labelStatesModels, {\n      labelDataIndex: idx,\n      labelFetcher: {\n        getFormattedLabel: function (dataIndex, stateName) {\n          return seriesModel.getFormattedLabel(dataIndex, stateName, lineData.dataType);\n        }\n      },\n      inheritColor: visualColor || '#000',\n      defaultOpacity: lineStyle.opacity,\n      defaultText: (rawVal == null ? lineData.getName(idx) : isFinite(rawVal) ? round(rawVal) : rawVal) + ''\n    });\n    var label = this.getTextContent();\n    // Always set `textStyle` even if `normalStyle.text` is null, because default\n    // values have to be set on `normalStyle`.\n    if (label) {\n      var labelNormalModel = labelStatesModels.normal;\n      label.__align = label.style.align;\n      label.__verticalAlign = label.style.verticalAlign;\n      // 'start', 'middle', 'end'\n      label.__position = labelNormalModel.get('position') || 'middle';\n      var distance = labelNormalModel.get('distance');\n      if (!isArray(distance)) {\n        distance = [distance, distance];\n      }\n      label.__labelDistance = distance;\n    }\n    this.setTextConfig({\n      position: null,\n      local: true,\n      inside: false // Can't be inside for stroke element.\n    });\n\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n  Line.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n  Line.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n  Line.prototype.updateLayout = function (lineData, idx) {\n    this.setLinePoints(lineData.getItemLayout(idx));\n  };\n  Line.prototype.setLinePoints = function (points) {\n    var linePath = this.childOfName('line');\n    setLinePoints(linePath.shape, points);\n    linePath.dirty();\n  };\n  Line.prototype.beforeUpdate = function () {\n    var lineGroup = this;\n    var symbolFrom = lineGroup.childOfName('fromSymbol');\n    var symbolTo = lineGroup.childOfName('toSymbol');\n    var label = lineGroup.getTextContent();\n    // Quick reject\n    if (!symbolFrom && !symbolTo && (!label || label.ignore)) {\n      return;\n    }\n    var invScale = 1;\n    var parentNode = this.parent;\n    while (parentNode) {\n      if (parentNode.scaleX) {\n        invScale /= parentNode.scaleX;\n      }\n      parentNode = parentNode.parent;\n    }\n    var line = lineGroup.childOfName('line');\n    // If line not changed\n    // FIXME Parent scale changed\n    if (!this.__dirty && !line.__dirty) {\n      return;\n    }\n    var percent = line.shape.percent;\n    var fromPos = line.pointAt(0);\n    var toPos = line.pointAt(percent);\n    var d = vector.sub([], toPos, fromPos);\n    vector.normalize(d, d);\n    function setSymbolRotation(symbol, percent) {\n      // Fix #12388\n      // when symbol is set to be 'arrow' in markLine,\n      // symbolRotate value will be ignored, and compulsively use tangent angle.\n      // rotate by default if symbol rotation is not specified\n      var specifiedRotation = symbol.__specifiedRotation;\n      if (specifiedRotation == null) {\n        var tangent = line.tangentAt(percent);\n        symbol.attr('rotation', (percent === 1 ? -1 : 1) * Math.PI / 2 - Math.atan2(tangent[1], tangent[0]));\n      } else {\n        symbol.attr('rotation', specifiedRotation);\n      }\n    }\n    if (symbolFrom) {\n      symbolFrom.setPosition(fromPos);\n      setSymbolRotation(symbolFrom, 0);\n      symbolFrom.scaleX = symbolFrom.scaleY = invScale * percent;\n      symbolFrom.markRedraw();\n    }\n    if (symbolTo) {\n      symbolTo.setPosition(toPos);\n      setSymbolRotation(symbolTo, 1);\n      symbolTo.scaleX = symbolTo.scaleY = invScale * percent;\n      symbolTo.markRedraw();\n    }\n    if (label && !label.ignore) {\n      label.x = label.y = 0;\n      label.originX = label.originY = 0;\n      var textAlign = void 0;\n      var textVerticalAlign = void 0;\n      var distance = label.__labelDistance;\n      var distanceX = distance[0] * invScale;\n      var distanceY = distance[1] * invScale;\n      var halfPercent = percent / 2;\n      var tangent = line.tangentAt(halfPercent);\n      var n = [tangent[1], -tangent[0]];\n      var cp = line.pointAt(halfPercent);\n      if (n[1] > 0) {\n        n[0] = -n[0];\n        n[1] = -n[1];\n      }\n      var dir = tangent[0] < 0 ? -1 : 1;\n      if (label.__position !== 'start' && label.__position !== 'end') {\n        var rotation = -Math.atan2(tangent[1], tangent[0]);\n        if (toPos[0] < fromPos[0]) {\n          rotation = Math.PI + rotation;\n        }\n        label.rotation = rotation;\n      }\n      var dy = void 0;\n      switch (label.__position) {\n        case 'insideStartTop':\n        case 'insideMiddleTop':\n        case 'insideEndTop':\n        case 'middle':\n          dy = -distanceY;\n          textVerticalAlign = 'bottom';\n          break;\n        case 'insideStartBottom':\n        case 'insideMiddleBottom':\n        case 'insideEndBottom':\n          dy = distanceY;\n          textVerticalAlign = 'top';\n          break;\n        default:\n          dy = 0;\n          textVerticalAlign = 'middle';\n      }\n      switch (label.__position) {\n        case 'end':\n          label.x = d[0] * distanceX + toPos[0];\n          label.y = d[1] * distanceY + toPos[1];\n          textAlign = d[0] > 0.8 ? 'left' : d[0] < -0.8 ? 'right' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'top' : d[1] < -0.8 ? 'bottom' : 'middle';\n          break;\n        case 'start':\n          label.x = -d[0] * distanceX + fromPos[0];\n          label.y = -d[1] * distanceY + fromPos[1];\n          textAlign = d[0] > 0.8 ? 'right' : d[0] < -0.8 ? 'left' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'bottom' : d[1] < -0.8 ? 'top' : 'middle';\n          break;\n        case 'insideStartTop':\n        case 'insideStart':\n        case 'insideStartBottom':\n          label.x = distanceX * dir + fromPos[0];\n          label.y = fromPos[1] + dy;\n          textAlign = tangent[0] < 0 ? 'right' : 'left';\n          label.originX = -distanceX * dir;\n          label.originY = -dy;\n          break;\n        case 'insideMiddleTop':\n        case 'insideMiddle':\n        case 'insideMiddleBottom':\n        case 'middle':\n          label.x = cp[0];\n          label.y = cp[1] + dy;\n          textAlign = 'center';\n          label.originY = -dy;\n          break;\n        case 'insideEndTop':\n        case 'insideEnd':\n        case 'insideEndBottom':\n          label.x = -distanceX * dir + toPos[0];\n          label.y = toPos[1] + dy;\n          textAlign = tangent[0] >= 0 ? 'right' : 'left';\n          label.originX = distanceX * dir;\n          label.originY = -dy;\n          break;\n      }\n      label.scaleX = label.scaleY = invScale;\n      label.setStyle({\n        // Use the user specified text align and baseline first\n        verticalAlign: label.__verticalAlign || textVerticalAlign,\n        align: label.__align || textAlign\n      });\n    }\n  };\n  return Line;\n}(graphic.Group);\nexport default Line;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic.js';\nimport LineGroup from './Line.js';\nimport { getLabelStatesModels } from '../../label/labelStyle.js';\nvar LineDraw = /** @class */function () {\n  function LineDraw(LineCtor) {\n    this.group = new graphic.Group();\n    this._LineCtor = LineCtor || LineGroup;\n  }\n  LineDraw.prototype.updateData = function (lineData) {\n    var _this = this;\n    // Remove progressive els.\n    this._progressiveEls = null;\n    var lineDraw = this;\n    var group = lineDraw.group;\n    var oldLineData = lineDraw._lineData;\n    lineDraw._lineData = lineData;\n    // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n    if (!oldLineData) {\n      group.removeAll();\n    }\n    var seriesScope = makeSeriesScope(lineData);\n    lineData.diff(oldLineData).add(function (idx) {\n      _this._doAdd(lineData, idx, seriesScope);\n    }).update(function (newIdx, oldIdx) {\n      _this._doUpdate(oldLineData, lineData, oldIdx, newIdx, seriesScope);\n    }).remove(function (idx) {\n      group.remove(oldLineData.getItemGraphicEl(idx));\n    }).execute();\n  };\n  ;\n  LineDraw.prototype.updateLayout = function () {\n    var lineData = this._lineData;\n    // Do not support update layout in incremental mode.\n    if (!lineData) {\n      return;\n    }\n    lineData.eachItemGraphicEl(function (el, idx) {\n      el.updateLayout(lineData, idx);\n    }, this);\n  };\n  ;\n  LineDraw.prototype.incrementalPrepareUpdate = function (lineData) {\n    this._seriesScope = makeSeriesScope(lineData);\n    this._lineData = null;\n    this.group.removeAll();\n  };\n  ;\n  LineDraw.prototype.incrementalUpdate = function (taskParams, lineData) {\n    this._progressiveEls = [];\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup && !isEffectObject(el)) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var itemLayout = lineData.getItemLayout(idx);\n      if (lineNeedsDraw(itemLayout)) {\n        var el = new this._LineCtor(lineData, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        this.group.add(el);\n        lineData.setItemGraphicEl(idx, el);\n        this._progressiveEls.push(el);\n      }\n    }\n  };\n  ;\n  LineDraw.prototype.remove = function () {\n    this.group.removeAll();\n  };\n  ;\n  LineDraw.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  LineDraw.prototype._doAdd = function (lineData, idx, seriesScope) {\n    var itemLayout = lineData.getItemLayout(idx);\n    if (!lineNeedsDraw(itemLayout)) {\n      return;\n    }\n    var el = new this._LineCtor(lineData, idx, seriesScope);\n    lineData.setItemGraphicEl(idx, el);\n    this.group.add(el);\n  };\n  LineDraw.prototype._doUpdate = function (oldLineData, newLineData, oldIdx, newIdx, seriesScope) {\n    var itemEl = oldLineData.getItemGraphicEl(oldIdx);\n    if (!lineNeedsDraw(newLineData.getItemLayout(newIdx))) {\n      this.group.remove(itemEl);\n      return;\n    }\n    if (!itemEl) {\n      itemEl = new this._LineCtor(newLineData, newIdx, seriesScope);\n    } else {\n      itemEl.updateData(newLineData, newIdx, seriesScope);\n    }\n    newLineData.setItemGraphicEl(newIdx, itemEl);\n    this.group.add(itemEl);\n  };\n  return LineDraw;\n}();\nfunction isEffectObject(el) {\n  return el.animators && el.animators.length > 0;\n}\nfunction makeSeriesScope(lineData) {\n  var hostModel = lineData.hostModel;\n  var emphasisModel = hostModel.getModel('emphasis');\n  return {\n    lineStyle: hostModel.getModel('lineStyle').getLineStyle(),\n    emphasisLineStyle: emphasisModel.getModel(['lineStyle']).getLineStyle(),\n    blurLineStyle: hostModel.getModel(['blur', 'lineStyle']).getLineStyle(),\n    selectLineStyle: hostModel.getModel(['select', 'lineStyle']).getLineStyle(),\n    emphasisDisabled: emphasisModel.get('disabled'),\n    blurScope: emphasisModel.get('blurScope'),\n    focus: emphasisModel.get('focus'),\n    labelStatesModels: getLabelStatesModels(hostModel)\n  };\n}\nfunction isPointNaN(pt) {\n  return isNaN(pt[0]) || isNaN(pt[1]);\n}\nfunction lineNeedsDraw(pts) {\n  return pts && !isPointNaN(pts[0]) && !isPointNaN(pts[1]);\n}\nexport default LineDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis } from '../../util/states.js';\nvar Polyline = /** @class */function (_super) {\n  __extends(Polyline, _super);\n  function Polyline(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n    _this._createPolyline(lineData, idx, seriesScope);\n    return _this;\n  }\n  Polyline.prototype._createPolyline = function (lineData, idx, seriesScope) {\n    // let seriesModel = lineData.hostModel;\n    var points = lineData.getItemLayout(idx);\n    var line = new graphic.Polyline({\n      shape: {\n        points: points\n      }\n    });\n    this.add(line);\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n  ;\n  Polyline.prototype.updateData = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childAt(0);\n    var target = {\n      shape: {\n        points: lineData.getItemLayout(idx)\n      }\n    };\n    graphic.updateProps(line, target, seriesModel, idx);\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n  ;\n  Polyline.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\n    var line = this.childAt(0);\n    var itemModel = lineData.getItemModel(idx);\n    var emphasisLineStyle = seriesScope && seriesScope.emphasisLineStyle;\n    var focus = seriesScope && seriesScope.focus;\n    var blurScope = seriesScope && seriesScope.blurScope;\n    var emphasisDisabled = seriesScope && seriesScope.emphasisDisabled;\n    if (!seriesScope || lineData.hasItemOption) {\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisLineStyle = emphasisModel.getModel('lineStyle').getLineStyle();\n      emphasisDisabled = emphasisModel.get('disabled');\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n    }\n    line.useStyle(lineData.getItemVisual(idx, 'style'));\n    line.style.fill = null;\n    line.style.strokeNoScale = true;\n    var lineEmphasisState = line.ensureState('emphasis');\n    lineEmphasisState.style = emphasisLineStyle;\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n  ;\n  Polyline.prototype.updateLayout = function (lineData, idx) {\n    var polyline = this.childAt(0);\n    polyline.setShape('points', lineData.getItemLayout(idx));\n  };\n  ;\n  return Polyline;\n}(graphic.Group);\nexport default Polyline;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis } from '../../util/states.js';\nimport { getDefaultLabel } from './labelHelper.js';\nimport { extend } from 'zrender/lib/core/util.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar Symbol = /** @class */function (_super) {\n  __extends(Symbol, _super);\n  function Symbol(data, idx, seriesScope, opts) {\n    var _this = _super.call(this) || this;\n    _this.updateData(data, idx, seriesScope, opts);\n    return _this;\n  }\n  Symbol.prototype._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n    // Remove paths created before\n    this.removeAll();\n    // let symbolPath = createSymbol(\n    //     symbolType, -0.5, -0.5, 1, 1, color\n    // );\n    // If width/height are set too small (e.g., set to 1) on ios10\n    // and macOS Sierra, a circle stroke become a rect, no matter what\n    // the scale is set. So we set width/height as 2. See #4150.\n    var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, null, keepAspect);\n    symbolPath.attr({\n      z2: 100,\n      culling: true,\n      scaleX: symbolSize[0] / 2,\n      scaleY: symbolSize[1] / 2\n    });\n    // Rewrite drift method\n    symbolPath.drift = driftSymbol;\n    this._symbolType = symbolType;\n    this.add(symbolPath);\n  };\n  /**\n   * Stop animation\n   * @param {boolean} toLastFrame\n   */\n  Symbol.prototype.stopSymbolAnimation = function (toLastFrame) {\n    this.childAt(0).stopAnimation(null, toLastFrame);\n  };\n  Symbol.prototype.getSymbolType = function () {\n    return this._symbolType;\n  };\n  /**\n   * FIXME:\n   * Caution: This method breaks the encapsulation of this module,\n   * but it indeed brings convenience. So do not use the method\n   * unless you detailedly know all the implements of `Symbol`,\n   * especially animation.\n   *\n   * Get symbol path element.\n   */\n  Symbol.prototype.getSymbolPath = function () {\n    return this.childAt(0);\n  };\n  /**\n   * Highlight symbol\n   */\n  Symbol.prototype.highlight = function () {\n    enterEmphasis(this.childAt(0));\n  };\n  /**\n   * Downplay symbol\n   */\n  Symbol.prototype.downplay = function () {\n    leaveEmphasis(this.childAt(0));\n  };\n  /**\n   * @param {number} zlevel\n   * @param {number} z\n   */\n  Symbol.prototype.setZ = function (zlevel, z) {\n    var symbolPath = this.childAt(0);\n    symbolPath.zlevel = zlevel;\n    symbolPath.z = z;\n  };\n  Symbol.prototype.setDraggable = function (draggable, hasCursorOption) {\n    var symbolPath = this.childAt(0);\n    symbolPath.draggable = draggable;\n    symbolPath.cursor = !hasCursorOption && draggable ? 'move' : symbolPath.cursor;\n  };\n  /**\n   * Update symbol properties\n   */\n  Symbol.prototype.updateData = function (data, idx, seriesScope, opts) {\n    this.silent = false;\n    var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n    var seriesModel = data.hostModel;\n    var symbolSize = Symbol.getSymbolSize(data, idx);\n    var isInit = symbolType !== this._symbolType;\n    var disableAnimation = opts && opts.disableAnimation;\n    if (isInit) {\n      var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n      this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n    } else {\n      var symbolPath = this.childAt(0);\n      symbolPath.silent = false;\n      var target = {\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2\n      };\n      disableAnimation ? symbolPath.attr(target) : graphic.updateProps(symbolPath, target, seriesModel, idx);\n      saveOldStyle(symbolPath);\n    }\n    this._updateCommon(data, idx, symbolSize, seriesScope, opts);\n    if (isInit) {\n      var symbolPath = this.childAt(0);\n      if (!disableAnimation) {\n        var target = {\n          scaleX: this._sizeX,\n          scaleY: this._sizeY,\n          style: {\n            // Always fadeIn. Because it has fadeOut animation when symbol is removed..\n            opacity: symbolPath.style.opacity\n          }\n        };\n        symbolPath.scaleX = symbolPath.scaleY = 0;\n        symbolPath.style.opacity = 0;\n        graphic.initProps(symbolPath, target, seriesModel, idx);\n      }\n    }\n    if (disableAnimation) {\n      // Must stop leave transition manually if don't call initProps or updateProps.\n      this.childAt(0).stopAnimation('leave');\n    }\n  };\n  Symbol.prototype._updateCommon = function (data, idx, symbolSize, seriesScope, opts) {\n    var symbolPath = this.childAt(0);\n    var seriesModel = data.hostModel;\n    var emphasisItemStyle;\n    var blurItemStyle;\n    var selectItemStyle;\n    var focus;\n    var blurScope;\n    var emphasisDisabled;\n    var labelStatesModels;\n    var hoverScale;\n    var cursorStyle;\n    if (seriesScope) {\n      emphasisItemStyle = seriesScope.emphasisItemStyle;\n      blurItemStyle = seriesScope.blurItemStyle;\n      selectItemStyle = seriesScope.selectItemStyle;\n      focus = seriesScope.focus;\n      blurScope = seriesScope.blurScope;\n      labelStatesModels = seriesScope.labelStatesModels;\n      hoverScale = seriesScope.hoverScale;\n      cursorStyle = seriesScope.cursorStyle;\n      emphasisDisabled = seriesScope.emphasisDisabled;\n    }\n    if (!seriesScope || data.hasItemOption) {\n      var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      selectItemStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n      blurItemStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      emphasisDisabled = emphasisModel.get('disabled');\n      labelStatesModels = getLabelStatesModels(itemModel);\n      hoverScale = emphasisModel.getShallow('scale');\n      cursorStyle = itemModel.getShallow('cursor');\n    }\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n    symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n    var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\n    if (symbolOffset) {\n      symbolPath.x = symbolOffset[0];\n      symbolPath.y = symbolOffset[1];\n    }\n    cursorStyle && symbolPath.attr('cursor', cursorStyle);\n    var symbolStyle = data.getItemVisual(idx, 'style');\n    var visualColor = symbolStyle.fill;\n    if (symbolPath instanceof ZRImage) {\n      var pathStyle = symbolPath.style;\n      symbolPath.useStyle(extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, symbolStyle));\n    } else {\n      if (symbolPath.__isEmptyBrush) {\n        // fill and stroke will be swapped if it's empty.\n        // So we cloned a new style to avoid it affecting the original style in visual storage.\n        // TODO Better implementation. No empty logic!\n        symbolPath.useStyle(extend({}, symbolStyle));\n      } else {\n        symbolPath.useStyle(symbolStyle);\n      }\n      // Disable decal because symbol scale will been applied on the decal.\n      symbolPath.style.decal = null;\n      symbolPath.setColor(visualColor, opts && opts.symbolInnerColor);\n      symbolPath.style.strokeNoScale = true;\n    }\n    var liftZ = data.getItemVisual(idx, 'liftZ');\n    var z2Origin = this._z2;\n    if (liftZ != null) {\n      if (z2Origin == null) {\n        this._z2 = symbolPath.z2;\n        symbolPath.z2 += liftZ;\n      }\n    } else if (z2Origin != null) {\n      symbolPath.z2 = z2Origin;\n      this._z2 = null;\n    }\n    var useNameLabel = opts && opts.useNameLabel;\n    setLabelStyle(symbolPath, labelStatesModels, {\n      labelFetcher: seriesModel,\n      labelDataIndex: idx,\n      defaultText: getLabelDefaultText,\n      inheritColor: visualColor,\n      defaultOpacity: symbolStyle.opacity\n    });\n    // Do not execute util needed.\n    function getLabelDefaultText(idx) {\n      return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n    }\n    this._sizeX = symbolSize[0] / 2;\n    this._sizeY = symbolSize[1] / 2;\n    var emphasisState = symbolPath.ensureState('emphasis');\n    emphasisState.style = emphasisItemStyle;\n    symbolPath.ensureState('select').style = selectItemStyle;\n    symbolPath.ensureState('blur').style = blurItemStyle;\n    // null / undefined / true means to use default strategy.\n    // 0 / false / negative number / NaN / Infinity means no scale.\n    var scaleRatio = hoverScale == null || hoverScale === true ? Math.max(1.1, 3 / this._sizeY)\n    // PENDING: restrict hoverScale > 1? It seems unreasonable to scale down\n    : isFinite(hoverScale) && hoverScale > 0 ? +hoverScale : 1;\n    // always set scale to allow resetting\n    emphasisState.scaleX = this._sizeX * scaleRatio;\n    emphasisState.scaleY = this._sizeY * scaleRatio;\n    this.setSymbolScale(1);\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n  Symbol.prototype.setSymbolScale = function (scale) {\n    this.scaleX = this.scaleY = scale;\n  };\n  Symbol.prototype.fadeOut = function (cb, seriesModel, opt) {\n    var symbolPath = this.childAt(0);\n    var dataIndex = getECData(this).dataIndex;\n    var animationOpt = opt && opt.animation;\n    // Avoid mistaken hover when fading out\n    this.silent = symbolPath.silent = true;\n    // Not show text when animating\n    if (opt && opt.fadeLabel) {\n      var textContent = symbolPath.getTextContent();\n      if (textContent) {\n        graphic.removeElement(textContent, {\n          style: {\n            opacity: 0\n          }\n        }, seriesModel, {\n          dataIndex: dataIndex,\n          removeOpt: animationOpt,\n          cb: function () {\n            symbolPath.removeTextContent();\n          }\n        });\n      }\n    } else {\n      symbolPath.removeTextContent();\n    }\n    graphic.removeElement(symbolPath, {\n      style: {\n        opacity: 0\n      },\n      scaleX: 0,\n      scaleY: 0\n    }, seriesModel, {\n      dataIndex: dataIndex,\n      cb: cb,\n      removeOpt: animationOpt\n    });\n  };\n  Symbol.getSymbolSize = function (data, idx) {\n    return normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n  };\n  return Symbol;\n}(graphic.Group);\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\nexport default Symbol;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic.js';\nimport SymbolClz from './Symbol.js';\nimport { isObject } from 'zrender/lib/core/util.js';\nimport { getLabelStatesModels } from '../../label/labelStyle.js';\nfunction symbolNeedsDraw(data, point, idx, opt) {\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx))\n  // We do not set clipShape on group, because it will cut part of\n  // the symbol element shape. We use the same clip shape here as\n  // the line clip.\n  && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\nfunction normalizeUpdateOpt(opt) {\n  if (opt != null && !isObject(opt)) {\n    opt = {\n      isIgnore: opt\n    };\n  }\n  return opt || {};\n}\nfunction makeSeriesScope(data) {\n  var seriesModel = data.hostModel;\n  var emphasisModel = seriesModel.getModel('emphasis');\n  return {\n    emphasisItemStyle: emphasisModel.getModel('itemStyle').getItemStyle(),\n    blurItemStyle: seriesModel.getModel(['blur', 'itemStyle']).getItemStyle(),\n    selectItemStyle: seriesModel.getModel(['select', 'itemStyle']).getItemStyle(),\n    focus: emphasisModel.get('focus'),\n    blurScope: emphasisModel.get('blurScope'),\n    emphasisDisabled: emphasisModel.get('disabled'),\n    hoverScale: emphasisModel.get('scale'),\n    labelStatesModels: getLabelStatesModels(seriesModel),\n    cursorStyle: seriesModel.get('cursor')\n  };\n}\nvar SymbolDraw = /** @class */function () {\n  function SymbolDraw(SymbolCtor) {\n    this.group = new graphic.Group();\n    this._SymbolCtor = SymbolCtor || SymbolClz;\n  }\n  /**\n   * Update symbols draw by new data\n   */\n  SymbolDraw.prototype.updateData = function (data, opt) {\n    // Remove progressive els.\n    this._progressiveEls = null;\n    opt = normalizeUpdateOpt(opt);\n    var group = this.group;\n    var seriesModel = data.hostModel;\n    var oldData = this._data;\n    var SymbolCtor = this._SymbolCtor;\n    var disableAnimation = opt.disableAnimation;\n    var seriesScope = makeSeriesScope(data);\n    var symbolUpdateOpt = {\n      disableAnimation: disableAnimation\n    };\n    var getSymbolPoint = opt.getSymbolPoint || function (idx) {\n      return data.getItemLayout(idx);\n    };\n    // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n    if (!oldData) {\n      group.removeAll();\n    }\n    data.diff(oldData).add(function (newIdx) {\n      var point = getSymbolPoint(newIdx);\n      if (symbolNeedsDraw(data, point, newIdx, opt)) {\n        var symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      var point = getSymbolPoint(newIdx);\n      if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n        group.remove(symbolEl);\n        return;\n      }\n      var newSymbolType = data.getItemVisual(newIdx, 'symbol') || 'circle';\n      var oldSymbolType = symbolEl && symbolEl.getSymbolType && symbolEl.getSymbolType();\n      if (!symbolEl\n      // Create a new if symbol type changed.\n      || oldSymbolType && oldSymbolType !== newSymbolType) {\n        group.remove(symbolEl);\n        symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n      } else {\n        symbolEl.updateData(data, newIdx, seriesScope, symbolUpdateOpt);\n        var target = {\n          x: point[0],\n          y: point[1]\n        };\n        disableAnimation ? symbolEl.attr(target) : graphic.updateProps(symbolEl, target, seriesModel);\n      }\n      // Add back\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && el.fadeOut(function () {\n        group.remove(el);\n      }, seriesModel);\n    }).execute();\n    this._getSymbolPoint = getSymbolPoint;\n    this._data = data;\n  };\n  ;\n  SymbolDraw.prototype.updateLayout = function () {\n    var _this = this;\n    var data = this._data;\n    if (data) {\n      // Not use animation\n      data.eachItemGraphicEl(function (el, idx) {\n        var point = _this._getSymbolPoint(idx);\n        el.setPosition(point);\n        el.markRedraw();\n      });\n    }\n  };\n  ;\n  SymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this._seriesScope = makeSeriesScope(data);\n    this._data = null;\n    this.group.removeAll();\n  };\n  ;\n  /**\n   * Update symbols draw by new data\n   */\n  SymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    // Clear\n    this._progressiveEls = [];\n    opt = normalizeUpdateOpt(opt);\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var point = data.getItemLayout(idx);\n      if (symbolNeedsDraw(data, point, idx, opt)) {\n        var el = new this._SymbolCtor(data, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        el.setPosition(point);\n        this.group.add(el);\n        data.setItemGraphicEl(idx, el);\n        this._progressiveEls.push(el);\n      }\n    }\n  };\n  ;\n  SymbolDraw.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  SymbolDraw.prototype.remove = function (enableAnimation) {\n    var group = this.group;\n    var data = this._data;\n    // Incremental model do not have this._data.\n    if (data && enableAnimation) {\n      data.eachItemGraphicEl(function (el) {\n        el.fadeOut(function () {\n          group.remove(el);\n        }, data.hostModel);\n      });\n    } else {\n      group.removeAll();\n    }\n  };\n  ;\n  return SymbolDraw;\n}();\nexport default SymbolDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic.js';\nimport { round } from '../../util/number.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\nfunction createGridClipPath(cartesian, hasAnimation, seriesModel, done, during) {\n  var rect = cartesian.getArea();\n  var x = rect.x;\n  var y = rect.y;\n  var width = rect.width;\n  var height = rect.height;\n  var lineWidth = seriesModel.get(['lineStyle', 'width']) || 2;\n  // Expand the clip path a bit to avoid the border is clipped and looks thinner\n  x -= lineWidth / 2;\n  y -= lineWidth / 2;\n  width += lineWidth;\n  height += lineWidth;\n  // fix: https://github.com/apache/incubator-echarts/issues/11369\n  width = Math.ceil(width);\n  if (x !== Math.floor(x)) {\n    x = Math.floor(x);\n    // if no extra 1px on `width`, it will still be clipped since `x` is floored\n    width++;\n  }\n  var clipPath = new graphic.Rect({\n    shape: {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    }\n  });\n  if (hasAnimation) {\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = baseAxis.isHorizontal();\n    var isAxisInversed = baseAxis.inverse;\n    if (isHorizontal) {\n      if (isAxisInversed) {\n        clipPath.shape.x += width;\n      }\n      clipPath.shape.width = 0;\n    } else {\n      if (!isAxisInversed) {\n        clipPath.shape.y += height;\n      }\n      clipPath.shape.height = 0;\n    }\n    var duringCb = isFunction(during) ? function (percent) {\n      during(percent, clipPath);\n    } : null;\n    graphic.initProps(clipPath, {\n      shape: {\n        width: width,\n        height: height,\n        x: x,\n        y: y\n      }\n    }, seriesModel, null, done, duringCb);\n  }\n  return clipPath;\n}\nfunction createPolarClipPath(polar, hasAnimation, seriesModel) {\n  var sectorArea = polar.getArea();\n  // Avoid float number rounding error for symbol on the edge of axis extent.\n  var r0 = round(sectorArea.r0, 1);\n  var r = round(sectorArea.r, 1);\n  var clipPath = new graphic.Sector({\n    shape: {\n      cx: round(polar.cx, 1),\n      cy: round(polar.cy, 1),\n      r0: r0,\n      r: r,\n      startAngle: sectorArea.startAngle,\n      endAngle: sectorArea.endAngle,\n      clockwise: sectorArea.clockwise\n    }\n  });\n  if (hasAnimation) {\n    var isRadial = polar.getBaseAxis().dim === 'angle';\n    if (isRadial) {\n      clipPath.shape.endAngle = sectorArea.startAngle;\n    } else {\n      clipPath.shape.r = r0;\n    }\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: sectorArea.endAngle,\n        r: r\n      }\n    }, seriesModel);\n  }\n  return clipPath;\n}\nfunction createClipPath(coordSys, hasAnimation, seriesModel, done, during) {\n  if (!coordSys) {\n    return null;\n  } else if (coordSys.type === 'polar') {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  } else if (coordSys.type === 'cartesian2d') {\n    return createGridClipPath(coordSys, hasAnimation, seriesModel, done, during);\n  }\n  return null;\n}\nexport { createGridClipPath, createPolarClipPath, createClipPath };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport Graph from '../../data/Graph.js';\nimport linkSeriesData from '../../data/helper/linkSeriesData.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport createSeriesData from './createSeriesData.js';\nimport { convertOptionIdName } from '../../util/model.js';\nexport default function createGraphFromNodeEdge(nodes, edges, seriesModel, directed, beforeLink) {\n  // ??? TODO\n  // support dataset?\n  var graph = new Graph(directed);\n  for (var i = 0; i < nodes.length; i++) {\n    graph.addNode(zrUtil.retrieve(\n    // Id, name, dataIndex\n    nodes[i].id, nodes[i].name, i), i);\n  }\n  var linkNameList = [];\n  var validEdges = [];\n  var linkCount = 0;\n  for (var i = 0; i < edges.length; i++) {\n    var link = edges[i];\n    var source = link.source;\n    var target = link.target;\n    // addEdge may fail when source or target not exists\n    if (graph.addEdge(source, target, linkCount)) {\n      validEdges.push(link);\n      linkNameList.push(zrUtil.retrieve(convertOptionIdName(link.id, null), source + ' > ' + target));\n      linkCount++;\n    }\n  }\n  var coordSys = seriesModel.get('coordinateSystem');\n  var nodeData;\n  if (coordSys === 'cartesian2d' || coordSys === 'polar') {\n    nodeData = createSeriesData(nodes, seriesModel);\n  } else {\n    var coordSysCtor = CoordinateSystem.get(coordSys);\n    var coordDimensions = coordSysCtor ? coordSysCtor.dimensions || [] : [];\n    // FIXME: Some geo do not need `value` dimenson, whereas `calendar` needs\n    // `value` dimension, but graph need `value` dimension. It's better to\n    // uniform this behavior.\n    if (zrUtil.indexOf(coordDimensions, 'value') < 0) {\n      coordDimensions.concat(['value']);\n    }\n    var dimensions = prepareSeriesDataSchema(nodes, {\n      coordDimensions: coordDimensions,\n      encodeDefine: seriesModel.getEncode()\n    }).dimensions;\n    nodeData = new SeriesData(dimensions, seriesModel);\n    nodeData.initData(nodes);\n  }\n  var edgeData = new SeriesData(['value'], seriesModel);\n  edgeData.initData(validEdges, linkNameList);\n  beforeLink && beforeLink(nodeData, edgeData);\n  linkSeriesData({\n    mainData: nodeData,\n    struct: graph,\n    structAttr: 'graph',\n    datas: {\n      node: nodeData,\n      edge: edgeData\n    },\n    datasAttr: {\n      node: 'data',\n      edge: 'edgeData'\n    }\n  });\n  // Update dataIndex of nodes and edges because invalid edge may be removed\n  graph.update();\n  return graph;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner } from '../../util/model.js';\n/**\n * @return {string} If large mode changed, return string 'reset';\n */\nexport default function createRenderPlanner() {\n  var inner = makeInner();\n  return function (seriesModel) {\n    var fields = inner(seriesModel);\n    var pipelineContext = seriesModel.pipelineContext;\n    var originalLarge = !!fields.large;\n    var originalProgressive = !!fields.progressiveRender;\n    // FIXME: if the planner works on a filtered series, `pipelineContext` does not\n    // exists. See #11611 . Probably we need to modify this structure, see the comment\n    // on `performRawSeries` in `Schedular.js`.\n    var large = fields.large = !!(pipelineContext && pipelineContext.large);\n    var progressive = fields.progressiveRender = !!(pipelineContext && pipelineContext.progressiveRender);\n    return !!(originalLarge !== large || originalProgressive !== progressive) && 'reset';\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport { getDataItemValue } from '../../util/model.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport { getCoordSysInfoBySeries } from '../../model/referHelper.js';\nimport { createSourceFromSeriesDataOption } from '../../data/Source.js';\nimport { enableDataStack } from '../../data/helper/dataStackHelper.js';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper.js';\nimport { SOURCE_FORMAT_ORIGINAL } from '../../util/types.js';\nfunction getCoordSysDimDefs(seriesModel, coordSysInfo) {\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var registeredCoordSys = CoordinateSystem.get(coordSysName);\n  var coordSysDimDefs;\n  if (coordSysInfo && coordSysInfo.coordSysDims) {\n    coordSysDimDefs = zrUtil.map(coordSysInfo.coordSysDims, function (dim) {\n      var dimInfo = {\n        name: dim\n      };\n      var axisModel = coordSysInfo.axisMap.get(dim);\n      if (axisModel) {\n        var axisType = axisModel.get('type');\n        dimInfo.type = getDimensionTypeByAxis(axisType);\n      }\n      return dimInfo;\n    });\n  }\n  if (!coordSysDimDefs) {\n    // Get dimensions from registered coordinate system\n    coordSysDimDefs = registeredCoordSys && (registeredCoordSys.getDimensionsInfo ? registeredCoordSys.getDimensionsInfo() : registeredCoordSys.dimensions.slice()) || ['x', 'y'];\n  }\n  return coordSysDimDefs;\n}\nfunction injectOrdinalMeta(dimInfoList, createInvertedIndices, coordSysInfo) {\n  var firstCategoryDimIndex;\n  var hasNameEncode;\n  coordSysInfo && zrUtil.each(dimInfoList, function (dimInfo, dimIndex) {\n    var coordDim = dimInfo.coordDim;\n    var categoryAxisModel = coordSysInfo.categoryAxisMap.get(coordDim);\n    if (categoryAxisModel) {\n      if (firstCategoryDimIndex == null) {\n        firstCategoryDimIndex = dimIndex;\n      }\n      dimInfo.ordinalMeta = categoryAxisModel.getOrdinalMeta();\n      if (createInvertedIndices) {\n        dimInfo.createInvertedIndices = true;\n      }\n    }\n    if (dimInfo.otherDims.itemName != null) {\n      hasNameEncode = true;\n    }\n  });\n  if (!hasNameEncode && firstCategoryDimIndex != null) {\n    dimInfoList[firstCategoryDimIndex].otherDims.itemName = 0;\n  }\n  return firstCategoryDimIndex;\n}\n/**\n * Caution: there are side effects to `sourceManager` in this method.\n * Should better only be called in `Series['getInitialData']`.\n */\nfunction createSeriesData(sourceRaw, seriesModel, opt) {\n  opt = opt || {};\n  var sourceManager = seriesModel.getSourceManager();\n  var source;\n  var isOriginalSource = false;\n  if (sourceRaw) {\n    isOriginalSource = true;\n    source = createSourceFromSeriesDataOption(sourceRaw);\n  } else {\n    source = sourceManager.getSource();\n    // Is series.data. not dataset.\n    isOriginalSource = source.sourceFormat === SOURCE_FORMAT_ORIGINAL;\n  }\n  var coordSysInfo = getCoordSysInfoBySeries(seriesModel);\n  var coordSysDimDefs = getCoordSysDimDefs(seriesModel, coordSysInfo);\n  var useEncodeDefaulter = opt.useEncodeDefaulter;\n  var encodeDefaulter = zrUtil.isFunction(useEncodeDefaulter) ? useEncodeDefaulter : useEncodeDefaulter ? zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordSysDimDefs, seriesModel) : null;\n  var createDimensionOptions = {\n    coordDimensions: coordSysDimDefs,\n    generateCoord: opt.generateCoord,\n    encodeDefine: seriesModel.getEncode(),\n    encodeDefaulter: encodeDefaulter,\n    canOmitUnusedDimensions: !isOriginalSource\n  };\n  var schema = prepareSeriesDataSchema(source, createDimensionOptions);\n  var firstCategoryDimIndex = injectOrdinalMeta(schema.dimensions, opt.createInvertedIndices, coordSysInfo);\n  var store = !isOriginalSource ? sourceManager.getSharedDataStore(schema) : null;\n  var stackCalculationInfo = enableDataStack(seriesModel, {\n    schema: schema,\n    store: store\n  });\n  var data = new SeriesData(schema, seriesModel);\n  data.setCalculationInfo(stackCalculationInfo);\n  var dimValueGetter = firstCategoryDimIndex != null && isNeedCompleteOrdinalData(source) ? function (itemOpt, dimName, dataIndex, dimIndex) {\n    // Use dataIndex as ordinal value in categoryAxis\n    return dimIndex === firstCategoryDimIndex ? dataIndex : this.defaultDimValueGetter(itemOpt, dimName, dataIndex, dimIndex);\n  } : null;\n  data.hasItemOption = false;\n  data.initData(\n  // Try to reuse the data store in sourceManager if using dataset.\n  isOriginalSource ? source : store, null, dimValueGetter);\n  return data;\n}\nfunction isNeedCompleteOrdinalData(source) {\n  if (source.sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var sampleItem = firstDataNotNull(source.data || []);\n    return !zrUtil.isArray(getDataItemValue(sampleItem));\n  }\n}\nfunction firstDataNotNull(arr) {\n  var i = 0;\n  while (i < arr.length && arr[i] == null) {\n    i++;\n  }\n  return arr[i];\n}\nexport default createSeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport { extend, isArray } from 'zrender/lib/core/util.js';\n/**\n * [Usage]:\n * (1)\n * createListSimply(seriesModel, ['value']);\n * (2)\n * createListSimply(seriesModel, {\n *     coordDimensions: ['value'],\n *     dimensionsCount: 5\n * });\n */\nexport default function createSeriesDataSimply(seriesModel, opt, nameList) {\n  opt = isArray(opt) && {\n    coordDimensions: opt\n  } || extend({\n    encodeDefine: seriesModel.getEncode()\n  }, opt);\n  var source = seriesModel.getSource();\n  var dimensions = prepareSeriesDataSchema(source, opt).dimensions;\n  var list = new SeriesData(dimensions, seriesModel);\n  list.initData(source, nameList);\n  return list;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getDecalFromPalette } from '../../model/mixin/palette.js';\nexport default function enableAriaDecalForTree(seriesModel) {\n  var data = seriesModel.getData();\n  var tree = data.tree;\n  var decalPaletteScope = {};\n  tree.eachNode(function (node) {\n    // Use decal of level 1 node\n    var current = node;\n    while (current && current.depth > 1) {\n      current = current.parentNode;\n    }\n    var decal = getDecalFromPalette(seriesModel.ecModel, current.name || current.dataIndex + '', decalPaletteScope);\n    node.setVisual('decal', decal);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { isArray } from 'zrender/lib/core/util.js';\n/**\n * @return label string. Not null/undefined\n */\nexport function getDefaultLabel(data, dataIndex) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  var len = labelDims.length;\n  // Simple optimization (in lots of cases, label dims length is 1)\n  if (len === 1) {\n    var rawVal = retrieveRawValue(data, dataIndex, labelDims[0]);\n    return rawVal != null ? rawVal + '' : null;\n  } else if (len) {\n    var vals = [];\n    for (var i = 0; i < labelDims.length; i++) {\n      vals.push(retrieveRawValue(data, dataIndex, labelDims[i]));\n    }\n    return vals.join(' ');\n  }\n}\nexport function getDefaultInterpolatedLabel(data, interpolatedValue) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  if (!isArray(interpolatedValue)) {\n    return interpolatedValue + '';\n  }\n  var vals = [];\n  for (var i = 0; i < labelDims.length; i++) {\n    var dimIndex = data.getDimensionIndex(labelDims[i]);\n    if (dimIndex >= 0) {\n      vals.push(interpolatedValue[dimIndex]);\n    }\n  }\n  return vals.join(' ');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isArray, map } from 'zrender/lib/core/util.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nexport function getSectorCornerRadius(model, shape, zeroIfNull) {\n  var cornerRadius = model.get('borderRadius');\n  if (cornerRadius == null) {\n    return zeroIfNull ? {\n      cornerRadius: 0\n    } : null;\n  }\n  if (!isArray(cornerRadius)) {\n    cornerRadius = [cornerRadius, cornerRadius, cornerRadius, cornerRadius];\n  }\n  var dr = Math.abs(shape.r || 0 - shape.r0 || 0);\n  return {\n    cornerRadius: map(cornerRadius, function (cr) {\n      return parsePercent(cr, dr);\n    })\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport function retrieveTargetInfo(payload, validPayloadTypes, seriesModel) {\n  if (payload && zrUtil.indexOf(validPayloadTypes, payload.type) >= 0) {\n    var root = seriesModel.getData().tree.root;\n    var targetNode = payload.targetNode;\n    if (zrUtil.isString(targetNode)) {\n      targetNode = root.getNodeById(targetNode);\n    }\n    if (targetNode && root.contains(targetNode)) {\n      return {\n        node: targetNode\n      };\n    }\n    var targetNodeId = payload.targetNodeId;\n    if (targetNodeId != null && (targetNode = root.getNodeById(targetNodeId))) {\n      return {\n        node: targetNode\n      };\n    }\n  }\n}\n// Not includes the given node at the last item.\nexport function getPathToRoot(node) {\n  var path = [];\n  while (node) {\n    node = node.parentNode;\n    node && path.push(node);\n  }\n  return path.reverse();\n}\nexport function aboveViewRoot(viewRoot, node) {\n  var viewPath = getPathToRoot(viewRoot);\n  return zrUtil.indexOf(viewPath, node) >= 0;\n}\n// From root to the input node (the input node will be included).\nexport function wrapTreePathInfo(node, seriesModel) {\n  var treePathInfo = [];\n  while (node) {\n    var nodeDataIndex = node.dataIndex;\n    treePathInfo.push({\n      name: node.name,\n      dataIndex: nodeDataIndex,\n      value: seriesModel.getRawValue(nodeDataIndex)\n    });\n    node = node.parentNode;\n  }\n  treePathInfo.reverse();\n  return treePathInfo;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createSeriesDataSimply from './createSeriesDataSimply.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper.js';\nvar WhiskerBoxCommonMixin = /** @class */function () {\n  function WhiskerBoxCommonMixin() {}\n  /**\n   * @override\n   */\n  WhiskerBoxCommonMixin.prototype.getInitialData = function (option, ecModel) {\n    // When both types of xAxis and yAxis are 'value', layout is\n    // needed to be specified by user. Otherwise, layout can be\n    // judged by which axis is category.\n    var ordinalMeta;\n    var xAxisModel = ecModel.getComponent('xAxis', this.get('xAxisIndex'));\n    var yAxisModel = ecModel.getComponent('yAxis', this.get('yAxisIndex'));\n    var xAxisType = xAxisModel.get('type');\n    var yAxisType = yAxisModel.get('type');\n    var addOrdinal;\n    // FIXME\n    // Consider time axis.\n    if (xAxisType === 'category') {\n      option.layout = 'horizontal';\n      ordinalMeta = xAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else if (yAxisType === 'category') {\n      option.layout = 'vertical';\n      ordinalMeta = yAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else {\n      option.layout = option.layout || 'horizontal';\n    }\n    var coordDims = ['x', 'y'];\n    var baseAxisDimIndex = option.layout === 'horizontal' ? 0 : 1;\n    var baseAxisDim = this._baseAxisDim = coordDims[baseAxisDimIndex];\n    var otherAxisDim = coordDims[1 - baseAxisDimIndex];\n    var axisModels = [xAxisModel, yAxisModel];\n    var baseAxisType = axisModels[baseAxisDimIndex].get('type');\n    var otherAxisType = axisModels[1 - baseAxisDimIndex].get('type');\n    var data = option.data;\n    // Clone a new data for next setOption({}) usage.\n    // Avoid modifying current data will affect further update.\n    if (data && addOrdinal) {\n      var newOptionData_1 = [];\n      zrUtil.each(data, function (item, index) {\n        var newItem;\n        if (zrUtil.isArray(item)) {\n          newItem = item.slice();\n          // Modify current using data.\n          item.unshift(index);\n        } else if (zrUtil.isArray(item.value)) {\n          newItem = zrUtil.extend({}, item);\n          newItem.value = newItem.value.slice();\n          // Modify current using data.\n          item.value.unshift(index);\n        } else {\n          newItem = item;\n        }\n        newOptionData_1.push(newItem);\n      });\n      option.data = newOptionData_1;\n    }\n    var defaultValueDimensions = this.defaultValueDimensions;\n    var coordDimensions = [{\n      name: baseAxisDim,\n      type: getDimensionTypeByAxis(baseAxisType),\n      ordinalMeta: ordinalMeta,\n      otherDims: {\n        tooltip: false,\n        itemName: 0\n      },\n      dimsDef: ['base']\n    }, {\n      name: otherAxisDim,\n      type: getDimensionTypeByAxis(otherAxisType),\n      dimsDef: defaultValueDimensions.slice()\n    }];\n    return createSeriesDataSimply(this, {\n      coordDimensions: coordDimensions,\n      dimensionsCount: defaultValueDimensions.length + 1,\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordDimensions, this)\n    });\n  };\n  /**\n   * If horizontal, base axis is x, otherwise y.\n   * @override\n   */\n  WhiskerBoxCommonMixin.prototype.getBaseAxis = function () {\n    var dim = this._baseAxisDim;\n    return this.ecModel.getComponent(dim + 'Axis', this.get(dim + 'AxisIndex')).axis;\n  };\n  return WhiskerBoxCommonMixin;\n}();\n;\nexport { WhiskerBoxCommonMixin };"],"names":["BaseBarSeriesModel","_super","_this","apply","this","arguments","type","__extends","prototype","getInitialData","option","ecModel","createSeriesData","useEncodeDefaulter","getMarkerPosition","value","dims","startingAtTick","coordSys","coordinateSystem","clampData","clampData_1","pt_1","dataToPoint","each","getAxes","axis","idx","tickCoords","getTicksCoords","alignTicksWithLabel","getTickModel","get","targetTickId","isEnd","length","toGlobalCoord","getExtent","leftCoord","coord","stepTickValue","i","tickCoord","tickValue","data","getData","offset","getLayout","size","offsetIndex","getBaseAxis","isHorizontal","NaN","defaultOption","z","legendHoverLink","barMinHeight","barMinAngle","large","largeThreshold","progressive","progressiveChunkMode","SeriesModel","registerClass","BarSeriesModel","createInvertedIndices","getProgressive","getProgressiveThreshold","progressiveThreshold","brushSelector","dataIndex","selectors","rect","getItemLayout","dependencies","inheritDefaultOption","clip","roundCap","showBackground","backgroundStyle","color","borderColor","borderWidth","borderType","borderRadius","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","opacity","select","itemStyle","realtimeSort","mathMax","Math","max","mathMin","min","getClipArea","coordSysClipArea","getArea","isCoordinateSystemType","baseAxis","onBand","expandWidth","x","width","y","height","BarView","call","_isFirstFrame","render","seriesModel","api","payload","_model","_removeOnRenderedListener","_updateDrawMode","coordinateSystemType","_progressiveEls","_isLargeDraw","_renderLarge","_renderNormal","incrementalPrepareRender","_clear","_updateLargeClip","incrementalRender","params","_incrementalRenderLarge","eachRendered","cb","traverseElements","group","isLargeDraw","pipelineContext","isHorizontalOrRadial","oldData","_data","dim","animationModel","isAnimationEnabled","realtimeSortCfg","shouldRealtimeSort","_enableRealtimeSort","needsClip","removeClipPath","drawBackground","backgroundModel","getModel","barBorderRadius","bgEls","oldBgEls","_backgroundEls","isInitSort","isChangeOrder","createBackground","bgLayout","bgEl","createBackgroundEl","useStyle","getItemStyle","setShape","diff","add","itemModel","getItemModel","layout","hasValue","isValidLayout","isClipped","el","elementCreator","model","forceLabelAnimation","updateStyle","attr","shape","updateRealtimeAnimation","initProps","setItemGraphicEl","ignore","update","newIndex","oldIndex","createBackgroundShape","updateProps","getItemGraphicEl","remove","saveOldStyle","textEl","getTextContent","labelInnerStore","labelInner","prevValue","removeElementWithFadeOut","execute","bgGroup","_backgroundGroup","Group","removeAll","createLarge","_removeBackground","clipPath","createClipPath","setClipPath","count","_dispatchInitSort","orderMapping_1","abs","_onRendered","_updateSortWithinSameData","getZr","on","_dataSort","orderMapping","info","mapDimension","ordinalNumber","dataIdx","mappedValue","push","sort","a","b","ordinalNumbers","map","item","_isOrderChangedWithinSameData","scale","ordinalDataDim","lastValue","Number","MAX_VALUE","tickNum","len","getOrdinalMeta","categories","rawIdx","rawIndexOf","getRawOrdinalNumber","MIN_VALUE","indexOfRawIndex","_isOrderDifferentInView","orderInfo","extent","tickMax","sortInfo","dispatchAction","componentType","axisId","index","sortResult","otherAxis","dispose","off","eachItemGraphicEl","getECData","ChartView","cartesian2d","coordSysBoundingRect","signWidth","signHeight","coordSysX2","coordSysY2","x2","y2","xClipped","yClipped","polar","signR","r0","r","tmp","clipped","axisModel","isUpdate","Rect","extend","z2","__dataIndex","name","rectShape","animateProperty","isRadial","ShapeClass","Sausage","Sector","sector","positionMap","createPolarPositionMapping","calculateTextPosition","createSectorCalculateTextPosition","isRoundCap","sectorShape","animateTarget","startAngle","realtimeSortOption","getOtherAxis","seriesAnimationModel","seriesTarget","axisTarget","axisAnimationModel","checkPropertiesNotValid","obj","props","isFinite","rectPropties","polarPropties","fixedLineWidth","getLineWidth","signX","signY","cx","cy","endAngle","clockwise","isZeroOnPolar","arcOrAngle","position","isPolar","style","getItemVisual","cornerRadius","getSectorCornerRadius","cursorStyle","getShallow","labelPositionOutside","labelStatesModels","getLabelStatesModels","setLabelStyle","labelFetcher","labelDataIndex","defaultText","getDefaultLabel","inheritColor","fill","defaultOpacity","defaultOutsidePosition","label","textConfig","inside","setSectorTextRotation","setLabelValueAnimation","getRawValue","getDefaultInterpolatedLabel","emphasisModel","toggleHoverEmphasis","setStatesStylesFromModel","stroke","states","state","rawLayout","lineWidth","isNaN","LagePathShape","LargePath","opts","getDefaultShape","buildPath","ctx","points","baseDimIdx","valueDimIdx","startPoint","barWidth","Path","progressiveEls","incremental","largeDataIndices","bgPoints","silent","ignoreCoarsePointer","getVisual","seriesIndex","largePathUpdateDataIndex","throttle","event","largePath","largePathFindDataIndex","offsetX","offsetY","ii","coordLayout","PI","ElementClz","install","registers","registerChartView","registerSeriesModel","BarSeries","registerLayout","PRIORITY","VISUAL","LAYOUT","zrUtil","PROGRESSIVE_LAYOUT","createProgressiveLayout","registerProcessor","PROCESSOR","STATISTIC","dataSample","registerAction","eachComponent","mainType","query","componentModel","setCategorySortInfo","BAR_BORDER_WIDTH_QUERY","LAYOUT_ATTRS","xy","wh","posDesc","pathForLineWidth","graphic","PictorialBarView","cartesian","coordSysRect","master","getRect","opt","ecSize","getWidth","getHeight","coordSysExtent","valueDim","categoryDim","symbolMeta","getSymbolMeta","bar","createBar","updateCommon","pictorialShapeStr","getShapeStr","__pictorialShapeStr","updateBar","__pictorialSymbolMeta","removeBar","symbolRepeat","symbolClip","symbolPosition","symbolRotate","rotation","symbolPatternSize","symbolType","symbolRepeatDirection","hoverScale","prepareBarLength","prepareSymbolSize","boundingLength","pxSign","prepareLineWidth","symbolScale","symbolSize","symbolOffset","normalizeSymbolOffset","prepareLayoutInfo","valueLineWidth","repeatCutLength","outputSymbolMeta","symbolBoundingData","valueAxis","zeroPx","dataToCoord","pxSignIdx","symbolBoundingExtent","convertToCoordOnAxis","reverse","parse","parsedSymbolSize","categorySize","slice","parsePercent","scaleX","scaleY","updateTransform","getLineScale","unitLength","pathLen","absBoundingLength","symbolMargin","hasEndGap","lastIndexOf","symbolMarginNumeric","uLenWithMargin","endFix","repeatSpecified","isNumeric","repeatTimes","toIntTimes","mDiff","sizeFix","pathPosition","bundlePosition","barRectShape","clipShape","createPath","path","createSymbol","culling","setStyle","strokeNoScale","createOrUpdateRepeatSymbols","bundle","__pictorialBundle","unit","eachPath","__pictorialAnimationIndex","__pictorialRepeatTimes","updateAttr","makeTarget","target","createOrUpdateSingleSymbol","mainPath","__pictorialMainPath","createOrUpdateBarRect","barRect","__pictorialBarRect","disableMorphing","createOrUpdateClip","__pictorialClipPath","getAnimationDelayParams","parentModel","labelRect","removeTextContent","paths","parent","join","context","children","immediateAttrs","animationAttrs","emphasisStyle","blurStyle","selectStyle","focus","blurScope","ZRImage","pathStyle","image","emphasisState","ensureState","cursor","barPositionOutside","ignoreClip","times","roundedTimes","round","ceil","PictorialBarSeriesModel","hasSymbolVisual","defaultSymbol","stack","symbol","barGap","emphasis","curry","BoxplotSeriesModel","defaultValueDimensions","defaultTooltip","visualDrawType","boxWidth","animationDuration","mixin","WhiskerBoxCommonMixin","BoxplotView","constDim","newIdx","itemLayout","symbolEl","createNormalBox","oldIdx","updateNormalBoxData","BoxPathShape","BoxPath","ends","moveTo","lineTo","closePath","isInit","transInit","hostModel","updateMethod","point","initBaseline","boxplotLayout","groupResult","groupSeriesByAxis","groupItem","seriesModels","calculateBase","layoutSingleSeries","boxOffsetList","boxWidthList","result","axisList","eachSeriesByType","bandWidth","seriesCount","boundList","getBandWidth","maxDataCount_1","boxWidthBound","availableWidth","boxGap","base","halfWidth","cDimIdx","vDimIdx","coordDims","cDim","vDims","mapDimensionsAll","axisDimVal","median","getPoint","end1","end2","end4","end5","addBodyEnd","layEndLine","setItemLayout","val","p","start","point1","point2","endCenter","from","to","prepareBoxplotData","rawData","boxData","outliers","boundIQR","useExtreme","ascList","asc","Q1","quantile","Q2","Q3","bound","low","high","itemNameFormatter","itemName","isFunction","isString","replace","j","dataItem","outlier","boxplotTransform","transform","upstream","sourceFormat","SOURCE_FORMAT_ARRAY_ROWS","errMsg","process","throwError","getRawData","config","dimensions","registerTransform","SKIP_PROPS","CandlestickView","_incrementalRenderNormal","isSimpleBox","clipArea","isNormalBoxClipped","setBoxCommon","next","NormalBoxPathShape","NormalBoxPath","__simpleBox","contain","LargeBoxPathShape","LargeBoxPath","__sign","largePoints","elP","elN","elDoji","setLargeStyle","sign","CandlestickSeriesModel","getShadowDim","brushRect","color0","borderColor0","borderColorDoji","barMaxWidth","barMinWidth","animationEasing","candlestickPreprocessor","series","seriesItem","positiveBorderColorQuery","negativeBorderColorQuery","dojiBorderColorQuery","positiveColorQuery","negativeColorQuery","candlestickVisual","seriesType","plan","createRenderPlanner","performRawSeries","reset","getColor","getBorderColor","isSeriesFiltered","isLargeRender","progress","existsStyle","ensureUniqueItemVisual","candlestickLayout","candleWidth","calculateCandleWidth","cDimI","getDimensionIndex","vDimsI","openDimI","closeDimI","lowestDimI","highestDimI","setLayout","largeProgress","normalProgress","store","getStore","openVal","closeVal","lowestVal","highestVal","ocLow","ocHigh","ocLowPoint","ocHighPoint","lowestPoint","highestPoint","subPixelOptimizePoint","hasDojiColor","getSign","makeBrushRect","subPixelOptimize","pmin","pmax","createFloat32Array","tmpIn","tmpOut","retrieve2","registerPreprocessor","preprocessor","registerVisual","STYLE_VISUAL_TYPE","NON_STYLE_VISUAL_PROPS","symbolKeepAspect","legendIcon","visualMeta","liftZ","decal","customInnerStore","makeInner","CustomSeriesModel","optionUpdated","currentZLevel","currentZ","getDataParams","dataType","EMPHASIS","NORMAL","BLUR","SELECT","STATES","PATH_ITEM_STYLE","normal","blur","PATH_LABEL","DEFAULT_TRANSITION","GROUP_DIFF_PREFIX","attachedTxInfoTmp","prepareCustoms","prepareCartesian2d","geo","prepareGeo","single","prepareSingleAxis","preparePolar","calendar","prepareCalendar","isPath","graphicUtil","isDisplayable","Displayable","copyElement","sourceEl","targetEl","copyTransform","zlevel","invisible","CustomChartView","customSeries","renderItem","makeRenderItem","createOrUpdateItem","applyLeaveTransition","oldEl","setIncrementalAndHoverLayer","isGroup","hoverLayer","end","traverse","filterForExposedEvent","eventType","packedEvent","elementName","element","__hostTarget","createEl","elOption","graphicType","pathRect","pathData","getPathData","customPathData","customImagePath","Error","Clz","customGraphicType","z2EmphasisLift","z2SelectLift","updateElNormal","attachedTxInfo","stopPreviousKeyframeAnimationAndRestore","txCfgOpt","cfg","setTextConfig","transition","styleOpt","textOptionStyle","hasOwn","textFill","textStroke","decalPattern","decalObj","dirty","createOrUpdatePatternFromDecal","__decalPattern","applyUpdateTransition","clearStyle","applyKeyframeAnimation","keyframeAnimation","updateElOnState","elStateOpt","elDisplayable","stateObj","existingEmphasisState","getState","setDefaultStateProxy","updateZ","optZ2","updateZForEachState","isNormal","retrieveStateOption","prepareResult","currDataIndexInside","currItemModel","userAPI","defaults","getDevicePixelRatio","ordinalRawValue","styleEmphasis","visual","barLayout","currentSeriesIndices","font","userParams","seriesId","id","seriesName","dataInsideLength","encode","wrapEncodeDef","currItemStyleModels","currLabelModels","seriesItemStyleModels","seriesLabelModels","stateName","dataIndexInside","getItemStyleModel","hasItemOption","getLabelModel","getRawIndex","actionType","dimInfo","getDimensionInfo","dimIndex","undefined","ordinalMeta","userProps","visualColor","labelModel","textStyle","labelStyleHelper","text","getFormattedLabel","preFetchFromExtra","convertToEC4StyleForCustomSerise","applyUserPropsAfter","legacy","retrieve3","extra","key","textPosition","visualType","style_1","getLayoutOnAxis","getCurrentSeriesIndices","encodeDef","dimName","isExtraCoord","coordDim","dataDims","coordDimIndex","existsEl","doCreateOrUpdateEl","emphasisDisabled","toBeReplacedIdx","doesElNeedRecreate","indexOf","childrenRef","clearStates","morph","conOpt","isLegacy","doCreateOrUpdateAttachedTx","doCreateOrUpdateClipPath","otherStateOpt","otherStyleOpt","retrieveStyleOptionOnState","mergeChildren","replaceAt","elInner","elOptionType","elOptionShape","elOptionStyle","isUniversalTransitionEnabled","hasOwnPathData","clipPathOpt","getClipPath","processTxInfo","txConOptNormal","txConOptEmphasis","txConOptBlur","txConOptSelect","textContent","setTextContent","txConStlOptNormal","txConOptOtherState","markRedraw","stateOpt","elType","txCfg","txConOpt","isEC4CompatibleStyle","convertResult","convertFromEC4CompatibleStyle","txConOptNormal_1","stateOptionNormal","stateOption","newChildren","newLen","$mergeChildren","byName","diffChildrenByName","notMerge","diffGroupChildren","oldChildren","newChild","oldChild","childAt","childCount","child","removeChildFromGroup","DataDiffer","getKey","processAddUpdate","processRemove","childOption","d","updateRipplePath","rippleGroup","effectCfg","rippleEffectColor","eachChild","ripplePath","brushType","EffectSymbol","SymbolClz","updateData","stopEffectAnimation","startEffectAnimation","rippleNumber","delay","period","effectOffset","animate","when","rippleScale","animateStyle","updateEffectAnimation","oldEffectCfg","_effectCfg","DIFFICULT_PROPS","propName","highlight","enterEmphasis","downplay","leaveEmphasis","getSymbolType","normalizeSymbolSize","symbolStyle","setScale","showEffectOn","onHoverStateChange","toState","fadeOut","EffectScatterView","init","_symbolDraw","SymbolDraw","effectSymbolDraw","_getClipShape","res","pointsLayout","updateLayout","_updateGroupTransform","getRoamTransform","matrix","decomposeTransform","EffectScatterSeriesModel","effectType","rippleEffect","number","universalTransition","divideShape","layoutPoints","opacityAccessPath","FunnelPiece","polygon","labelLine","setTextGuideLine","firstCreate","lineJoin","_updateLabel","getTextGuideLine","labelText","labelLayout","getName","align","textAlign","verticalAlign","local","insideStroke","outsideFill","linePoints","textGuideLineConfig","anchor","originX","originY","setLabelLineStyle","getLabelLineStatesModels","FunnelView","ignoreLabelLineUpdate","funnelPiece","piece","FunnelSeriesModel","legendVisualProvider","LegendVisualProvider","_defaultLabelLine","createSeriesDataSimply","coordDimensions","encodeDefaulter","makeSeriesEncodeForNameBased","defaultEmphasis","labelLineNormalOpt","labelLineEmphasisOpt","show","sum","getSum","percent","toFixed","$vars","colorBy","left","top","right","bottom","minSize","maxSize","orient","gap","funnelAlign","lineStyle","getViewRect","getBoxLayoutParams","getSortedIndices","valueArr","mapArray","indices","isAscending","textX","textY","labelPosition","labelLineModel","isLabelInside","x1","y1","labelLineLen","funnelLayout","viewRect","viewWidth","viewHeight","sizeExtent","dataExtent","getDataExtent","viewSize","itemSize","getLinePoints","val_1","itemHeight","linearMap","y0","x0","itemWidth","nextIdx","concat","dataFilter","PointerShape","angle","PointerPath","mathCos","cos","mathSin","sin","parsePosition","center","formatLabel","labelFormatter","GaugeView","colorList","posInfo","_renderMain","axisLineModel","MainPath","showAxis","lineStyleModel","axisLineWidth","angles","normalizeArcAngles","angleRangeSpan","prevEndAngle","sectors","getLineStyle","_renderTicks","_renderTitleAndDetail","_renderAnchor","_renderPointer","unitX","unitY","minVal","maxVal","splitLineModel","tickModel","splitNumber","subSplitNumber","splitLineLen","tickLen","step","subStep","splitLineStyle","tickLineStyle","splitLineDistance","distance","splitLine","autoColor","textStyleX","textStyleY","rotateType","rotate","isNumber","createTextStyle","tickLine","oldProgressData","_progressEls","progressList","showPointer","progressModel","showProgress","valueExtent","angleExtent","createPointer","pointer","pointerModel","pointerWidth","pointerLength","pointerStr","pointerOffset","pointerOffsetX","pointerOffsetY","pointerKeepAspect","createProgress","ProgressPath","isOverlap","progressWidth","isClip","setCommonECData","previousPointer","previousRotate","previousProgress","previousEndAngle","setColor","anchorModel","showAnchor","anchorSize","anchorType","offsetCenter","anchorKeepAspect","contentGroup","newTitleEls","newDetailEls","hasAnimation","showPointerAbove","_titleEls","_detailEls","itemGroup","itemTitleModel","titleOffsetCenter","titleX","titleY","labelEl","itemDetailModel","detailOffsetCenter","detailX","detailY","detailColor","formatter_1","animateLabelValue","status","labelDimIndex","fmt","extendParams","interpolatedValue","GaugeSeriesModel","visualStyleAccessPath","radius","axisLine","overlap","axisTick","axisLabel","fontSize","icon","showAbove","keepAspect","title","valueAnimation","detail","backgroundColor","padding","fontWeight","lineHeight","categoryFilter","legendModels","findComponents","graphSeries","categoriesData","getCategoriesData","graph","getGraph","categoryNames","filterSelf","category","isSelected","categoryVisual","paletteScope","categoryNameIdxMap","getColorFromPalette","setItemVisual","symbolVisualList","symbolVisual","categoryIdx","categoryStyle","visualList","normalize","Array","graphEdgeVisual","edgeData","getEdgeData","setVisual","edge","getEdgeByIndex","nodeStyle","node1","node2","KEY_DELIMITER","getAutoCurvenessParams","createCurveness","appendLength","autoCurvenessParmas","curvenessList","__curvenessList","getKeyOfEdges","n1","n2","source","uid","getOppositeKey","keys","split","getEdgeFromMap","__edgeMap","getTotalLengthBetweenNodes","getEdgeMapLengthWithKey","lenV","edgeMap","initCurvenessList","createEdgeMapForCurveness","oppositeEdges","isForward","getCurvenessForEdge","needReverse","autoCurvenessParams","isArrayParam","edgeArray","edgeIndex","totalLen","curKey","parityCorrection","oppositeKey","resValue","simpleLayout","eachNode","node","simpleLayoutEdge","eachEdge","curveness","p1","vec2","p2","graphSimpleLayout","data_1","dimensions_1","getNodeGlobalScale","nodeScaleRatio","groupZoom","roamZoom","getZoom","nodeScale","getSymbolSize","_symbolRadiansHalf","circularLayout","basedOn","draggingNode","getBoundingRect","nodeData","_a","pointToData","tempX","tempY","v","circularRotateLabel","rotateNodeLabel","_layoutNodesBasedOn","cp1","x12","y12","unitAngle","getValue","radianHalf","sumRadian","symbolRadianHalf","asin","halfRemainRadian","fixed","getGraphicEl","nodeModel","labelRotate","symbolPath","getSymbolPath","pos","rad","atan2","isLeft","origin","graphCircularLayout","scaleAndAdd","forceLayout","inNodes","inEdges","nodes","edges","gravity","n","random","pp","beforeStepCallback","afterStepCallback","initialFriction","friction","warmUp","setFixed","setUnfixed","beforeStep","afterStep","v12","nLen","e","ignoreForceLayout","w","repFact","rep","finished","graphForceLayout","preservedPoints_1","preservedPoints","graph_1","nodeData_1","forceModel","initLayout","getId","nodeDataExtent_1","edgeDataExtent_1","repulsion","edgeLength","repulsionArr_1","edgeLengthArr_1","nodes_1","edgeModel","forceInstance","l","getNodeByIndex","stopped","aspect","getLayoutRect","createViewCoordSys","viewList","coordSysType","positions","bbox","bbWidth","bbHeight","viewCoordSys","View","zoomLimit","setBoundingRect","setViewRect","setCenter","setZoom","v1","v2","v3","quadraticAt","curveTool","v2DistSquare","mathAbs","intersectCurveCircle","curvePoints","t","p0","Infinity","radiusSquare","interval","_t","nextDiff","adjustEdge","tmp0","quadraticSubdivide","pts","pts2","fromSymbol","toSymbol","__original","originalPoints","isViewCoordSys","GraphView","symbolDraw","lineDraw","LineDraw","_controller","RoamController","_controllerHost","_lineDraw","_firstRender","groupNewProp","_updateNodeAndLinkScale","_updateController","clearTimeout","_layoutTimeout","layoutAnimation","_startForceLayoutIteration","draggable","_layouting","setDraggable","getAdjacentDataIndices","self","setTimeout","controller","controllerHost","setPointerChecker","applyTransform","onIrrelevantElement","enable","zoom","roamHelper","dx","dy","updateLabelLayout","disable","setSymbolScale","GraphSeriesModel","_categoriesData","fillDataTextStyle","links","_updateCategoriesData","mergeOption","mergeDefaultAndTheme","createGraphFromNodeEdge","beforeLink","wrapMethod","categoriesModels","_categoriesModels","categoryModel","oldGetModel","Model","newGetModel","resolveParentPath","pathArr","newPathArr","formatTooltip","multipleSeries","sourceName","targetName","nameArr","createTooltipMarkup","noValue","nodeMarkup","defaultSeriesFormatTooltip","SeriesData","initData","circular","rotateLabel","force","edgeSymbol","edgeSymbolSize","edgeLabel","roam","formatter","actionInfo","edgeVisual","POST_CHART_LAYOUT","registerCoordinateSystem","create","createView","noop","updateCenterAndZoom","GRADIENT_LEVELS","HeatmapLayer","blurSize","pointSize","maxOpacity","minOpacity","_gradientPixels","inRange","outOfRange","canvas","platformApi","createCanvas","colorFunc","isInRange","brush","_getBrush","gradientInRange","_getGradient","gradientOutOfRange","getContext","alpha","globalAlpha","drawImage","imageData","getImageData","pixels","pixelLen","diffOpacity","gradientOffset","floor","gradient","putImageData","brushCanvas","_brushCanvas","clearRect","beginPath","arc","gradientPixels","pixelsSingleState","Uint8ClampedArray","getIsInPiecewiseRange","pieceList","selected","dataSpan","lastIndex","getIsInContinuousRange","range","isGeoCoordSys","HeatmapView","visualMapOfThisSeries","visualMap","eachTargetSeries","targetSeries","_renderOnCartesianAndCalendar","_renderOnGeo","xAxisExtent","yAxisExtent","isCartesian2d","xAxis","getAxis","yAxis","dataDimX","dataDimY","dataToRect","contentShape","emphasisModel_1","rawValue","visualMapModel","inRangeVisuals","targetVisuals","outOfRangeVisuals","hmLayer","_hmLayer","clone","roamTransform","lng","lat","pt","getPieceList","getNormalizer","getColorMapper","img","HeatmapSeriesModel","generateCoord","preventIncremental","coordSysCreator","CoordinateSystem","geoIndex","EffectLine","lineData","seriesScope","createLine","_updateEffectSymbol","Line","effectModel","_symbolType","_symbolScale","_updateEffectAnimation","loop","roundTrip","constantSpeed","delayExpr","_updateAnimationPoints","_getLineLength","_period","_loop","_roundTrip","stopAnimation","delayNum","__t","_animateSymbol","self_1","animator","during","_updateSymbolPosition","done","__p1","__cp1","__p2","lastPos","curveUtil","quadraticDerivativeAt","tx","ty","__lastT","EffectPolyline","_lastFrame","_lastFramePercent","Polyline","_points","accLenArr","_offsets","_length","offsets","frame","lastFrame","LargeLinesPathShape","polyline","segs","LargeLinesPath","_off","hoverDataIdx","notClear","getDefaultStyle","k","quadraticCurveTo","findDataIndex","lineContain","quadraticContain","localPos","transformCoordToLocal","_rect","minX","minY","maxX","maxY","LargeLineDraw","lineEl","_create","_setCommon","incrementalPrepareUpdate","incrementalUpdate","taskParams","lastAdded","_newAdded","oldSegs","oldLen","newSegs","Float32Array","set","__startIndex","isIncremental","ecData","BOOST_SIZE_THRESHOLD","LargeSymbolPathShape","LargeSymbolPath","symbolProxy","symbolProxyShape","canBoost","softClipShape","_ctx","afterBrush","fillRect","h","LargeSymbolDraw","startIndex","endIndex","byteOffset","buffer","oldPoints","newPoints","extrudeShadow","globalStyle","straightLineProto","bezierCurveProto","StraightLineShape","CurveShape","isStraightLine","cpx1","cpy1","ECLinePath","pointAt","tangentAt","SYMBOL_CATEGORIES","makeSymbolTypeKey","symbolCategory","makeSymbolTypeValue","symbolSizeArr","symbolUtil","symbolOffsetArr","__specifiedRotation","line","setLinePoints","targetShape","_createLine","_updateCommonStl","childOfName","getLinePath","emphasisLineStyle","blurLineStyle","selectLineStyle","SPECIAL_STATES","lineState","lineStateStyle","stateStyle","__isEmptyBrush","rawVal","labelNormalModel","__align","__verticalAlign","__position","isArray","__labelDistance","linePath","beforeUpdate","lineGroup","symbolFrom","symbolTo","invScale","parentNode","__dirty","fromPos","toPos","vector","setPosition","setSymbolRotation","textVerticalAlign","distanceX","distanceY","halfPercent","tangent","cp","dir","specifiedRotation","LineCtor","_LineCtor","LineGroup","oldLineData","_lineData","makeSeriesScope","_doAdd","_doUpdate","_seriesScope","updateIncrementalAndHover","isEffectObject","lineNeedsDraw","newLineData","itemEl","animators","isPointNaN","_createPolyline","lineEmphasisState","Symbol","_createSymbol","drift","driftSymbol","stopSymbolAnimation","toLastFrame","setZ","hasCursorOption","disableAnimation","_updateCommon","_sizeX","_sizeY","emphasisItemStyle","blurItemStyle","selectItemStyle","symbolInnerColor","z2Origin","_z2","useNameLabel","getLabelDefaultText","scaleRatio","animationOpt","animation","fadeLabel","removeOpt","symbolNeedsDraw","isIgnore","normalizeUpdateOpt","isObject","SymbolCtor","_SymbolCtor","symbolUpdateOpt","getSymbolPoint","newSymbolType","oldSymbolType","_getSymbolPoint","enableAnimation","createGridClipPath","isAxisInversed","inverse","duringCb","createPolarClipPath","sectorArea","directed","Graph","addNode","linkNameList","validEdges","linkCount","link","addEdge","convertOptionIdName","coordSysCtor","prepareSeriesDataSchema","encodeDefine","getEncode","linkSeriesData","mainData","struct","structAttr","datas","datasAttr","inner","fields","originalLarge","originalProgressive","progressiveRender","getCoordSysDimDefs","coordSysInfo","coordSysDimDefs","coordSysName","registeredCoordSys","coordSysDims","axisMap","axisType","getDimensionTypeByAxis","getDimensionsInfo","injectOrdinalMeta","dimInfoList","firstCategoryDimIndex","hasNameEncode","categoryAxisModel","categoryAxisMap","otherDims","sourceRaw","sourceManager","getSourceManager","isOriginalSource","createSourceFromSeriesDataOption","getSource","SOURCE_FORMAT_ORIGINAL","getCoordSysInfoBySeries","makeSeriesEncodeForAxisCoordSys","createDimensionOptions","canOmitUnusedDimensions","schema","getSharedDataStore","stackCalculationInfo","enableDataStack","setCalculationInfo","dimValueGetter","isNeedCompleteOrdinalData","itemOpt","defaultDimValueGetter","sampleItem","firstDataNotNull","getDataItemValue","arr","nameList","list","enableAriaDecalForTree","tree","decalPaletteScope","current","depth","getDecalFromPalette","labelDims","retrieveRawValue","vals","zeroIfNull","dr","cr","retrieveTargetInfo","validPayloadTypes","root","targetNode","getNodeById","contains","targetNodeId","getPathToRoot","aboveViewRoot","viewRoot","viewPath","wrapTreePathInfo","treePathInfo","nodeDataIndex","addOrdinal","xAxisModel","getComponent","yAxisModel","xAxisType","yAxisType","baseAxisDimIndex","baseAxisDim","_baseAxisDim","otherAxisDim","axisModels","baseAxisType","otherAxisType","newOptionData_1","newItem","unshift","tooltip","dimsDef","dimensionsCount"],"sourceRoot":""}