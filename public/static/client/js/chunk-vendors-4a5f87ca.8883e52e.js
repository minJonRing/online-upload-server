"use strict";(self["webpackChunkd1"]=self["webpackChunkd1"]||[]).push([[178],{85253:function(t,r,e){var i=e(55393),n=e(21639),a=i.A.extend({material:null,geometry:null,mode:n.A.TRIANGLES,_renderInfo:null},{__program:null,lightGroup:0,renderOrder:0,culling:!0,cullFace:n.A.BACK,frontFace:n.A.CCW,frustumCulling:!0,receiveShadow:!0,castShadow:!0,ignorePicking:!1,ignorePreZ:!1,ignoreGBuffer:!1,isRenderable:function(){return this.geometry&&this.material&&this.material.shader&&!this.invisible&&this.geometry.vertexCount>0},beforeRender:function(t){},afterRender:function(t,r){},getBoundingBox:function(t,r){return r=i.A.prototype.getBoundingBox.call(this,t,r),this.geometry&&this.geometry.boundingBox&&r.union(this.geometry.boundingBox),r},clone:function(){var t=["castShadow","receiveShadow","mode","culling","cullFace","frontFace","frustumCulling","renderOrder","lineWidth","ignorePicking","ignorePreZ","ignoreGBuffer"];return function(){var r=i.A.prototype.clone.call(this);r.geometry=this.geometry,r.material=this.material;for(var e=0;e<t.length;e++){var n=t[e];r[n]!==this[n]&&(r[n]=this[n])}return r}}()});a.POINTS=n.A.POINTS,a.LINES=n.A.LINES,a.LINE_LOOP=n.A.LINE_LOOP,a.LINE_STRIP=n.A.LINE_STRIP,a.TRIANGLES=n.A.TRIANGLES,a.TRIANGLE_STRIP=n.A.TRIANGLE_STRIP,a.TRIANGLE_FAN=n.A.TRIANGLE_FAN,a.BACK=n.A.BACK,a.FRONT=n.A.FRONT,a.FRONT_AND_BACK=n.A.FRONT_AND_BACK,a.CW=n.A.CW,a.CCW=n.A.CCW,r.A=a},68640:function(t,r,e){e.d(r,{A:function(){return q}});e(44114),e(16573),e(78100),e(77936),e(37467),e(44732),e(79577);var i=e(49350),n=["OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","OES_vertex_array_object","OES_element_index_uint","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","EXT_texture_filter_anisotropic","EXT_shader_texture_lod","WEBGL_draw_buffers","EXT_frag_depth","EXT_sRGB","ANGLE_instanced_arrays"],a=["MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE"];function s(t){for(var r={},e={},i=0;i<n.length;i++){var s=n[i];u(s)}for(i=0;i<a.length;i++){var o=a[i];e[o]=t.getParameter(t[o])}function u(e){if(t.getExtension){var i=t.getExtension(e);i||(i=t.getExtension("MOZ_"+e)),i||(i=t.getExtension("WEBKIT_"+e)),r[e]=i}}this.getExtension=function(t){return t in r||u(t),r[t]},this.getParameter=function(t){return e[t]}}var o=s,u=e(21639),h=e(2739),c=e(5148),f=e(34863),l=1,y=2,d=3,_={};function A(t){for(var r=t.split("\n"),e=0,i=r.length;e<i;e++)r[e]=e+1+": "+r[e];return r.join("\n")}function p(t,r,e){if(!t.getShaderParameter(r,t.COMPILE_STATUS))return[t.getShaderInfoLog(r),A(e)].join("\n")}var m=new h.A.Float32Array(16),E=i.A.extend({uniformSemantics:{},attributes:{}},(function(){this._locations={},this._textureSlot=0,this._program=null}),{bind:function(t){this._textureSlot=0,t.gl.useProgram(this._program)},hasUniform:function(t){var r=this._locations[t];return null!==r&&void 0!==r},useTextureSlot:function(t,r,e){r&&(t.gl.activeTexture(t.gl.TEXTURE0+e),r.isRenderable()?r.bind(t):r.unbind(t))},currentTextureSlot:function(){return this._textureSlot},resetTextureSlot:function(t){this._textureSlot=t||0},takeCurrentTextureSlot:function(t,r){var e=this._textureSlot;return this.useTextureSlot(t,r,e),this._textureSlot++,e},setUniform:function(t,r,e,i){var n=this._locations,a=n[e];if(null===a||void 0===a)return!1;switch(r){case"m4":if(!(i instanceof Float32Array)){for(var s=0;s<i.length;s++)m[s]=i[s];i=m}t.uniformMatrix4fv(a,!1,i);break;case"2i":t.uniform2i(a,i[0],i[1]);break;case"2f":t.uniform2f(a,i[0],i[1]);break;case"3i":t.uniform3i(a,i[0],i[1],i[2]);break;case"3f":t.uniform3f(a,i[0],i[1],i[2]);break;case"4i":t.uniform4i(a,i[0],i[1],i[2],i[3]);break;case"4f":t.uniform4f(a,i[0],i[1],i[2],i[3]);break;case"1i":t.uniform1i(a,i);break;case"1f":t.uniform1f(a,i);break;case"1fv":t.uniform1fv(a,i);break;case"1iv":t.uniform1iv(a,i);break;case"2iv":t.uniform2iv(a,i);break;case"2fv":t.uniform2fv(a,i);break;case"3iv":t.uniform3iv(a,i);break;case"3fv":t.uniform3fv(a,i);break;case"4iv":t.uniform4iv(a,i);break;case"4fv":t.uniform4fv(a,i);break;case"m2":case"m2v":t.uniformMatrix2fv(a,!1,i);break;case"m3":case"m3v":t.uniformMatrix3fv(a,!1,i);break;case"m4v":if(Array.isArray(i)&&Array.isArray(i[0])){var o=new h.A.Float32Array(16*i.length),u=0;for(s=0;s<i.length;s++)for(var c=i[s],f=0;f<16;f++)o[u++]=c[f];t.uniformMatrix4fv(a,!1,o)}else t.uniformMatrix4fv(a,!1,i);break}return!0},setUniformOfSemantic:function(t,r,e){var i=this.uniformSemantics[r];return!!i&&this.setUniform(t,i.type,i.symbol,e)},enableAttributes:function(t,r,e){var i,n=t.gl,a=this._program,s=this._locations;i=e?e.__enabledAttributeList:_[t.__uid__],i||(i=e?e.__enabledAttributeList=[]:_[t.__uid__]=[]);for(var o=[],u=0;u<r.length;u++){var h=r[u];if(this.attributes[h]){var c=s[h];if(null==c){if(c=n.getAttribLocation(a,h),-1===c){o[u]=-1;continue}s[h]=c}o[u]=c,i[c]?i[c]=y:i[c]=l}else o[u]=-1}for(u=0;u<i.length;u++)switch(i[u]){case l:n.enableVertexAttribArray(u),i[u]=d;break;case y:i[u]=d;break;case d:n.disableVertexAttribArray(u),i[u]=0;break}return o},getAttribLocation:function(t,r){var e=this._locations,i=e[r];return null==i&&(i=t.getAttribLocation(this._program,r),e[r]=i),i},buildProgram:function(t,r,e,i){var n=t.createShader(t.VERTEX_SHADER),a=t.createProgram();t.shaderSource(n,e),t.compileShader(n);var s=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(s,i),t.compileShader(s);var o=p(t,n,e);if(o)return o;if(o=p(t,s,i),o)return o;if(t.attachShader(a,n),t.attachShader(a,s),r.attributeSemantics["POSITION"])t.bindAttribLocation(a,0,r.attributeSemantics["POSITION"].symbol);else{var u=Object.keys(this.attributes);t.bindAttribLocation(a,0,u[0])}if(t.linkProgram(a),t.deleteShader(n),t.deleteShader(s),this._program=a,this.vertexCode=e,this.fragmentCode=i,!t.getProgramParameter(a,t.LINK_STATUS))return"Could not link program\n"+t.getProgramInfoLog(a);for(var h=0;h<r.uniforms.length;h++){var c=r.uniforms[h];this._locations[c]=t.getUniformLocation(a,c)}}}),g=E,v=/for\s*?\(int\s*?_idx_\s*\=\s*([\w-]+)\;\s*_idx_\s*<\s*([\w-]+);\s*_idx_\s*\+\+\s*\)\s*\{\{([\s\S]+?)(?=\}\})\}\}/g;function T(t,r,e){function i(t,e,i,a){var s="";isNaN(e)&&(e=e in r?r[e]:n[e]),isNaN(i)&&(i=i in r?r[i]:n[i]);for(var o=parseInt(e);o<parseInt(i);o++)s+="{"+a.replace(/float\s*\(\s*_idx_\s*\)/g,o.toFixed(1)).replace(/_idx_/g,o)+"}";return s}var n={};for(var a in e)n[a+"_COUNT"]=e[a];return t.replace(v,i)}function R(t,r,e){var i=[];if(r)for(var n in r){var a=r[n];a>0&&i.push("#define "+n.toUpperCase()+"_COUNT "+a)}if(e)for(var s=0;s<e.length;s++){var o=e[s];i.push("#define "+o.toUpperCase()+"_ENABLED")}for(var o in t){var u=t[o];null===u?i.push("#define "+o):i.push("#define "+o+" "+u.toString())}return i.join("\n")}function S(t){for(var r=[],e=0;e<t.length;e++)r.push("#extension GL_"+t[e]+" : enable");return r.join("\n")}function M(t){return["precision",t,"float"].join(" ")+";\n"+["precision",t,"int"].join(" ")+";\n"+["precision",t,"sampler2D"].join(" ")+";\n"}function I(t){this._renderer=t,this._cache={}}I.prototype.getProgram=function(t,r,e){var i=this._cache,n=t.isSkinnedMesh&&t.isSkinnedMesh(),a=t.isInstancedMesh&&t.isInstancedMesh(),s="s"+r.shader.shaderID+"m"+r.getProgramKey();e&&(s+="se"+e.getProgramKey(t.lightGroup)),n&&(s+=",sk"+t.joints.length),a&&(s+=",is");var o=i[s];if(o)return o;var u=e?e.getLightsNumbers(t.lightGroup):{},h=this._renderer,c=h.gl,f=r.getEnabledTextures(),l="";if(n){var y={SKINNING:null,JOINT_COUNT:t.joints.length};t.joints.length>h.getMaxJointNumber()&&(y.USE_SKIN_MATRICES_TEXTURE=null),l+="\n"+R(y)+"\n"}a&&(l+="\n#define INSTANCING\n");var d=l+R(r.vertexDefines,u,f),_=l+R(r.fragmentDefines,u,f),A=d+"\n"+r.shader.vertex,p=["OES_standard_derivatives","EXT_shader_texture_lod"].filter((function(t){return null!=h.getGLExtension(t)}));p.indexOf("EXT_shader_texture_lod")>=0&&(_+="\n#define SUPPORT_TEXTURE_LOD"),p.indexOf("OES_standard_derivatives")>=0&&(_+="\n#define SUPPORT_STANDARD_DERIVATIVES");var m=S(p)+"\n"+M(r.precision)+"\n"+_+"\n"+r.shader.fragment,E=T(A,r.vertexDefines,u),v=T(m,r.fragmentDefines,u);o=new g;o.uniformSemantics=r.shader.uniformSemantics,o.attributes=r.shader.attributes;var I=o.buildProgram(c,r.shader,E,v);return o.__error=I,i[s]=o,o};var N=I,x=e(50296),O=e(448),L=e(87064),P=e(33301);x.A["import"](O.A);var b=L.A.create,w={};function C(t){return t.material}function U(t,r,e){return r.uniforms[e].value}function D(t,r,e,i){return e!==i}function F(t){return!0}function B(){}var X={float:u.A.FLOAT,byte:u.A.BYTE,ubyte:u.A.UNSIGNED_BYTE,short:u.A.SHORT,ushort:u.A.UNSIGNED_SHORT};function V(t,r,e){this.availableAttributes=t,this.availableAttributeSymbols=r,this.indicesBuffer=e,this.vao=null}function k(t){var r,e;this.bind=function(t){r||(r=h.A.createCanvas(),r.width=r.height=1,r.getContext("2d"));var i=t.gl,n=!e;n&&(e=i.createTexture()),i.bindTexture(i.TEXTURE_2D,e),n&&i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,r)},this.unbind=function(t){t.gl.bindTexture(t.gl.TEXTURE_2D,null)},this.isRenderable=function(){return!0}}var G=i.A.extend((function(){return{canvas:null,_width:100,_height:100,devicePixelRatio:"undefined"!==typeof window&&window.devicePixelRatio||1,clearColor:[0,0,0,0],clearBit:17664,alpha:!0,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,throwError:!0,gl:null,viewport:{},maxJointNumber:20,__currentFrameBuffer:null,_viewportStack:[],_clearStack:[],_sceneRendering:null}}),(function(){this.canvas||(this.canvas=h.A.createCanvas());var t=this.canvas;try{var r={alpha:this.alpha,depth:this.depth,stencil:this.stencil,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer};if(this.gl=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),!this.gl)throw new Error;this._glinfo=new o(this.gl),this.gl.targetRenderer&&console.error("Already created a renderer"),this.gl.targetRenderer=this,this.resize()}catch(e){throw"Error creating WebGL Context "+e}this._programMgr=new N(this),this._placeholderTexture=new k(this)}),{resize:function(t,r){var e=this.canvas,i=this.devicePixelRatio;null!=t?(e.style&&(e.style.width=t+"px",e.style.height=r+"px"),e.width=t*i,e.height=r*i,this._width=t,this._height=r):(this._width=e.width/i,this._height=e.height/i),this.setViewport(0,0,this._width,this._height)},getWidth:function(){return this._width},getHeight:function(){return this._height},getViewportAspect:function(){var t=this.viewport;return t.width/t.height},setDevicePixelRatio:function(t){this.devicePixelRatio=t,this.resize(this._width,this._height)},getDevicePixelRatio:function(){return this.devicePixelRatio},getGLExtension:function(t){return this._glinfo.getExtension(t)},getGLParameter:function(t){return this._glinfo.getParameter(t)},setViewport:function(t,r,e,i,n){if("object"===typeof t){var a=t;t=a.x,r=a.y,e=a.width,i=a.height,n=a.devicePixelRatio}n=n||this.devicePixelRatio,this.gl.viewport(t*n,r*n,e*n,i*n),this.viewport={x:t,y:r,width:e,height:i,devicePixelRatio:n}},saveViewport:function(){this._viewportStack.push(this.viewport)},restoreViewport:function(){this._viewportStack.length>0&&this.setViewport(this._viewportStack.pop())},saveClear:function(){this._clearStack.push({clearBit:this.clearBit,clearColor:this.clearColor})},restoreClear:function(){if(this._clearStack.length>0){var t=this._clearStack.pop();this.clearColor=t.clearColor,this.clearBit=t.clearBit}},bindSceneRendering:function(t){this._sceneRendering=t},render:function(t,r,e,i){var n=this.gl,a=this.clearColor;if(this.clearBit){n.colorMask(!0,!0,!0,!0),n.depthMask(!0);var s=this.viewport,o=!1,u=s.devicePixelRatio;(s.width!==this._width||s.height!==this._height||u&&u!==this.devicePixelRatio||s.x||s.y)&&(o=!0,n.enable(n.SCISSOR_TEST),n.scissor(s.x*u,s.y*u,s.width*u,s.height*u)),n.clearColor(a[0],a[1],a[2],a[3]),n.clear(this.clearBit),o&&n.disable(n.SCISSOR_TEST)}if(e||t.update(!1),t.updateLights(),r=r||t.getMainCamera(),r){r.update();var h=t.updateRenderList(r,!0);this._sceneRendering=t;var c=h.opaque,f=h.transparent,l=t.material;t.trigger("beforerender",this,t,r,h),i?(this.renderPreZ(c,t,r),n.depthFunc(n.LEQUAL)):n.depthFunc(n.LESS);for(var y=b(),d=P.A.create(),_=0;_<f.length;_++){var A=f[_];L.A.multiplyAffine(y,r.viewMatrix.array,A.worldTransform.array),P.A.transformMat4(d,A.position.array,y),A.__depth=d[2]}this.renderPass(c,r,{getMaterial:function(t){return l||t.material},sortCompare:this.opaqueSortCompare}),this.renderPass(f,r,{getMaterial:function(t){return l||t.material},sortCompare:this.transparentSortCompare}),t.trigger("afterrender",this,t,r,h),this._sceneRendering=null}else console.error("Can't find camera in the scene.")},getProgram:function(t,r,e){return r=r||t.material,this._programMgr.getProgram(t,r,e)},validateProgram:function(t){if(t.__error){var r=t.__error;if(w[t.__uid__])return;if(w[t.__uid__]=!0,this.throwError)throw new Error(r);this.trigger("error",r)}},updatePrograms:function(t,r,e){var i=e&&e.getMaterial||C;r=r||null;for(var n=0;n<t.length;n++){var a=t[n],s=i.call(this,a);if(n>0){var o=t[n-1],u=o.joints?o.joints.length:0,h=a.joints?a.joints.length:0;if(h===u&&a.material===o.material&&a.lightGroup===o.lightGroup){a.__program=o.__program;continue}}var c=this._programMgr.getProgram(a,s,r);this.validateProgram(c),a.__program=c}},renderPass:function(t,r,e){this.trigger("beforerenderpass",this,t,r,e),e=e||{},e.getMaterial=e.getMaterial||C,e.getUniform=e.getUniform||U,e.isMaterialChanged=e.isMaterialChanged||D,e.beforeRender=e.beforeRender||B,e.afterRender=e.afterRender||B;var i=e.ifRender||F;this.updatePrograms(t,this._sceneRendering,e),e.sortCompare&&t.sort(e.sortCompare);var n=this.viewport,a=n.devicePixelRatio,s=[n.x*a,n.y*a,n.width*a,n.height*a],o=this.devicePixelRatio,u=this.__currentFrameBuffer?[this.__currentFrameBuffer.getTextureWidth(),this.__currentFrameBuffer.getTextureHeight()]:[this._width*o,this._height*o],h=[s[2],s[3]],c=Date.now();r?(L.A.copy(W.VIEW,r.viewMatrix.array),L.A.copy(W.PROJECTION,r.projectionMatrix.array),L.A.copy(W.VIEWINVERSE,r.worldTransform.array)):(L.A.identity(W.VIEW),L.A.identity(W.PROJECTION),L.A.identity(W.VIEWINVERSE)),L.A.multiply(W.VIEWPROJECTION,W.PROJECTION,W.VIEW),L.A.invert(W.PROJECTIONINVERSE,W.PROJECTION),L.A.invert(W.VIEWPROJECTIONINVERSE,W.VIEWPROJECTION);for(var f,l,y,d,_,A,p,m,E,g,v,T,R=this.gl,S=this._sceneRendering,M=null,I=0;I<t.length;I++){var N,x=t[I],O=null!=x.worldTransform;if(i(x)){O&&(N=x.isSkinnedMesh&&x.isSkinnedMesh()?x.offsetMatrix?x.offsetMatrix.array:W.IDENTITY:x.worldTransform.array);var P=x.geometry,b=e.getMaterial.call(this,x),w=x.__program,X=b.shader,V=P.__uid__+"-"+w.__uid__,k=V!==g;g=V,k&&M&&M.bindVertexArrayOES(null),O&&(L.A.copy(W.WORLD,N),L.A.multiply(W.WORLDVIEWPROJECTION,W.VIEWPROJECTION,N),L.A.multiplyAffine(W.WORLDVIEW,W.VIEW,N),(X.matrixSemantics.WORLDINVERSE||X.matrixSemantics.WORLDINVERSETRANSPOSE)&&L.A.invert(W.WORLDINVERSE,N),(X.matrixSemantics.WORLDVIEWINVERSE||X.matrixSemantics.WORLDVIEWINVERSETRANSPOSE)&&L.A.invert(W.WORLDVIEWINVERSE,W.WORLDVIEW),(X.matrixSemantics.WORLDVIEWPROJECTIONINVERSE||X.matrixSemantics.WORLDVIEWPROJECTIONINVERSETRANSPOSE)&&L.A.invert(W.WORLDVIEWPROJECTIONINVERSE,W.WORLDVIEWPROJECTION)),x.beforeRender&&x.beforeRender(this),e.beforeRender.call(this,x,b,f);var G=w!==l;G?(w.bind(this),w.setUniformOfSemantic(R,"VIEWPORT",s),w.setUniformOfSemantic(R,"WINDOW_SIZE",u),r&&(w.setUniformOfSemantic(R,"NEAR",r.near),w.setUniformOfSemantic(R,"FAR",r.far)),w.setUniformOfSemantic(R,"DEVICEPIXELRATIO",a),w.setUniformOfSemantic(R,"TIME",c),w.setUniformOfSemantic(R,"VIEWPORT_SIZE",h),S&&S.setLightUniforms(w,x.lightGroup,this)):w=l,(G||e.isMaterialChanged(x,y,b,f))&&(b.depthTest!==d&&(b.depthTest?R.enable(R.DEPTH_TEST):R.disable(R.DEPTH_TEST),d=b.depthTest),b.depthMask!==_&&(R.depthMask(b.depthMask),_=b.depthMask),b.transparent!==E&&(b.transparent?R.enable(R.BLEND):R.disable(R.BLEND),E=b.transparent),b.transparent&&(b.blend?b.blend(R):(R.blendEquationSeparate(R.FUNC_ADD,R.FUNC_ADD),R.blendFuncSeparate(R.SRC_ALPHA,R.ONE_MINUS_SRC_ALPHA,R.ONE,R.ONE_MINUS_SRC_ALPHA))),T=this._bindMaterial(x,b,w,y||null,f||null,l||null,e.getUniform),f=b);var q=X.matrixSemanticKeys;if(O)for(var H=0;H<q.length;H++){var j=q[H],Y=X.matrixSemantics[j],z=W[j];if(Y.isTranspose){var Z=W[Y.semanticNoTranspose];L.A.transpose(z,Z)}w.setUniform(R,Y.type,Y.symbol,z)}x.cullFace!==p&&(p=x.cullFace,R.cullFace(p)),x.frontFace!==m&&(m=x.frontFace,R.frontFace(m)),x.culling!==A&&(A=x.culling,A?R.enable(R.CULL_FACE):R.disable(R.CULL_FACE)),this._updateSkeleton(x,w,T),k&&(v=this._bindVAO(M,X,P,w)),this._renderObject(x,v,w),e.afterRender(this,x),x.afterRender&&x.afterRender(this),l=w,y=x}}M&&M.bindVertexArrayOES(null),this.trigger("afterrenderpass",this,t,r,e)},getMaxJointNumber:function(){return this.maxJointNumber},_updateSkeleton:function(t,r,e){var i=this.gl,n=t.skeleton;if(n)if(n.update(),t.joints.length>this.getMaxJointNumber()){var a=n.getSubSkinMatricesTexture(t.__uid__,t.joints);r.useTextureSlot(this,a,e),r.setUniform(i,"1i","skinMatricesTexture",e),r.setUniform(i,"1f","skinMatricesTextureSize",a.width)}else{var s=n.getSubSkinMatrices(t.__uid__,t.joints);r.setUniformOfSemantic(i,"SKIN_MATRIX",s)}},_renderObject:function(t,r,e){var i=this.gl,n=t.geometry,a=t.mode;null==a&&(a=4);var s=null,o=t.isInstancedMesh&&t.isInstancedMesh();if(!o||(s=this.getGLExtension("ANGLE_instanced_arrays"),s)){var u;if(o&&(u=this._bindInstancedAttributes(t,e,s)),r.indicesBuffer){var h=this.getGLExtension("OES_element_index_uint"),c=h&&n.indices instanceof Uint32Array,f=c?i.UNSIGNED_INT:i.UNSIGNED_SHORT;o?s.drawElementsInstancedANGLE(a,r.indicesBuffer.count,f,0,t.getInstanceCount()):i.drawElements(a,r.indicesBuffer.count,f,0)}else o?s.drawArraysInstancedANGLE(a,0,n.vertexCount,t.getInstanceCount()):i.drawArrays(a,0,n.vertexCount);if(o)for(var l=0;l<u.length;l++)i.disableVertexAttribArray(u[l])}else console.warn("Device not support ANGLE_instanced_arrays extension")},_bindInstancedAttributes:function(t,r,e){for(var i=this.gl,n=t.getInstancedAttributesBuffers(this),a=[],s=0;s<n.length;s++){var o=n[s],u=r.getAttribLocation(i,o.symbol);if(!(u<0)){var h=X[o.type]||i.FLOAT;i.enableVertexAttribArray(u),i.bindBuffer(i.ARRAY_BUFFER,o.buffer),i.vertexAttribPointer(u,o.size,h,!1,0,0),e.vertexAttribDivisorANGLE(u,o.divisor),a.push(u)}}return a},_bindMaterial:function(t,r,e,i,n,a,s){for(var o=this.gl,u=a===e,h=e.currentTextureSlot(),c=r.getEnabledUniforms(),f=r.getTextureUniforms(),l=this._placeholderTexture,y=0;y<f.length;y++){var d=f[y],_=s(t,r,d),A=r.uniforms[d].type;if("t"===A&&_)_.__slot=-1;else if("tv"===A)for(var p=0;p<_.length;p++)_[p]&&(_[p].__slot=-1)}l.__slot=-1;for(y=0;y<c.length;y++){d=c[y];var m=r.uniforms[d],E=(_=s(t,r,d),A=m.type,"t"===A);if(E&&(_&&_.isRenderable()||(_=l)),n&&u){var g=s(i,n,d);if(E&&(g&&g.isRenderable()||(g=l)),g===_){if(E)e.takeCurrentTextureSlot(this,null);else if("tv"===A&&_)for(p=0;p<_.length;p++)e.takeCurrentTextureSlot(this,null);continue}}if(null!=_)if(E)if(_.__slot<0){var v=e.currentTextureSlot(),T=e.setUniform(o,"1i",d,v);T&&(e.takeCurrentTextureSlot(this,_),_.__slot=v)}else e.setUniform(o,"1i",d,_.__slot);else if(Array.isArray(_)){if(0===_.length)continue;if("tv"===A){if(!e.hasUniform(d))continue;var R=[];for(p=0;p<_.length;p++){var S=_[p];if(S.__slot<0){v=e.currentTextureSlot();R.push(v),e.takeCurrentTextureSlot(this,S),S.__slot=v}else R.push(S.__slot)}e.setUniform(o,"1iv",d,R)}else e.setUniform(o,m.type,d,_)}else e.setUniform(o,m.type,d,_)}var M=e.currentTextureSlot();return e.resetTextureSlot(h),M},_bindVAO:function(t,r,e,i){var n=!e.dynamic,a=this.gl,s=this.__uid__+"-"+i.__uid__,o=e.__vaoCache[s];if(!o){var u=e.getBufferChunks(this);if(!u||!u.length)return;for(var h=u[0],c=h.attributeBuffers,f=h.indicesBuffer,l=[],y=[],d=0;d<c.length;d++){var _,A=c[d],p=A.name,m=A.semantic;if(m){var E=r.attributeSemantics[m];_=E&&E.symbol}else _=p;_&&i.attributes[_]&&(l.push(A),y.push(_))}o=new V(l,y,f),n&&(e.__vaoCache[s]=o)}var g=!0;t&&n&&(null==o.vao?o.vao=t.createVertexArrayOES():g=!1,t.bindVertexArrayOES(o.vao));l=o.availableAttributes,f=o.indicesBuffer;if(g){var v=i.enableAttributes(this,o.availableAttributeSymbols,t&&n&&o);for(d=0;d<l.length;d++){var T=v[d];if(-1!==T){A=l[d];var R=A.buffer,S=A.size,M=X[A.type]||a.FLOAT;a.bindBuffer(a.ARRAY_BUFFER,R),a.vertexAttribPointer(T,S,M,!1,0,0)}}e.isUseIndices()&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,f.buffer)}return o},renderPreZ:function(t,r,e){var i=this.gl,n=this._prezMaterial||new c.A({shader:new x.A(x.A.source("clay.prez.vertex"),x.A.source("clay.prez.fragment"))});this._prezMaterial=n,i.colorMask(!1,!1,!1,!1),i.depthMask(!0),this.renderPass(t,e,{ifRender:function(t){return!t.ignorePreZ},isMaterialChanged:function(t,r){var e=t.material,i=r.material;return e.get("diffuseMap")!==i.get("diffuseMap")||(e.get("alphaCutoff")||0)!==(i.get("alphaCutoff")||0)},getUniform:function(t,r,e){if("alphaMap"===e)return t.material.get("diffuseMap");if("alphaCutoff"===e){if(t.material.isDefined("fragment","ALPHA_TEST")&&t.material.get("diffuseMap")){var i=t.material.get("alphaCutoff");return i||0}return 0}return"uvRepeat"===e?t.material.get("uvRepeat"):"uvOffset"===e?t.material.get("uvOffset"):r.get(e)},getMaterial:function(){return n},sort:this.opaqueSortCompare}),i.colorMask(!0,!0,!0,!0),i.depthMask(!0)},disposeScene:function(t){this.disposeNode(t,!0,!0),t.dispose()},disposeNode:function(t,r,e){t.getParent()&&t.getParent().remove(t);var i={};t.traverse((function(t){var n=t.material;if(t.geometry&&r&&t.geometry.dispose(this),e&&n&&!i[n.__uid__]){for(var a=n.getTextureUniforms(),s=0;s<a.length;s++){var o=a[s],u=n.uniforms[o].value,h=n.uniforms[o].type;if(u)if("t"===h)u.dispose&&u.dispose(this);else if("tv"===h)for(var c=0;c<u.length;c++)u[c]&&u[c].dispose&&u[c].dispose(this)}i[n.__uid__]=!0}t.dispose&&t.dispose(this)}),this)},disposeGeometry:function(t){t.dispose(this)},disposeTexture:function(t){t.dispose(this)},disposeFrameBuffer:function(t){t.dispose(this)},dispose:function(){},screenToNDC:function(t,r,e){e||(e=new f.A),r=this._height-r;var i=this.viewport,n=e.array;return n[0]=(t-i.x)/i.width,n[0]=2*n[0]-1,n[1]=(r-i.y)/i.height,n[1]=2*n[1]-1,e}});G.opaqueSortCompare=G.prototype.opaqueSortCompare=function(t,r){return t.renderOrder===r.renderOrder?t.__program===r.__program?t.material===r.material?t.geometry.__uid__-r.geometry.__uid__:t.material.__uid__-r.material.__uid__:t.__program&&r.__program?t.__program.__uid__-r.__program.__uid__:0:t.renderOrder-r.renderOrder},G.transparentSortCompare=G.prototype.transparentSortCompare=function(t,r){return t.renderOrder===r.renderOrder?t.__depth===r.__depth?t.__program===r.__program?t.material===r.material?t.geometry.__uid__-r.geometry.__uid__:t.material.__uid__-r.material.__uid__:t.__program&&r.__program?t.__program.__uid__-r.__program.__uid__:0:t.__depth-r.__depth:t.renderOrder-r.renderOrder};var W={IDENTITY:b(),WORLD:b(),VIEW:b(),PROJECTION:b(),WORLDVIEW:b(),VIEWPROJECTION:b(),WORLDVIEWPROJECTION:b(),WORLDINVERSE:b(),VIEWINVERSE:b(),PROJECTIONINVERSE:b(),WORLDVIEWINVERSE:b(),VIEWPROJECTIONINVERSE:b(),WORLDVIEWPROJECTIONINVERSE:b(),WORLDTRANSPOSE:b(),VIEWTRANSPOSE:b(),PROJECTIONTRANSPOSE:b(),WORLDVIEWTRANSPOSE:b(),VIEWPROJECTIONTRANSPOSE:b(),WORLDVIEWPROJECTIONTRANSPOSE:b(),WORLDINVERSETRANSPOSE:b(),VIEWINVERSETRANSPOSE:b(),PROJECTIONINVERSETRANSPOSE:b(),WORLDVIEWINVERSETRANSPOSE:b(),VIEWPROJECTIONINVERSETRANSPOSE:b(),WORLDVIEWPROJECTIONINVERSETRANSPOSE:b()};G.COLOR_BUFFER_BIT=u.A.COLOR_BUFFER_BIT,G.DEPTH_BUFFER_BIT=u.A.DEPTH_BUFFER_BIT,G.STENCIL_BUFFER_BIT=u.A.STENCIL_BUFFER_BIT;var q=G},41277:function(t,r,e){e(44114);var i=e(55393),n=e(94809),a=e(31506),s=e(47797),o=e(51869),u=e(87064),h=e(84602),c=e(21647),f=u.A.create(),l=u.A.create(),y={};function d(t){var r=[],e=Object.keys(t);e.sort();for(var i=0;i<e.length;i++){var n=e[i];r.push(n+" "+t[n])}var a=r.join("\n");if(y[a])return y[a];var s=o.A.genGUID();return y[a]=s,s}function _(){this.opaque=[],this.transparent=[],this._opaqueCount=0,this._transparentCount=0}_.prototype.startCount=function(){this._opaqueCount=0,this._transparentCount=0},_.prototype.add=function(t,r){r?this.transparent[this._transparentCount++]=t:this.opaque[this._opaqueCount++]=t},_.prototype.endCount=function(){this.transparent.length=this._transparentCount,this.opaque.length=this._opaqueCount};var A=i.A.extend((function(){return{material:null,lights:[],viewBoundingBoxLastFrame:new s.A,shadowUniforms:{},_cameraList:[],_lightUniforms:{},_previousLightNumber:{},_lightNumber:{},_lightProgramKeys:{},_nodeRepository:{},_renderLists:new h.A(20)}}),(function(){this._scene=this}),{addToScene:function(t){t instanceof a.A?(this._cameraList.length>0&&console.warn("Found multiple camera in one scene. Use the fist one."),this._cameraList.push(t)):t instanceof n.A&&this.lights.push(t),t.name&&(this._nodeRepository[t.name]=t)},removeFromScene:function(t){var r;t instanceof a.A?(r=this._cameraList.indexOf(t),r>=0&&this._cameraList.splice(r,1)):t instanceof n.A&&(r=this.lights.indexOf(t),r>=0&&this.lights.splice(r,1)),t.name&&delete this._nodeRepository[t.name]},getNode:function(t){return this._nodeRepository[t]},setMainCamera:function(t){var r=this._cameraList.indexOf(t);r>=0&&this._cameraList.splice(r,1),this._cameraList.unshift(t)},getMainCamera:function(){return this._cameraList[0]},getLights:function(){return this.lights},updateLights:function(){var t=this.lights;this._previousLightNumber=this._lightNumber;for(var r={},e=0;e<t.length;e++){var i=t[e];if(!i.invisible){var n=i.group;r[n]||(r[n]={}),r[n][i.type]=r[n][i.type]||0,r[n][i.type]++}}for(var a in this._lightNumber=r,r)this._lightProgramKeys[a]=d(r[a]);this._updateLightUniforms()},cloneNode:function(t){var r=t.clone(),e={};function i(t,r){e[t.__uid__]=r;for(var n=0;n<t._children.length;n++){var a=t._children[n],s=r._children[n];i(a,s)}}return i(t,r),r.traverse((function(t){t.skeleton&&(t.skeleton=t.skeleton.clone(e)),t.material&&(t.material=t.material.clone())})),r},updateRenderList:function(t,r){var e=t.__uid__,i=this._renderLists.get(e);i||(i=new _,this._renderLists.put(e,i)),i.startCount(),r&&(this.viewBoundingBoxLastFrame.min.set(1/0,1/0,1/0),this.viewBoundingBoxLastFrame.max.set(-1/0,-1/0,-1/0));var n=this.material&&this.material.transparent||!1;return this._doUpdateRenderList(this,t,n,i,r),i.endCount(),i},getRenderList:function(t){return this._renderLists.get(t.__uid__)},_doUpdateRenderList:function(t,r,e,i,n){if(!t.invisible)for(var a=0;a<t._children.length;a++){var s=t._children[a];if(s.isRenderable()){var o=s.isSkinnedMesh()?f:s.worldTransform.array,h=s.geometry;u.A.multiplyAffine(l,r.viewMatrix.array,o),(n&&!h.boundingBox||!this.isFrustumCulled(s,r,l))&&i.add(s,s.material.transparent||e)}s._children.length>0&&this._doUpdateRenderList(s,r,e,i,n)}},isFrustumCulled:function(){var t=new s.A,r=new c.A;return function(e,i,n){var a=e.boundingBox;if(a||(a=e.skeleton&&e.skeleton.boundingBox?e.skeleton.boundingBox:e.geometry.boundingBox),!a)return!1;if(r.array=n,t.transformFrom(a,r),e.castShadow&&this.viewBoundingBoxLastFrame.union(t),e.frustumCulling){if(!t.intersectBoundingBox(i.frustum.boundingBox))return!0;r.array=i.projectionMatrix.array,t.max.array[2]>0&&t.min.array[2]<0&&(t.max.array[2]=-1e-20),t.applyProjection(r);var s=t.min.array,o=t.max.array;if(o[0]<-1||s[0]>1||o[1]<-1||s[1]>1||o[2]<-1||s[2]>1)return!0}return!1}}(),_updateLightUniforms:function(){var t=this.lights;t.sort(p);var r=this._lightUniforms;for(var e in r)for(var i in r[e])r[e][i].value.length=0;for(var n=0;n<t.length;n++){var a=t[n];if(!a.invisible){e=a.group;for(var i in a.uniformTemplates){var s=a.uniformTemplates[i],o=s.value(a);if(null!=o){r[e]||(r[e]={}),r[e][i]||(r[e][i]={type:"",value:[]});var u=r[e][i];switch(u.type=s.type+"v",s.type){case"1i":case"1f":case"t":u.value.push(o);break;case"2f":case"3f":case"4f":for(var h=0;h<o.length;h++)u.value.push(o[h]);break;default:console.error("Unkown light uniform type "+s.type)}}}}}},getLightGroups:function(){var t=[];for(var r in this._lightNumber)t.push(r);return t},getNumberChangedLightGroups:function(){var t=[];for(var r in this._lightNumber)this.isLightNumberChanged(r)&&t.push(r);return t},isLightNumberChanged:function(t){var r=this._previousLightNumber,e=this._lightNumber;for(var i in e[t]){if(!r[t])return!0;if(e[t][i]!==r[t][i])return!0}for(var i in r[t]){if(!e[t])return!0;if(e[t][i]!==r[t][i])return!0}return!1},getLightsNumbers:function(t){return this._lightNumber[t]},getProgramKey:function(t){return this._lightProgramKeys[t]},setLightUniforms:function(){function t(t,r,e){for(var i in t){var n=t[i];if("tv"===n.type){if(!r.hasUniform(i))continue;for(var a=[],s=0;s<n.value.length;s++){var o=n.value[s],u=r.takeCurrentTextureSlot(e,o);a.push(u)}r.setUniform(e.gl,"1iv",i,a)}else r.setUniform(e.gl,n.type,i,n.value)}}return function(r,e,i){t(this._lightUniforms[e],r,i),t(this.shadowUniforms,r,i)}}(),dispose:function(){this.material=null,this._opaqueList=[],this._transparentList=[],this.lights=[],this._lightUniforms={},this._lightNumber={},this._nodeRepository={}}});function p(t,r){if(r.castShadow&&!t.castShadow)return!0}r.A=A},50296:function(t,r,e){e(44114);var i=e(51869),n=e(2739),a=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g,s=/attribute\s+(float|int|vec2|vec3|vec4)\s+([\s\S]*?);/g,o=/#define\s+(\w+)?(\s+[\d-.]+)?\s*;?\s*\n/g,u={bool:"1i",int:"1i",sampler2D:"t",samplerCube:"t",float:"1f",vec2:"2f",vec3:"3f",vec4:"4f",ivec2:"2i",ivec3:"3i",ivec4:"4i",mat2:"m2",mat3:"m3",mat4:"m4"};function h(t){for(var r=[],e=0;e<t;e++)r[e]=0;return r}var c={bool:function(){return!0},int:function(){return 0},float:function(){return 0},sampler2D:function(){return null},samplerCube:function(){return null},vec2:function(){return h(2)},vec3:function(){return h(3)},vec4:function(){return h(4)},ivec2:function(){return h(2)},ivec3:function(){return h(3)},ivec4:function(){return h(4)},mat2:function(){return h(4)},mat3:function(){return h(9)},mat4:function(){return h(16)},array:function(){return[]}},f=["POSITION","NORMAL","BINORMAL","TANGENT","TEXCOORD","TEXCOORD_0","TEXCOORD_1","COLOR","JOINT","WEIGHT"],l=["SKIN_MATRIX","VIEWPORT_SIZE","VIEWPORT","DEVICEPIXELRATIO","WINDOW_SIZE","NEAR","FAR","TIME"],y=["WORLD","VIEW","PROJECTION","WORLDVIEW","VIEWPROJECTION","WORLDVIEWPROJECTION","WORLDINVERSE","VIEWINVERSE","PROJECTIONINVERSE","WORLDVIEWINVERSE","VIEWPROJECTIONINVERSE","WORLDVIEWPROJECTIONINVERSE","WORLDTRANSPOSE","VIEWTRANSPOSE","PROJECTIONTRANSPOSE","WORLDVIEWTRANSPOSE","VIEWPROJECTIONTRANSPOSE","WORLDVIEWPROJECTIONTRANSPOSE","WORLDINVERSETRANSPOSE","VIEWINVERSETRANSPOSE","PROJECTIONINVERSETRANSPOSE","WORLDVIEWINVERSETRANSPOSE","VIEWPROJECTIONINVERSETRANSPOSE","WORLDVIEWPROJECTIONINVERSETRANSPOSE"],d={vec4:4,vec3:3,vec2:2,float:1},_={},A={};function p(t,r){var e="vertex:"+t+"fragment:"+r;if(_[e])return _[e];var n=i.A.genGUID();return _[e]=n,A[n]={vertex:t,fragment:r},n}function m(t){return t.replace(/[ \t]*\/\/.*\n/g,"").replace(/[ \t]*\/\*[\s\S]*?\*\//g,"")}function E(){console.error("Wrong uniform/attributes syntax")}function g(t,r){for(var e=/[,=\(\):]/,i=r.replace(/:\s*\[\s*(.*)\s*\]/g,"="+t+"($1)").replace(/\s+/g,"").split(/(?=[,=\(\):])/g),a=[],s=0;s<i.length;s++)i[s].match(e)?a.push(i[s].charAt(0),i[s].slice(1)):a.push(i[s]);i=a;var o,u=0,h=1,c=2,d=3,_=4,A=5,p=u,m={},g=null;function v(t){t||E();var r=t.match(/\[(.*?)\]/);o=t.replace(/\[(.*?)\]/,""),m[o]={},r&&(m[o].isArray=!0,m[o].arraySize=r[1])}v(i[0]);for(s=1;s<i.length;s++){var T=i[s];if(T)if("="!==T)if(":"!==T)if(","!==T)if(")"!==T)if("("!==T)if(T.indexOf("vec")>=0){if(p!==h&&p!==_){E();break}p=c,g=[]}else if(p!==h)if(p!==_)v(T),p=u;else{var R=T;f.indexOf(R)>=0||l.indexOf(R)>=0||y.indexOf(R)>=0?m[o].semantic=R:"ignore"===R||"unconfigurable"===R?m[o].ignore=!0:m[o].value="bool"===t?"true"===R:parseFloat(R)}else m[o].value="bool"===t?"true"===T:parseFloat(T),g=null;else{if(p!==c){E();break}if(!(g instanceof Array)){E();break}g.push(+i[++s])}else m[o].value=new n.A.Float32Array(g),g=null,p=A;else if(p===c){if(!(g instanceof Array)){E();break}g.push(+i[++s])}else p=A;else p=_;else{if(p!==u&&p!==d){E();break}p=h}}return m}function v(t,r){"object"===typeof t&&(r=t.fragment,t=t.vertex),t=m(t),r=m(r),this._shaderID=p(t,r),this._vertexCode=v.parseImport(t),this._fragmentCode=v.parseImport(r),this.attributeSemantics={},this.matrixSemantics={},this.uniformSemantics={},this.matrixSemanticKeys=[],this.uniformTemplates={},this.attributes={},this.textures={},this.vertexDefines={},this.fragmentDefines={},this._parseAttributes(),this._parseUniforms(),this._parseDefines()}v.prototype={constructor:v,createUniforms:function(){var t={};for(var r in this.uniformTemplates){var e=this.uniformTemplates[r];t[r]={type:e.type,value:e.value()}}return t},_parseImport:function(){this._vertexCode=v.parseImport(this.vertex),this._fragmentCode=v.parseImport(this.fragment)},_addSemanticUniform:function(t,r,e){if(f.indexOf(e)>=0)this.attributeSemantics[e]={symbol:t,type:r};else if(y.indexOf(e)>=0){var i=!1,n=e;e.match(/TRANSPOSE$/)&&(i=!0,n=e.slice(0,-9)),this.matrixSemantics[e]={symbol:t,type:r,isTranspose:i,semanticNoTranspose:n}}else l.indexOf(e)>=0&&(this.uniformSemantics[e]={symbol:t,type:r})},_addMaterialUniform:function(t,r,e,i,n,a){a[t]={type:e,value:n?c["array"]:i||c[r],semantic:null}},_parseUniforms:function(){var t={},r=this,e="vertex";function i(t){return null!=t?function(){return t}:null}function n(n,a,s){var o=g(a,s),h=[];for(var c in o){var f=o[c],l=f.semantic,y=c,d=u[a],_=i(o[c].value);o[c].isArray&&(y+="["+o[c].arraySize+"]",d+="v"),h.push(y),r._uniformList.push(c),f.ignore||("sampler2D"!==a&&"samplerCube"!==a||(r.textures[c]={shaderType:e,type:a}),l?r._addSemanticUniform(c,d,l):r._addMaterialUniform(c,a,d,_,o[c].isArray,t))}return h.length>0?"uniform "+a+" "+h.join(",")+";\n":""}this._uniformList=[],this._vertexCode=this._vertexCode.replace(a,n),e="fragment",this._fragmentCode=this._fragmentCode.replace(a,n),r.matrixSemanticKeys=Object.keys(this.matrixSemantics),this.uniformTemplates=t},_parseAttributes:function(){var t={},r=this;function e(e,i,n){var a=g(i,n),s=d[i]||1,o=[];for(var u in a){var h=a[u].semantic;if(t[u]={type:"float",size:s,semantic:h||null},h){if(f.indexOf(h)<0)throw new Error('Unkown semantic "'+h+'"');r.attributeSemantics[h]={symbol:u,type:i}}o.push(u)}return"attribute "+i+" "+o.join(",")+";\n"}this._vertexCode=this._vertexCode.replace(s,e),this.attributes=t},_parseDefines:function(){var t=this,r="vertex";function e(e,i,n){var a="vertex"===r?t.vertexDefines:t.fragmentDefines;return a[i]||(a[i]="false"!==n&&("true"===n||(n?isNaN(parseFloat(n))?n.trim():parseFloat(n):null))),""}this._vertexCode=this._vertexCode.replace(o,e),r="fragment",this._fragmentCode=this._fragmentCode.replace(o,e)},clone:function(){var t=A[this._shaderID],r=new v(t.vertex,t.fragment);return r}},Object.defineProperty&&(Object.defineProperty(v.prototype,"shaderID",{get:function(){return this._shaderID}}),Object.defineProperty(v.prototype,"vertex",{get:function(){return this._vertexCode}}),Object.defineProperty(v.prototype,"fragment",{get:function(){return this._fragmentCode}}),Object.defineProperty(v.prototype,"uniforms",{get:function(){return this._uniformList}}));var T=/(@import)\s*([0-9a-zA-Z_\-\.]*)/g;v.parseImport=function(t){return t=t.replace(T,(function(t,r,e){t=v.source(e);return t?v.parseImport(t):(console.error('Shader chunk "'+e+'" not existed in library'),"")})),t};var R=/(@export)\s*([0-9a-zA-Z_\-\.]*)\s*\n([\s\S]*?)@end/g;v["import"]=function(t){t.replace(R,(function(t,r,e,i){i=i.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+\x24)/g,"");if(i){var n,a=e.split("."),s=v.codes,o=0;while(o<a.length-1)n=a[o++],s[n]||(s[n]={}),s=s[n];n=a[o],s[n]=i}return i}))},v.codes={},v.source=function(t){var r=t.split("."),e=v.codes,i=0;while(e&&i<r.length){var n=r[i++];e=e[n]}return"string"!==typeof e?(console.error('Shader "'+t+'" not existed in library'),""):e},r.A=v},68718:function(t,r,e){var i=e(49350),n=e(21639),a=e(81307),s=i.A.extend({width:512,height:512,type:n.A.UNSIGNED_BYTE,format:n.A.RGBA,wrapS:n.A.REPEAT,wrapT:n.A.REPEAT,minFilter:n.A.LINEAR_MIPMAP_LINEAR,magFilter:n.A.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,sRGB:!0,unpackAlignment:4,premultiplyAlpha:!1,dynamic:!1,NPOT:!1,__used:0},(function(){this._cache=new a.A}),{getWebGLTexture:function(t){var r=t.gl,e=this._cache;return e.use(t.__uid__),e.miss("webgl_texture")&&e.put("webgl_texture",r.createTexture()),this.dynamic?this.update(t):e.isDirty()&&(this.update(t),e.fresh()),e.get("webgl_texture")},bind:function(){},unbind:function(){},dirty:function(){this._cache&&this._cache.dirtyAll()},update:function(t){},updateCommon:function(t){var r=t.gl;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,this.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,this.unpackAlignment),this.format===n.A.DEPTH_COMPONENT&&(this.useMipmap=!1);var e=t.getGLExtension("EXT_sRGB");this.format!==s.SRGB||e||(this.format=s.RGB),this.format!==s.SRGB_ALPHA||e||(this.format=s.RGBA),this.NPOT=!this.isPowerOfTwo()},getAvailableWrapS:function(){return this.NPOT?n.A.CLAMP_TO_EDGE:this.wrapS},getAvailableWrapT:function(){return this.NPOT?n.A.CLAMP_TO_EDGE:this.wrapT},getAvailableMinFilter:function(){var t=this.minFilter;return this.NPOT||!this.useMipmap?t===n.A.NEAREST_MIPMAP_NEAREST||t===n.A.NEAREST_MIPMAP_LINEAR?n.A.NEAREST:t===n.A.LINEAR_MIPMAP_LINEAR||t===n.A.LINEAR_MIPMAP_NEAREST?n.A.LINEAR:t:t},getAvailableMagFilter:function(){return this.magFilter},nextHighestPowerOfTwo:function(t){--t;for(var r=1;r<32;r<<=1)t|=t>>r;return t+1},dispose:function(t){var r=this._cache;r.use(t.__uid__);var e=r.get("webgl_texture");e&&t.gl.deleteTexture(e),r.deleteContext(t.__uid__)},isRenderable:function(){},isPowerOfTwo:function(){}});Object.defineProperty(s.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t}}),Object.defineProperty(s.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t}}),s.BYTE=n.A.BYTE,s.UNSIGNED_BYTE=n.A.UNSIGNED_BYTE,s.SHORT=n.A.SHORT,s.UNSIGNED_SHORT=n.A.UNSIGNED_SHORT,s.INT=n.A.INT,s.UNSIGNED_INT=n.A.UNSIGNED_INT,s.FLOAT=n.A.FLOAT,s.HALF_FLOAT=36193,s.UNSIGNED_INT_24_8_WEBGL=34042,s.DEPTH_COMPONENT=n.A.DEPTH_COMPONENT,s.DEPTH_STENCIL=n.A.DEPTH_STENCIL,s.ALPHA=n.A.ALPHA,s.RGB=n.A.RGB,s.RGBA=n.A.RGBA,s.LUMINANCE=n.A.LUMINANCE,s.LUMINANCE_ALPHA=n.A.LUMINANCE_ALPHA,s.SRGB=35904,s.SRGB_ALPHA=35906,s.COMPRESSED_RGB_S3TC_DXT1_EXT=33776,s.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777,s.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778,s.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779,s.NEAREST=n.A.NEAREST,s.LINEAR=n.A.LINEAR,s.NEAREST_MIPMAP_NEAREST=n.A.NEAREST_MIPMAP_NEAREST,s.LINEAR_MIPMAP_NEAREST=n.A.LINEAR_MIPMAP_NEAREST,s.NEAREST_MIPMAP_LINEAR=n.A.NEAREST_MIPMAP_LINEAR,s.LINEAR_MIPMAP_LINEAR=n.A.LINEAR_MIPMAP_LINEAR,s.REPEAT=n.A.REPEAT,s.CLAMP_TO_EDGE=n.A.CLAMP_TO_EDGE,s.MIRRORED_REPEAT=n.A.MIRRORED_REPEAT,r.A=s},33672:function(t,r,e){var i=e(68718),n=e(21639),a=e(2739),s=e(22050),o=s.A.isPowerOfTwo;function u(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}function h(t,r){var e=u(t.width),i=u(t.height);r=r||document.createElement("canvas"),r.width=e,r.height=i;var n=r.getContext("2d");return n.drawImage(t.image,0,0,e,i),r}var c=i.A.extend((function(){return{image:null,pixels:null,mipmaps:[],convertToPOT:!1}}),{textureType:"texture2D",update:function(t){var r=t.gl;r.bindTexture(r.TEXTURE_2D,this._cache.get("webgl_texture")),this.updateCommon(t);var e=this.format,a=this.type,s=!(!this.convertToPOT||this.mipmaps.length||!this.image||this.wrapS!==i.A.REPEAT&&this.wrapT!==i.A.REPEAT||!this.NPOT);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,s?this.wrapS:this.getAvailableWrapS()),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,s?this.wrapT:this.getAvailableWrapT()),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,s?this.magFilter:this.getAvailableMagFilter()),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,s?this.minFilter:this.getAvailableMinFilter());var o=t.getGLExtension("EXT_texture_filter_anisotropic");if(o&&this.anisotropic>1&&r.texParameterf(r.TEXTURE_2D,o.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),36193===a){var u=t.getGLExtension("OES_texture_half_float");u||(a=n.A.FLOAT)}if(this.mipmaps.length)for(var h=this.width,c=this.height,f=0;f<this.mipmaps.length;f++){var l=this.mipmaps[f];this._updateTextureData(r,l,f,h,c,e,a,!1),h/=2,c/=2}else this._updateTextureData(r,this,0,this.width,this.height,e,a,s),!this.useMipmap||this.NPOT&&!s||r.generateMipmap(r.TEXTURE_2D);r.bindTexture(r.TEXTURE_2D,null)},_updateTextureData:function(t,r,e,n,a,s,o,u){if(r.image){var c=r.image;u&&(this._potCanvas=h(this,this._potCanvas),c=this._potCanvas),t.texImage2D(t.TEXTURE_2D,e,s,s,o,c)}else s<=i.A.COMPRESSED_RGBA_S3TC_DXT5_EXT&&s>=i.A.COMPRESSED_RGB_S3TC_DXT1_EXT?t.compressedTexImage2D(t.TEXTURE_2D,e,s,n,a,0,r.pixels):t.texImage2D(t.TEXTURE_2D,e,s,n,a,0,s,o,r.pixels)},generateMipmap:function(t){var r=t.gl;this.useMipmap&&!this.NPOT&&(r.bindTexture(r.TEXTURE_2D,this._cache.get("webgl_texture")),r.generateMipmap(r.TEXTURE_2D))},isPowerOfTwo:function(){return o(this.width)&&o(this.height)},isRenderable:function(){return this.image?this.image.width>0&&this.image.height>0:!(!this.width||!this.height)},bind:function(t){t.gl.bindTexture(t.gl.TEXTURE_2D,this.getWebGLTexture(t))},unbind:function(t){t.gl.bindTexture(t.gl.TEXTURE_2D,null)},load:function(t,r){var e=a.A.createImage();r&&(e.crossOrigin=r);var i=this;return e.onload=function(){i.dirty(),i.trigger("success",i)},e.onerror=function(){i.trigger("error",i)},e.src=t,this.image=e,this}});Object.defineProperty(c.prototype,"width",{get:function(){return this.image?this.image.width:this._width},set:function(t){this.image?console.warn("Texture from image can't set width"):(this._width!==t&&this.dirty(),this._width=t)}}),Object.defineProperty(c.prototype,"height",{get:function(){return this.image?this.image.height:this._height},set:function(t){this.image?console.warn("Texture from image can't set height"):(this._height!==t&&this.dirty(),this._height=t)}}),r.A=c},10935:function(t,r,e){var i=e(68718),n=e(21639),a=e(51869),s=e(22050),o=e(2739),u=s.A.isPowerOfTwo,h=["px","nx","py","ny","pz","nz"],c=i.A.extend((function(){return{image:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},pixels:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},mipmaps:[]}}),{textureType:"textureCube",update:function(t){var r=t.gl;r.bindTexture(r.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),this.updateCommon(t);var e=this.format,i=this.type;r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_S,this.getAvailableWrapS()),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_T,this.getAvailableWrapT()),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,this.getAvailableMagFilter()),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,this.getAvailableMinFilter());var a=t.getGLExtension("EXT_texture_filter_anisotropic");if(a&&this.anisotropic>1&&r.texParameterf(r.TEXTURE_CUBE_MAP,a.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),36193===i){var s=t.getGLExtension("OES_texture_half_float");s||(i=n.A.FLOAT)}if(this.mipmaps.length)for(var o=this.width,u=this.height,h=0;h<this.mipmaps.length;h++){var c=this.mipmaps[h];this._updateTextureData(r,c,h,o,u,e,i),o/=2,u/=2}else this._updateTextureData(r,this,0,this.width,this.height,e,i),!this.NPOT&&this.useMipmap&&r.generateMipmap(r.TEXTURE_CUBE_MAP);r.bindTexture(r.TEXTURE_CUBE_MAP,null)},_updateTextureData:function(t,r,e,i,n,a,s){for(var o=0;o<6;o++){var u=h[o],c=r.image&&r.image[u];c?t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+o,e,a,a,s,c):t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+o,e,a,i,n,0,a,s,r.pixels&&r.pixels[u])}},generateMipmap:function(t){var r=t.gl;this.useMipmap&&!this.NPOT&&(r.bindTexture(r.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),r.generateMipmap(r.TEXTURE_CUBE_MAP))},bind:function(t){t.gl.bindTexture(t.gl.TEXTURE_CUBE_MAP,this.getWebGLTexture(t))},unbind:function(t){t.gl.bindTexture(t.gl.TEXTURE_CUBE_MAP,null)},isPowerOfTwo:function(){return this.image.px?u(this.image.px.width)&&u(this.image.px.height):u(this.width)&&u(this.height)},isRenderable:function(){return this.image.px?f(this.image.px)&&f(this.image.nx)&&f(this.image.py)&&f(this.image.ny)&&f(this.image.pz)&&f(this.image.nz):!(!this.width||!this.height)},load:function(t,r){var e=0,i=this;return a.A.each(t,(function(t,n){var a=o.A.createImage();r&&(a.crossOrigin=r),a.onload=function(){e--,0===e&&(i.dirty(),i.trigger("success",i))},a.onerror=function(){e--},e++,a.src=t,i.image[n]=a})),this}});function f(t){return t.width>0&&t.height>0}Object.defineProperty(c.prototype,"width",{get:function(){return this.image&&this.image.px?this.image.px.width:this._width},set:function(t){this.image&&this.image.px?console.warn("Texture from image can't set width"):(this._width!==t&&this.dirty(),this._width=t)}}),Object.defineProperty(c.prototype,"height",{get:function(){return this.image&&this.image.px?this.image.px.height:this._height},set:function(t){this.image&&this.image.px?console.warn("Texture from image can't set height"):(this._height!==t&&this.dirty(),this._height=t)}}),r.A=c},16631:function(t,r,e){var i=e(31506),n=i.A.extend({left:-1,right:1,near:-1,far:1,top:1,bottom:-1},{updateProjectionMatrix:function(){this.projectionMatrix.ortho(this.left,this.right,this.bottom,this.top,this.near,this.far)},decomposeProjectionMatrix:function(){var t=this.projectionMatrix.array;this.left=(-1-t[12])/t[0],this.right=(1-t[12])/t[0],this.top=(1-t[13])/t[5],this.bottom=(-1-t[13])/t[5],this.near=-(-1-t[14])/t[10],this.far=-(1-t[14])/t[10]},clone:function(){var t=i.A.prototype.clone.call(this);return t.left=this.left,t.right=this.right,t.near=this.near,t.far=this.far,t.top=this.top,t.bottom=this.bottom,t}});r.A=n},82223:function(t,r,e){var i=e(31506),n=i.A.extend({fov:50,aspect:1,near:.1,far:2e3},{updateProjectionMatrix:function(){var t=this.fov/180*Math.PI;this.projectionMatrix.perspective(t,this.aspect,this.near,this.far)},decomposeProjectionMatrix:function(){var t=this.projectionMatrix.array,r=2*Math.atan(1/t[5]);this.fov=r/Math.PI*180,this.aspect=t[5]/t[0],this.near=t[14]/(t[10]-1),this.far=t[14]/(t[10]+1)},clone:function(){var t=i.A.prototype.clone.call(this);return t.fov=this.fov,t.aspect=this.aspect,t.near=this.near,t.far=this.far,t}});r.A=n},74998:function(t,r,e){e(44114);var i=e(49350),n=e(16631),a=e(13360),s=e(50296),o=e(5148),u=e(83992),h=e(21639),c=e(95007);s.A["import"](c.A);var f=new a.A,l=new u.A({geometry:f,frustumCulling:!1}),y=new n.A,d=i.A.extend((function(){return{fragment:"",outputs:null,material:null,blendWithPrevious:!1,clearColor:!1,clearDepth:!0}}),(function(){var t=new s.A(s.A.source("clay.compositor.vertex"),this.fragment),r=new o.A({shader:t});r.enableTexturesAll(),this.material=r}),{setUniform:function(t,r){this.material.setUniform(t,r)},getUniform:function(t){var r=this.material.uniforms[t];if(r)return r.value},attachOutput:function(t,r){this.outputs||(this.outputs={}),r=r||h.A.COLOR_ATTACHMENT0,this.outputs[r]=t},detachOutput:function(t){for(var r in this.outputs)this.outputs[r]===t&&(this.outputs[r]=null)},bind:function(t,r){if(this.outputs)for(var e in this.outputs){var i=this.outputs[e];i&&r.attach(i,e)}r&&r.bind(t)},unbind:function(t,r){r.unbind(t)},render:function(t,r){var e=t.gl;if(r){this.bind(t,r);var i=t.getGLExtension("EXT_draw_buffers");if(i&&this.outputs){var n=[];for(var a in this.outputs)a=+a,a>=e.COLOR_ATTACHMENT0&&a<=e.COLOR_ATTACHMENT0+8&&n.push(a);i.drawBuffersEXT(n)}}this.trigger("beforerender",this,t);var s=this.clearDepth?e.DEPTH_BUFFER_BIT:0;if(e.depthMask(!0),this.clearColor){s|=e.COLOR_BUFFER_BIT,e.colorMask(!0,!0,!0,!0);var o=this.clearColor;Array.isArray(o)&&e.clearColor(o[0],o[1],o[2],o[3])}e.clear(s),this.blendWithPrevious?(e.enable(e.BLEND),this.material.transparent=!0):(e.disable(e.BLEND),this.material.transparent=!1),this.renderQuad(t),this.trigger("afterrender",this,t),r&&this.unbind(t,r)},renderQuad:function(t){l.material=this.material,t.renderPass([l],y)},dispose:function(t){}});r.A=d},53350:function(t,r,e){e(44114);var i=e(33672),n=e(21639),a=e(51869),s=function(){this._pool={},this._allocatedTextures=[]};s.prototype={constructor:s,get:function(t){var r=h(t);this._pool.hasOwnProperty(r)||(this._pool[r]=[]);var e=this._pool[r];if(!e.length){var n=new i.A(t);return this._allocatedTextures.push(n),n}return e.pop()},put:function(t){var r=h(t);this._pool.hasOwnProperty(r)||(this._pool[r]=[]);var e=this._pool[r];e.push(t)},clear:function(t){for(var r=0;r<this._allocatedTextures.length;r++)this._allocatedTextures[r].dispose(t);this._pool={},this._allocatedTextures=[]}};var o={width:512,height:512,type:n.A.UNSIGNED_BYTE,format:n.A.RGBA,wrapS:n.A.CLAMP_TO_EDGE,wrapT:n.A.CLAMP_TO_EDGE,minFilter:n.A.LINEAR_MIPMAP_LINEAR,magFilter:n.A.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,unpackAlignment:4,premultiplyAlpha:!1},u=Object.keys(o);function h(t){a.A.defaultsWithPropList(t,o,u),c(t);for(var r="",e=0;e<u.length;e++){var i=u[e],n=t[i].toString();r+=n}return r}function c(t){var r=f(t.width,t.height);t.format===n.A.DEPTH_COMPONENT&&(t.useMipmap=!1),r&&t.useMipmap||(t.minFilter==n.A.NEAREST_MIPMAP_NEAREST||t.minFilter==n.A.NEAREST_MIPMAP_LINEAR?t.minFilter=n.A.NEAREST:t.minFilter!=n.A.LINEAR_MIPMAP_LINEAR&&t.minFilter!=n.A.LINEAR_MIPMAP_NEAREST||(t.minFilter=n.A.LINEAR)),r||(t.wrapS=n.A.CLAMP_TO_EDGE,t.wrapT=n.A.CLAMP_TO_EDGE)}function f(t,r){return 0===(t&t-1)&&0===(r&r-1)}r.A=s},14276:function(t,r,e){e.d(r,{A:function(){return F}});var i=e(51869),n=(e(44114),e(49350)),a=n.A.extend((function(){return{name:"",inputLinks:{},outputLinks:{},_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}}),{updateParameter:function(t,r){var e,i,n=this.outputs[t],a=n.parameters,s=n._parametersCopy;if(s||(s=n._parametersCopy={}),a)for(var o in a)"width"!==o&&"height"!==o&&(s[o]=a[o]);return e=a.width instanceof Function?a.width.call(this,r):a.width,i=a.height instanceof Function?a.height.call(this,r):a.height,s.width===e&&s.height===i||this._outputTextures[t]&&this._outputTextures[t].dispose(r.gl),s.width=e,s.height=i,s},setParameter:function(t,r){},getParameter:function(t){},setParameters:function(t){for(var r in t)this.setParameter(r,t[r])},render:function(){},getOutput:function(t,r){if(null==r)return r=t,this._outputTextures[r];var e=this.outputs[r];return e?this._rendered?e.outputLastFrame?this._prevOutputTextures[r]:this._outputTextures[r]:this._rendering?(this._prevOutputTextures[r]||(this._prevOutputTextures[r]=this._compositor.allocateTexture(e.parameters||{})),this._prevOutputTextures[r]):(this.render(t),this._outputTextures[r]):void 0},removeReference:function(t){if(this._outputReferences[t]--,0===this._outputReferences[t]){var r=this.outputs[t];r.keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t])}},link:function(t,r,e){this.inputLinks[t]={node:r,pin:e},r.outputLinks[e]||(r.outputLinks[e]=[]),r.outputLinks[e].push({node:this,pin:t}),this.pass.material.enableTexture(t)},clear:function(){this.inputLinks={},this.outputLinks={}},updateReference:function(t){if(!this._rendering){for(var r in this._rendering=!0,this.inputLinks){var e=this.inputLinks[r];e.node.updateReference(e.pin)}this._rendering=!1}t&&this._outputReferences[t]++},beforeFrame:function(){for(var t in this._rendered=!1,this.outputLinks)this._outputReferences[t]=0},afterFrame:function(){for(var t in this.outputLinks)if(this._outputReferences[t]>0){var r=this.outputs[t];r.keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t])}}}),s=a,o=n.A.extend((function(){return{nodes:[]}}),{dirty:function(){this._dirty=!0},addNode:function(t){this.nodes.indexOf(t)>=0||(this.nodes.push(t),this._dirty=!0)},removeNode:function(t){"string"===typeof t&&(t=this.getNodeByName(t));var r=this.nodes.indexOf(t);r>=0&&(this.nodes.splice(r,1),this._dirty=!0)},getNodeByName:function(t){for(var r=0;r<this.nodes.length;r++)if(this.nodes[r].name===t)return this.nodes[r]},update:function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].clear();for(t=0;t<this.nodes.length;t++){var r=this.nodes[t];if(r.inputs)for(var e in r.inputs)if(r.inputs[e])if(!r.pass||r.pass.material.isUniformEnabled(e)){var i=r.inputs[e],n=this.findPin(i);n?r.link(e,n.node,n.pin):"string"===typeof i?console.warn("Node "+i+" not exist"):console.warn("Pin of "+i.node+"."+i.pin+" not exist")}else console.warn("Pin "+r.name+"."+e+" not used.")}},findPin:function(t){var r;if(("string"===typeof t||t instanceof s)&&(t={node:t}),"string"===typeof t.node)for(var e=0;e<this.nodes.length;e++){var i=this.nodes[e];i.name===t.node&&(r=i)}else r=t.node;if(r){var n=t.pin;if(n||r.outputs&&(n=Object.keys(r.outputs)[0]),r.outputs[n])return{node:r,pin:n}}}}),u=o,h=e(53350),c=e(87322),f=u.extend((function(){return{_outputs:[],_texturePool:new h.A,_frameBuffer:new c.A({depthBuffer:!1})}}),{addNode:function(t){u.prototype.addNode.call(this,t),t._compositor=this},render:function(t,r){if(this._dirty){this.update(),this._dirty=!1,this._outputs.length=0;for(var e=0;e<this.nodes.length;e++)this.nodes[e].outputs||this._outputs.push(this.nodes[e])}for(e=0;e<this.nodes.length;e++)this.nodes[e].beforeFrame();for(e=0;e<this._outputs.length;e++)this._outputs[e].updateReference();for(e=0;e<this._outputs.length;e++)this._outputs[e].render(t,r);for(e=0;e<this.nodes.length;e++)this.nodes[e].afterFrame()},allocateTexture:function(t){return this._texturePool.get(t)},releaseTexture:function(t){this._texturePool.put(t)},getFrameBuffer:function(){return this._frameBuffer},dispose:function(t){this._texturePool.clear(t)}}),l=f,y=e(21639),d=s.extend({name:"scene",scene:null,camera:null,autoUpdateScene:!0,preZ:!1},(function(){this.frameBuffer=new c.A}),{render:function(t){this._rendering=!0;var r,e=t.gl;if(this.trigger("beforerender"),this.outputs){var i=this.frameBuffer;for(var n in this.outputs){var a=this.updateParameter(n,t),s=this.outputs[n],o=this._compositor.allocateTexture(a);this._outputTextures[n]=o;var u=s.attachment||e.COLOR_ATTACHMENT0;"string"==typeof u&&(u=e[u]),i.attach(o,u)}i.bind(t);var h=t.getGLExtension("EXT_draw_buffers");if(h){var c=[];for(var u in this.outputs)u=parseInt(u),u>=e.COLOR_ATTACHMENT0&&u<=e.COLOR_ATTACHMENT0+8&&c.push(u);h.drawBuffersEXT(c)}t.saveClear(),t.clearBit=y.A.DEPTH_BUFFER_BIT|y.A.COLOR_BUFFER_BIT,r=t.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ),t.restoreClear(),i.unbind(t)}else r=t.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ);this.trigger("afterrender",r),this._rendering=!1,this._rendered=!0}}),_=d,A=s.extend((function(){return{texture:null,outputs:{color:{}}}}),(function(){}),{getOutput:function(t,r){return this.texture},beforeFrame:function(){},afterFrame:function(){}}),p=A,m=e(74998),E=s.extend((function(){return{name:"",inputs:{},outputs:null,shader:"",inputLinks:{},outputLinks:{},pass:null,_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}}),(function(){var t=new m.A({fragment:this.shader});this.pass=t}),{render:function(t,r){this.trigger("beforerender",t),this._rendering=!0;var e=t.gl;for(var i in this.inputLinks){var n=this.inputLinks[i],a=n.node.getOutput(t,n.pin);this.pass.setUniform(i,a)}if(this.outputs){this.pass.outputs={};var s={};for(var o in this.outputs){var u=this.updateParameter(o,t);isNaN(u.width)&&this.updateParameter(o,t);var h=this.outputs[o],c=this._compositor.allocateTexture(u);this._outputTextures[o]=c;var f=h.attachment||e.COLOR_ATTACHMENT0;"string"===typeof f&&(f=e[f]),s[f]=c}for(var f in this._compositor.getFrameBuffer().bind(t),s)this._compositor.getFrameBuffer().attach(s[f],f);this.pass.render(t),this._compositor.getFrameBuffer().updateMipmap(t)}else this.pass.outputs=null,this._compositor.getFrameBuffer().unbind(t),this.pass.render(t,r);for(var i in this.inputLinks){n=this.inputLinks[i];n.node.removeReference(n.pin)}this._rendering=!1,this._rendered=!0,this.trigger("afterrender",t)},updateParameter:function(t,r){var e,i,n=this.outputs[t],a=n.parameters,s=n._parametersCopy;if(s||(s=n._parametersCopy={}),a)for(var o in a)"width"!==o&&"height"!==o&&(s[o]=a[o]);return e="function"===typeof a.width?a.width.call(this,r):a.width,i="function"===typeof a.height?a.height.call(this,r):a.height,e=Math.ceil(e),i=Math.ceil(i),s.width===e&&s.height===i||this._outputTextures[t]&&this._outputTextures[t].dispose(r),s.width=e,s.height=i,s},setParameter:function(t,r){this.pass.setUniform(t,r)},getParameter:function(t){return this.pass.getUniform(t)},setParameters:function(t){for(var r in t)this.setParameter(r,t[r])},define:function(t,r){this.pass.material.define("fragment",t,r)},undefine:function(t){this.pass.material.undefine("fragment",t)},removeReference:function(t){if(this._outputReferences[t]--,0===this._outputReferences[t]){var r=this.outputs[t];r.keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t])}},clear:function(){s.prototype.clear.call(this),this.pass.material.disableTexturesAll()}}),g=E,v=e(50296),T=e(68718),R=e(33672),S=e(10935),M=e(94014);(0,M.A)(v.A);var I=/^#source\((.*?)\)/;function N(t,r){var e=new l;r=r||{};var i={textures:{},parameters:{}},n=function(n,a){for(var s=0;s<t.nodes.length;s++){var o=t.nodes[s],u=x(o,i,r);u&&e.addNode(u)}};for(var a in t.parameters){var s=t.parameters[a];i.parameters[a]=P(s)}return b(t,i,r,(function(t){i.textures=t,n()})),e}function x(t,r,e){var i,n,a,s,o=t.type||"filter";if("filter"===o){var u=t.shader.trim(),h=I.exec(u);if(h?i=v.A.source(h[1].trim()):"#"===u.charAt(0)&&(i=r.shaders[u.substr(1)]),i||(i=u),!i)return}if(t.inputs)for(var c in n={},t.inputs)"string"===typeof t.inputs[c]?n[c]=t.inputs[c]:n[c]={node:t.inputs[c].node,pin:t.inputs[c].pin};if(t.outputs)for(var c in a={},t.outputs){var f=t.outputs[c];a[c]={},null!=f.attachment&&(a[c].attachment=f.attachment),null!=f.keepLastFrame&&(a[c].keepLastFrame=f.keepLastFrame),null!=f.outputLastFrame&&(a[c].outputLastFrame=f.outputLastFrame),f.parameters&&(a[c].parameters=P(f.parameters))}if(s="scene"===o?new _({name:t.name,scene:e.scene,camera:e.camera,outputs:a}):"texture"===o?new p({name:t.name,outputs:a}):new g({name:t.name,shader:i,inputs:n,outputs:a}),s){if(t.parameters)for(var c in t.parameters){var l=t.parameters[c];"string"===typeof l?(l=l.trim(),"#"===l.charAt(0)?l=r.textures[l.substr(1)]:s.on("beforerender",w(c,U(l)))):"function"===typeof l&&s.on("beforerender",l),s.setParameter(c,l)}if(t.defines&&s.pass)for(var c in t.defines){l=t.defines[c];s.pass.material.define("fragment",c,l)}}return s}function O(t,r){return t}function L(t,r){return r}function P(t){var r={};if(!t)return r;["type","minFilter","magFilter","wrapS","wrapT","flipY","useMipmap"].forEach((function(e){var i=t[e];null!=i&&("string"===typeof i&&(i=T.A[i]),r[e]=i)}));var e=t.scale||1;return["width","height"].forEach((function(i){if(null!=t[i]){var n=t[i];"string"===typeof n?(n=n.trim(),r[i]=C(i,U(n),e)):r[i]=n}})),r.width||(r.width=O),r.height||(r.height=L),null!=t.useMipmap&&(r.useMipmap=t.useMipmap),r}function b(t,r,e,n){if(t.textures){var a={},s=0,o=!1,u=e.textureRootPath;i.A.each(t.textures,(function(t,r){var e,h=t.path,c=P(t.parameters);if(Array.isArray(h)&&6===h.length)u&&(h=h.map((function(t){return i.A.relative2absolute(t,u)}))),e=new S.A(c);else{if("string"!==typeof h)return;u&&(h=i.A.relative2absolute(h,u)),e=new R.A(c)}e.load(h),s++,e.once("success",(function(){a[r]=e,s--,0===s&&(n(a),o=!0)}))})),0!==s||o||n(a)}else n({})}function w(t,r){return function(e){var i=e.getDevicePixelRatio(),n=e.getWidth(),a=e.getHeight(),s=r(n,a,i);this.setParameter(t,s)}}function C(t,r,e){return e=e||1,function(t){var i=t.getDevicePixelRatio(),n=t.getWidth()*e,a=t.getHeight()*e;return r(n,a,i)}}function U(t){var r=/^expr\((.*)\)$/.exec(t);if(r)try{var e=new Function("width","height","dpr","return "+r[1]);return e(1,1),e}catch(i){throw new Error("Invalid expression.")}}var D=N,F=D},49350:function(t,r,e){e.d(r,{A:function(){return c}});e(44114);function i(t,r,e){"object"==typeof r&&(e=r,r=null);var i,s=this;if(!(t instanceof Function))for(var o in i=[],t)t.hasOwnProperty(o)&&i.push(o);var u=function(r){if(s.apply(this,arguments),t instanceof Function?n(this,t.call(this,r)):a(this,t,i),this.constructor===u)for(var e=u.__initializers__,o=0;o<e.length;o++)e[o].apply(this,arguments)};u.__super__=s,s.__initializers__?u.__initializers__=s.__initializers__.slice():u.__initializers__=[],r&&u.__initializers__.push(r);var h=function(){};return h.prototype=s.prototype,u.prototype=new h,u.prototype.constructor=u,n(u.prototype,e),u.extend=s.extend,u.derive=s.extend,u}function n(t,r){if(r)for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])}function a(t,r,e){for(var i=0;i<e.length;i++){var n=e[i];t[n]=r[n]}}var s={extend:i,derive:i},o=e(91029),u=e(51869),h=function(){this.__uid__=u.A.genGUID()};h.__initializers__=[function(t){u.A.extend(this,t)}],u.A.extend(h,s),u.A.extend(h.prototype,o.A);var c=h},81307:function(t,r){var e="__dt__",i=function(){this._contextId=0,this._caches=[],this._context={}};i.prototype={use:function(t,r){var e=this._caches;e[t]||(e[t]={},r&&(e[t]=r())),this._contextId=t,this._context=e[t]},put:function(t,r){this._context[t]=r},get:function(t){return this._context[t]},dirty:function(t){t=t||"";var r=e+t;this.put(r,!0)},dirtyAll:function(t){t=t||"";for(var r=e+t,i=this._caches,n=0;n<i.length;n++)i[n]&&(i[n][r]=!0)},fresh:function(t){t=t||"";var r=e+t;this.put(r,!1)},freshAll:function(t){t=t||"";for(var r=e+t,i=this._caches,n=0;n<i.length;n++)i[n]&&(i[n][r]=!1)},isDirty:function(t){t=t||"";var r=e+t,i=this._context;return!i.hasOwnProperty(r)||!0===i[r]},deleteContext:function(t){delete this._caches[t],this._context={}},delete:function(t){delete this._context[t]},clearAll:function(){this._caches={}},getContext:function(){return this._context},eachContext:function(t,r){var e=Object.keys(this._caches);e.forEach((function(e){t&&t.call(r,e)}))},miss:function(t){return!this._context.hasOwnProperty(t)}},i.prototype.constructor=i,r.A=i},84602:function(t,r,e){e.d(r,{A:function(){return s}});var i=function(){this.head=null,this.tail=null,this._length=0};i.prototype.insert=function(t){var r=new i.Entry(t);return this.insertEntry(r),r},i.prototype.insertAt=function(t,r){if(!(t<0)){var e=this.head,n=0;while(e&&n!=t)e=e.next,n++;if(e){var a=new i.Entry(r),s=e.prev;s?(s.next=a,a.prev=s):this.head=a,a.next=e,e.prev=a}else this.insert(r)}},i.prototype.insertBeforeEntry=function(t,r){var e=new i.Entry(t),n=r.prev;n?(n.next=e,e.prev=n):this.head=e,e.next=r,r.prev=e,this._length++},i.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,this.tail=t):this.head=this.tail=t,this._length++},i.prototype.remove=function(t){var r=t.prev,e=t.next;r?r.next=e:this.head=e,e?e.prev=r:this.tail=r,t.next=t.prev=null,this._length--},i.prototype.removeAt=function(t){if(!(t<0)){var r=this.head,e=0;while(r&&e!=t)r=r.next,e++;return r?(this.remove(r),r.value):void 0}},i.prototype.getHead=function(){if(this.head)return this.head.value},i.prototype.getTail=function(){if(this.tail)return this.tail.value},i.prototype.getAt=function(t){if(!(t<0)){var r=this.head,e=0;while(r&&e!=t)r=r.next,e++;return r.value}},i.prototype.indexOf=function(t){var r=this.head,e=0;while(r){if(r.value===t)return e;r=r.next,e++}},i.prototype.length=function(){return this._length},i.prototype.isEmpty=function(){return 0===this._length},i.prototype.forEach=function(t,r){var e=this.head,i=0,n="undefined"!=typeof r;while(e)n?t.call(r,e.value,i):t(e.value,i),e=e.next,i++},i.prototype.clear=function(){this.tail=this.head=null,this._length=0},i.Entry=function(t){this.value=t,this.next=null,this.prev=null};var n=i,a=function(t){this._list=new n,this._map={},this._maxSize=t||10};a.prototype.setMaxSize=function(t){this._maxSize=t},a.prototype.put=function(t,r){if(!this._map.hasOwnProperty(t)){var e=this._list.length();if(e>=this._maxSize&&e>0){var i=this._list.head;this._list.remove(i),delete this._map[i.key]}var n=this._list.insert(r);n.key=t,this._map[t]=n}},a.prototype.get=function(t){var r=this._map[t];if(this._map.hasOwnProperty(t))return r!==this._list.tail&&(this._list.remove(r),this._list.insertEntry(r)),r.value},a.prototype.remove=function(t){var r=this._map[t];"undefined"!==typeof r&&(delete this._map[t],this._list.remove(r))},a.prototype.clear=function(){this._list.clear(),this._map={}};var s=a},11522:function(t,r,e){e(44114);var i=e(84602),n={},a={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function s(t){return t=Math.round(t),t<0?0:t>255?255:t}function o(t){return t=Math.round(t),t<0?0:t>360?360:t}function u(t){return t<0?0:t>1?1:t}function h(t){return t.length&&"%"===t.charAt(t.length-1)?s(parseFloat(t)/100*255):s(parseInt(t,10))}function c(t){return t.length&&"%"===t.charAt(t.length-1)?u(parseFloat(t)/100):u(parseFloat(t))}function f(t,r,e){return e<0?e+=1:e>1&&(e-=1),6*e<1?t+(r-t)*e*6:2*e<1?r:3*e<2?t+(r-t)*(2/3-e)*6:t}function l(t,r,e){return t+(r-t)*e}function y(t,r,e,i,n){return t[0]=r,t[1]=e,t[2]=i,t[3]=n,t}function d(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}var _=new i.A(20),A=null;function p(t,r){A&&d(A,r),A=_.put(t,A||r.slice())}function m(t,r){var e=(parseFloat(t[0])%360+360)%360/360,i=c(t[1]),n=c(t[2]),a=n<=.5?n*(i+1):n+i-n*i,o=2*n-a;return r=r||[],y(r,s(255*f(o,a,e+1/3)),s(255*f(o,a,e)),s(255*f(o,a,e-1/3)),1),4===t.length&&(r[3]=t[3]),r}function E(t){if(t){var r,e,i=t[0]/255,n=t[1]/255,a=t[2]/255,s=Math.min(i,n,a),o=Math.max(i,n,a),u=o-s,h=(o+s)/2;if(0===u)r=0,e=0;else{e=h<.5?u/(o+s):u/(2-o-s);var c=((o-i)/6+u/2)/u,f=((o-n)/6+u/2)/u,l=((o-a)/6+u/2)/u;i===o?r=l-f:n===o?r=1/3+c-l:a===o&&(r=2/3+f-c),r<0&&(r+=1),r>1&&(r-=1)}var y=[360*r,e,h];return null!=t[3]&&y.push(t[3]),y}}n.parse=function(t,r){if(t){r=r||[];var e=_.get(t);if(e)return d(r,e);t+="";var i=t.replace(/ /g,"").toLowerCase();if(i in a)return d(r,a[i]),p(t,r),r;if("#"!==i.charAt(0)){var n=i.indexOf("("),s=i.indexOf(")");if(-1!==n&&s+1===i.length){var o=i.substr(0,n),u=i.substr(n+1,s-(n+1)).split(","),f=1;switch(o){case"rgba":if(4!==u.length)return void y(r,0,0,0,1);f=c(u.pop());case"rgb":return 3!==u.length?void y(r,0,0,0,1):(y(r,h(u[0]),h(u[1]),h(u[2]),f),p(t,r),r);case"hsla":return 4!==u.length?void y(r,0,0,0,1):(u[3]=c(u[3]),m(u,r),p(t,r),r);case"hsl":return 3!==u.length?void y(r,0,0,0,1):(m(u,r),p(t,r),r);default:return}}y(r,0,0,0,1)}else{if(4===i.length){var l=parseInt(i.substr(1),16);return l>=0&&l<=4095?(y(r,(3840&l)>>4|(3840&l)>>8,240&l|(240&l)>>4,15&l|(15&l)<<4,1),p(t,r),r):void y(r,0,0,0,1)}if(7===i.length){l=parseInt(i.substr(1),16);return l>=0&&l<=16777215?(y(r,(16711680&l)>>16,(65280&l)>>8,255&l,1),p(t,r),r):void y(r,0,0,0,1)}}}},n.parseToFloat=function(t,r){if(r=n.parse(t,r),r)return r[0]/=255,r[1]/=255,r[2]/=255,r},n.lift=function(t,r){var e=n.parse(t);if(e){for(var i=0;i<3;i++)e[i]=r<0?e[i]*(1-r)|0:(255-e[i])*r+e[i]|0;return n.stringify(e,4===e.length?"rgba":"rgb")}},n.toHex=function(t){var r=n.parse(t);if(r)return((1<<24)+(r[0]<<16)+(r[1]<<8)+ +r[2]).toString(16).slice(1)},n.fastLerp=function(t,r,e){if(r&&r.length&&t>=0&&t<=1){e=e||[];var i=t*(r.length-1),n=Math.floor(i),a=Math.ceil(i),o=r[n],h=r[a],c=i-n;return e[0]=s(l(o[0],h[0],c)),e[1]=s(l(o[1],h[1],c)),e[2]=s(l(o[2],h[2],c)),e[3]=u(l(o[3],h[3],c)),e}},n.fastMapToColor=n.fastLerp,n.lerp=function(t,r,e){if(r&&r.length&&t>=0&&t<=1){var i=t*(r.length-1),a=Math.floor(i),o=Math.ceil(i),h=n.parse(r[a]),c=n.parse(r[o]),f=i-a,y=n.stringify([s(l(h[0],c[0],f)),s(l(h[1],c[1],f)),s(l(h[2],c[2],f)),u(l(h[3],c[3],f))],"rgba");return e?{color:y,leftIndex:a,rightIndex:o,value:i}:y}},n.mapToColor=n.lerp,n.modifyHSL=function(t,r,e,i){if(t=n.parse(t),t)return t=E(t),null!=r&&(t[0]=o(r)),null!=e&&(t[1]=c(e)),null!=i&&(t[2]=c(i)),n.stringify(m(t),"rgba")},n.modifyAlpha=function(t,r){if(t=n.parse(t),t&&null!=r)return t[3]=u(r),n.stringify(t,"rgba")},n.stringify=function(t,r){if(t&&t.length){var e=t[0]+","+t[1]+","+t[2];return"rgba"!==r&&"hsva"!==r&&"hsla"!==r||(e+=","+t[3]),r+"("+e+")"}},r.A=n},21639:function(t,r){r.A={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444}},91029:function(t,r,e){e(44114);function i(t,r){this.action=t,this.context=r}var n={trigger:function(t){if(this.hasOwnProperty("__handlers__")&&this.__handlers__.hasOwnProperty(t)){var r=this.__handlers__[t],e=r.length,i=-1,n=arguments;switch(n.length){case 1:while(++i<e)r[i].action.call(r[i].context);return;case 2:while(++i<e)r[i].action.call(r[i].context,n[1]);return;case 3:while(++i<e)r[i].action.call(r[i].context,n[1],n[2]);return;case 4:while(++i<e)r[i].action.call(r[i].context,n[1],n[2],n[3]);return;case 5:while(++i<e)r[i].action.call(r[i].context,n[1],n[2],n[3],n[4]);return;default:while(++i<e)r[i].action.apply(r[i].context,Array.prototype.slice.call(n,1));return}}},on:function(t,r,e){if(t&&r){var n=this.__handlers__||(this.__handlers__={});if(n[t]){if(this.has(t,r))return}else n[t]=[];var a=new i(r,e||this);return n[t].push(a),this}},once:function(t,r,e){if(t&&r){var i=this;return this.on(t,n,e)}function n(){i.off(t,n),r.apply(this,arguments)}},before:function(t,r,e){if(t&&r)return t="before"+t,this.on(t,r,e)},after:function(t,r,e){if(t&&r)return t="after"+t,this.on(t,r,e)},success:function(t,r){return this.once("success",t,r)},error:function(t,r){return this.once("error",t,r)},off:function(t,r){var e=this.__handlers__||(this.__handlers__={});if(r){if(e[t]){for(var i=e[t],n=[],a=0;a<i.length;a++)r&&i[a].action!==r&&n.push(i[a]);e[t]=n}return this}e[t]=[]},has:function(t,r){var e=this.__handlers__;if(!e||!e[t])return!1;for(var i=e[t],n=0;n<i.length;n++)if(i[n].action===r)return!0}};r.A=n},51869:function(t,r){var e=0,i=Array.prototype,n=i.forEach,a={genGUID:function(){return++e},relative2absolute:function(t,r){if(!r||t.match(/^\//))return t;var e=t.split("/"),i=r.split("/"),n=e[0];while("."===n||".."===n)".."===n&&i.pop(),e.shift(),n=e[0];return i.join("/")+"/"+e.join("/")},extend:function(t,r){if(r)for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e]);return t},defaults:function(t,r){if(r)for(var e in r)void 0===t[e]&&(t[e]=r[e]);return t},extendWithPropList:function(t,r,e){if(r)for(var i=0;i<e.length;i++){var n=e[i];t[n]=r[n]}return t},defaultsWithPropList:function(t,r,e){if(r)for(var i=0;i<e.length;i++){var n=e[i];null==t[n]&&(t[n]=r[n])}return t},each:function(t,r,e){if(t&&r)if(t.forEach&&t.forEach===n)t.forEach(r,e);else if(t.length===+t.length)for(var i=0,a=t.length;i<a;i++)r.call(e,t[i],i,t);else for(var s in t)t.hasOwnProperty(s)&&r.call(e,t[s],s,t)},isObject:function(t){return t===Object(t)},isArray:function(t){return Array.isArray(t)},isArrayLike:function(t){return!!t&&t.length===+t.length},clone:function(t){if(a.isObject(t)){if(a.isArray(t))return t.slice();if(a.isArrayLike(t)){for(var r=new t.constructor(t.length),e=0;e<t.length;e++)r[e]=t[e];return r}return a.extend({},t)}return t}};r.A=a},2739:function(t,r,e){e.d(r,{A:function(){return u}});e(16573),e(78100),e(77936),e(37467),e(44732),e(79577);function i(t){var r=new XMLHttpRequest;r.open("get",t.url),r.responseType=t.responseType||"text",t.onprogress&&(r.onprogress=function(r){if(r.lengthComputable){var e=r.loaded/r.total;t.onprogress(e,r.loaded,r.total)}else t.onprogress(null)}),r.onload=function(e){r.status>=400?t.onerror&&t.onerror():t.onload&&t.onload(r.response)},t.onerror&&(r.onerror=t.onerror),r.send(null)}var n,a={get:i},s={supportWebGL:function(){if(null==n)try{var t=document.createElement("canvas"),r=t.getContext("webgl")||t.getContext("experimental-webgl");if(!r)throw new Error}catch(e){n=!1}return n}};s.Int8Array="undefined"===typeof Int8Array?Array:Int8Array,s.Uint8Array="undefined"===typeof Uint8Array?Array:Uint8Array,s.Uint16Array="undefined"===typeof Uint16Array?Array:Uint16Array,s.Uint32Array="undefined"===typeof Uint32Array?Array:Uint32Array,s.Int16Array="undefined"===typeof Int16Array?Array:Int16Array,s.Float32Array="undefined"===typeof Float32Array?Array:Float32Array,s.Float64Array="undefined"===typeof Float64Array?Array:Float64Array;var o={};"undefined"!==typeof window?o=window:"undefined"!==typeof e.g&&(o=e.g),s.requestAnimationFrame=o.requestAnimationFrame||o.msRequestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},s.createCanvas=function(){return document.createElement("canvas")},s.createImage=function(){return new o.Image},s.request={get:a.get},s.addEventListener=function(t,r,e,i){t.addEventListener(r,e,i)},s.removeEventListener=function(t,r,e){t.removeEventListener(r,e)};var u=s},73737:function(t,r,e){e.d(r,{A:function(){return l}});var i=e(98710),n=e(33301),a=e(16448),s=e(83566),o=e(17440),u=e(27917),h=e(87064),c=e(77129),f={vec2:i.A,vec3:n.A,vec4:a.A,mat2:s.A,mat2d:o.A,mat3:u.A,mat4:h.A,quat:c.A},l=f},36097:function(t,r,e){var i=e(21788),n=e(13360),a=e(21647),s=e(504),o=e(47797),u=e(2739),h=new a.A,c=i.A.extend({dynamic:!1,widthSegments:1,heightSegments:1,depthSegments:1,inside:!1},(function(){this.build()}),{build:function(){var t={px:f("px",this.depthSegments,this.heightSegments),nx:f("nx",this.depthSegments,this.heightSegments),py:f("py",this.widthSegments,this.depthSegments),ny:f("ny",this.widthSegments,this.depthSegments),pz:f("pz",this.widthSegments,this.heightSegments),nz:f("nz",this.widthSegments,this.heightSegments)},r=["position","texcoord0","normal"],e=0,i=0;for(var n in t)e+=t[n].vertexCount,i+=t[n].indices.length;for(var a=0;a<r.length;a++)this.attributes[r[a]].init(e);this.indices=new u.A.Uint16Array(i);var s=0,h=0;for(var n in t){var c=t[n];for(a=0;a<r.length;a++)for(var l=r[a],y=c.attributes[l].value,d=c.attributes[l].size,_="normal"===l,A=0;A<y.length;A++){var p=y[A];this.inside&&_&&(p=-p),this.attributes[l].value[A+d*h]=p}var m=c.indices.length;for(A=0;A<c.indices.length;A++)this.indices[A+s]=h+c.indices[this.inside?m-A-1:A];s+=c.indices.length,h+=c.vertexCount}this.boundingBox=new o.A,this.boundingBox.max.set(1,1,1),this.boundingBox.min.set(-1,-1,-1)}});function f(t,r,e){h.identity();var i=new n.A({widthSegments:r,heightSegments:e});switch(t){case"px":a.A.translate(h,h,s.A.POSITIVE_X),a.A.rotateY(h,h,Math.PI/2);break;case"nx":a.A.translate(h,h,s.A.NEGATIVE_X),a.A.rotateY(h,h,-Math.PI/2);break;case"py":a.A.translate(h,h,s.A.POSITIVE_Y),a.A.rotateX(h,h,-Math.PI/2);break;case"ny":a.A.translate(h,h,s.A.NEGATIVE_Y),a.A.rotateX(h,h,Math.PI/2);break;case"pz":a.A.translate(h,h,s.A.POSITIVE_Z);break;case"nz":a.A.translate(h,h,s.A.NEGATIVE_Z),a.A.rotateY(h,h,Math.PI);break}return i.applyTransform(h),i}r.A=c},13360:function(t,r,e){e(44114);var i=e(21788),n=e(47797),a=i.A.extend({dynamic:!1,widthSegments:1,heightSegments:1},(function(){this.build()}),{build:function(){for(var t=this.heightSegments,r=this.widthSegments,e=this.attributes,i=[],a=[],s=[],o=[],u=0;u<=t;u++)for(var h=u/t,c=0;c<=r;c++){var f=c/r;if(i.push([2*f-1,2*h-1,0]),a&&a.push([f,h]),s&&s.push([0,0,1]),c<r&&u<t){var l=c+u*(r+1);o.push([l,l+1,l+r+1]),o.push([l+r+1,l+1,l+r+2])}}e.position.fromArray(i),e.texcoord0.fromArray(a),e.normal.fromArray(s),this.initIndicesFromArray(o),this.boundingBox=new n.A,this.boundingBox.min.set(-1,-1,0),this.boundingBox.max.set(1,1,0)}});r.A=a},22041:function(t,r,e){e(16573),e(78100),e(77936),e(37467),e(44732),e(79577);var i=e(21788),n=e(47797),a=i.A.extend({dynamic:!1,widthSegments:40,heightSegments:20,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI,radius:1},(function(){this.build()}),{build:function(){var t=this.heightSegments,r=this.widthSegments,e=this.attributes.position,i=this.attributes.texcoord0,a=this.attributes.normal,s=(r+1)*(t+1);e.init(s),i.init(s),a.init(s);var o,u,h,c,f,l,y,d,_,A,p,m=s>65535?Uint32Array:Uint16Array,E=this.indices=new m(r*t*6),g=this.radius,v=this.phiStart,T=this.phiLength,R=this.thetaStart,S=this.thetaLength,M=(g=this.radius,[]),I=[],N=0,x=1/g;for(y=0;y<=t;y++)for(l=0;l<=r;l++)c=l/r,f=y/t,o=-g*Math.cos(v+c*T)*Math.sin(R+f*S),u=g*Math.cos(R+f*S),h=g*Math.sin(v+c*T)*Math.sin(R+f*S),M[0]=o,M[1]=u,M[2]=h,I[0]=c,I[1]=f,e.set(N,M),i.set(N,I),M[0]*=x,M[1]*=x,M[2]*=x,a.set(N,M),N++;var O=r+1,L=0;for(y=0;y<t;y++)for(l=0;l<r;l++)_=y*O+l,d=y*O+l+1,p=(y+1)*O+l+1,A=(y+1)*O+l,E[L++]=d,E[L++]=_,E[L++]=p,E[L++]=_,E[L++]=A,E[L++]=p;this.boundingBox=new n.A,this.boundingBox.max.set(g,g,g),this.boundingBox.min.set(-g,-g,-g)}});r.A=a},55043:function(t,r,e){e.d(r,{$O:function(){return n},R0:function(){return i},mn:function(){return a}});var i=1e-6,n=Array,a=Math.random},83566:function(t,r,e){var i=e(55043),n={create:function(){var t=new i.$O(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},clone:function(t){var r=new i.$O(4);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r},copy:function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},transpose:function(t,r){if(t===r){var e=r[1];t[1]=r[2],t[2]=e}else t[0]=r[0],t[1]=r[2],t[2]=r[1],t[3]=r[3];return t},invert:function(t,r){var e=r[0],i=r[1],n=r[2],a=r[3],s=e*a-n*i;return s?(s=1/s,t[0]=a*s,t[1]=-i*s,t[2]=-n*s,t[3]=e*s,t):null},adjoint:function(t,r){var e=r[0];return t[0]=r[3],t[1]=-r[1],t[2]=-r[2],t[3]=e,t},determinant:function(t){return t[0]*t[3]-t[2]*t[1]},multiply:function(t,r,e){var i=r[0],n=r[1],a=r[2],s=r[3],o=e[0],u=e[1],h=e[2],c=e[3];return t[0]=i*o+a*u,t[1]=n*o+s*u,t[2]=i*h+a*c,t[3]=n*h+s*c,t}};n.mul=n.multiply,n.rotate=function(t,r,e){var i=r[0],n=r[1],a=r[2],s=r[3],o=Math.sin(e),u=Math.cos(e);return t[0]=i*u+a*o,t[1]=n*u+s*o,t[2]=i*-o+a*u,t[3]=n*-o+s*u,t},n.scale=function(t,r,e){var i=r[0],n=r[1],a=r[2],s=r[3],o=e[0],u=e[1];return t[0]=i*o,t[1]=n*o,t[2]=a*u,t[3]=s*u,t},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},n.LDU=function(t,r,e,i){return t[2]=i[2]/i[0],e[0]=i[0],e[1]=i[1],e[3]=i[3]-t[2]*e[1],[t,r,e]},r.A=n},17440:function(t,r,e){var i=e(55043),n={create:function(){var t=new i.$O(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},clone:function(t){var r=new i.$O(6);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r},copy:function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},invert:function(t,r){var e=r[0],i=r[1],n=r[2],a=r[3],s=r[4],o=r[5],u=e*a-i*n;return u?(u=1/u,t[0]=a*u,t[1]=-i*u,t[2]=-n*u,t[3]=e*u,t[4]=(n*o-a*s)*u,t[5]=(i*s-e*o)*u,t):null},determinant:function(t){return t[0]*t[3]-t[1]*t[2]},multiply:function(t,r,e){var i=r[0],n=r[1],a=r[2],s=r[3],o=r[4],u=r[5],h=e[0],c=e[1],f=e[2],l=e[3],y=e[4],d=e[5];return t[0]=i*h+a*c,t[1]=n*h+s*c,t[2]=i*f+a*l,t[3]=n*f+s*l,t[4]=i*y+a*d+o,t[5]=n*y+s*d+u,t}};n.mul=n.multiply,n.rotate=function(t,r,e){var i=r[0],n=r[1],a=r[2],s=r[3],o=r[4],u=r[5],h=Math.sin(e),c=Math.cos(e);return t[0]=i*c+a*h,t[1]=n*c+s*h,t[2]=i*-h+a*c,t[3]=n*-h+s*c,t[4]=o,t[5]=u,t},n.scale=function(t,r,e){var i=r[0],n=r[1],a=r[2],s=r[3],o=r[4],u=r[5],h=e[0],c=e[1];return t[0]=i*h,t[1]=n*h,t[2]=a*c,t[3]=s*c,t[4]=o,t[5]=u,t},n.translate=function(t,r,e){var i=r[0],n=r[1],a=r[2],s=r[3],o=r[4],u=r[5],h=e[0],c=e[1];return t[0]=i,t[1]=n,t[2]=a,t[3]=s,t[4]=i*h+a*c+o,t[5]=n*h+s*c+u,t},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},r.A=n},27917:function(t,r,e){var i=e(55043),n={create:function(){var t=new i.$O(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat4:function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t},clone:function(t){var r=new i.$O(9);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r},copy:function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose:function(t,r){if(t===r){var e=r[1],i=r[2],n=r[5];t[1]=r[3],t[2]=r[6],t[3]=e,t[5]=r[7],t[6]=i,t[7]=n}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t},invert:function(t,r){var e=r[0],i=r[1],n=r[2],a=r[3],s=r[4],o=r[5],u=r[6],h=r[7],c=r[8],f=c*s-o*h,l=-c*a+o*u,y=h*a-s*u,d=e*f+i*l+n*y;return d?(d=1/d,t[0]=f*d,t[1]=(-c*i+n*h)*d,t[2]=(o*i-n*s)*d,t[3]=l*d,t[4]=(c*e-n*u)*d,t[5]=(-o*e+n*a)*d,t[6]=y*d,t[7]=(-h*e+i*u)*d,t[8]=(s*e-i*a)*d,t):null},adjoint:function(t,r){var e=r[0],i=r[1],n=r[2],a=r[3],s=r[4],o=r[5],u=r[6],h=r[7],c=r[8];return t[0]=s*c-o*h,t[1]=n*h-i*c,t[2]=i*o-n*s,t[3]=o*u-a*c,t[4]=e*c-n*u,t[5]=n*a-e*o,t[6]=a*h-s*u,t[7]=i*u-e*h,t[8]=e*s-i*a,t},determinant:function(t){var r=t[0],e=t[1],i=t[2],n=t[3],a=t[4],s=t[5],o=t[6],u=t[7],h=t[8];return r*(h*a-s*u)+e*(-h*n+s*o)+i*(u*n-a*o)},multiply:function(t,r,e){var i=r[0],n=r[1],a=r[2],s=r[3],o=r[4],u=r[5],h=r[6],c=r[7],f=r[8],l=e[0],y=e[1],d=e[2],_=e[3],A=e[4],p=e[5],m=e[6],E=e[7],g=e[8];return t[0]=l*i+y*s+d*h,t[1]=l*n+y*o+d*c,t[2]=l*a+y*u+d*f,t[3]=_*i+A*s+p*h,t[4]=_*n+A*o+p*c,t[5]=_*a+A*u+p*f,t[6]=m*i+E*s+g*h,t[7]=m*n+E*o+g*c,t[8]=m*a+E*u+g*f,t}};n.mul=n.multiply,n.translate=function(t,r,e){var i=r[0],n=r[1],a=r[2],s=r[3],o=r[4],u=r[5],h=r[6],c=r[7],f=r[8],l=e[0],y=e[1];return t[0]=i,t[1]=n,t[2]=a,t[3]=s,t[4]=o,t[5]=u,t[6]=l*i+y*s+h,t[7]=l*n+y*o+c,t[8]=l*a+y*u+f,t},n.rotate=function(t,r,e){var i=r[0],n=r[1],a=r[2],s=r[3],o=r[4],u=r[5],h=r[6],c=r[7],f=r[8],l=Math.sin(e),y=Math.cos(e);return t[0]=y*i+l*s,t[1]=y*n+l*o,t[2]=y*a+l*u,t[3]=y*s-l*i,t[4]=y*o-l*n,t[5]=y*u-l*a,t[6]=h,t[7]=c,t[8]=f,t},n.scale=function(t,r,e){var i=e[0],n=e[1];return t[0]=i*r[0],t[1]=i*r[1],t[2]=i*r[2],t[3]=n*r[3],t[4]=n*r[4],t[5]=n*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t},n.fromMat2d=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t},n.fromQuat=function(t,r){var e=r[0],i=r[1],n=r[2],a=r[3],s=e+e,o=i+i,u=n+n,h=e*s,c=i*s,f=i*o,l=n*s,y=n*o,d=n*u,_=a*s,A=a*o,p=a*u;return t[0]=1-f-d,t[3]=c-p,t[6]=l+A,t[1]=c+p,t[4]=1-h-d,t[7]=y-_,t[2]=l-A,t[5]=y+_,t[8]=1-h-f,t},n.normalFromMat4=function(t,r){var e=r[0],i=r[1],n=r[2],a=r[3],s=r[4],o=r[5],u=r[6],h=r[7],c=r[8],f=r[9],l=r[10],y=r[11],d=r[12],_=r[13],A=r[14],p=r[15],m=e*o-i*s,E=e*u-n*s,g=e*h-a*s,v=i*u-n*o,T=i*h-a*o,R=n*h-a*u,S=c*_-f*d,M=c*A-l*d,I=c*p-y*d,N=f*A-l*_,x=f*p-y*_,O=l*p-y*A,L=m*O-E*x+g*N+v*I-T*M+R*S;return L?(L=1/L,t[0]=(o*O-u*x+h*N)*L,t[1]=(u*I-s*O-h*M)*L,t[2]=(s*x-o*I+h*S)*L,t[3]=(n*x-i*O-a*N)*L,t[4]=(e*O-n*I+a*M)*L,t[5]=(i*I-e*x-a*S)*L,t[6]=(_*R-A*T+p*v)*L,t[7]=(A*g-d*R-p*E)*L,t[8]=(d*T-_*g+p*m)*L,t):null},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},r.A=n},87064:function(t,r,e){var i=e(55043),n={create:function(){var t=new i.$O(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},clone:function(t){var r=new i.$O(16);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},copy:function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},transpose:function(t,r){if(t===r){var e=r[1],i=r[2],n=r[3],a=r[6],s=r[7],o=r[11];t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=e,t[6]=r[9],t[7]=r[13],t[8]=i,t[9]=a,t[11]=r[14],t[12]=n,t[13]=s,t[14]=o}else t[0]=r[0],t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=r[1],t[5]=r[5],t[6]=r[9],t[7]=r[13],t[8]=r[2],t[9]=r[6],t[10]=r[10],t[11]=r[14],t[12]=r[3],t[13]=r[7],t[14]=r[11],t[15]=r[15];return t},invert:function(t,r){var e=r[0],i=r[1],n=r[2],a=r[3],s=r[4],o=r[5],u=r[6],h=r[7],c=r[8],f=r[9],l=r[10],y=r[11],d=r[12],_=r[13],A=r[14],p=r[15],m=e*o-i*s,E=e*u-n*s,g=e*h-a*s,v=i*u-n*o,T=i*h-a*o,R=n*h-a*u,S=c*_-f*d,M=c*A-l*d,I=c*p-y*d,N=f*A-l*_,x=f*p-y*_,O=l*p-y*A,L=m*O-E*x+g*N+v*I-T*M+R*S;return L?(L=1/L,t[0]=(o*O-u*x+h*N)*L,t[1]=(n*x-i*O-a*N)*L,t[2]=(_*R-A*T+p*v)*L,t[3]=(l*T-f*R-y*v)*L,t[4]=(u*I-s*O-h*M)*L,t[5]=(e*O-n*I+a*M)*L,t[6]=(A*g-d*R-p*E)*L,t[7]=(c*R-l*g+y*E)*L,t[8]=(s*x-o*I+h*S)*L,t[9]=(i*I-e*x-a*S)*L,t[10]=(d*T-_*g+p*m)*L,t[11]=(f*g-c*T-y*m)*L,t[12]=(o*M-s*N-u*S)*L,t[13]=(e*N-i*M+n*S)*L,t[14]=(_*E-d*v-A*m)*L,t[15]=(c*v-f*E+l*m)*L,t):null},adjoint:function(t,r){var e=r[0],i=r[1],n=r[2],a=r[3],s=r[4],o=r[5],u=r[6],h=r[7],c=r[8],f=r[9],l=r[10],y=r[11],d=r[12],_=r[13],A=r[14],p=r[15];return t[0]=o*(l*p-y*A)-f*(u*p-h*A)+_*(u*y-h*l),t[1]=-(i*(l*p-y*A)-f*(n*p-a*A)+_*(n*y-a*l)),t[2]=i*(u*p-h*A)-o*(n*p-a*A)+_*(n*h-a*u),t[3]=-(i*(u*y-h*l)-o*(n*y-a*l)+f*(n*h-a*u)),t[4]=-(s*(l*p-y*A)-c*(u*p-h*A)+d*(u*y-h*l)),t[5]=e*(l*p-y*A)-c*(n*p-a*A)+d*(n*y-a*l),t[6]=-(e*(u*p-h*A)-s*(n*p-a*A)+d*(n*h-a*u)),t[7]=e*(u*y-h*l)-s*(n*y-a*l)+c*(n*h-a*u),t[8]=s*(f*p-y*_)-c*(o*p-h*_)+d*(o*y-h*f),t[9]=-(e*(f*p-y*_)-c*(i*p-a*_)+d*(i*y-a*f)),t[10]=e*(o*p-h*_)-s*(i*p-a*_)+d*(i*h-a*o),t[11]=-(e*(o*y-h*f)-s*(i*y-a*f)+c*(i*h-a*o)),t[12]=-(s*(f*A-l*_)-c*(o*A-u*_)+d*(o*l-u*f)),t[13]=e*(f*A-l*_)-c*(i*A-n*_)+d*(i*l-n*f),t[14]=-(e*(o*A-u*_)-s*(i*A-n*_)+d*(i*u-n*o)),t[15]=e*(o*l-u*f)-s*(i*l-n*f)+c*(i*u-n*o),t},determinant:function(t){var r=t[0],e=t[1],i=t[2],n=t[3],a=t[4],s=t[5],o=t[6],u=t[7],h=t[8],c=t[9],f=t[10],l=t[11],y=t[12],d=t[13],_=t[14],A=t[15],p=r*s-e*a,m=r*o-i*a,E=r*u-n*a,g=e*o-i*s,v=e*u-n*s,T=i*u-n*o,R=h*d-c*y,S=h*_-f*y,M=h*A-l*y,I=c*_-f*d,N=c*A-l*d,x=f*A-l*_;return p*x-m*N+E*I+g*M-v*S+T*R},multiply:function(t,r,e){var i=r[0],n=r[1],a=r[2],s=r[3],o=r[4],u=r[5],h=r[6],c=r[7],f=r[8],l=r[9],y=r[10],d=r[11],_=r[12],A=r[13],p=r[14],m=r[15],E=e[0],g=e[1],v=e[2],T=e[3];return t[0]=E*i+g*o+v*f+T*_,t[1]=E*n+g*u+v*l+T*A,t[2]=E*a+g*h+v*y+T*p,t[3]=E*s+g*c+v*d+T*m,E=e[4],g=e[5],v=e[6],T=e[7],t[4]=E*i+g*o+v*f+T*_,t[5]=E*n+g*u+v*l+T*A,t[6]=E*a+g*h+v*y+T*p,t[7]=E*s+g*c+v*d+T*m,E=e[8],g=e[9],v=e[10],T=e[11],t[8]=E*i+g*o+v*f+T*_,t[9]=E*n+g*u+v*l+T*A,t[10]=E*a+g*h+v*y+T*p,t[11]=E*s+g*c+v*d+T*m,E=e[12],g=e[13],v=e[14],T=e[15],t[12]=E*i+g*o+v*f+T*_,t[13]=E*n+g*u+v*l+T*A,t[14]=E*a+g*h+v*y+T*p,t[15]=E*s+g*c+v*d+T*m,t},multiplyAffine:function(t,r,e){var i=r[0],n=r[1],a=r[2],s=r[4],o=r[5],u=r[6],h=r[8],c=r[9],f=r[10],l=r[12],y=r[13],d=r[14],_=e[0],A=e[1],p=e[2];return t[0]=_*i+A*s+p*h,t[1]=_*n+A*o+p*c,t[2]=_*a+A*u+p*f,_=e[4],A=e[5],p=e[6],t[4]=_*i+A*s+p*h,t[5]=_*n+A*o+p*c,t[6]=_*a+A*u+p*f,_=e[8],A=e[9],p=e[10],t[8]=_*i+A*s+p*h,t[9]=_*n+A*o+p*c,t[10]=_*a+A*u+p*f,_=e[12],A=e[13],p=e[14],t[12]=_*i+A*s+p*h+l,t[13]=_*n+A*o+p*c+y,t[14]=_*a+A*u+p*f+d,t}};n.mul=n.multiply,n.mulAffine=n.multiplyAffine,n.translate=function(t,r,e){var i,n,a,s,o,u,h,c,f,l,y,d,_=e[0],A=e[1],p=e[2];return r===t?(t[12]=r[0]*_+r[4]*A+r[8]*p+r[12],t[13]=r[1]*_+r[5]*A+r[9]*p+r[13],t[14]=r[2]*_+r[6]*A+r[10]*p+r[14],t[15]=r[3]*_+r[7]*A+r[11]*p+r[15]):(i=r[0],n=r[1],a=r[2],s=r[3],o=r[4],u=r[5],h=r[6],c=r[7],f=r[8],l=r[9],y=r[10],d=r[11],t[0]=i,t[1]=n,t[2]=a,t[3]=s,t[4]=o,t[5]=u,t[6]=h,t[7]=c,t[8]=f,t[9]=l,t[10]=y,t[11]=d,t[12]=i*_+o*A+f*p+r[12],t[13]=n*_+u*A+l*p+r[13],t[14]=a*_+h*A+y*p+r[14],t[15]=s*_+c*A+d*p+r[15]),t},n.scale=function(t,r,e){var i=e[0],n=e[1],a=e[2];return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=r[3]*i,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=r[7]*n,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,t[11]=r[11]*a,t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t},n.rotate=function(t,r,e,n){var a,s,o,u,h,c,f,l,y,d,_,A,p,m,E,g,v,T,R,S,M,I,N,x,O=n[0],L=n[1],P=n[2],b=Math.sqrt(O*O+L*L+P*P);return Math.abs(b)<i.R0?null:(b=1/b,O*=b,L*=b,P*=b,a=Math.sin(e),s=Math.cos(e),o=1-s,u=r[0],h=r[1],c=r[2],f=r[3],l=r[4],y=r[5],d=r[6],_=r[7],A=r[8],p=r[9],m=r[10],E=r[11],g=O*O*o+s,v=L*O*o+P*a,T=P*O*o-L*a,R=O*L*o-P*a,S=L*L*o+s,M=P*L*o+O*a,I=O*P*o+L*a,N=L*P*o-O*a,x=P*P*o+s,t[0]=u*g+l*v+A*T,t[1]=h*g+y*v+p*T,t[2]=c*g+d*v+m*T,t[3]=f*g+_*v+E*T,t[4]=u*R+l*S+A*M,t[5]=h*R+y*S+p*M,t[6]=c*R+d*S+m*M,t[7]=f*R+_*S+E*M,t[8]=u*I+l*N+A*x,t[9]=h*I+y*N+p*x,t[10]=c*I+d*N+m*x,t[11]=f*I+_*N+E*x,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)},n.rotateX=function(t,r,e){var i=Math.sin(e),n=Math.cos(e),a=r[4],s=r[5],o=r[6],u=r[7],h=r[8],c=r[9],f=r[10],l=r[11];return r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[4]=a*n+h*i,t[5]=s*n+c*i,t[6]=o*n+f*i,t[7]=u*n+l*i,t[8]=h*n-a*i,t[9]=c*n-s*i,t[10]=f*n-o*i,t[11]=l*n-u*i,t},n.rotateY=function(t,r,e){var i=Math.sin(e),n=Math.cos(e),a=r[0],s=r[1],o=r[2],u=r[3],h=r[8],c=r[9],f=r[10],l=r[11];return r!==t&&(t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=a*n-h*i,t[1]=s*n-c*i,t[2]=o*n-f*i,t[3]=u*n-l*i,t[8]=a*i+h*n,t[9]=s*i+c*n,t[10]=o*i+f*n,t[11]=u*i+l*n,t},n.rotateZ=function(t,r,e){var i=Math.sin(e),n=Math.cos(e),a=r[0],s=r[1],o=r[2],u=r[3],h=r[4],c=r[5],f=r[6],l=r[7];return r!==t&&(t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=a*n+h*i,t[1]=s*n+c*i,t[2]=o*n+f*i,t[3]=u*n+l*i,t[4]=h*n-a*i,t[5]=c*n-s*i,t[6]=f*n-o*i,t[7]=l*n-u*i,t},n.fromRotationTranslation=function(t,r,e){var i=r[0],n=r[1],a=r[2],s=r[3],o=i+i,u=n+n,h=a+a,c=i*o,f=i*u,l=i*h,y=n*u,d=n*h,_=a*h,A=s*o,p=s*u,m=s*h;return t[0]=1-(y+_),t[1]=f+m,t[2]=l-p,t[3]=0,t[4]=f-m,t[5]=1-(c+_),t[6]=d+A,t[7]=0,t[8]=l+p,t[9]=d-A,t[10]=1-(c+y),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},n.fromQuat=function(t,r){var e=r[0],i=r[1],n=r[2],a=r[3],s=e+e,o=i+i,u=n+n,h=e*s,c=i*s,f=i*o,l=n*s,y=n*o,d=n*u,_=a*s,A=a*o,p=a*u;return t[0]=1-f-d,t[1]=c+p,t[2]=l-A,t[3]=0,t[4]=c-p,t[5]=1-h-d,t[6]=y+_,t[7]=0,t[8]=l+A,t[9]=y-_,t[10]=1-h-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.frustum=function(t,r,e,i,n,a,s){var o=1/(e-r),u=1/(n-i),h=1/(a-s);return t[0]=2*a*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(e+r)*o,t[9]=(n+i)*u,t[10]=(s+a)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*a*2*h,t[15]=0,t},n.perspective=function(t,r,e,i,n){var a=1/Math.tan(r/2),s=1/(i-n);return t[0]=a/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+i)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*i*s,t[15]=0,t},n.ortho=function(t,r,e,i,n,a,s){var o=1/(r-e),u=1/(i-n),h=1/(a-s);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(r+e)*o,t[13]=(n+i)*u,t[14]=(s+a)*h,t[15]=1,t},n.lookAt=function(t,r,e,a){var s,o,u,h,c,f,l,y,d,_,A=r[0],p=r[1],m=r[2],E=a[0],g=a[1],v=a[2],T=e[0],R=e[1],S=e[2];return Math.abs(A-T)<i.R0&&Math.abs(p-R)<i.R0&&Math.abs(m-S)<i.R0?n.identity(t):(l=A-T,y=p-R,d=m-S,_=1/Math.sqrt(l*l+y*y+d*d),l*=_,y*=_,d*=_,s=g*d-v*y,o=v*l-E*d,u=E*y-g*l,_=Math.sqrt(s*s+o*o+u*u),_?(_=1/_,s*=_,o*=_,u*=_):(s=0,o=0,u=0),h=y*u-d*o,c=d*s-l*u,f=l*o-y*s,_=Math.sqrt(h*h+c*c+f*f),_?(_=1/_,h*=_,c*=_,f*=_):(h=0,c=0,f=0),t[0]=s,t[1]=h,t[2]=l,t[3]=0,t[4]=o,t[5]=c,t[6]=y,t[7]=0,t[8]=u,t[9]=f,t[10]=d,t[11]=0,t[12]=-(s*A+o*p+u*m),t[13]=-(h*A+c*p+f*m),t[14]=-(l*A+y*p+d*m),t[15]=1,t)},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},r.A=n},77129:function(t,r,e){var i=e(55043),n=e(33301),a=e(16448),s=e(27917),o={create:function(){var t=new i.$O(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}};o.rotationTo=function(){var t=n.A.create(),r=n.A.fromValues(1,0,0),e=n.A.fromValues(0,1,0);return function(i,a,s){var u=n.A.dot(a,s);return u<-.999999?(n.A.cross(t,r,a),n.A.length(t)<1e-6&&n.A.cross(t,e,a),n.A.normalize(t,t),o.setAxisAngle(i,t,Math.PI),i):u>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(n.A.cross(t,a,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+u,o.normalize(i,i))}}(),o.setAxes=function(){var t=s.A.create();return function(r,e,i,n){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],o.normalize(r,o.fromMat3(r,t))}}(),o.clone=a.A.clone,o.fromValues=a.A.fromValues,o.copy=a.A.copy,o.set=a.A.set,o.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},o.setAxisAngle=function(t,r,e){e*=.5;var i=Math.sin(e);return t[0]=i*r[0],t[1]=i*r[1],t[2]=i*r[2],t[3]=Math.cos(e),t},o.add=a.A.add,o.multiply=function(t,r,e){var i=r[0],n=r[1],a=r[2],s=r[3],o=e[0],u=e[1],h=e[2],c=e[3];return t[0]=i*c+s*o+n*h-a*u,t[1]=n*c+s*u+a*o-i*h,t[2]=a*c+s*h+i*u-n*o,t[3]=s*c-i*o-n*u-a*h,t},o.mul=o.multiply,o.scale=a.A.scale,o.rotateX=function(t,r,e){e*=.5;var i=r[0],n=r[1],a=r[2],s=r[3],o=Math.sin(e),u=Math.cos(e);return t[0]=i*u+s*o,t[1]=n*u+a*o,t[2]=a*u-n*o,t[3]=s*u-i*o,t},o.rotateY=function(t,r,e){e*=.5;var i=r[0],n=r[1],a=r[2],s=r[3],o=Math.sin(e),u=Math.cos(e);return t[0]=i*u-a*o,t[1]=n*u+s*o,t[2]=a*u+i*o,t[3]=s*u-n*o,t},o.rotateZ=function(t,r,e){e*=.5;var i=r[0],n=r[1],a=r[2],s=r[3],o=Math.sin(e),u=Math.cos(e);return t[0]=i*u+n*o,t[1]=n*u-i*o,t[2]=a*u+s*o,t[3]=s*u-a*o,t},o.calculateW=function(t,r){var e=r[0],i=r[1],n=r[2];return t[0]=e,t[1]=i,t[2]=n,t[3]=Math.sqrt(Math.abs(1-e*e-i*i-n*n)),t},o.dot=a.A.dot,o.lerp=a.A.lerp,o.slerp=function(t,r,e,i){var n,a,s,o,u,h=r[0],c=r[1],f=r[2],l=r[3],y=e[0],d=e[1],_=e[2],A=e[3];return a=h*y+c*d+f*_+l*A,a<0&&(a=-a,y=-y,d=-d,_=-_,A=-A),1-a>1e-6?(n=Math.acos(a),s=Math.sin(n),o=Math.sin((1-i)*n)/s,u=Math.sin(i*n)/s):(o=1-i,u=i),t[0]=o*h+u*y,t[1]=o*c+u*d,t[2]=o*f+u*_,t[3]=o*l+u*A,t},o.invert=function(t,r){var e=r[0],i=r[1],n=r[2],a=r[3],s=e*e+i*i+n*n+a*a,o=s?1/s:0;return t[0]=-e*o,t[1]=-i*o,t[2]=-n*o,t[3]=a*o,t},o.conjugate=function(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t},o.length=a.A.length,o.len=o.length,o.squaredLength=a.A.squaredLength,o.sqrLen=o.squaredLength,o.normalize=a.A.normalize,o.fromMat3=function(t,r){var e,i=r[0]+r[4]+r[8];if(i>0)e=Math.sqrt(i+1),t[3]=.5*e,e=.5/e,t[0]=(r[5]-r[7])*e,t[1]=(r[6]-r[2])*e,t[2]=(r[1]-r[3])*e;else{var n=0;r[4]>r[0]&&(n=1),r[8]>r[3*n+n]&&(n=2);var a=(n+1)%3,s=(n+2)%3;e=Math.sqrt(r[3*n+n]-r[3*a+a]-r[3*s+s]+1),t[n]=.5*e,e=.5/e,t[3]=(r[3*a+s]-r[3*s+a])*e,t[a]=(r[3*a+n]+r[3*n+a])*e,t[s]=(r[3*s+n]+r[3*n+s])*e}return t},r.A=o},98710:function(t,r,e){var i=e(55043),n={create:function(){var t=new i.$O(2);return t[0]=0,t[1]=0,t},clone:function(t){var r=new i.$O(2);return r[0]=t[0],r[1]=t[1],r},fromValues:function(t,r){var e=new i.$O(2);return e[0]=t,e[1]=r,e},copy:function(t,r){return t[0]=r[0],t[1]=r[1],t},set:function(t,r,e){return t[0]=r,t[1]=e,t},add:function(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t},subtract:function(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t}};n.sub=n.subtract,n.multiply=function(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t},n.mul=n.multiply,n.divide=function(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t},n.div=n.divide,n.min=function(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t},n.max=function(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t},n.scale=function(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t},n.scaleAndAdd=function(t,r,e,i){return t[0]=r[0]+e[0]*i,t[1]=r[1]+e[1]*i,t},n.distance=function(t,r){var e=r[0]-t[0],i=r[1]-t[1];return Math.sqrt(e*e+i*i)},n.dist=n.distance,n.squaredDistance=function(t,r){var e=r[0]-t[0],i=r[1]-t[1];return e*e+i*i},n.sqrDist=n.squaredDistance,n.length=function(t){var r=t[0],e=t[1];return Math.sqrt(r*r+e*e)},n.len=n.length,n.squaredLength=function(t){var r=t[0],e=t[1];return r*r+e*e},n.sqrLen=n.squaredLength,n.negate=function(t,r){return t[0]=-r[0],t[1]=-r[1],t},n.inverse=function(t,r){return t[0]=1/r[0],t[1]=1/r[1],t},n.normalize=function(t,r){var e=r[0],i=r[1],n=e*e+i*i;return n>0&&(n=1/Math.sqrt(n),t[0]=r[0]*n,t[1]=r[1]*n),t},n.dot=function(t,r){return t[0]*r[0]+t[1]*r[1]},n.cross=function(t,r,e){var i=r[0]*e[1]-r[1]*e[0];return t[0]=t[1]=0,t[2]=i,t},n.lerp=function(t,r,e,i){var n=r[0],a=r[1];return t[0]=n+i*(e[0]-n),t[1]=a+i*(e[1]-a),t},n.random=function(t,r){r=r||1;var e=2*GLMAT_RANDOM()*Math.PI;return t[0]=Math.cos(e)*r,t[1]=Math.sin(e)*r,t},n.transformMat2=function(t,r,e){var i=r[0],n=r[1];return t[0]=e[0]*i+e[2]*n,t[1]=e[1]*i+e[3]*n,t},n.transformMat2d=function(t,r,e){var i=r[0],n=r[1];return t[0]=e[0]*i+e[2]*n+e[4],t[1]=e[1]*i+e[3]*n+e[5],t},n.transformMat3=function(t,r,e){var i=r[0],n=r[1];return t[0]=e[0]*i+e[3]*n+e[6],t[1]=e[1]*i+e[4]*n+e[7],t},n.transformMat4=function(t,r,e){var i=r[0],n=r[1];return t[0]=e[0]*i+e[4]*n+e[12],t[1]=e[1]*i+e[5]*n+e[13],t},n.forEach=function(){var t=n.create();return function(r,e,i,n,a,s){var o,u;for(e||(e=2),i||(i=0),u=n?Math.min(n*e+i,r.length):r.length,o=i;o<u;o+=e)t[0]=r[o],t[1]=r[o+1],a(t,t,s),r[o]=t[0],r[o+1]=t[1];return r}}(),r.A=n},33301:function(t,r,e){var i=e(55043),n={create:function(){var t=new i.$O(3);return t[0]=0,t[1]=0,t[2]=0,t},clone:function(t){var r=new i.$O(3);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r},fromValues:function(t,r,e){var n=new i.$O(3);return n[0]=t,n[1]=r,n[2]=e,n},copy:function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t},set:function(t,r,e,i){return t[0]=r,t[1]=e,t[2]=i,t},add:function(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t},subtract:function(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}};n.sub=n.subtract,n.multiply=function(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t},n.mul=n.multiply,n.divide=function(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t},n.div=n.divide,n.min=function(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t},n.max=function(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t},n.scale=function(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t},n.scaleAndAdd=function(t,r,e,i){return t[0]=r[0]+e[0]*i,t[1]=r[1]+e[1]*i,t[2]=r[2]+e[2]*i,t},n.distance=function(t,r){var e=r[0]-t[0],i=r[1]-t[1],n=r[2]-t[2];return Math.sqrt(e*e+i*i+n*n)},n.dist=n.distance,n.squaredDistance=function(t,r){var e=r[0]-t[0],i=r[1]-t[1],n=r[2]-t[2];return e*e+i*i+n*n},n.sqrDist=n.squaredDistance,n.length=function(t){var r=t[0],e=t[1],i=t[2];return Math.sqrt(r*r+e*e+i*i)},n.len=n.length,n.squaredLength=function(t){var r=t[0],e=t[1],i=t[2];return r*r+e*e+i*i},n.sqrLen=n.squaredLength,n.negate=function(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t},n.inverse=function(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t},n.normalize=function(t,r){var e=r[0],i=r[1],n=r[2],a=e*e+i*i+n*n;return a>0&&(a=1/Math.sqrt(a),t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a),t},n.dot=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]},n.cross=function(t,r,e){var i=r[0],n=r[1],a=r[2],s=e[0],o=e[1],u=e[2];return t[0]=n*u-a*o,t[1]=a*s-i*u,t[2]=i*o-n*s,t},n.lerp=function(t,r,e,i){var n=r[0],a=r[1],s=r[2];return t[0]=n+i*(e[0]-n),t[1]=a+i*(e[1]-a),t[2]=s+i*(e[2]-s),t},n.random=function(t,r){r=r||1;var e=2*(0,i.mn)()*Math.PI,n=2*(0,i.mn)()-1,a=Math.sqrt(1-n*n)*r;return t[0]=Math.cos(e)*a,t[1]=Math.sin(e)*a,t[2]=n*r,t},n.transformMat4=function(t,r,e){var i=r[0],n=r[1],a=r[2],s=e[3]*i+e[7]*n+e[11]*a+e[15];return s=s||1,t[0]=(e[0]*i+e[4]*n+e[8]*a+e[12])/s,t[1]=(e[1]*i+e[5]*n+e[9]*a+e[13])/s,t[2]=(e[2]*i+e[6]*n+e[10]*a+e[14])/s,t},n.transformMat3=function(t,r,e){var i=r[0],n=r[1],a=r[2];return t[0]=i*e[0]+n*e[3]+a*e[6],t[1]=i*e[1]+n*e[4]+a*e[7],t[2]=i*e[2]+n*e[5]+a*e[8],t},n.transformQuat=function(t,r,e){var i=r[0],n=r[1],a=r[2],s=e[0],o=e[1],u=e[2],h=e[3],c=h*i+o*a-u*n,f=h*n+u*i-s*a,l=h*a+s*n-o*i,y=-s*i-o*n-u*a;return t[0]=c*h+y*-s+f*-u-l*-o,t[1]=f*h+y*-o+l*-s-c*-u,t[2]=l*h+y*-u+c*-o-f*-s,t},n.rotateX=function(t,r,e,i){var n=[],a=[];return n[0]=r[0]-e[0],n[1]=r[1]-e[1],n[2]=r[2]-e[2],a[0]=n[0],a[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),a[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t},n.rotateY=function(t,r,e,i){var n=[],a=[];return n[0]=r[0]-e[0],n[1]=r[1]-e[1],n[2]=r[2]-e[2],a[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),a[1]=n[1],a[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t},n.rotateZ=function(t,r,e,i){var n=[],a=[];return n[0]=r[0]-e[0],n[1]=r[1]-e[1],n[2]=r[2]-e[2],a[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),a[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),a[2]=n[2],t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t},n.forEach=function(){var t=n.create();return function(r,e,i,n,a,s){var o,u;for(e||(e=3),i||(i=0),u=n?Math.min(n*e+i,r.length):r.length,o=i;o<u;o+=e)t[0]=r[o],t[1]=r[o+1],t[2]=r[o+2],a(t,t,s),r[o]=t[0],r[o+1]=t[1],r[o+2]=t[2];return r}}(),n.angle=function(t,r){var e=n.fromValues(t[0],t[1],t[2]),i=n.fromValues(r[0],r[1],r[2]);n.normalize(e,e),n.normalize(i,i);var a=n.dot(e,i);return a>1?0:Math.acos(a)},r.A=n},16448:function(t,r,e){var i=e(55043),n={create:function(){var t=new i.$O(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},clone:function(t){var r=new i.$O(4);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r},fromValues:function(t,r,e,n){var a=new i.$O(4);return a[0]=t,a[1]=r,a[2]=e,a[3]=n,a},copy:function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t},set:function(t,r,e,i,n){return t[0]=r,t[1]=e,t[2]=i,t[3]=n,t},add:function(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t},subtract:function(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}};n.sub=n.subtract,n.multiply=function(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t[3]=r[3]*e[3],t},n.mul=n.multiply,n.divide=function(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t[3]=r[3]/e[3],t},n.div=n.divide,n.min=function(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t[3]=Math.min(r[3],e[3]),t},n.max=function(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t[3]=Math.max(r[3],e[3]),t},n.scale=function(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t},n.scaleAndAdd=function(t,r,e,i){return t[0]=r[0]+e[0]*i,t[1]=r[1]+e[1]*i,t[2]=r[2]+e[2]*i,t[3]=r[3]+e[3]*i,t},n.distance=function(t,r){var e=r[0]-t[0],i=r[1]-t[1],n=r[2]-t[2],a=r[3]-t[3];return Math.sqrt(e*e+i*i+n*n+a*a)},n.dist=n.distance,n.squaredDistance=function(t,r){var e=r[0]-t[0],i=r[1]-t[1],n=r[2]-t[2],a=r[3]-t[3];return e*e+i*i+n*n+a*a},n.sqrDist=n.squaredDistance,n.length=function(t){var r=t[0],e=t[1],i=t[2],n=t[3];return Math.sqrt(r*r+e*e+i*i+n*n)},n.len=n.length,n.squaredLength=function(t){var r=t[0],e=t[1],i=t[2],n=t[3];return r*r+e*e+i*i+n*n},n.sqrLen=n.squaredLength,n.negate=function(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t},n.inverse=function(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t[3]=1/r[3],t},n.normalize=function(t,r){var e=r[0],i=r[1],n=r[2],a=r[3],s=e*e+i*i+n*n+a*a;return s>0&&(s=1/Math.sqrt(s),t[0]=r[0]*s,t[1]=r[1]*s,t[2]=r[2]*s,t[3]=r[3]*s),t},n.dot=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]},n.lerp=function(t,r,e,i){var n=r[0],a=r[1],s=r[2],o=r[3];return t[0]=n+i*(e[0]-n),t[1]=a+i*(e[1]-a),t[2]=s+i*(e[2]-s),t[3]=o+i*(e[3]-o),t},n.random=function(t,r){return r=r||1,t[0]=(0,i.mn)(),t[1]=(0,i.mn)(),t[2]=(0,i.mn)(),t[3]=(0,i.mn)(),n.normalize(t,t),n.scale(t,t,r),t},n.transformMat4=function(t,r,e){var i=r[0],n=r[1],a=r[2],s=r[3];return t[0]=e[0]*i+e[4]*n+e[8]*a+e[12]*s,t[1]=e[1]*i+e[5]*n+e[9]*a+e[13]*s,t[2]=e[2]*i+e[6]*n+e[10]*a+e[14]*s,t[3]=e[3]*i+e[7]*n+e[11]*a+e[15]*s,t},n.transformQuat=function(t,r,e){var i=r[0],n=r[1],a=r[2],s=e[0],o=e[1],u=e[2],h=e[3],c=h*i+o*a-u*n,f=h*n+u*i-s*a,l=h*a+s*n-o*i,y=-s*i-o*n-u*a;return t[0]=c*h+y*-s+f*-u-l*-o,t[1]=f*h+y*-o+l*-s-c*-u,t[2]=l*h+y*-u+c*-o-f*-s,t},n.forEach=function(){var t=n.create();return function(r,e,i,n,a,s){var o,u;for(e||(e=4),i||(i=0),u=n?Math.min(n*e+i,r.length):r.length,o=i;o<u;o+=e)t[0]=r[o],t[1]=r[o+1],t[2]=r[o+2],t[3]=r[o+3],a(t,t,s),r[o]=t[0],r[o+1]=t[1],r[o+2]=t[2],r[o+3]=t[3];return r}}(),r.A=n},31934:function(t,r,e){var i=e(94809),n=i.A.extend({castShadow:!1},{type:"AMBIENT_LIGHT",uniformTemplates:{ambientLightColor:{type:"3f",value:function(t){var r=t.color,e=t.intensity;return[r[0]*e,r[1]*e,r[2]*e]}}}});r.A=n},1737:function(t,r,e){var i=e(94809),n=e(74397),a=i.A.extend({cubemap:null,castShadow:!1,_normalDistribution:null,_brdfLookup:null},{type:"AMBIENT_CUBEMAP_LIGHT",prefilter:function(t,r){if(t.getGLExtension("EXT_shader_texture_lod")){this._brdfLookup||(this._normalDistribution=n.A.generateNormalDistribution(),this._brdfLookup=n.A.integrateBRDF(t,this._normalDistribution));var e=this.cubemap;if(!e.__prefiltered){var i=n.A.prefilterEnvironmentMap(t,e,{encodeRGBM:!0,width:r,height:r},this._normalDistribution,this._brdfLookup);this.cubemap=i.environmentMap,this.cubemap.__prefiltered=!0,e.dispose(t)}}else console.warn("Device not support textureCubeLodEXT")},getBRDFLookup:function(){return this._brdfLookup},uniformTemplates:{ambientCubemapLightColor:{type:"3f",value:function(t){var r=t.color,e=t.intensity;return[r[0]*e,r[1]*e,r[2]*e]}},ambientCubemapLightCubemap:{type:"t",value:function(t){return t.cubemap}},ambientCubemapLightBRDFLookup:{type:"t",value:function(t){return t._brdfLookup}}}});r.A=a},8241:function(t,r,e){var i=e(94809),n=e(2739),a=i.A.extend({castShadow:!1,coefficients:[]},(function(){this._coefficientsTmpArr=new n.A.Float32Array(27)}),{type:"AMBIENT_SH_LIGHT",uniformTemplates:{ambientSHLightColor:{type:"3f",value:function(t){var r=t.color,e=t.intensity;return[r[0]*e,r[1]*e,r[2]*e]}},ambientSHLightCoefficients:{type:"3f",value:function(t){for(var r=t._coefficientsTmpArr,e=0;e<t.coefficients.length;e++)r[e]=t.coefficients[e];return r}}}});r.A=a},91266:function(t,r,e){var i=e(94809),n=e(504),a=i.A.extend({shadowBias:.001,shadowSlopeScale:2,shadowCascade:1,cascadeSplitLogFactor:.2},{type:"DIRECTIONAL_LIGHT",uniformTemplates:{directionalLightDirection:{type:"3f",value:function(t){return t.__dir=t.__dir||new n.A,t.__dir.copy(t.worldTransform.z).normalize().negate().array}},directionalLightColor:{type:"3f",value:function(t){var r=t.color,e=t.intensity;return[r[0]*e,r[1]*e,r[2]*e]}}},clone:function(){var t=i.A.prototype.clone.call(this);return t.shadowBias=this.shadowBias,t.shadowSlopeScale=this.shadowSlopeScale,t}});r.A=a},81248:function(t,r,e){var i=e(94809),n=i.A.extend({range:100,castShadow:!1},{type:"POINT_LIGHT",uniformTemplates:{pointLightPosition:{type:"3f",value:function(t){return t.getWorldPosition().array}},pointLightRange:{type:"1f",value:function(t){return t.range}},pointLightColor:{type:"3f",value:function(t){var r=t.color,e=t.intensity;return[r[0]*e,r[1]*e,r[2]*e]}}},clone:function(){var t=i.A.prototype.clone.call(this);return t.range=this.range,t}});r.A=n},20624:function(t,r,e){var i=e(94809),n=e(504),a=i.A.extend({range:20,umbraAngle:30,penumbraAngle:45,falloffFactor:2,shadowBias:.001,shadowSlopeScale:2},{type:"SPOT_LIGHT",uniformTemplates:{spotLightPosition:{type:"3f",value:function(t){return t.getWorldPosition().array}},spotLightRange:{type:"1f",value:function(t){return t.range}},spotLightUmbraAngleCosine:{type:"1f",value:function(t){return Math.cos(t.umbraAngle*Math.PI/180)}},spotLightPenumbraAngleCosine:{type:"1f",value:function(t){return Math.cos(t.penumbraAngle*Math.PI/180)}},spotLightFalloffFactor:{type:"1f",value:function(t){return t.falloffFactor}},spotLightDirection:{type:"3f",value:function(t){return t.__dir=t.__dir||new n.A,t.__dir.copy(t.worldTransform.z).negate().array}},spotLightColor:{type:"3f",value:function(t){var r=t.color,e=t.intensity;return[r[0]*e,r[1]*e,r[2]*e]}}},clone:function(){var t=i.A.prototype.clone.call(this);return t.range=this.range,t.umbraAngle=this.umbraAngle,t.penumbraAngle=this.penumbraAngle,t.falloffFactor=this.falloffFactor,t.shadowBias=this.shadowBias,t.shadowSlopeScale=this.shadowSlopeScale,t}});r.A=a},47797:function(t,r,e){var i=e(504),n=e(33301),a=n.A.set,s=n.A.copy,o=function(t,r){this.min=t||new i.A(1/0,1/0,1/0),this.max=r||new i.A(-1/0,-1/0,-1/0),this.vertices=null};o.prototype={constructor:o,updateFromVertices:function(t){if(t.length>0){var r=this.min,e=this.max,i=r.array,n=e.array;s(i,t[0]),s(n,t[0]);for(var a=1;a<t.length;a++){var o=t[a];o[0]<i[0]&&(i[0]=o[0]),o[1]<i[1]&&(i[1]=o[1]),o[2]<i[2]&&(i[2]=o[2]),o[0]>n[0]&&(n[0]=o[0]),o[1]>n[1]&&(n[1]=o[1]),o[2]>n[2]&&(n[2]=o[2])}r._dirty=!0,e._dirty=!0}},union:function(t){var r=this.min,e=this.max;return n.A.min(r.array,r.array,t.min.array),n.A.max(e.array,e.array,t.max.array),r._dirty=!0,e._dirty=!0,this},intersection:function(t){var r=this.min,e=this.max;return n.A.max(r.array,r.array,t.min.array),n.A.min(e.array,e.array,t.max.array),r._dirty=!0,e._dirty=!0,this},intersectBoundingBox:function(t){var r=this.min.array,e=this.max.array,i=t.min.array,n=t.max.array;return!(r[0]>n[0]||r[1]>n[1]||r[2]>n[2]||e[0]<i[0]||e[1]<i[1]||e[2]<i[2])},containBoundingBox:function(t){var r=this.min.array,e=this.max.array,i=t.min.array,n=t.max.array;return r[0]<=i[0]&&r[1]<=i[1]&&r[2]<=i[2]&&e[0]>=n[0]&&e[1]>=n[1]&&e[2]>=n[2]},containPoint:function(t){var r=this.min.array,e=this.max.array,i=t.array;return r[0]<=i[0]&&r[1]<=i[1]&&r[2]<=i[2]&&e[0]>=i[0]&&e[1]>=i[1]&&e[2]>=i[2]},isFinite:function(){var t=this.min.array,r=this.max.array;return isFinite(t[0])&&isFinite(t[1])&&isFinite(t[2])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(r[2])},applyTransform:function(t){this.transformFrom(this,t)},transformFrom:function(){var t=n.A.create(),r=n.A.create(),e=n.A.create(),i=n.A.create(),a=n.A.create(),s=n.A.create();return function(n,o){var u=n.min.array,h=n.max.array,c=o.array;return t[0]=c[0]*u[0],t[1]=c[1]*u[0],t[2]=c[2]*u[0],r[0]=c[0]*h[0],r[1]=c[1]*h[0],r[2]=c[2]*h[0],e[0]=c[4]*u[1],e[1]=c[5]*u[1],e[2]=c[6]*u[1],i[0]=c[4]*h[1],i[1]=c[5]*h[1],i[2]=c[6]*h[1],a[0]=c[8]*u[2],a[1]=c[9]*u[2],a[2]=c[10]*u[2],s[0]=c[8]*h[2],s[1]=c[9]*h[2],s[2]=c[10]*h[2],u=this.min.array,h=this.max.array,u[0]=Math.min(t[0],r[0])+Math.min(e[0],i[0])+Math.min(a[0],s[0])+c[12],u[1]=Math.min(t[1],r[1])+Math.min(e[1],i[1])+Math.min(a[1],s[1])+c[13],u[2]=Math.min(t[2],r[2])+Math.min(e[2],i[2])+Math.min(a[2],s[2])+c[14],h[0]=Math.max(t[0],r[0])+Math.max(e[0],i[0])+Math.max(a[0],s[0])+c[12],h[1]=Math.max(t[1],r[1])+Math.max(e[1],i[1])+Math.max(a[1],s[1])+c[13],h[2]=Math.max(t[2],r[2])+Math.max(e[2],i[2])+Math.max(a[2],s[2])+c[14],this.min._dirty=!0,this.max._dirty=!0,this}}(),applyProjection:function(t){var r=this.min.array,e=this.max.array,i=t.array,n=r[0],a=r[1],s=r[2],o=e[0],u=e[1],h=r[2],c=e[0],f=e[1],l=e[2];if(1===i[15])r[0]=i[0]*n+i[12],r[1]=i[5]*a+i[13],e[2]=i[10]*s+i[14],e[0]=i[0]*c+i[12],e[1]=i[5]*f+i[13],r[2]=i[10]*l+i[14];else{var y=-1/s;r[0]=i[0]*n*y,r[1]=i[5]*a*y,e[2]=(i[10]*s+i[14])*y,y=-1/h,e[0]=i[0]*o*y,e[1]=i[5]*u*y,y=-1/l,r[2]=(i[10]*l+i[14])*y}return this.min._dirty=!0,this.max._dirty=!0,this},updateVertices:function(){var t=this.vertices;if(!t){t=[];for(var r=0;r<8;r++)t[r]=n.A.fromValues(0,0,0);this.vertices=t}var e=this.min.array,i=this.max.array;return a(t[0],e[0],e[1],e[2]),a(t[1],e[0],i[1],e[2]),a(t[2],i[0],e[1],e[2]),a(t[3],i[0],i[1],e[2]),a(t[4],e[0],e[1],i[2]),a(t[5],e[0],i[1],i[2]),a(t[6],i[0],e[1],i[2]),a(t[7],i[0],i[1],i[2]),this},copy:function(t){var r=this.min,e=this.max;return s(r.array,t.min.array),s(e.array,t.max.array),r._dirty=!0,e._dirty=!0,this},clone:function(){var t=new o;return t.copy(this),t}},r.A=o},78174:function(t,r,e){e(44114);var i=e(47797),n=e(92830),a=e(33301),s=a.A.set,o=a.A.copy,u=a.A.transformMat4,h=Math.min,c=Math.max,f=function(){this.planes=[];for(var t=0;t<6;t++)this.planes.push(new n.A);this.boundingBox=new i.A,this.vertices=[];for(t=0;t<8;t++)this.vertices[t]=a.A.fromValues(0,0,0)};f.prototype={setFromProjection:function(t){var r=this.planes,e=t.array,i=e[0],n=e[1],a=e[2],o=e[3],u=e[4],h=e[5],c=e[6],f=e[7],l=e[8],y=e[9],d=e[10],_=e[11],A=e[12],p=e[13],m=e[14],E=e[15];s(r[0].normal.array,o-i,f-u,_-l),r[0].distance=-(E-A),r[0].normalize(),s(r[1].normal.array,o+i,f+u,_+l),r[1].distance=-(E+A),r[1].normalize(),s(r[2].normal.array,o+n,f+h,_+y),r[2].distance=-(E+p),r[2].normalize(),s(r[3].normal.array,o-n,f-h,_-y),r[3].distance=-(E-p),r[3].normalize(),s(r[4].normal.array,o-a,f-c,_-d),r[4].distance=-(E-m),r[4].normalize(),s(r[5].normal.array,o+a,f+c,_+d),r[5].distance=-(E+m),r[5].normalize();var g=this.boundingBox,v=this.vertices;if(0===E){var T=h/i,R=-m/(d-1),S=-m/(d+1),M=-S/h,I=-R/h;g.min.set(-M*T,-M,S),g.max.set(M*T,M,R),s(v[0],-M*T,-M,S),s(v[1],-M*T,M,S),s(v[2],M*T,-M,S),s(v[3],M*T,M,S),s(v[4],-I*T,-I,R),s(v[5],-I*T,I,R),s(v[6],I*T,-I,R),s(v[7],I*T,I,R)}else{var N=(-1-A)/i,x=(1-A)/i,O=(1-p)/h,L=(-1-p)/h,P=(-1-m)/d,b=(1-m)/d;g.min.set(Math.min(N,x),Math.min(L,O),Math.min(b,P)),g.max.set(Math.max(x,N),Math.max(O,L),Math.max(P,b));var w=g.min.array,C=g.max.array;s(v[0],w[0],w[1],w[2]),s(v[1],w[0],C[1],w[2]),s(v[2],C[0],w[1],w[2]),s(v[3],C[0],C[1],w[2]),s(v[4],w[0],w[1],C[2]),s(v[5],w[0],C[1],C[2]),s(v[6],C[0],w[1],C[2]),s(v[7],C[0],C[1],C[2])}},getTransformedBoundingBox:function(){var t=a.A.create();return function(r,e){var i=this.vertices,n=e.array,a=r.min,s=r.max,f=a.array,l=s.array,y=i[0];u(t,y,n),o(f,t),o(l,t);for(var d=1;d<8;d++)y=i[d],u(t,y,n),f[0]=h(t[0],f[0]),f[1]=h(t[1],f[1]),f[2]=h(t[2],f[2]),l[0]=c(t[0],l[0]),l[1]=c(t[1],l[1]),l[2]=c(t[2],l[2]);return a._dirty=!0,s._dirty=!0,r}}()},r.A=f},67277:function(t,r,e){var i=e(83566),n=function(){this.array=i.A.create(),this._dirty=!0};n.prototype={constructor:n,setArray:function(t){for(var r=0;r<this.array.length;r++)this.array[r]=t[r];return this._dirty=!0,this},clone:function(){return(new n).copy(this)},copy:function(t){return i.A.copy(this.array,t.array),this._dirty=!0,this},adjoint:function(){return i.A.adjoint(this.array,this.array),this._dirty=!0,this},determinant:function(){return i.A.determinant(this.array)},identity:function(){return i.A.identity(this.array),this._dirty=!0,this},invert:function(){return i.A.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return i.A.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return i.A.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return i.A.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return i.A.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return i.A.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return i.A.scale(this.array,this.array,t.array),this._dirty=!0,this},transpose:function(){return i.A.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},n.adjoint=function(t,r){return i.A.adjoint(t.array,r.array),t._dirty=!0,t},n.copy=function(t,r){return i.A.copy(t.array,r.array),t._dirty=!0,t},n.determinant=function(t){return i.A.determinant(t.array)},n.identity=function(t){return i.A.identity(t.array),t._dirty=!0,t},n.invert=function(t,r){return i.A.invert(t.array,r.array),t._dirty=!0,t},n.mul=function(t,r,e){return i.A.mul(t.array,r.array,e.array),t._dirty=!0,t},n.multiply=n.mul,n.rotate=function(t,r,e){return i.A.rotate(t.array,r.array,e),t._dirty=!0,t},n.scale=function(t,r,e){return i.A.scale(t.array,r.array,e.array),t._dirty=!0,t},n.transpose=function(t,r){return i.A.transpose(t.array,r.array),t._dirty=!0,t},r.A=n},90573:function(t,r,e){var i=e(17440),n=function(){this.array=i.A.create(),this._dirty=!0};n.prototype={constructor:n,setArray:function(t){for(var r=0;r<this.array.length;r++)this.array[r]=t[r];return this._dirty=!0,this},clone:function(){return(new n).copy(this)},copy:function(t){return i.A.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return i.A.determinant(this.array)},identity:function(){return i.A.identity(this.array),this._dirty=!0,this},invert:function(){return i.A.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return i.A.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return i.A.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return i.A.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return i.A.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return i.A.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return i.A.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return i.A.translate(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},n.copy=function(t,r){return i.A.copy(t.array,r.array),t._dirty=!0,t},n.determinant=function(t){return i.A.determinant(t.array)},n.identity=function(t){return i.A.identity(t.array),t._dirty=!0,t},n.invert=function(t,r){return i.A.invert(t.array,r.array),t._dirty=!0,t},n.mul=function(t,r,e){return i.A.mul(t.array,r.array,e.array),t._dirty=!0,t},n.multiply=n.mul,n.rotate=function(t,r,e){return i.A.rotate(t.array,r.array,e),t._dirty=!0,t},n.scale=function(t,r,e){return i.A.scale(t.array,r.array,e.array),t._dirty=!0,t},n.translate=function(t,r,e){return i.A.translate(t.array,r.array,e.array),t._dirty=!0,t},r.A=n},41262:function(t,r,e){var i=e(27917),n=function(){this.array=i.A.create(),this._dirty=!0};n.prototype={constructor:n,setArray:function(t){for(var r=0;r<this.array.length;r++)this.array[r]=t[r];return this._dirty=!0,this},adjoint:function(){return i.A.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return(new n).copy(this)},copy:function(t){return i.A.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return i.A.determinant(this.array)},fromMat2d:function(t){return i.A.fromMat2d(this.array,t.array),this._dirty=!0,this},fromMat4:function(t){return i.A.fromMat4(this.array,t.array),this._dirty=!0,this},fromQuat:function(t){return i.A.fromQuat(this.array,t.array),this._dirty=!0,this},identity:function(){return i.A.identity(this.array),this._dirty=!0,this},invert:function(){return i.A.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return i.A.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return i.A.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return i.A.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return i.A.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return i.A.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return i.A.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return i.A.translate(this.array,this.array,t.array),this._dirty=!0,this},normalFromMat4:function(t){return i.A.normalFromMat4(this.array,t.array),this._dirty=!0,this},transpose:function(){return i.A.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},n.adjoint=function(t,r){return i.A.adjoint(t.array,r.array),t._dirty=!0,t},n.copy=function(t,r){return i.A.copy(t.array,r.array),t._dirty=!0,t},n.determinant=function(t){return i.A.determinant(t.array)},n.identity=function(t){return i.A.identity(t.array),t._dirty=!0,t},n.invert=function(t,r){return i.A.invert(t.array,r.array),t},n.mul=function(t,r,e){return i.A.mul(t.array,r.array,e.array),t._dirty=!0,t},n.multiply=n.mul,n.fromMat2d=function(t,r){return i.A.fromMat2d(t.array,r.array),t._dirty=!0,t},n.fromMat4=function(t,r){return i.A.fromMat4(t.array,r.array),t._dirty=!0,t},n.fromQuat=function(t,r){return i.A.fromQuat(t.array,r.array),t._dirty=!0,t},n.normalFromMat4=function(t,r){return i.A.normalFromMat4(t.array,r.array),t._dirty=!0,t},n.rotate=function(t,r,e){return i.A.rotate(t.array,r.array,e),t._dirty=!0,t},n.scale=function(t,r,e){return i.A.scale(t.array,r.array,e.array),t._dirty=!0,t},n.transpose=function(t,r){return i.A.transpose(t.array,r.array),t._dirty=!0,t},n.translate=function(t,r,e){return i.A.translate(t.array,r.array,e.array),t._dirty=!0,t},r.A=n},21647:function(t,r,e){var i=e(87064),n=e(33301),a=e(77129),s=e(27917),o=e(504),u=function(){this._axisX=new o.A,this._axisY=new o.A,this._axisZ=new o.A,this.array=i.A.create(),this._dirty=!0};u.prototype={constructor:u,setArray:function(t){for(var r=0;r<this.array.length;r++)this.array[r]=t[r];return this._dirty=!0,this},adjoint:function(){return i.A.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return(new u).copy(this)},copy:function(t){return i.A.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return i.A.determinant(this.array)},fromQuat:function(t){return i.A.fromQuat(this.array,t.array),this._dirty=!0,this},fromRotationTranslation:function(t,r){return i.A.fromRotationTranslation(this.array,t.array,r.array),this._dirty=!0,this},fromMat2d:function(t){return u.fromMat2d(this,t),this},frustum:function(t,r,e,n,a,s){return i.A.frustum(this.array,t,r,e,n,a,s),this._dirty=!0,this},identity:function(){return i.A.identity(this.array),this._dirty=!0,this},invert:function(){return i.A.invert(this.array,this.array),this._dirty=!0,this},lookAt:function(t,r,e){return i.A.lookAt(this.array,t.array,r.array,e.array),this._dirty=!0,this},mul:function(t){return i.A.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return i.A.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return i.A.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return i.A.multiply(this.array,t.array,this.array),this._dirty=!0,this},ortho:function(t,r,e,n,a,s){return i.A.ortho(this.array,t,r,e,n,a,s),this._dirty=!0,this},perspective:function(t,r,e,n){return i.A.perspective(this.array,t,r,e,n),this._dirty=!0,this},rotate:function(t,r){return i.A.rotate(this.array,this.array,t,r.array),this._dirty=!0,this},rotateX:function(t){return i.A.rotateX(this.array,this.array,t),this._dirty=!0,this},rotateY:function(t){return i.A.rotateY(this.array,this.array,t),this._dirty=!0,this},rotateZ:function(t){return i.A.rotateZ(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return i.A.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return i.A.translate(this.array,this.array,t.array),this._dirty=!0,this},transpose:function(){return i.A.transpose(this.array,this.array),this._dirty=!0,this},decomposeMatrix:function(){var t=n.A.create(),r=n.A.create(),e=n.A.create(),i=s.A.create();return function(o,u,h){var c=this.array;n.A.set(t,c[0],c[1],c[2]),n.A.set(r,c[4],c[5],c[6]),n.A.set(e,c[8],c[9],c[10]);var f=n.A.length(t),l=n.A.length(r),y=n.A.length(e),d=this.determinant();d<0&&(f=-f),o&&o.set(f,l,y),h.set(c[12],c[13],c[14]),s.A.fromMat4(i,c),i[0]/=f,i[1]/=f,i[2]/=f,i[3]/=l,i[4]/=l,i[5]/=l,i[6]/=y,i[7]/=y,i[8]/=y,a.A.fromMat3(u.array,i),a.A.normalize(u.array,u.array),u._dirty=!0,h._dirty=!0}}(),toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var h=Object.defineProperty;if(h){var c=u.prototype;h(c,"z",{get:function(){var t=this.array;return this._axisZ.set(t[8],t[9],t[10]),this._axisZ},set:function(t){var r=this.array;t=t.array,r[8]=t[0],r[9]=t[1],r[10]=t[2],this._dirty=!0}}),h(c,"y",{get:function(){var t=this.array;return this._axisY.set(t[4],t[5],t[6]),this._axisY},set:function(t){var r=this.array;t=t.array,r[4]=t[0],r[5]=t[1],r[6]=t[2],this._dirty=!0}}),h(c,"x",{get:function(){var t=this.array;return this._axisX.set(t[0],t[1],t[2]),this._axisX},set:function(t){var r=this.array;t=t.array,r[0]=t[0],r[1]=t[1],r[2]=t[2],this._dirty=!0}})}u.adjoint=function(t,r){return i.A.adjoint(t.array,r.array),t._dirty=!0,t},u.copy=function(t,r){return i.A.copy(t.array,r.array),t._dirty=!0,t},u.determinant=function(t){return i.A.determinant(t.array)},u.identity=function(t){return i.A.identity(t.array),t._dirty=!0,t},u.ortho=function(t,r,e,n,a,s,o){return i.A.ortho(t.array,r,e,n,a,s,o),t._dirty=!0,t},u.perspective=function(t,r,e,n,a){return i.A.perspective(t.array,r,e,n,a),t._dirty=!0,t},u.lookAt=function(t,r,e,n){return i.A.lookAt(t.array,r.array,e.array,n.array),t._dirty=!0,t},u.invert=function(t,r){return i.A.invert(t.array,r.array),t._dirty=!0,t},u.mul=function(t,r,e){return i.A.mul(t.array,r.array,e.array),t._dirty=!0,t},u.multiply=u.mul,u.fromQuat=function(t,r){return i.A.fromQuat(t.array,r.array),t._dirty=!0,t},u.fromRotationTranslation=function(t,r,e){return i.A.fromRotationTranslation(t.array,r.array,e.array),t._dirty=!0,t},u.fromMat2d=function(t,r){t._dirty=!0;r=r.array,t=t.array;return t[0]=r[0],t[4]=r[2],t[12]=r[4],t[1]=r[1],t[5]=r[3],t[13]=r[5],t},u.rotate=function(t,r,e,n){return i.A.rotate(t.array,r.array,e,n.array),t._dirty=!0,t},u.rotateX=function(t,r,e){return i.A.rotateX(t.array,r.array,e),t._dirty=!0,t},u.rotateY=function(t,r,e){return i.A.rotateY(t.array,r.array,e),t._dirty=!0,t},u.rotateZ=function(t,r,e){return i.A.rotateZ(t.array,r.array,e),t._dirty=!0,t},u.scale=function(t,r,e){return i.A.scale(t.array,r.array,e.array),t._dirty=!0,t},u.transpose=function(t,r){return i.A.transpose(t.array,r.array),t._dirty=!0,t},u.translate=function(t,r,e){return i.A.translate(t.array,r.array,e.array),t._dirty=!0,t},r.A=u},92830:function(t,r,e){var i=e(504),n=e(87064),a=e(33301),s=e(16448),o=function(t,r){this.normal=t||new i.A(0,1,0),this.distance=r||0};o.prototype={constructor:o,distanceToPoint:function(t){return a.A.dot(t.array,this.normal.array)-this.distance},projectPoint:function(t,r){r||(r=new i.A);var e=this.distanceToPoint(t);return a.A.scaleAndAdd(r.array,t.array,this.normal.array,-e),r._dirty=!0,r},normalize:function(){var t=1/a.A.len(this.normal.array);a.A.scale(this.normal.array,t),this.distance*=t},intersectFrustum:function(t){for(var r=t.vertices,e=this.normal.array,i=a.A.dot(r[0].array,e)>this.distance,n=1;n<8;n++)if(a.A.dot(r[n].array,e)>this.distance!=i)return!0},intersectLine:function(){var t=a.A.create();return function(r,e,n){var s=this.distanceToPoint(r),o=this.distanceToPoint(e);if(s>0&&o>0||s<0&&o<0)return null;var u=this.normal.array,h=this.distance,c=r.array;a.A.sub(t,e.array,r.array),a.A.normalize(t,t);var f=a.A.dot(u,t);if(0===f)return null;n||(n=new i.A);var l=(a.A.dot(u,c)-h)/f;return a.A.scaleAndAdd(n.array,c,t,-l),n._dirty=!0,n}}(),applyTransform:function(){var t=n.A.create(),r=s.A.create(),e=s.A.create();return e[3]=1,function(i){i=i.array,a.A.scale(e,this.normal.array,this.distance),s.A.transformMat4(e,e,i),this.distance=a.A.dot(e,this.normal.array),n.A.invert(t,i),n.A.transpose(t,t),r[3]=0,a.A.copy(r,this.normal.array),s.A.transformMat4(r,r,t),a.A.copy(this.normal.array,r)}}(),copy:function(t){a.A.copy(this.normal.array,t.normal.array),this.normal._dirty=!0,this.distance=t.distance},clone:function(){var t=new o;return t.copy(this),t}},r.A=o},30630:function(t,r,e){var i=e(77129),n=e(27917),a=function(t,r,e,n){t=t||0,r=r||0,e=e||0,n=void 0===n?1:n,this.array=i.A.fromValues(t,r,e,n),this._dirty=!0};a.prototype={constructor:a,add:function(t){return i.A.add(this.array,this.array,t.array),this._dirty=!0,this},calculateW:function(){return i.A.calculateW(this.array,this.array),this._dirty=!0,this},set:function(t,r,e,i){return this.array[0]=t,this.array[1]=r,this.array[2]=e,this.array[3]=i,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this.array[3]=t[3],this._dirty=!0,this},clone:function(){return new a(this.x,this.y,this.z,this.w)},conjugate:function(){return i.A.conjugate(this.array,this.array),this._dirty=!0,this},copy:function(t){return i.A.copy(this.array,t.array),this._dirty=!0,this},dot:function(t){return i.A.dot(this.array,t.array)},fromMat3:function(t){return i.A.fromMat3(this.array,t.array),this._dirty=!0,this},fromMat4:function(){var t=n.A.create();return function(r){return n.A.fromMat4(t,r.array),n.A.transpose(t,t),i.A.fromMat3(this.array,t),this._dirty=!0,this}}(),identity:function(){return i.A.identity(this.array),this._dirty=!0,this},invert:function(){return i.A.invert(this.array,this.array),this._dirty=!0,this},len:function(){return i.A.len(this.array)},length:function(){return i.A.length(this.array)},lerp:function(t,r,e){return i.A.lerp(this.array,t.array,r.array,e),this._dirty=!0,this},mul:function(t){return i.A.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return i.A.multiply(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return i.A.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return i.A.multiply(this.array,t.array,this.array),this._dirty=!0,this},normalize:function(){return i.A.normalize(this.array,this.array),this._dirty=!0,this},rotateX:function(t){return i.A.rotateX(this.array,this.array,t),this._dirty=!0,this},rotateY:function(t){return i.A.rotateY(this.array,this.array,t),this._dirty=!0,this},rotateZ:function(t){return i.A.rotateZ(this.array,this.array,t),this._dirty=!0,this},rotationTo:function(t,r){return i.A.rotationTo(this.array,t.array,r.array),this._dirty=!0,this},setAxes:function(t,r,e){return i.A.setAxes(this.array,t.array,r.array,e.array),this._dirty=!0,this},setAxisAngle:function(t,r){return i.A.setAxisAngle(this.array,t.array,r),this._dirty=!0,this},slerp:function(t,r,e){return i.A.slerp(this.array,t.array,r.array,e),this._dirty=!0,this},sqrLen:function(){return i.A.sqrLen(this.array)},squaredLength:function(){return i.A.squaredLength(this.array)},fromEuler:function(t,r){return a.fromEuler(this,t,r)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var s=Object.defineProperty;if(s){var o=a.prototype;s(o,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),s(o,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),s(o,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}}),s(o,"w",{get:function(){return this.array[3]},set:function(t){this.array[3]=t,this._dirty=!0}})}a.add=function(t,r,e){return i.A.add(t.array,r.array,e.array),t._dirty=!0,t},a.set=function(t,r,e,n,a){i.A.set(t.array,r,e,n,a),t._dirty=!0},a.copy=function(t,r){return i.A.copy(t.array,r.array),t._dirty=!0,t},a.calculateW=function(t,r){return i.A.calculateW(t.array,r.array),t._dirty=!0,t},a.conjugate=function(t,r){return i.A.conjugate(t.array,r.array),t._dirty=!0,t},a.identity=function(t){return i.A.identity(t.array),t._dirty=!0,t},a.invert=function(t,r){return i.A.invert(t.array,r.array),t._dirty=!0,t},a.dot=function(t,r){return i.A.dot(t.array,r.array)},a.len=function(t){return i.A.length(t.array)},a.lerp=function(t,r,e,n){return i.A.lerp(t.array,r.array,e.array,n),t._dirty=!0,t},a.slerp=function(t,r,e,n){return i.A.slerp(t.array,r.array,e.array,n),t._dirty=!0,t},a.mul=function(t,r,e){return i.A.multiply(t.array,r.array,e.array),t._dirty=!0,t},a.multiply=a.mul,a.rotateX=function(t,r,e){return i.A.rotateX(t.array,r.array,e),t._dirty=!0,t},a.rotateY=function(t,r,e){return i.A.rotateY(t.array,r.array,e),t._dirty=!0,t},a.rotateZ=function(t,r,e){return i.A.rotateZ(t.array,r.array,e),t._dirty=!0,t},a.setAxisAngle=function(t,r,e){return i.A.setAxisAngle(t.array,r.array,e),t._dirty=!0,t},a.normalize=function(t,r){return i.A.normalize(t.array,r.array),t._dirty=!0,t},a.sqrLen=function(t){return i.A.sqrLen(t.array)},a.squaredLength=a.sqrLen,a.fromMat3=function(t,r){return i.A.fromMat3(t.array,r.array),t._dirty=!0,t},a.setAxes=function(t,r,e,n){return i.A.setAxes(t.array,r.array,e.array,n.array),t._dirty=!0,t},a.rotationTo=function(t,r,e){return i.A.rotationTo(t.array,r.array,e.array),t._dirty=!0,t},a.fromEuler=function(t,r,e){t._dirty=!0,r=r.array;var i=t.array,n=Math.cos(r[0]/2),a=Math.cos(r[1]/2),s=Math.cos(r[2]/2),o=Math.sin(r[0]/2),u=Math.sin(r[1]/2),h=Math.sin(r[2]/2);e=(e||"XYZ").toUpperCase();switch(e){case"XYZ":i[0]=o*a*s+n*u*h,i[1]=n*u*s-o*a*h,i[2]=n*a*h+o*u*s,i[3]=n*a*s-o*u*h;break;case"YXZ":i[0]=o*a*s+n*u*h,i[1]=n*u*s-o*a*h,i[2]=n*a*h-o*u*s,i[3]=n*a*s+o*u*h;break;case"ZXY":i[0]=o*a*s-n*u*h,i[1]=n*u*s+o*a*h,i[2]=n*a*h+o*u*s,i[3]=n*a*s-o*u*h;break;case"ZYX":i[0]=o*a*s-n*u*h,i[1]=n*u*s+o*a*h,i[2]=n*a*h-o*u*s,i[3]=n*a*s+o*u*h;break;case"YZX":i[0]=o*a*s+n*u*h,i[1]=n*u*s+o*a*h,i[2]=n*a*h-o*u*s,i[3]=n*a*s-o*u*h;break;case"XZY":i[0]=o*a*s-n*u*h,i[1]=n*u*s-o*a*h,i[2]=n*a*h+o*u*s,i[3]=n*a*s+o*u*h;break}},r.A=a},56044:function(t,r,e){var i=e(504),n=e(33301),a=1e-5,s=function(t,r){this.origin=t||new i.A,this.direction=r||new i.A};s.prototype={constructor:s,intersectPlane:function(t,r){var e=t.normal.array,a=t.distance,s=this.origin.array,o=this.direction.array,u=n.A.dot(e,o);if(0===u)return null;r||(r=new i.A);var h=(n.A.dot(e,s)-a)/u;return n.A.scaleAndAdd(r.array,s,o,-h),r._dirty=!0,r},mirrorAgainstPlane:function(t){var r=n.A.dot(t.normal.array,this.direction.array);n.A.scaleAndAdd(this.direction.array,this.direction.array,t.normal.array,2*-r),this.direction._dirty=!0},distanceToPoint:function(){var t=n.A.create();return function(r){n.A.sub(t,r,this.origin.array);var e=n.A.dot(t,this.direction.array);if(e<0)return n.A.distance(this.origin.array,r);var i=n.A.lenSquared(t);return Math.sqrt(i-e*e)}}(),intersectSphere:function(){var t=n.A.create();return function(r,e,a){var s=this.origin.array,o=this.direction.array;r=r.array,n.A.sub(t,r,s);var u=n.A.dot(t,o),h=n.A.squaredLength(t),c=h-u*u,f=e*e;if(!(c>f)){var l=Math.sqrt(f-c),y=u-l,d=u+l;return a||(a=new i.A),y<0?d<0?null:(n.A.scaleAndAdd(a.array,s,o,d),a):(n.A.scaleAndAdd(a.array,s,o,y),a)}}}(),intersectBoundingBox:function(t,r){var e,a,s,o,u,h,c=this.direction.array,f=this.origin.array,l=t.min.array,y=t.max.array,d=1/c[0],_=1/c[1],A=1/c[2];if(d>=0?(e=(l[0]-f[0])*d,a=(y[0]-f[0])*d):(a=(l[0]-f[0])*d,e=(y[0]-f[0])*d),_>=0?(s=(l[1]-f[1])*_,o=(y[1]-f[1])*_):(o=(l[1]-f[1])*_,s=(y[1]-f[1])*_),e>o||s>a)return null;if((s>e||e!==e)&&(e=s),(o<a||a!==a)&&(a=o),A>=0?(u=(l[2]-f[2])*A,h=(y[2]-f[2])*A):(h=(l[2]-f[2])*A,u=(y[2]-f[2])*A),e>h||u>a)return null;if((u>e||e!==e)&&(e=u),(h<a||a!==a)&&(a=h),a<0)return null;var p=e>=0?e:a;return r||(r=new i.A),n.A.scaleAndAdd(r.array,f,c,p),r},intersectTriangle:function(){var t=n.A.create(),r=n.A.create(),e=n.A.create(),s=n.A.create();return function(o,u,h,c,f,l){var y=this.direction.array,d=this.origin.array;o=o.array,u=u.array,h=h.array,n.A.sub(t,u,o),n.A.sub(r,h,o),n.A.cross(s,r,y);var _=n.A.dot(t,s);if(c){if(_>-a)return null}else if(_>-a&&_<a)return null;n.A.sub(e,d,o);var A=n.A.dot(s,e)/_;if(A<0||A>1)return null;n.A.cross(s,t,e);var p=n.A.dot(y,s)/_;if(p<0||p>1||A+p>1)return null;n.A.cross(s,t,r);var m=-n.A.dot(e,s)/_;return m<0?null:(f||(f=new i.A),l&&i.A.set(l,1-A-p,A,p),n.A.scaleAndAdd(f.array,d,y,m),f)}}(),applyTransform:function(t){i.A.add(this.direction,this.direction,this.origin),i.A.transformMat4(this.origin,this.origin,t),i.A.transformMat4(this.direction,this.direction,t),i.A.sub(this.direction,this.direction,this.origin),i.A.normalize(this.direction,this.direction)},copy:function(t){i.A.copy(this.origin,t.origin),i.A.copy(this.direction,t.direction)},clone:function(){var t=new s;return t.copy(this),t}},r.A=s},34863:function(t,r,e){var i=e(98710),n=function(t,r){t=t||0,r=r||0,this.array=i.A.fromValues(t,r),this._dirty=!0};if(n.prototype={constructor:n,add:function(t){return i.A.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,r){return this.array[0]=t,this.array[1]=r,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this._dirty=!0,this},clone:function(){return new n(this.x,this.y)},copy:function(t){return i.A.copy(this.array,t.array),this._dirty=!0,this},cross:function(t,r){return i.A.cross(t.array,this.array,r.array),t._dirty=!0,this},dist:function(t){return i.A.dist(this.array,t.array)},distance:function(t){return i.A.distance(this.array,t.array)},div:function(t){return i.A.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return i.A.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return i.A.dot(this.array,t.array)},len:function(){return i.A.len(this.array)},length:function(){return i.A.length(this.array)},lerp:function(t,r,e){return i.A.lerp(this.array,t.array,r.array,e),this._dirty=!0,this},min:function(t){return i.A.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return i.A.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return i.A.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return i.A.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return i.A.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return i.A.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return i.A.random(this.array,t),this._dirty=!0,this},scale:function(t){return i.A.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,r){return i.A.scaleAndAdd(this.array,this.array,t.array,r),this._dirty=!0,this},sqrDist:function(t){return i.A.sqrDist(this.array,t.array)},squaredDistance:function(t){return i.A.squaredDistance(this.array,t.array)},sqrLen:function(){return i.A.sqrLen(this.array)},squaredLength:function(){return i.A.squaredLength(this.array)},sub:function(t){return i.A.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return i.A.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat2:function(t){return i.A.transformMat2(this.array,this.array,t.array),this._dirty=!0,this},transformMat2d:function(t){return i.A.transformMat2d(this.array,this.array,t.array),this._dirty=!0,this},transformMat3:function(t){return i.A.transformMat3(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return i.A.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Object.defineProperty){var a=n.prototype;Object.defineProperty(a,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),Object.defineProperty(a,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}})}n.add=function(t,r,e){return i.A.add(t.array,r.array,e.array),t._dirty=!0,t},n.set=function(t,r,e){return i.A.set(t.array,r,e),t._dirty=!0,t},n.copy=function(t,r){return i.A.copy(t.array,r.array),t._dirty=!0,t},n.cross=function(t,r,e){return i.A.cross(t.array,r.array,e.array),t._dirty=!0,t},n.dist=function(t,r){return i.A.distance(t.array,r.array)},n.distance=n.dist,n.div=function(t,r,e){return i.A.divide(t.array,r.array,e.array),t._dirty=!0,t},n.divide=n.div,n.dot=function(t,r){return i.A.dot(t.array,r.array)},n.len=function(t){return i.A.length(t.array)},n.lerp=function(t,r,e,n){return i.A.lerp(t.array,r.array,e.array,n),t._dirty=!0,t},n.min=function(t,r,e){return i.A.min(t.array,r.array,e.array),t._dirty=!0,t},n.max=function(t,r,e){return i.A.max(t.array,r.array,e.array),t._dirty=!0,t},n.mul=function(t,r,e){return i.A.multiply(t.array,r.array,e.array),t._dirty=!0,t},n.multiply=n.mul,n.negate=function(t,r){return i.A.negate(t.array,r.array),t._dirty=!0,t},n.normalize=function(t,r){return i.A.normalize(t.array,r.array),t._dirty=!0,t},n.random=function(t,r){return i.A.random(t.array,r),t._dirty=!0,t},n.scale=function(t,r,e){return i.A.scale(t.array,r.array,e),t._dirty=!0,t},n.scaleAndAdd=function(t,r,e,n){return i.A.scaleAndAdd(t.array,r.array,e.array,n),t._dirty=!0,t},n.sqrDist=function(t,r){return i.A.sqrDist(t.array,r.array)},n.squaredDistance=n.sqrDist,n.sqrLen=function(t){return i.A.sqrLen(t.array)},n.squaredLength=n.sqrLen,n.sub=function(t,r,e){return i.A.subtract(t.array,r.array,e.array),t._dirty=!0,t},n.subtract=n.sub,n.transformMat2=function(t,r,e){return i.A.transformMat2(t.array,r.array,e.array),t._dirty=!0,t},n.transformMat2d=function(t,r,e){return i.A.transformMat2d(t.array,r.array,e.array),t._dirty=!0,t},n.transformMat3=function(t,r,e){return i.A.transformMat3(t.array,r.array,e.array),t._dirty=!0,t},n.transformMat4=function(t,r,e){return i.A.transformMat4(t.array,r.array,e.array),t._dirty=!0,t},r.A=n},504:function(t,r,e){var i=e(33301),n=function(t,r,e){t=t||0,r=r||0,e=e||0,this.array=i.A.fromValues(t,r,e),this._dirty=!0};n.prototype={constructor:n,add:function(t){return i.A.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,r,e){return this.array[0]=t,this.array[1]=r,this.array[2]=e,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this._dirty=!0,this},clone:function(){return new n(this.x,this.y,this.z)},copy:function(t){return i.A.copy(this.array,t.array),this._dirty=!0,this},cross:function(t,r){return i.A.cross(this.array,t.array,r.array),this._dirty=!0,this},dist:function(t){return i.A.dist(this.array,t.array)},distance:function(t){return i.A.distance(this.array,t.array)},div:function(t){return i.A.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return i.A.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return i.A.dot(this.array,t.array)},len:function(){return i.A.len(this.array)},length:function(){return i.A.length(this.array)},lerp:function(t,r,e){return i.A.lerp(this.array,t.array,r.array,e),this._dirty=!0,this},min:function(t){return i.A.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return i.A.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return i.A.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return i.A.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return i.A.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return i.A.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return i.A.random(this.array,t),this._dirty=!0,this},scale:function(t){return i.A.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,r){return i.A.scaleAndAdd(this.array,this.array,t.array,r),this._dirty=!0,this},sqrDist:function(t){return i.A.sqrDist(this.array,t.array)},squaredDistance:function(t){return i.A.squaredDistance(this.array,t.array)},sqrLen:function(){return i.A.sqrLen(this.array)},squaredLength:function(){return i.A.squaredLength(this.array)},sub:function(t){return i.A.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return i.A.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat3:function(t){return i.A.transformMat3(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return i.A.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},transformQuat:function(t){return i.A.transformQuat(this.array,this.array,t.array),this._dirty=!0,this},applyProjection:function(t){var r=this.array;if(t=t.array,0===t[15]){var e=-1/r[2];r[0]=t[0]*r[0]*e,r[1]=t[5]*r[1]*e,r[2]=(t[10]*r[2]+t[14])*e}else r[0]=t[0]*r[0]+t[12],r[1]=t[5]*r[1]+t[13],r[2]=t[10]*r[2]+t[14];return this._dirty=!0,this},eulerFromQuat:function(t,r){n.eulerFromQuat(this,t,r)},eulerFromMat3:function(t,r){n.eulerFromMat3(this,t,r)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var a=Object.defineProperty;if(a){var s=n.prototype;a(s,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),a(s,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),a(s,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}})}function o(t,r,e){return t<r?r:t>e?e:t}n.add=function(t,r,e){return i.A.add(t.array,r.array,e.array),t._dirty=!0,t},n.set=function(t,r,e,n){i.A.set(t.array,r,e,n),t._dirty=!0},n.copy=function(t,r){return i.A.copy(t.array,r.array),t._dirty=!0,t},n.cross=function(t,r,e){return i.A.cross(t.array,r.array,e.array),t._dirty=!0,t},n.dist=function(t,r){return i.A.distance(t.array,r.array)},n.distance=n.dist,n.div=function(t,r,e){return i.A.divide(t.array,r.array,e.array),t._dirty=!0,t},n.divide=n.div,n.dot=function(t,r){return i.A.dot(t.array,r.array)},n.len=function(t){return i.A.length(t.array)},n.lerp=function(t,r,e,n){return i.A.lerp(t.array,r.array,e.array,n),t._dirty=!0,t},n.min=function(t,r,e){return i.A.min(t.array,r.array,e.array),t._dirty=!0,t},n.max=function(t,r,e){return i.A.max(t.array,r.array,e.array),t._dirty=!0,t},n.mul=function(t,r,e){return i.A.multiply(t.array,r.array,e.array),t._dirty=!0,t},n.multiply=n.mul,n.negate=function(t,r){return i.A.negate(t.array,r.array),t._dirty=!0,t},n.normalize=function(t,r){return i.A.normalize(t.array,r.array),t._dirty=!0,t},n.random=function(t,r){return i.A.random(t.array,r),t._dirty=!0,t},n.scale=function(t,r,e){return i.A.scale(t.array,r.array,e),t._dirty=!0,t},n.scaleAndAdd=function(t,r,e,n){return i.A.scaleAndAdd(t.array,r.array,e.array,n),t._dirty=!0,t},n.sqrDist=function(t,r){return i.A.sqrDist(t.array,r.array)},n.squaredDistance=n.sqrDist,n.sqrLen=function(t){return i.A.sqrLen(t.array)},n.squaredLength=n.sqrLen,n.sub=function(t,r,e){return i.A.subtract(t.array,r.array,e.array),t._dirty=!0,t},n.subtract=n.sub,n.transformMat3=function(t,r,e){return i.A.transformMat3(t.array,r.array,e.array),t._dirty=!0,t},n.transformMat4=function(t,r,e){return i.A.transformMat4(t.array,r.array,e.array),t._dirty=!0,t},n.transformQuat=function(t,r,e){return i.A.transformQuat(t.array,r.array,e.array),t._dirty=!0,t};var u=Math.atan2,h=Math.asin,c=Math.abs;n.eulerFromQuat=function(t,r,e){t._dirty=!0,r=r.array;var i=t.array,n=r[0],a=r[1],s=r[2],c=r[3],f=n*n,l=a*a,y=s*s,d=c*c;e=(e||"XYZ").toUpperCase();switch(e){case"XYZ":i[0]=u(2*(n*c-a*s),d-f-l+y),i[1]=h(o(2*(n*s+a*c),-1,1)),i[2]=u(2*(s*c-n*a),d+f-l-y);break;case"YXZ":i[0]=h(o(2*(n*c-a*s),-1,1)),i[1]=u(2*(n*s+a*c),d-f-l+y),i[2]=u(2*(n*a+s*c),d-f+l-y);break;case"ZXY":i[0]=h(o(2*(n*c+a*s),-1,1)),i[1]=u(2*(a*c-s*n),d-f-l+y),i[2]=u(2*(s*c-n*a),d-f+l-y);break;case"ZYX":i[0]=u(2*(n*c+s*a),d-f-l+y),i[1]=h(o(2*(a*c-n*s),-1,1)),i[2]=u(2*(n*a+s*c),d+f-l-y);break;case"YZX":i[0]=u(2*(n*c-s*a),d-f+l-y),i[1]=u(2*(a*c-n*s),d+f-l-y),i[2]=h(o(2*(n*a+s*c),-1,1));break;case"XZY":i[0]=u(2*(n*c+a*s),d-f+l-y),i[1]=u(2*(n*s+a*c),d+f-l-y),i[2]=h(o(2*(s*c-n*a),-1,1));break;default:console.warn("Unkown order: "+e)}return t},n.eulerFromMat3=function(t,r,e){var i=r.array,n=i[0],a=i[3],s=i[6],f=i[1],l=i[4],y=i[7],d=i[2],_=i[5],A=i[8],p=t.array;e=(e||"XYZ").toUpperCase();switch(e){case"XYZ":p[1]=h(o(s,-1,1)),c(s)<.99999?(p[0]=u(-y,A),p[2]=u(-a,n)):(p[0]=u(_,l),p[2]=0);break;case"YXZ":p[0]=h(-o(y,-1,1)),c(y)<.99999?(p[1]=u(s,A),p[2]=u(f,l)):(p[1]=u(-d,n),p[2]=0);break;case"ZXY":p[0]=h(o(_,-1,1)),c(_)<.99999?(p[1]=u(-d,A),p[2]=u(-a,l)):(p[1]=0,p[2]=u(f,n));break;case"ZYX":p[1]=h(-o(d,-1,1)),c(d)<.99999?(p[0]=u(_,A),p[2]=u(f,n)):(p[0]=0,p[2]=u(-a,l));break;case"YZX":p[2]=h(o(f,-1,1)),c(f)<.99999?(p[0]=u(-y,l),p[1]=u(-d,n)):(p[0]=0,p[1]=u(s,A));break;case"XZY":p[2]=h(-o(a,-1,1)),c(a)<.99999?(p[0]=u(_,l),p[1]=u(s,n)):(p[0]=u(-y,A),p[1]=0);break;default:console.warn("Unkown order: "+e)}return t._dirty=!0,t},Object.defineProperties(n,{POSITIVE_X:{get:function(){return new n(1,0,0)}},NEGATIVE_X:{get:function(){return new n(-1,0,0)}},POSITIVE_Y:{get:function(){return new n(0,1,0)}},NEGATIVE_Y:{get:function(){return new n(0,-1,0)}},POSITIVE_Z:{get:function(){return new n(0,0,1)}},NEGATIVE_Z:{get:function(){return new n(0,0,-1)}},UP:{get:function(){return new n(0,1,0)}},ZERO:{get:function(){return new n}}}),r.A=n},57709:function(t,r,e){var i=e(16448),n=function(t,r,e,n){t=t||0,r=r||0,e=e||0,n=n||0,this.array=i.A.fromValues(t,r,e,n),this._dirty=!0};n.prototype={constructor:n,add:function(t){return i.A.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,r,e,i){return this.array[0]=t,this.array[1]=r,this.array[2]=e,this.array[3]=i,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this.array[3]=t[3],this._dirty=!0,this},clone:function(){return new n(this.x,this.y,this.z,this.w)},copy:function(t){return i.A.copy(this.array,t.array),this._dirty=!0,this},dist:function(t){return i.A.dist(this.array,t.array)},distance:function(t){return i.A.distance(this.array,t.array)},div:function(t){return i.A.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return i.A.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return i.A.dot(this.array,t.array)},len:function(){return i.A.len(this.array)},length:function(){return i.A.length(this.array)},lerp:function(t,r,e){return i.A.lerp(this.array,t.array,r.array,e),this._dirty=!0,this},min:function(t){return i.A.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return i.A.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return i.A.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return i.A.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return i.A.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return i.A.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return i.A.random(this.array,t),this._dirty=!0,this},scale:function(t){return i.A.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,r){return i.A.scaleAndAdd(this.array,this.array,t.array,r),this._dirty=!0,this},sqrDist:function(t){return i.A.sqrDist(this.array,t.array)},squaredDistance:function(t){return i.A.squaredDistance(this.array,t.array)},sqrLen:function(){return i.A.sqrLen(this.array)},squaredLength:function(){return i.A.squaredLength(this.array)},sub:function(t){return i.A.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return i.A.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return i.A.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},transformQuat:function(t){return i.A.transformQuat(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var a=Object.defineProperty;if(a){var s=n.prototype;a(s,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),a(s,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),a(s,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}}),a(s,"w",{get:function(){return this.array[3]},set:function(t){this.array[3]=t,this._dirty=!0}})}n.add=function(t,r,e){return i.A.add(t.array,r.array,e.array),t._dirty=!0,t},n.set=function(t,r,e,n,a){i.A.set(t.array,r,e,n,a),t._dirty=!0},n.copy=function(t,r){return i.A.copy(t.array,r.array),t._dirty=!0,t},n.dist=function(t,r){return i.A.distance(t.array,r.array)},n.distance=n.dist,n.div=function(t,r,e){return i.A.divide(t.array,r.array,e.array),t._dirty=!0,t},n.divide=n.div,n.dot=function(t,r){return i.A.dot(t.array,r.array)},n.len=function(t){return i.A.length(t.array)},n.lerp=function(t,r,e,n){return i.A.lerp(t.array,r.array,e.array,n),t._dirty=!0,t},n.min=function(t,r,e){return i.A.min(t.array,r.array,e.array),t._dirty=!0,t},n.max=function(t,r,e){return i.A.max(t.array,r.array,e.array),t._dirty=!0,t},n.mul=function(t,r,e){return i.A.multiply(t.array,r.array,e.array),t._dirty=!0,t},n.multiply=n.mul,n.negate=function(t,r){return i.A.negate(t.array,r.array),t._dirty=!0,t},n.normalize=function(t,r){return i.A.normalize(t.array,r.array),t._dirty=!0,t},n.random=function(t,r){return i.A.random(t.array,r),t._dirty=!0,t},n.scale=function(t,r,e){return i.A.scale(t.array,r.array,e),t._dirty=!0,t},n.scaleAndAdd=function(t,r,e,n){return i.A.scaleAndAdd(t.array,r.array,e.array,n),t._dirty=!0,t},n.sqrDist=function(t,r){return i.A.sqrDist(t.array,r.array)},n.squaredDistance=n.sqrDist,n.sqrLen=function(t){return i.A.sqrLen(t.array)},n.squaredLength=n.sqrLen,n.sub=function(t,r,e){return i.A.subtract(t.array,r.array,e.array),t._dirty=!0,t},n.subtract=n.sub,n.transformMat4=function(t,r,e){return i.A.transformMat4(t.array,r.array,e.array),t._dirty=!0,t},n.transformQuat=function(t,r,e){return i.A.transformQuat(t.array,r.array,e.array),t._dirty=!0,t},r.A=n},22050:function(t,r){var e={isPowerOfTwo:function(t){return 0===(t&t-1)},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}};r.A=e}}]);
//# sourceMappingURL=chunk-vendors-4a5f87ca.8883e52e.js.map