{"version":3,"file":"static/client/js/chunk-vendors-53534d1f.e1f508b2.js","mappings":"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","sources":["webpack://d1/./node_modules/echarts/lib/component/radar/RadarView.js","webpack://d1/./node_modules/echarts/lib/component/radar/install.js","webpack://d1/./node_modules/echarts/lib/component/singleAxis/install.js","webpack://d1/./node_modules/echarts/lib/component/timeline/TimelineModel.js","webpack://d1/./node_modules/echarts/lib/component/timeline/SliderTimelineModel.js","webpack://d1/./node_modules/echarts/lib/component/timeline/TimelineView.js","webpack://d1/./node_modules/echarts/lib/component/timeline/TimelineAxis.js","webpack://d1/./node_modules/echarts/lib/component/timeline/SliderTimelineView.js","webpack://d1/./node_modules/echarts/lib/component/timeline/timelineAction.js","webpack://d1/./node_modules/echarts/lib/component/timeline/preprocessor.js","webpack://d1/./node_modules/echarts/lib/component/timeline/install.js","webpack://d1/./node_modules/echarts/lib/component/title/install.js","webpack://d1/./node_modules/echarts/lib/component/toolbox/featureManager.js","webpack://d1/./node_modules/echarts/lib/component/toolbox/feature/Brush.js","webpack://d1/./node_modules/echarts/lib/component/toolbox/ToolboxModel.js","webpack://d1/./node_modules/echarts/lib/component/toolbox/ToolboxView.js","webpack://d1/./node_modules/echarts/lib/component/toolbox/feature/SaveAsImage.js","webpack://d1/./node_modules/echarts/lib/component/toolbox/feature/MagicType.js","webpack://d1/./node_modules/echarts/lib/component/toolbox/feature/DataView.js","webpack://d1/./node_modules/echarts/lib/component/toolbox/feature/Restore.js","webpack://d1/./node_modules/echarts/lib/component/toolbox/feature/DataZoom.js","webpack://d1/./node_modules/echarts/lib/component/toolbox/install.js","webpack://d1/./node_modules/echarts/lib/component/tooltip/TooltipModel.js","webpack://d1/./node_modules/echarts/lib/component/tooltip/helper.js","webpack://d1/./node_modules/echarts/lib/component/tooltip/TooltipHTMLContent.js","webpack://d1/./node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","webpack://d1/./node_modules/echarts/lib/component/tooltip/TooltipView.js","webpack://d1/./node_modules/echarts/lib/component/tooltip/install.js","webpack://d1/./node_modules/echarts/lib/component/tooltip/seriesFormatTooltip.js","webpack://d1/./node_modules/echarts/lib/component/tooltip/tooltipMarkup.js","webpack://d1/./node_modules/echarts/lib/component/transform/filterTransform.js","webpack://d1/./node_modules/echarts/lib/component/transform/sortTransform.js","webpack://d1/./node_modules/echarts/lib/component/transform/install.js","webpack://d1/./node_modules/echarts/lib/component/visualMap/VisualMapModel.js","webpack://d1/./node_modules/echarts/lib/component/visualMap/VisualMapView.js","webpack://d1/./node_modules/echarts/lib/component/visualMap/helper.js","webpack://d1/./node_modules/echarts/lib/component/visualMap/install.js","webpack://d1/./node_modules/echarts/lib/component/visualMap/visualMapAction.js","webpack://d1/./node_modules/echarts/lib/component/visualMap/visualEncoding.js","webpack://d1/./node_modules/echarts/lib/component/visualMap/preprocessor.js","webpack://d1/./node_modules/echarts/lib/component/visualMap/installCommon.js","webpack://d1/./node_modules/echarts/lib/component/visualMap/ContinuousModel.js","webpack://d1/./node_modules/echarts/lib/component/visualMap/ContinuousView.js","webpack://d1/./node_modules/echarts/lib/component/visualMap/installVisualMapContinuous.js","webpack://d1/./node_modules/echarts/lib/component/visualMap/PiecewiseModel.js","webpack://d1/./node_modules/echarts/lib/component/visualMap/PiecewiseView.js","webpack://d1/./node_modules/echarts/lib/component/visualMap/installVisualMapPiecewise.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport AxisBuilder from '../axis/AxisBuilder.js';\nimport * as graphic from '../../util/graphic.js';\nimport ComponentView from '../../view/Component.js';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar RadarView = /** @class */function (_super) {\n  __extends(RadarView, _super);\n  function RadarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = RadarView.type;\n    return _this;\n  }\n  RadarView.prototype.render = function (radarModel, ecModel, api) {\n    var group = this.group;\n    group.removeAll();\n    this._buildAxes(radarModel);\n    this._buildSplitLineAndArea(radarModel);\n  };\n  RadarView.prototype._buildAxes = function (radarModel) {\n    var radar = radarModel.coordinateSystem;\n    var indicatorAxes = radar.getIndicatorAxes();\n    var axisBuilders = zrUtil.map(indicatorAxes, function (indicatorAxis) {\n      var axisName = indicatorAxis.model.get('showName') ? indicatorAxis.name : ''; // hide name\n      var axisBuilder = new AxisBuilder(indicatorAxis.model, {\n        axisName: axisName,\n        position: [radar.cx, radar.cy],\n        rotation: indicatorAxis.angle,\n        labelDirection: -1,\n        tickDirection: -1,\n        nameDirection: 1\n      });\n      return axisBuilder;\n    });\n    zrUtil.each(axisBuilders, function (axisBuilder) {\n      zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n      this.group.add(axisBuilder.getGroup());\n    }, this);\n  };\n  RadarView.prototype._buildSplitLineAndArea = function (radarModel) {\n    var radar = radarModel.coordinateSystem;\n    var indicatorAxes = radar.getIndicatorAxes();\n    if (!indicatorAxes.length) {\n      return;\n    }\n    var shape = radarModel.get('shape');\n    var splitLineModel = radarModel.getModel('splitLine');\n    var splitAreaModel = radarModel.getModel('splitArea');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var showSplitLine = splitLineModel.get('show');\n    var showSplitArea = splitAreaModel.get('show');\n    var splitLineColors = lineStyleModel.get('color');\n    var splitAreaColors = areaStyleModel.get('color');\n    var splitLineColorsArr = zrUtil.isArray(splitLineColors) ? splitLineColors : [splitLineColors];\n    var splitAreaColorsArr = zrUtil.isArray(splitAreaColors) ? splitAreaColors : [splitAreaColors];\n    var splitLines = [];\n    var splitAreas = [];\n    function getColorIndex(areaOrLine, areaOrLineColorList, idx) {\n      var colorIndex = idx % areaOrLineColorList.length;\n      areaOrLine[colorIndex] = areaOrLine[colorIndex] || [];\n      return colorIndex;\n    }\n    if (shape === 'circle') {\n      var ticksRadius = indicatorAxes[0].getTicksCoords();\n      var cx = radar.cx;\n      var cy = radar.cy;\n      for (var i = 0; i < ticksRadius.length; i++) {\n        if (showSplitLine) {\n          var colorIndex = getColorIndex(splitLines, splitLineColorsArr, i);\n          splitLines[colorIndex].push(new graphic.Circle({\n            shape: {\n              cx: cx,\n              cy: cy,\n              r: ticksRadius[i].coord\n            }\n          }));\n        }\n        if (showSplitArea && i < ticksRadius.length - 1) {\n          var colorIndex = getColorIndex(splitAreas, splitAreaColorsArr, i);\n          splitAreas[colorIndex].push(new graphic.Ring({\n            shape: {\n              cx: cx,\n              cy: cy,\n              r0: ticksRadius[i].coord,\n              r: ticksRadius[i + 1].coord\n            }\n          }));\n        }\n      }\n    }\n    // Polyyon\n    else {\n      var realSplitNumber_1;\n      var axesTicksPoints = zrUtil.map(indicatorAxes, function (indicatorAxis, idx) {\n        var ticksCoords = indicatorAxis.getTicksCoords();\n        realSplitNumber_1 = realSplitNumber_1 == null ? ticksCoords.length - 1 : Math.min(ticksCoords.length - 1, realSplitNumber_1);\n        return zrUtil.map(ticksCoords, function (tickCoord) {\n          return radar.coordToPoint(tickCoord.coord, idx);\n        });\n      });\n      var prevPoints = [];\n      for (var i = 0; i <= realSplitNumber_1; i++) {\n        var points = [];\n        for (var j = 0; j < indicatorAxes.length; j++) {\n          points.push(axesTicksPoints[j][i]);\n        }\n        // Close\n        if (points[0]) {\n          points.push(points[0].slice());\n        } else {\n          if (process.env.NODE_ENV !== 'production') {\n            console.error('Can\\'t draw value axis ' + i);\n          }\n        }\n        if (showSplitLine) {\n          var colorIndex = getColorIndex(splitLines, splitLineColorsArr, i);\n          splitLines[colorIndex].push(new graphic.Polyline({\n            shape: {\n              points: points\n            }\n          }));\n        }\n        if (showSplitArea && prevPoints) {\n          var colorIndex = getColorIndex(splitAreas, splitAreaColorsArr, i - 1);\n          splitAreas[colorIndex].push(new graphic.Polygon({\n            shape: {\n              points: points.concat(prevPoints)\n            }\n          }));\n        }\n        prevPoints = points.slice().reverse();\n      }\n    }\n    var lineStyle = lineStyleModel.getLineStyle();\n    var areaStyle = areaStyleModel.getAreaStyle();\n    // Add splitArea before splitLine\n    zrUtil.each(splitAreas, function (splitAreas, idx) {\n      this.group.add(graphic.mergePath(splitAreas, {\n        style: zrUtil.defaults({\n          stroke: 'none',\n          fill: splitAreaColorsArr[idx % splitAreaColorsArr.length]\n        }, areaStyle),\n        silent: true\n      }));\n    }, this);\n    zrUtil.each(splitLines, function (splitLines, idx) {\n      this.group.add(graphic.mergePath(splitLines, {\n        style: zrUtil.defaults({\n          fill: 'none',\n          stroke: splitLineColorsArr[idx % splitLineColorsArr.length]\n        }, lineStyle),\n        silent: true\n      }));\n    }, this);\n  };\n  RadarView.type = 'radar';\n  return RadarView;\n}(ComponentView);\nexport default RadarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport RadarModel from '../../coord/radar/RadarModel.js';\nimport RadarView from './RadarView.js';\nimport Radar from '../../coord/radar/Radar.js';\nexport function install(registers) {\n  registers.registerCoordinateSystem('radar', Radar);\n  registers.registerComponentModel(RadarModel);\n  registers.registerComponentView(RadarView);\n  registers.registerVisual({\n    seriesType: 'radar',\n    reset: function (seriesModel) {\n      var data = seriesModel.getData();\n      // itemVisual symbol is for selected data\n      data.each(function (idx) {\n        data.setItemVisual(idx, 'legendIcon', 'roundRect');\n      });\n      // visual is for unselected data\n      data.setVisual('legendIcon', 'roundRect');\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { use } from '../../extension.js';\nimport ComponentView from '../../view/Component.js';\nimport SingleAxisView from '../axis/SingleAxisView.js';\nimport axisModelCreator from '../../coord/axisModelCreator.js';\nimport SingleAxisModel from '../../coord/single/AxisModel.js';\nimport singleCreator from '../../coord/single/singleCreator.js';\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport AxisView from '../axis/AxisView.js';\nimport SingleAxisPointer from '../axisPointer/SingleAxisPointer.js';\nvar SingleView = /** @class */function (_super) {\n  __extends(SingleView, _super);\n  function SingleView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SingleView.type;\n    return _this;\n  }\n  SingleView.type = 'single';\n  return SingleView;\n}(ComponentView);\nexport function install(registers) {\n  use(installAxisPointer);\n  AxisView.registerAxisPointerClass('SingleAxisPointer', SingleAxisPointer);\n  registers.registerComponentView(SingleView);\n  // Axis\n  registers.registerComponentView(SingleAxisView);\n  registers.registerComponentModel(SingleAxisModel);\n  axisModelCreator(registers, 'single', SingleAxisModel, SingleAxisModel.defaultOption);\n  registers.registerCoordinateSystem('single', singleCreator);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport { each, isObject, clone } from 'zrender/lib/core/util.js';\nimport { convertOptionIdName, getDataItemValue } from '../../util/model.js';\nvar TimelineModel = /** @class */function (_super) {\n  __extends(TimelineModel, _super);\n  function TimelineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TimelineModel.type;\n    _this.layoutMode = 'box';\n    return _this;\n  }\n  /**\n   * @override\n   */\n  TimelineModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    this._initData();\n  };\n  /**\n   * @override\n   */\n  TimelineModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n    this._initData();\n  };\n  TimelineModel.prototype.setCurrentIndex = function (currentIndex) {\n    if (currentIndex == null) {\n      currentIndex = this.option.currentIndex;\n    }\n    var count = this._data.count();\n    if (this.option.loop) {\n      currentIndex = (currentIndex % count + count) % count;\n    } else {\n      currentIndex >= count && (currentIndex = count - 1);\n      currentIndex < 0 && (currentIndex = 0);\n    }\n    this.option.currentIndex = currentIndex;\n  };\n  /**\n   * @return {number} currentIndex\n   */\n  TimelineModel.prototype.getCurrentIndex = function () {\n    return this.option.currentIndex;\n  };\n  /**\n   * @return {boolean}\n   */\n  TimelineModel.prototype.isIndexMax = function () {\n    return this.getCurrentIndex() >= this._data.count() - 1;\n  };\n  /**\n   * @param {boolean} state true: play, false: stop\n   */\n  TimelineModel.prototype.setPlayState = function (state) {\n    this.option.autoPlay = !!state;\n  };\n  /**\n   * @return {boolean} true: play, false: stop\n   */\n  TimelineModel.prototype.getPlayState = function () {\n    return !!this.option.autoPlay;\n  };\n  /**\n   * @private\n   */\n  TimelineModel.prototype._initData = function () {\n    var thisOption = this.option;\n    var dataArr = thisOption.data || [];\n    var axisType = thisOption.axisType;\n    var names = this._names = [];\n    var processedDataArr;\n    if (axisType === 'category') {\n      processedDataArr = [];\n      each(dataArr, function (item, index) {\n        var value = convertOptionIdName(getDataItemValue(item), '');\n        var newItem;\n        if (isObject(item)) {\n          newItem = clone(item);\n          newItem.value = index;\n        } else {\n          newItem = index;\n        }\n        processedDataArr.push(newItem);\n        names.push(value);\n      });\n    } else {\n      processedDataArr = dataArr;\n    }\n    var dimType = {\n      category: 'ordinal',\n      time: 'time',\n      value: 'number'\n    }[axisType] || 'number';\n    var data = this._data = new SeriesData([{\n      name: 'value',\n      type: dimType\n    }], this);\n    data.initData(processedDataArr, names);\n  };\n  TimelineModel.prototype.getData = function () {\n    return this._data;\n  };\n  /**\n   * @public\n   * @return {Array.<string>} categoreis\n   */\n  TimelineModel.prototype.getCategories = function () {\n    if (this.get('axisType') === 'category') {\n      return this._names.slice();\n    }\n  };\n  TimelineModel.type = 'timeline';\n  /**\n   * @protected\n   */\n  TimelineModel.defaultOption = {\n    // zlevel: 0,                  // \n    z: 4,\n    show: true,\n    axisType: 'time',\n    realtime: true,\n    left: '20%',\n    top: null,\n    right: '20%',\n    bottom: 0,\n    width: null,\n    height: 40,\n    padding: 5,\n    controlPosition: 'left',\n    autoPlay: false,\n    rewind: false,\n    loop: true,\n    playInterval: 2000,\n    currentIndex: 0,\n    itemStyle: {},\n    label: {\n      color: '#000'\n    },\n    data: []\n  };\n  return TimelineModel;\n}(ComponentModel);\nexport default TimelineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport TimelineModel from './TimelineModel.js';\nimport { DataFormatMixin } from '../../model/mixin/dataFormat.js';\nimport { mixin } from 'zrender/lib/core/util.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar SliderTimelineModel = /** @class */function (_super) {\n  __extends(SliderTimelineModel, _super);\n  function SliderTimelineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SliderTimelineModel.type;\n    return _this;\n  }\n  SliderTimelineModel.type = 'timeline.slider';\n  /**\n   * @protected\n   */\n  SliderTimelineModel.defaultOption = inheritDefaultOption(TimelineModel.defaultOption, {\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderWidth: 0,\n    orient: 'horizontal',\n    inverse: false,\n    tooltip: {\n      trigger: 'item' // data item may also have tootip attr.\n    },\n\n    symbol: 'circle',\n    symbolSize: 12,\n    lineStyle: {\n      show: true,\n      width: 2,\n      color: '#DAE1F5'\n    },\n    label: {\n      position: 'auto',\n      // When using number, label position is not\n      // restricted by viewRect.\n      // positive: right/bottom, negative: left/top\n      show: true,\n      interval: 'auto',\n      rotate: 0,\n      // formatter: null,\n      // TEXTSTYLE\n      color: '#A4B1D7'\n    },\n    itemStyle: {\n      color: '#A4B1D7',\n      borderWidth: 1\n    },\n    checkpointStyle: {\n      symbol: 'circle',\n      symbolSize: 15,\n      color: '#316bf3',\n      borderColor: '#fff',\n      borderWidth: 2,\n      shadowBlur: 2,\n      shadowOffsetX: 1,\n      shadowOffsetY: 1,\n      shadowColor: 'rgba(0, 0, 0, 0.3)',\n      // borderColor: 'rgba(194,53,49, 0.5)',\n      animation: true,\n      animationDuration: 300,\n      animationEasing: 'quinticInOut'\n    },\n    controlStyle: {\n      show: true,\n      showPlayBtn: true,\n      showPrevBtn: true,\n      showNextBtn: true,\n      itemSize: 24,\n      itemGap: 12,\n      position: 'left',\n      playIcon: 'path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z',\n      stopIcon: 'path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z',\n      // eslint-disable-next-line max-len\n      nextIcon: 'M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z',\n      // eslint-disable-next-line max-len\n      prevIcon: 'M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z',\n      prevBtnSize: 18,\n      nextBtnSize: 18,\n      color: '#A4B1D7',\n      borderColor: '#A4B1D7',\n      borderWidth: 1\n    },\n    emphasis: {\n      label: {\n        show: true,\n        // TEXTSTYLE\n        color: '#6f778d'\n      },\n      itemStyle: {\n        color: '#316BF3'\n      },\n      controlStyle: {\n        color: '#316BF3',\n        borderColor: '#316BF3',\n        borderWidth: 2\n      }\n    },\n    progress: {\n      lineStyle: {\n        color: '#316BF3'\n      },\n      itemStyle: {\n        color: '#316BF3'\n      },\n      label: {\n        color: '#6f778d'\n      }\n    },\n    data: []\n  });\n  return SliderTimelineModel;\n}(TimelineModel);\nmixin(SliderTimelineModel, DataFormatMixin.prototype);\nexport default SliderTimelineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nvar TimelineView = /** @class */function (_super) {\n  __extends(TimelineView, _super);\n  function TimelineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TimelineView.type;\n    return _this;\n  }\n  TimelineView.type = 'timeline';\n  return TimelineView;\n}(ComponentView);\nexport default TimelineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../../coord/Axis.js';\n/**\n * Extend axis 2d\n */\nvar TimelineAxis = /** @class */function (_super) {\n  __extends(TimelineAxis, _super);\n  function TimelineAxis(dim, scale, coordExtent, axisType) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    _this.type = axisType || 'value';\n    return _this;\n  }\n  /**\n   * @override\n   */\n  TimelineAxis.prototype.getLabelModel = function () {\n    // Force override\n    return this.model.getModel('label');\n  };\n  /**\n   * @override\n   */\n  TimelineAxis.prototype.isHorizontal = function () {\n    return this.model.get('orient') === 'horizontal';\n  };\n  return TimelineAxis;\n}(Axis);\nexport default TimelineAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as graphic from '../../util/graphic.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport * as layout from '../../util/layout.js';\nimport TimelineView from './TimelineView.js';\nimport TimelineAxis from './TimelineAxis.js';\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\nimport * as numberUtil from '../../util/number.js';\nimport { merge, each, extend, isString, bind, defaults, retrieve2 } from 'zrender/lib/core/util.js';\nimport OrdinalScale from '../../scale/Ordinal.js';\nimport TimeScale from '../../scale/Time.js';\nimport IntervalScale from '../../scale/Interval.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nimport { makeInner } from '../../util/model.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { enableHoverEmphasis } from '../../util/states.js';\nimport { createTooltipMarkup } from '../tooltip/tooltipMarkup.js';\nvar PI = Math.PI;\nvar labelDataIndexStore = makeInner();\nvar SliderTimelineView = /** @class */function (_super) {\n  __extends(SliderTimelineView, _super);\n  function SliderTimelineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SliderTimelineView.type;\n    return _this;\n  }\n  SliderTimelineView.prototype.init = function (ecModel, api) {\n    this.api = api;\n  };\n  /**\n   * @override\n   */\n  SliderTimelineView.prototype.render = function (timelineModel, ecModel, api) {\n    this.model = timelineModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    this.group.removeAll();\n    if (timelineModel.get('show', true)) {\n      var layoutInfo_1 = this._layout(timelineModel, api);\n      var mainGroup_1 = this._createGroup('_mainGroup');\n      var labelGroup = this._createGroup('_labelGroup');\n      var axis_1 = this._axis = this._createAxis(layoutInfo_1, timelineModel);\n      timelineModel.formatTooltip = function (dataIndex) {\n        var name = axis_1.scale.getLabel({\n          value: dataIndex\n        });\n        return createTooltipMarkup('nameValue', {\n          noName: true,\n          value: name\n        });\n      };\n      each(['AxisLine', 'AxisTick', 'Control', 'CurrentPointer'], function (name) {\n        this['_render' + name](layoutInfo_1, mainGroup_1, axis_1, timelineModel);\n      }, this);\n      this._renderAxisLabel(layoutInfo_1, labelGroup, axis_1, timelineModel);\n      this._position(layoutInfo_1, timelineModel);\n    }\n    this._doPlayStop();\n    this._updateTicksStatus();\n  };\n  /**\n   * @override\n   */\n  SliderTimelineView.prototype.remove = function () {\n    this._clearTimer();\n    this.group.removeAll();\n  };\n  /**\n   * @override\n   */\n  SliderTimelineView.prototype.dispose = function () {\n    this._clearTimer();\n  };\n  SliderTimelineView.prototype._layout = function (timelineModel, api) {\n    var labelPosOpt = timelineModel.get(['label', 'position']);\n    var orient = timelineModel.get('orient');\n    var viewRect = getViewRect(timelineModel, api);\n    var parsedLabelPos;\n    // Auto label offset.\n    if (labelPosOpt == null || labelPosOpt === 'auto') {\n      parsedLabelPos = orient === 'horizontal' ? viewRect.y + viewRect.height / 2 < api.getHeight() / 2 ? '-' : '+' : viewRect.x + viewRect.width / 2 < api.getWidth() / 2 ? '+' : '-';\n    } else if (isString(labelPosOpt)) {\n      parsedLabelPos = {\n        horizontal: {\n          top: '-',\n          bottom: '+'\n        },\n        vertical: {\n          left: '-',\n          right: '+'\n        }\n      }[orient][labelPosOpt];\n    } else {\n      // is number\n      parsedLabelPos = labelPosOpt;\n    }\n    var labelAlignMap = {\n      horizontal: 'center',\n      vertical: parsedLabelPos >= 0 || parsedLabelPos === '+' ? 'left' : 'right'\n    };\n    var labelBaselineMap = {\n      horizontal: parsedLabelPos >= 0 || parsedLabelPos === '+' ? 'top' : 'bottom',\n      vertical: 'middle'\n    };\n    var rotationMap = {\n      horizontal: 0,\n      vertical: PI / 2\n    };\n    // Position\n    var mainLength = orient === 'vertical' ? viewRect.height : viewRect.width;\n    var controlModel = timelineModel.getModel('controlStyle');\n    var showControl = controlModel.get('show', true);\n    var controlSize = showControl ? controlModel.get('itemSize') : 0;\n    var controlGap = showControl ? controlModel.get('itemGap') : 0;\n    var sizePlusGap = controlSize + controlGap;\n    // Special label rotate.\n    var labelRotation = timelineModel.get(['label', 'rotate']) || 0;\n    labelRotation = labelRotation * PI / 180; // To radian.\n    var playPosition;\n    var prevBtnPosition;\n    var nextBtnPosition;\n    var controlPosition = controlModel.get('position', true);\n    var showPlayBtn = showControl && controlModel.get('showPlayBtn', true);\n    var showPrevBtn = showControl && controlModel.get('showPrevBtn', true);\n    var showNextBtn = showControl && controlModel.get('showNextBtn', true);\n    var xLeft = 0;\n    var xRight = mainLength;\n    // position[0] means left, position[1] means middle.\n    if (controlPosition === 'left' || controlPosition === 'bottom') {\n      showPlayBtn && (playPosition = [0, 0], xLeft += sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [xLeft, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    } else {\n      // 'top' 'right'\n      showPlayBtn && (playPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [0, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    }\n    var axisExtent = [xLeft, xRight];\n    if (timelineModel.get('inverse')) {\n      axisExtent.reverse();\n    }\n    return {\n      viewRect: viewRect,\n      mainLength: mainLength,\n      orient: orient,\n      rotation: rotationMap[orient],\n      labelRotation: labelRotation,\n      labelPosOpt: parsedLabelPos,\n      labelAlign: timelineModel.get(['label', 'align']) || labelAlignMap[orient],\n      labelBaseline: timelineModel.get(['label', 'verticalAlign']) || timelineModel.get(['label', 'baseline']) || labelBaselineMap[orient],\n      // Based on mainGroup.\n      playPosition: playPosition,\n      prevBtnPosition: prevBtnPosition,\n      nextBtnPosition: nextBtnPosition,\n      axisExtent: axisExtent,\n      controlSize: controlSize,\n      controlGap: controlGap\n    };\n  };\n  SliderTimelineView.prototype._position = function (layoutInfo, timelineModel) {\n    // Position is be called finally, because bounding rect is needed for\n    // adapt content to fill viewRect (auto adapt offset).\n    // Timeline may be not all in the viewRect when 'offset' is specified\n    // as a number, because it is more appropriate that label aligns at\n    // 'offset' but not the other edge defined by viewRect.\n    var mainGroup = this._mainGroup;\n    var labelGroup = this._labelGroup;\n    var viewRect = layoutInfo.viewRect;\n    if (layoutInfo.orient === 'vertical') {\n      // transform to horizontal, inverse rotate by left-top point.\n      var m = matrix.create();\n      var rotateOriginX = viewRect.x;\n      var rotateOriginY = viewRect.y + viewRect.height;\n      matrix.translate(m, m, [-rotateOriginX, -rotateOriginY]);\n      matrix.rotate(m, m, -PI / 2);\n      matrix.translate(m, m, [rotateOriginX, rotateOriginY]);\n      viewRect = viewRect.clone();\n      viewRect.applyTransform(m);\n    }\n    var viewBound = getBound(viewRect);\n    var mainBound = getBound(mainGroup.getBoundingRect());\n    var labelBound = getBound(labelGroup.getBoundingRect());\n    var mainPosition = [mainGroup.x, mainGroup.y];\n    var labelsPosition = [labelGroup.x, labelGroup.y];\n    labelsPosition[0] = mainPosition[0] = viewBound[0][0];\n    var labelPosOpt = layoutInfo.labelPosOpt;\n    if (labelPosOpt == null || isString(labelPosOpt)) {\n      // '+' or '-'\n      var mainBoundIdx = labelPosOpt === '+' ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      toBound(labelsPosition, labelBound, viewBound, 1, 1 - mainBoundIdx);\n    } else {\n      var mainBoundIdx = labelPosOpt >= 0 ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      labelsPosition[1] = mainPosition[1] + labelPosOpt;\n    }\n    mainGroup.setPosition(mainPosition);\n    labelGroup.setPosition(labelsPosition);\n    mainGroup.rotation = labelGroup.rotation = layoutInfo.rotation;\n    setOrigin(mainGroup);\n    setOrigin(labelGroup);\n    function setOrigin(targetGroup) {\n      targetGroup.originX = viewBound[0][0] - targetGroup.x;\n      targetGroup.originY = viewBound[1][0] - targetGroup.y;\n    }\n    function getBound(rect) {\n      // [[xmin, xmax], [ymin, ymax]]\n      return [[rect.x, rect.x + rect.width], [rect.y, rect.y + rect.height]];\n    }\n    function toBound(fromPos, from, to, dimIdx, boundIdx) {\n      fromPos[dimIdx] += to[dimIdx][boundIdx] - from[dimIdx][boundIdx];\n    }\n  };\n  SliderTimelineView.prototype._createAxis = function (layoutInfo, timelineModel) {\n    var data = timelineModel.getData();\n    var axisType = timelineModel.get('axisType');\n    var scale = createScaleByModel(timelineModel, axisType);\n    // Customize scale. The `tickValue` is `dataIndex`.\n    scale.getTicks = function () {\n      return data.mapArray(['value'], function (value) {\n        return {\n          value: value\n        };\n      });\n    };\n    var dataExtent = data.getDataExtent('value');\n    scale.setExtent(dataExtent[0], dataExtent[1]);\n    scale.calcNiceTicks();\n    var axis = new TimelineAxis('value', scale, layoutInfo.axisExtent, axisType);\n    axis.model = timelineModel;\n    return axis;\n  };\n  SliderTimelineView.prototype._createGroup = function (key) {\n    var newGroup = this[key] = new graphic.Group();\n    this.group.add(newGroup);\n    return newGroup;\n  };\n  SliderTimelineView.prototype._renderAxisLine = function (layoutInfo, group, axis, timelineModel) {\n    var axisExtent = axis.getExtent();\n    if (!timelineModel.get(['lineStyle', 'show'])) {\n      return;\n    }\n    var line = new graphic.Line({\n      shape: {\n        x1: axisExtent[0],\n        y1: 0,\n        x2: axisExtent[1],\n        y2: 0\n      },\n      style: extend({\n        lineCap: 'round'\n      }, timelineModel.getModel('lineStyle').getLineStyle()),\n      silent: true,\n      z2: 1\n    });\n    group.add(line);\n    var progressLine = this._progressLine = new graphic.Line({\n      shape: {\n        x1: axisExtent[0],\n        x2: this._currentPointer ? this._currentPointer.x : axisExtent[0],\n        y1: 0,\n        y2: 0\n      },\n      style: defaults({\n        lineCap: 'round',\n        lineWidth: line.style.lineWidth\n      }, timelineModel.getModel(['progress', 'lineStyle']).getLineStyle()),\n      silent: true,\n      z2: 1\n    });\n    group.add(progressLine);\n  };\n  SliderTimelineView.prototype._renderAxisTick = function (layoutInfo, group, axis, timelineModel) {\n    var _this = this;\n    var data = timelineModel.getData();\n    // Show all ticks, despite ignoring strategy.\n    var ticks = axis.scale.getTicks();\n    this._tickSymbols = [];\n    // The value is dataIndex, see the customized scale.\n    each(ticks, function (tick) {\n      var tickCoord = axis.dataToCoord(tick.value);\n      var itemModel = data.getItemModel(tick.value);\n      var itemStyleModel = itemModel.getModel('itemStyle');\n      var hoverStyleModel = itemModel.getModel(['emphasis', 'itemStyle']);\n      var progressStyleModel = itemModel.getModel(['progress', 'itemStyle']);\n      var symbolOpt = {\n        x: tickCoord,\n        y: 0,\n        onclick: bind(_this._changeTimeline, _this, tick.value)\n      };\n      var el = giveSymbol(itemModel, itemStyleModel, group, symbolOpt);\n      el.ensureState('emphasis').style = hoverStyleModel.getItemStyle();\n      el.ensureState('progress').style = progressStyleModel.getItemStyle();\n      enableHoverEmphasis(el);\n      var ecData = getECData(el);\n      if (itemModel.get('tooltip')) {\n        ecData.dataIndex = tick.value;\n        ecData.dataModel = timelineModel;\n      } else {\n        ecData.dataIndex = ecData.dataModel = null;\n      }\n      _this._tickSymbols.push(el);\n    });\n  };\n  SliderTimelineView.prototype._renderAxisLabel = function (layoutInfo, group, axis, timelineModel) {\n    var _this = this;\n    var labelModel = axis.getLabelModel();\n    if (!labelModel.get('show')) {\n      return;\n    }\n    var data = timelineModel.getData();\n    var labels = axis.getViewLabels();\n    this._tickLabels = [];\n    each(labels, function (labelItem) {\n      // The tickValue is dataIndex, see the customized scale.\n      var dataIndex = labelItem.tickValue;\n      var itemModel = data.getItemModel(dataIndex);\n      var normalLabelModel = itemModel.getModel('label');\n      var hoverLabelModel = itemModel.getModel(['emphasis', 'label']);\n      var progressLabelModel = itemModel.getModel(['progress', 'label']);\n      var tickCoord = axis.dataToCoord(labelItem.tickValue);\n      var textEl = new graphic.Text({\n        x: tickCoord,\n        y: 0,\n        rotation: layoutInfo.labelRotation - layoutInfo.rotation,\n        onclick: bind(_this._changeTimeline, _this, dataIndex),\n        silent: false,\n        style: createTextStyle(normalLabelModel, {\n          text: labelItem.formattedLabel,\n          align: layoutInfo.labelAlign,\n          verticalAlign: layoutInfo.labelBaseline\n        })\n      });\n      textEl.ensureState('emphasis').style = createTextStyle(hoverLabelModel);\n      textEl.ensureState('progress').style = createTextStyle(progressLabelModel);\n      group.add(textEl);\n      enableHoverEmphasis(textEl);\n      labelDataIndexStore(textEl).dataIndex = dataIndex;\n      _this._tickLabels.push(textEl);\n    });\n  };\n  SliderTimelineView.prototype._renderControl = function (layoutInfo, group, axis, timelineModel) {\n    var controlSize = layoutInfo.controlSize;\n    var rotation = layoutInfo.rotation;\n    var itemStyle = timelineModel.getModel('controlStyle').getItemStyle();\n    var hoverStyle = timelineModel.getModel(['emphasis', 'controlStyle']).getItemStyle();\n    var playState = timelineModel.getPlayState();\n    var inverse = timelineModel.get('inverse', true);\n    makeBtn(layoutInfo.nextBtnPosition, 'next', bind(this._changeTimeline, this, inverse ? '-' : '+'));\n    makeBtn(layoutInfo.prevBtnPosition, 'prev', bind(this._changeTimeline, this, inverse ? '+' : '-'));\n    makeBtn(layoutInfo.playPosition, playState ? 'stop' : 'play', bind(this._handlePlayClick, this, !playState), true);\n    function makeBtn(position, iconName, onclick, willRotate) {\n      if (!position) {\n        return;\n      }\n      var iconSize = parsePercent(retrieve2(timelineModel.get(['controlStyle', iconName + 'BtnSize']), controlSize), controlSize);\n      var rect = [0, -iconSize / 2, iconSize, iconSize];\n      var btn = makeControlIcon(timelineModel, iconName + 'Icon', rect, {\n        x: position[0],\n        y: position[1],\n        originX: controlSize / 2,\n        originY: 0,\n        rotation: willRotate ? -rotation : 0,\n        rectHover: true,\n        style: itemStyle,\n        onclick: onclick\n      });\n      btn.ensureState('emphasis').style = hoverStyle;\n      group.add(btn);\n      enableHoverEmphasis(btn);\n    }\n  };\n  SliderTimelineView.prototype._renderCurrentPointer = function (layoutInfo, group, axis, timelineModel) {\n    var data = timelineModel.getData();\n    var currentIndex = timelineModel.getCurrentIndex();\n    var pointerModel = data.getItemModel(currentIndex).getModel('checkpointStyle');\n    var me = this;\n    var callback = {\n      onCreate: function (pointer) {\n        pointer.draggable = true;\n        pointer.drift = bind(me._handlePointerDrag, me);\n        pointer.ondragend = bind(me._handlePointerDragend, me);\n        pointerMoveTo(pointer, me._progressLine, currentIndex, axis, timelineModel, true);\n      },\n      onUpdate: function (pointer) {\n        pointerMoveTo(pointer, me._progressLine, currentIndex, axis, timelineModel);\n      }\n    };\n    // Reuse when exists, for animation and drag.\n    this._currentPointer = giveSymbol(pointerModel, pointerModel, this._mainGroup, {}, this._currentPointer, callback);\n  };\n  SliderTimelineView.prototype._handlePlayClick = function (nextState) {\n    this._clearTimer();\n    this.api.dispatchAction({\n      type: 'timelinePlayChange',\n      playState: nextState,\n      from: this.uid\n    });\n  };\n  SliderTimelineView.prototype._handlePointerDrag = function (dx, dy, e) {\n    this._clearTimer();\n    this._pointerChangeTimeline([e.offsetX, e.offsetY]);\n  };\n  SliderTimelineView.prototype._handlePointerDragend = function (e) {\n    this._pointerChangeTimeline([e.offsetX, e.offsetY], true);\n  };\n  SliderTimelineView.prototype._pointerChangeTimeline = function (mousePos, trigger) {\n    var toCoord = this._toAxisCoord(mousePos)[0];\n    var axis = this._axis;\n    var axisExtent = numberUtil.asc(axis.getExtent().slice());\n    toCoord > axisExtent[1] && (toCoord = axisExtent[1]);\n    toCoord < axisExtent[0] && (toCoord = axisExtent[0]);\n    this._currentPointer.x = toCoord;\n    this._currentPointer.markRedraw();\n    var progressLine = this._progressLine;\n    if (progressLine) {\n      progressLine.shape.x2 = toCoord;\n      progressLine.dirty();\n    }\n    var targetDataIndex = this._findNearestTick(toCoord);\n    var timelineModel = this.model;\n    if (trigger || targetDataIndex !== timelineModel.getCurrentIndex() && timelineModel.get('realtime')) {\n      this._changeTimeline(targetDataIndex);\n    }\n  };\n  SliderTimelineView.prototype._doPlayStop = function () {\n    var _this = this;\n    this._clearTimer();\n    if (this.model.getPlayState()) {\n      this._timer = setTimeout(function () {\n        // Do not cache\n        var timelineModel = _this.model;\n        _this._changeTimeline(timelineModel.getCurrentIndex() + (timelineModel.get('rewind', true) ? -1 : 1));\n      }, this.model.get('playInterval'));\n    }\n  };\n  SliderTimelineView.prototype._toAxisCoord = function (vertex) {\n    var trans = this._mainGroup.getLocalTransform();\n    return graphic.applyTransform(vertex, trans, true);\n  };\n  SliderTimelineView.prototype._findNearestTick = function (axisCoord) {\n    var data = this.model.getData();\n    var dist = Infinity;\n    var targetDataIndex;\n    var axis = this._axis;\n    data.each(['value'], function (value, dataIndex) {\n      var coord = axis.dataToCoord(value);\n      var d = Math.abs(coord - axisCoord);\n      if (d < dist) {\n        dist = d;\n        targetDataIndex = dataIndex;\n      }\n    });\n    return targetDataIndex;\n  };\n  SliderTimelineView.prototype._clearTimer = function () {\n    if (this._timer) {\n      clearTimeout(this._timer);\n      this._timer = null;\n    }\n  };\n  SliderTimelineView.prototype._changeTimeline = function (nextIndex) {\n    var currentIndex = this.model.getCurrentIndex();\n    if (nextIndex === '+') {\n      nextIndex = currentIndex + 1;\n    } else if (nextIndex === '-') {\n      nextIndex = currentIndex - 1;\n    }\n    this.api.dispatchAction({\n      type: 'timelineChange',\n      currentIndex: nextIndex,\n      from: this.uid\n    });\n  };\n  SliderTimelineView.prototype._updateTicksStatus = function () {\n    var currentIndex = this.model.getCurrentIndex();\n    var tickSymbols = this._tickSymbols;\n    var tickLabels = this._tickLabels;\n    if (tickSymbols) {\n      for (var i = 0; i < tickSymbols.length; i++) {\n        tickSymbols && tickSymbols[i] && tickSymbols[i].toggleState('progress', i < currentIndex);\n      }\n    }\n    if (tickLabels) {\n      for (var i = 0; i < tickLabels.length; i++) {\n        tickLabels && tickLabels[i] && tickLabels[i].toggleState('progress', labelDataIndexStore(tickLabels[i]).dataIndex <= currentIndex);\n      }\n    }\n  };\n  SliderTimelineView.type = 'timeline.slider';\n  return SliderTimelineView;\n}(TimelineView);\nfunction createScaleByModel(model, axisType) {\n  axisType = axisType || model.get('type');\n  if (axisType) {\n    switch (axisType) {\n      // Buildin scale\n      case 'category':\n        return new OrdinalScale({\n          ordinalMeta: model.getCategories(),\n          extent: [Infinity, -Infinity]\n        });\n      case 'time':\n        return new TimeScale({\n          locale: model.ecModel.getLocaleModel(),\n          useUTC: model.ecModel.get('useUTC')\n        });\n      default:\n        // default to be value\n        return new IntervalScale();\n    }\n  }\n}\nfunction getViewRect(model, api) {\n  return layout.getLayoutRect(model.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  }, model.get('padding'));\n}\nfunction makeControlIcon(timelineModel, objPath, rect, opts) {\n  var style = opts.style;\n  var icon = graphic.createIcon(timelineModel.get(['controlStyle', objPath]), opts || {}, new BoundingRect(rect[0], rect[1], rect[2], rect[3]));\n  // TODO createIcon won't use style in opt.\n  if (style) {\n    icon.setStyle(style);\n  }\n  return icon;\n}\n/**\n * Create symbol or update symbol\n * opt: basic position and event handlers\n */\nfunction giveSymbol(hostModel, itemStyleModel, group, opt, symbol, callback) {\n  var color = itemStyleModel.get('color');\n  if (!symbol) {\n    var symbolType = hostModel.get('symbol');\n    symbol = createSymbol(symbolType, -1, -1, 2, 2, color);\n    symbol.setStyle('strokeNoScale', true);\n    group.add(symbol);\n    callback && callback.onCreate(symbol);\n  } else {\n    symbol.setColor(color);\n    group.add(symbol); // Group may be new, also need to add.\n    callback && callback.onUpdate(symbol);\n  }\n  // Style\n  var itemStyle = itemStyleModel.getItemStyle(['color']);\n  symbol.setStyle(itemStyle);\n  // Transform and events.\n  opt = merge({\n    rectHover: true,\n    z2: 100\n  }, opt, true);\n  var symbolSize = normalizeSymbolSize(hostModel.get('symbolSize'));\n  opt.scaleX = symbolSize[0] / 2;\n  opt.scaleY = symbolSize[1] / 2;\n  var symbolOffset = normalizeSymbolOffset(hostModel.get('symbolOffset'), symbolSize);\n  if (symbolOffset) {\n    opt.x = (opt.x || 0) + symbolOffset[0];\n    opt.y = (opt.y || 0) + symbolOffset[1];\n  }\n  var symbolRotate = hostModel.get('symbolRotate');\n  opt.rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n  symbol.attr(opt);\n  // FIXME\n  // (1) When symbol.style.strokeNoScale is true and updateTransform is not performed,\n  // getBoundingRect will return wrong result.\n  // (This is supposed to be resolved in zrender, but it is a little difficult to\n  // leverage performance and auto updateTransform)\n  // (2) All of ancesters of symbol do not scale, so we can just updateTransform symbol.\n  symbol.updateTransform();\n  return symbol;\n}\nfunction pointerMoveTo(pointer, progressLine, dataIndex, axis, timelineModel, noAnimation) {\n  if (pointer.dragging) {\n    return;\n  }\n  var pointerModel = timelineModel.getModel('checkpointStyle');\n  var toCoord = axis.dataToCoord(timelineModel.getData().get('value', dataIndex));\n  if (noAnimation || !pointerModel.get('animation', true)) {\n    pointer.attr({\n      x: toCoord,\n      y: 0\n    });\n    progressLine && progressLine.attr({\n      shape: {\n        x2: toCoord\n      }\n    });\n  } else {\n    var animationCfg = {\n      duration: pointerModel.get('animationDuration', true),\n      easing: pointerModel.get('animationEasing', true)\n    };\n    pointer.stopAnimation(null, true);\n    pointer.animateTo({\n      x: toCoord,\n      y: 0\n    }, animationCfg);\n    progressLine && progressLine.animateTo({\n      shape: {\n        x2: toCoord\n      }\n    }, animationCfg);\n  }\n}\nexport default SliderTimelineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { defaults } from 'zrender/lib/core/util.js';\nexport function installTimelineAction(registers) {\n  registers.registerAction({\n    type: 'timelineChange',\n    event: 'timelineChanged',\n    update: 'prepareAndUpdate'\n  }, function (payload, ecModel, api) {\n    var timelineModel = ecModel.getComponent('timeline');\n    if (timelineModel && payload.currentIndex != null) {\n      timelineModel.setCurrentIndex(payload.currentIndex);\n      if (!timelineModel.get('loop', true) && timelineModel.isIndexMax() && timelineModel.getPlayState()) {\n        timelineModel.setPlayState(false);\n        // The timeline has played to the end, trigger event\n        api.dispatchAction({\n          type: 'timelinePlayChange',\n          playState: false,\n          from: payload.from\n        });\n      }\n    }\n    // Set normalized currentIndex to payload.\n    ecModel.resetOption('timeline', {\n      replaceMerge: timelineModel.get('replaceMerge', true)\n    });\n    return defaults({\n      currentIndex: timelineModel.option.currentIndex\n    }, payload);\n  });\n  registers.registerAction({\n    type: 'timelinePlayChange',\n    event: 'timelinePlayChanged',\n    update: 'update'\n  }, function (payload, ecModel) {\n    var timelineModel = ecModel.getComponent('timeline');\n    if (timelineModel && payload.playState != null) {\n      timelineModel.setPlayState(payload.playState);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function timelinePreprocessor(option) {\n  var timelineOpt = option && option.timeline;\n  if (!zrUtil.isArray(timelineOpt)) {\n    timelineOpt = timelineOpt ? [timelineOpt] : [];\n  }\n  zrUtil.each(timelineOpt, function (opt) {\n    if (!opt) {\n      return;\n    }\n    compatibleEC2(opt);\n  });\n}\nfunction compatibleEC2(opt) {\n  var type = opt.type;\n  var ec2Types = {\n    'number': 'value',\n    'time': 'time'\n  };\n  // Compatible with ec2\n  if (ec2Types[type]) {\n    opt.axisType = ec2Types[type];\n    delete opt.type;\n  }\n  transferItem(opt);\n  if (has(opt, 'controlPosition')) {\n    var controlStyle = opt.controlStyle || (opt.controlStyle = {});\n    if (!has(controlStyle, 'position')) {\n      controlStyle.position = opt.controlPosition;\n    }\n    if (controlStyle.position === 'none' && !has(controlStyle, 'show')) {\n      controlStyle.show = false;\n      delete controlStyle.position;\n    }\n    delete opt.controlPosition;\n  }\n  zrUtil.each(opt.data || [], function (dataItem) {\n    if (zrUtil.isObject(dataItem) && !zrUtil.isArray(dataItem)) {\n      if (!has(dataItem, 'value') && has(dataItem, 'name')) {\n        // In ec2, using name as value.\n        dataItem.value = dataItem.name;\n      }\n      transferItem(dataItem);\n    }\n  });\n}\nfunction transferItem(opt) {\n  var itemStyle = opt.itemStyle || (opt.itemStyle = {});\n  var itemStyleEmphasis = itemStyle.emphasis || (itemStyle.emphasis = {});\n  // Transfer label out\n  var label = opt.label || opt.label || {};\n  var labelNormal = label.normal || (label.normal = {});\n  var excludeLabelAttr = {\n    normal: 1,\n    emphasis: 1\n  };\n  zrUtil.each(label, function (value, name) {\n    if (!excludeLabelAttr[name] && !has(labelNormal, name)) {\n      labelNormal[name] = value;\n    }\n  });\n  if (itemStyleEmphasis.label && !has(label, 'emphasis')) {\n    label.emphasis = itemStyleEmphasis.label;\n    delete itemStyleEmphasis.label;\n  }\n}\nfunction has(obj, attr) {\n  return obj.hasOwnProperty(attr);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport SliderTimelineModel from './SliderTimelineModel.js';\nimport SliderTimelineView from './SliderTimelineView.js';\nimport { installTimelineAction } from './timelineAction.js';\nimport preprocessor from './preprocessor.js';\nexport function install(registers) {\n  registers.registerComponentModel(SliderTimelineModel);\n  registers.registerComponentView(SliderTimelineView);\n  registers.registerSubTypeDefaulter('timeline', function () {\n    // Only slider now.\n    return 'slider';\n  });\n  installTimelineAction(registers);\n  registers.registerPreprocessor(preprocessor);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport ComponentModel from '../../model/Component.js';\nimport ComponentView from '../../view/Component.js';\nimport { windowOpen } from '../../util/format.js';\nvar TitleModel = /** @class */function (_super) {\n  __extends(TitleModel, _super);\n  function TitleModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TitleModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    return _this;\n  }\n  TitleModel.type = 'title';\n  TitleModel.defaultOption = {\n    // zlevel: 0,\n    z: 6,\n    show: true,\n    text: '',\n    target: 'blank',\n    subtext: '',\n    subtarget: 'blank',\n    left: 0,\n    top: 0,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 10,\n    textStyle: {\n      fontSize: 18,\n      fontWeight: 'bold',\n      color: '#464646'\n    },\n    subtextStyle: {\n      fontSize: 12,\n      color: '#6E7079'\n    }\n  };\n  return TitleModel;\n}(ComponentModel);\n// View\nvar TitleView = /** @class */function (_super) {\n  __extends(TitleView, _super);\n  function TitleView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TitleView.type;\n    return _this;\n  }\n  TitleView.prototype.render = function (titleModel, ecModel, api) {\n    this.group.removeAll();\n    if (!titleModel.get('show')) {\n      return;\n    }\n    var group = this.group;\n    var textStyleModel = titleModel.getModel('textStyle');\n    var subtextStyleModel = titleModel.getModel('subtextStyle');\n    var textAlign = titleModel.get('textAlign');\n    var textVerticalAlign = zrUtil.retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n    var textEl = new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: titleModel.get('text'),\n        fill: textStyleModel.getTextColor()\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var textRect = textEl.getBoundingRect();\n    var subText = titleModel.get('subtext');\n    var subTextEl = new graphic.Text({\n      style: createTextStyle(subtextStyleModel, {\n        text: subText,\n        fill: subtextStyleModel.getTextColor(),\n        y: textRect.height + titleModel.get('itemGap'),\n        verticalAlign: 'top'\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var link = titleModel.get('link');\n    var sublink = titleModel.get('sublink');\n    var triggerEvent = titleModel.get('triggerEvent', true);\n    textEl.silent = !link && !triggerEvent;\n    subTextEl.silent = !sublink && !triggerEvent;\n    if (link) {\n      textEl.on('click', function () {\n        windowOpen(link, '_' + titleModel.get('target'));\n      });\n    }\n    if (sublink) {\n      subTextEl.on('click', function () {\n        windowOpen(sublink, '_' + titleModel.get('subtarget'));\n      });\n    }\n    getECData(textEl).eventData = getECData(subTextEl).eventData = triggerEvent ? {\n      componentType: 'title',\n      componentIndex: titleModel.componentIndex\n    } : null;\n    group.add(textEl);\n    subText && group.add(subTextEl);\n    // If no subText, but add subTextEl, there will be an empty line.\n    var groupRect = group.getBoundingRect();\n    var layoutOption = titleModel.getBoxLayoutParams();\n    layoutOption.width = groupRect.width;\n    layoutOption.height = groupRect.height;\n    var layoutRect = getLayoutRect(layoutOption, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }, titleModel.get('padding'));\n    // Adjust text align based on position\n    if (!textAlign) {\n      // Align left if title is on the left. center and right is same\n      textAlign = titleModel.get('left') || titleModel.get('right');\n      // @ts-ignore\n      if (textAlign === 'middle') {\n        textAlign = 'center';\n      }\n      // Adjust layout by text align\n      if (textAlign === 'right') {\n        layoutRect.x += layoutRect.width;\n      } else if (textAlign === 'center') {\n        layoutRect.x += layoutRect.width / 2;\n      }\n    }\n    if (!textVerticalAlign) {\n      textVerticalAlign = titleModel.get('top') || titleModel.get('bottom');\n      // @ts-ignore\n      if (textVerticalAlign === 'center') {\n        textVerticalAlign = 'middle';\n      }\n      if (textVerticalAlign === 'bottom') {\n        layoutRect.y += layoutRect.height;\n      } else if (textVerticalAlign === 'middle') {\n        layoutRect.y += layoutRect.height / 2;\n      }\n      textVerticalAlign = textVerticalAlign || 'top';\n    }\n    group.x = layoutRect.x;\n    group.y = layoutRect.y;\n    group.markRedraw();\n    var alignStyle = {\n      align: textAlign,\n      verticalAlign: textVerticalAlign\n    };\n    textEl.setStyle(alignStyle);\n    subTextEl.setStyle(alignStyle);\n    // Render background\n    // Get groupRect again because textAlign has been changed\n    groupRect = group.getBoundingRect();\n    var padding = layoutRect.margin;\n    var style = titleModel.getItemStyle(['color', 'opacity']);\n    style.fill = titleModel.get('backgroundColor');\n    var rect = new graphic.Rect({\n      shape: {\n        x: groupRect.x - padding[3],\n        y: groupRect.y - padding[0],\n        width: groupRect.width + padding[1] + padding[3],\n        height: groupRect.height + padding[0] + padding[2],\n        r: titleModel.get('borderRadius')\n      },\n      style: style,\n      subPixelOptimize: true,\n      silent: true\n    });\n    group.add(rect);\n  };\n  TitleView.type = 'title';\n  return TitleView;\n}(ComponentView);\nexport function install(registers) {\n  registers.registerComponentModel(TitleModel);\n  registers.registerComponentView(TitleView);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nvar ToolboxFeature = /** @class */function () {\n  function ToolboxFeature() {}\n  return ToolboxFeature;\n}();\nexport { ToolboxFeature };\nvar features = {};\nexport function registerFeature(name, ctor) {\n  features[name] = ctor;\n}\nexport function getFeature(name) {\n  return features[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nvar ICON_TYPES = ['rect', 'polygon', 'lineX', 'lineY', 'keep', 'clear'];\nvar BrushFeature = /** @class */function (_super) {\n  __extends(BrushFeature, _super);\n  function BrushFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  BrushFeature.prototype.render = function (featureModel, ecModel, api) {\n    var brushType;\n    var brushMode;\n    var isBrushed;\n    ecModel.eachComponent({\n      mainType: 'brush'\n    }, function (brushModel) {\n      brushType = brushModel.brushType;\n      brushMode = brushModel.brushOption.brushMode || 'single';\n      isBrushed = isBrushed || !!brushModel.areas.length;\n    });\n    this._brushType = brushType;\n    this._brushMode = brushMode;\n    zrUtil.each(featureModel.get('type', true), function (type) {\n      featureModel.setIconStatus(type, (type === 'keep' ? brushMode === 'multiple' : type === 'clear' ? isBrushed : type === brushType) ? 'emphasis' : 'normal');\n    });\n  };\n  BrushFeature.prototype.updateView = function (featureModel, ecModel, api) {\n    this.render(featureModel, ecModel, api);\n  };\n  BrushFeature.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon', true);\n    var icons = {};\n    zrUtil.each(model.get('type', true), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n  ;\n  BrushFeature.prototype.onclick = function (ecModel, api, type) {\n    var brushType = this._brushType;\n    var brushMode = this._brushMode;\n    if (type === 'clear') {\n      // Trigger parallel action firstly\n      api.dispatchAction({\n        type: 'axisAreaSelect',\n        intervals: []\n      });\n      api.dispatchAction({\n        type: 'brush',\n        command: 'clear',\n        // Clear all areas of all brush components.\n        areas: []\n      });\n    } else {\n      api.dispatchAction({\n        type: 'takeGlobalCursor',\n        key: 'brush',\n        brushOption: {\n          brushType: type === 'keep' ? brushType : brushType === type ? false : type,\n          brushMode: type === 'keep' ? brushMode === 'multiple' ? 'single' : 'multiple' : brushMode\n        }\n      });\n    }\n  };\n  ;\n  BrushFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: ICON_TYPES.slice(),\n      icon: {\n        /* eslint-disable */\n        rect: 'M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13',\n        polygon: 'M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2',\n        lineX: 'M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4',\n        lineY: 'M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4',\n        keep: 'M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z',\n        clear: 'M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2' // jshint ignore:line\n        /* eslint-enable */\n      },\n\n      // `rect`, `polygon`, `lineX`, `lineY`, `keep`, `clear`\n      title: ecModel.getLocaleModel().get(['toolbox', 'brush', 'title'])\n    };\n    return defaultOption;\n  };\n  return BrushFeature;\n}(ToolboxFeature);\nexport default BrushFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as featureManager from './featureManager.js';\nimport ComponentModel from '../../model/Component.js';\nvar ToolboxModel = /** @class */function (_super) {\n  __extends(ToolboxModel, _super);\n  function ToolboxModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ToolboxModel.type;\n    return _this;\n  }\n  ToolboxModel.prototype.optionUpdated = function () {\n    _super.prototype.optionUpdated.apply(this, arguments);\n    var ecModel = this.ecModel;\n    zrUtil.each(this.option.feature, function (featureOpt, featureName) {\n      var Feature = featureManager.getFeature(featureName);\n      if (Feature) {\n        if (Feature.getDefaultOption) {\n          Feature.defaultOption = Feature.getDefaultOption(ecModel);\n        }\n        zrUtil.merge(featureOpt, Feature.defaultOption);\n      }\n    });\n  };\n  ToolboxModel.type = 'toolbox';\n  ToolboxModel.layoutMode = {\n    type: 'box',\n    ignoreSize: true\n  };\n  ToolboxModel.defaultOption = {\n    show: true,\n    z: 6,\n    // zlevel: 0,\n    orient: 'horizontal',\n    left: 'right',\n    top: 'top',\n    // right\n    // bottom\n    backgroundColor: 'transparent',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemSize: 15,\n    itemGap: 8,\n    showTitle: true,\n    iconStyle: {\n      borderColor: '#666',\n      color: 'none'\n    },\n    emphasis: {\n      iconStyle: {\n        borderColor: '#3E98C5'\n      }\n    },\n    // textStyle: {},\n    // feature\n    tooltip: {\n      show: false,\n      position: 'bottom'\n    }\n  };\n  return ToolboxModel;\n}(ComponentModel);\nexport default ToolboxModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis } from '../../util/states.js';\nimport Model from '../../model/Model.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport * as listComponentHelper from '../helper/listComponent.js';\nimport ComponentView from '../../view/Component.js';\nimport { ToolboxFeature, getFeature } from './featureManager.js';\nimport { getUID } from '../../util/component.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { getFont } from '../../label/labelStyle.js';\nvar ToolboxView = /** @class */function (_super) {\n  __extends(ToolboxView, _super);\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n    var itemSize = +toolboxModel.get('itemSize');\n    var isVertical = toolboxModel.get('orient') === 'vertical';\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute();\n    // Keep for diff.\n    this._featureNames = featureNames;\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature;\n      // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = getFeature(featureName);\n          if (!Feature) {\n            return;\n          }\n          feature = new Feature();\n        }\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName];\n        // If feature does not exist.\n        if (!feature) {\n          return;\n        }\n      }\n      feature.uid = getUID('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n      var isToolboxFeature = feature instanceof ToolboxFeature;\n      if (!featureName && oldName) {\n        isToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n        return;\n      }\n      if (!featureModel.get('show') || isToolboxFeature && feature.unusable) {\n        isToolboxFeature && feature.remove && feature.remove(ecModel, api);\n        return;\n      }\n      createIconPaths(featureModel, feature, featureName);\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n      if (feature instanceof ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']);\n      // If one feature has multiple icons, they are organized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n      var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n      if (zrUtil.isString(icons)) {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n      if (zrUtil.isString(titles)) {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle();\n        // Text position calculation\n        // TODO: extract `textStyle` from `iconStyle` and use `createTextStyle`\n        var textContent = new ZRText({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null,\n            font: getFont({\n              fontStyle: iconStyleEmphasisModel.get('textFontStyle'),\n              fontFamily: iconStyleEmphasisModel.get('textFontFamily'),\n              fontSize: iconStyleEmphasisModel.get('textFontSize'),\n              fontWeight: iconStyleEmphasisModel.get('textFontWeight')\n            }, ecModel)\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        graphic.setTooltipConfig({\n          el: path,\n          componentModel: toolboxModel,\n          itemName: iconName,\n          formatterParamsExtra: {\n            title: titlesMap[iconName]\n          }\n        });\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = isVertical ? toolboxModel.get('right') == null && toolboxModel.get('left') !== 'right' ? 'right' : 'left' : toolboxModel.get('bottom') == null && toolboxModel.get('top') !== 'bottom' ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle');\n          // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n          api.enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            api.leaveEmphasis(this);\n          }\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n    listComponentHelper.layout(group, toolboxModel, api);\n    // Render background after group is layout\n    // FIXME\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel));\n    // Adjust icon title positions to avoid them out of screen\n    isVertical || group.eachChild(function (icon) {\n      var titleText = icon.__title;\n      // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.ensureState('emphasis');\n      // May be background element\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 10;\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  };\n  // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(ComponentView);\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\nexport default ToolboxView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global window, Uint8Array, document */\nimport env from 'zrender/lib/core/env.js';\nimport { ToolboxFeature } from '../featureManager.js';\nvar SaveAsImage = /** @class */function (_super) {\n  __extends(SaveAsImage, _super);\n  function SaveAsImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  SaveAsImage.prototype.onclick = function (ecModel, api) {\n    var model = this.model;\n    var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n    var isSvg = api.getZr().painter.getType() === 'svg';\n    var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n    var url = api.getConnectedDataURL({\n      type: type,\n      backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n      connectedBackgroundColor: model.get('connectedBackgroundColor'),\n      excludeComponents: model.get('excludeComponents'),\n      pixelRatio: model.get('pixelRatio')\n    });\n    var browser = env.browser;\n    // Chrome, Firefox, New Edge\n    if (typeof MouseEvent === 'function' && (browser.newEdge || !browser.ie && !browser.edge)) {\n      var $a = document.createElement('a');\n      $a.download = title + '.' + type;\n      $a.target = '_blank';\n      $a.href = url;\n      var evt = new MouseEvent('click', {\n        // some micro front-end framework window maybe is a Proxy\n        view: document.defaultView,\n        bubbles: true,\n        cancelable: false\n      });\n      $a.dispatchEvent(evt);\n    }\n    // IE or old Edge\n    else {\n      // @ts-ignore\n      if (window.navigator.msSaveOrOpenBlob || isSvg) {\n        var parts = url.split(',');\n        // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n        var base64Encoded = parts[0].indexOf('base64') > -1;\n        var bstr = isSvg\n        // should decode the svg data uri first\n        ? decodeURIComponent(parts[1]) : parts[1];\n        // only `atob` when the data uri is encoded with base64\n        // otherwise, like `svg` data uri exported by zrender,\n        // there will be an error, for it's not encoded with base64.\n        // (just a url-encoded string through `encodeURIComponent`)\n        base64Encoded && (bstr = window.atob(bstr));\n        var filename = title + '.' + type;\n        // @ts-ignore\n        if (window.navigator.msSaveOrOpenBlob) {\n          var n = bstr.length;\n          var u8arr = new Uint8Array(n);\n          while (n--) {\n            u8arr[n] = bstr.charCodeAt(n);\n          }\n          var blob = new Blob([u8arr]); // @ts-ignore\n          window.navigator.msSaveOrOpenBlob(blob, filename);\n        } else {\n          var frame = document.createElement('iframe');\n          document.body.appendChild(frame);\n          var cw = frame.contentWindow;\n          var doc = cw.document;\n          doc.open('image/svg+xml', 'replace');\n          doc.write(bstr);\n          doc.close();\n          cw.focus();\n          doc.execCommand('SaveAs', true, filename);\n          document.body.removeChild(frame);\n        }\n      } else {\n        var lang = model.get('lang');\n        var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n        var tab = window.open();\n        tab.document.write(html);\n        tab.document.title = title;\n      }\n    }\n  };\n  SaveAsImage.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n      title: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'title']),\n      type: 'png',\n      // Default use option.backgroundColor\n      // backgroundColor: '#fff',\n      connectedBackgroundColor: '#fff',\n      name: '',\n      excludeComponents: ['toolbox'],\n      // use current pixel ratio of device by default\n      // pixelRatio: 1,\n      lang: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'lang'])\n    };\n    return defaultOption;\n  };\n  return SaveAsImage;\n}(ToolboxFeature);\nexport default SaveAsImage;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { SINGLE_REFERRING } from '../../../util/model.js';\nvar INNER_STACK_KEYWORD = '__ec_magicType_stack__';\nvar ICON_TYPES = ['line', 'bar', 'stack'];\n// stack and tiled appears in pair for the title\nvar TITLE_TYPES = ['line', 'bar', 'stack', 'tiled'];\nvar radioTypes = [['line', 'bar'], ['stack']];\nvar MagicType = /** @class */function (_super) {\n  __extends(MagicType, _super);\n  function MagicType() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  MagicType.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon');\n    var icons = {};\n    zrUtil.each(model.get('type'), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n  MagicType.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: [],\n      // Icon group\n      icon: {\n        line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n        bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n        // eslint-disable-next-line\n        stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z' // jshint ignore:line\n      },\n\n      // `line`, `bar`, `stack`, `tiled`\n      title: ecModel.getLocaleModel().get(['toolbox', 'magicType', 'title']),\n      option: {},\n      seriesIndex: {}\n    };\n    return defaultOption;\n  };\n  MagicType.prototype.onclick = function (ecModel, api, type) {\n    var model = this.model;\n    var seriesIndex = model.get(['seriesIndex', type]);\n    // Not supported magicType\n    if (!seriesOptGenreator[type]) {\n      return;\n    }\n    var newOption = {\n      series: []\n    };\n    var generateNewSeriesTypes = function (seriesModel) {\n      var seriesType = seriesModel.subType;\n      var seriesId = seriesModel.id;\n      var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n      if (newSeriesOpt) {\n        // PENDING If merge original option?\n        zrUtil.defaults(newSeriesOpt, seriesModel.option);\n        newOption.series.push(newSeriesOpt);\n      }\n      // Modify boundaryGap\n      var coordSys = seriesModel.coordinateSystem;\n      if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n        var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n        if (categoryAxis) {\n          var axisDim = categoryAxis.dim;\n          var axisType = axisDim + 'Axis';\n          var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n          var axisIndex = axisModel.componentIndex;\n          newOption[axisType] = newOption[axisType] || [];\n          for (var i = 0; i <= axisIndex; i++) {\n            newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n          }\n          newOption[axisType][axisIndex].boundaryGap = type === 'bar';\n        }\n      }\n    };\n    zrUtil.each(radioTypes, function (radio) {\n      if (zrUtil.indexOf(radio, type) >= 0) {\n        zrUtil.each(radio, function (item) {\n          model.setIconStatus(item, 'normal');\n        });\n      }\n    });\n    model.setIconStatus(type, 'emphasis');\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: seriesIndex == null ? null : {\n        seriesIndex: seriesIndex\n      }\n    }, generateNewSeriesTypes);\n    var newTitle;\n    var currentType = type;\n    // Change title of stack\n    if (type === 'stack') {\n      // use titles in model instead of ecModel\n      // as stack and tiled appears in pair, just flip them\n      // no need of checking stack state\n      newTitle = zrUtil.merge({\n        stack: model.option.title.tiled,\n        tiled: model.option.title.stack\n      }, model.option.title);\n      if (model.get(['iconStatus', type]) !== 'emphasis') {\n        currentType = 'tiled';\n      }\n    }\n    api.dispatchAction({\n      type: 'changeMagicType',\n      currentType: currentType,\n      newOption: newOption,\n      newTitle: newTitle,\n      featureName: 'magicType'\n    });\n  };\n  return MagicType;\n}(ToolboxFeature);\nvar seriesOptGenreator = {\n  'line': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'line',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'line']) || {}, true);\n    }\n  },\n  'bar': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'bar',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'bar']) || {}, true);\n    }\n  },\n  'stack': function (seriesType, seriesId, seriesModel, model) {\n    var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\n    if (seriesType === 'line' || seriesType === 'bar') {\n      model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\n      return zrUtil.merge({\n        id: seriesId,\n        stack: isStack ? '' : INNER_STACK_KEYWORD\n      }, model.get(['option', 'stack']) || {}, true);\n    }\n  }\n};\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'changeMagicType',\n  event: 'magicTypeChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.mergeOption(payload.newOption);\n});\nexport default MagicType;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global document */\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { addEventListener } from 'zrender/lib/core/event.js';\nimport { warn } from '../../../util/log.js';\n/* global document */\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\n * Group series into two types\n *  1. on category axis, like line, bar\n *  2. others, like scatter, pie\n */\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n      var baseAxis = coordSys.getBaseAxis();\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\n * Assemble content of series on cateogory axis\n * @inner\n */\nfunction assembleSeriesWithCategoryAxis(groups) {\n  var tables = [];\n  zrUtil.each(groups, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    }));\n    // @ts-ignore TODO Polar\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      var rawData = series.getRawData();\n      columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n        return val;\n      }));\n    });\n    // Assemble table content\n    var lines = [headers.join(ITEM_SPLITER)];\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n      lines.push(items.join(ITEM_SPLITER));\n    }\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * Assemble content of other series\n */\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return !!str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\n * If a block is tsv format\n */\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\n * @param {string} tsv\n * @return {Object}\n */\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n  return {\n    series: series,\n    categories: categories\n  };\n}\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n  for (var i = 0; i < lines.length; i++) {\n    // if line is empty, ignore it.\n    // there is a case that a user forgot to delete `\\n`.\n    var line = trim(lines[i]);\n    if (!line) {\n      continue;\n    }\n    var items = line.split(itemSplitRegex);\n    var name_1 = '';\n    var value = void 0;\n    var hasName = false;\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name_1 = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name_1,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n  return {\n    name: seriesName,\n    data: data\n  };\n}\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\nvar DataView = /** @class */function (_super) {\n  __extends(DataView, _super);\n  function DataView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  DataView.prototype.onclick = function (ecModel, api) {\n    // FIXME: better way?\n    setTimeout(function () {\n      api.dispatchAction({\n        type: 'hideTip'\n      });\n    });\n    var container = api.getDom();\n    var model = this.model;\n    if (this._dom) {\n      container.removeChild(this._dom);\n    }\n    var root = document.createElement('div');\n    // use padding to avoid 5px whitespace\n    root.style.cssText = 'position:absolute;top:0;bottom:0;left:0;right:0;padding:5px';\n    root.style.backgroundColor = model.get('backgroundColor') || '#fff';\n    // Create elements\n    var header = document.createElement('h4');\n    var lang = model.get('lang') || [];\n    header.innerHTML = lang[0] || model.get('title');\n    header.style.cssText = 'margin:10px 20px';\n    header.style.color = model.get('textColor');\n    var viewMain = document.createElement('div');\n    var textarea = document.createElement('textarea');\n    viewMain.style.cssText = 'overflow:auto';\n    var optionToContent = model.get('optionToContent');\n    var contentToOption = model.get('contentToOption');\n    var result = getContentFromModel(ecModel);\n    if (zrUtil.isFunction(optionToContent)) {\n      var htmlOrDom = optionToContent(api.getOption());\n      if (zrUtil.isString(htmlOrDom)) {\n        viewMain.innerHTML = htmlOrDom;\n      } else if (zrUtil.isDom(htmlOrDom)) {\n        viewMain.appendChild(htmlOrDom);\n      }\n    } else {\n      // Use default textarea\n      textarea.readOnly = model.get('readOnly');\n      var style = textarea.style;\n      // eslint-disable-next-line max-len\n      style.cssText = 'display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none';\n      style.color = model.get('textColor');\n      style.borderColor = model.get('textareaBorderColor');\n      style.backgroundColor = model.get('textareaColor');\n      textarea.value = result.value;\n      viewMain.appendChild(textarea);\n    }\n    var blockMetaList = result.meta;\n    var buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'position:absolute;bottom:5px;left:0;right:0';\n    // eslint-disable-next-line max-len\n    var buttonStyle = 'float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n    var closeButton = document.createElement('div');\n    var refreshButton = document.createElement('div');\n    buttonStyle += ';background-color:' + model.get('buttonColor');\n    buttonStyle += ';color:' + model.get('buttonTextColor');\n    var self = this;\n    function close() {\n      container.removeChild(root);\n      self._dom = null;\n    }\n    addEventListener(closeButton, 'click', close);\n    addEventListener(refreshButton, 'click', function () {\n      if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          // eslint-disable-next-line\n          warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n        }\n        close();\n        return;\n      }\n      var newOption;\n      try {\n        if (zrUtil.isFunction(contentToOption)) {\n          newOption = contentToOption(viewMain, api.getOption());\n        } else {\n          newOption = parseContents(textarea.value, blockMetaList);\n        }\n      } catch (e) {\n        close();\n        throw new Error('Data view format error ' + e);\n      }\n      if (newOption) {\n        api.dispatchAction({\n          type: 'changeDataView',\n          newOption: newOption\n        });\n      }\n      close();\n    });\n    closeButton.innerHTML = lang[1];\n    refreshButton.innerHTML = lang[2];\n    refreshButton.style.cssText = closeButton.style.cssText = buttonStyle;\n    !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n    buttonContainer.appendChild(closeButton);\n    root.appendChild(header);\n    root.appendChild(viewMain);\n    root.appendChild(buttonContainer);\n    viewMain.style.height = container.clientHeight - 80 + 'px';\n    container.appendChild(root);\n    this._dom = root;\n  };\n  DataView.prototype.remove = function (ecModel, api) {\n    this._dom && api.getDom().removeChild(this._dom);\n  };\n  DataView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n  DataView.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      readOnly: false,\n      optionToContent: null,\n      contentToOption: null,\n      // eslint-disable-next-line\n      icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'title']),\n      lang: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'lang']),\n      backgroundColor: '#fff',\n      textColor: '#000',\n      textareaColor: '#fff',\n      textareaBorderColor: '#333',\n      buttonColor: '#c23531',\n      buttonTextColor: '#fff'\n    };\n    return defaultOption;\n  };\n  return DataView;\n}(ToolboxFeature);\n/**\n * @inner\n */\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      var newValIsObject = zrUtil.isObject(newVal) && !zrUtil.isArray(newVal);\n      if (!newValIsObject) {\n        newVal = {\n          value: newVal\n        };\n      }\n      // original data has name but new data has no name\n      var shouldDeleteName = original.name != null && newVal.name == null;\n      // Original data has option\n      newVal = zrUtil.defaults(newVal, original);\n      shouldDeleteName && delete newVal.name;\n      return newVal;\n    } else {\n      return newVal;\n    }\n  });\n}\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nexport default DataView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as history from '../../dataZoom/history.js';\nimport { ToolboxFeature } from '../featureManager.js';\nvar RestoreOption = /** @class */function (_super) {\n  __extends(RestoreOption, _super);\n  function RestoreOption() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  RestoreOption.prototype.onclick = function (ecModel, api) {\n    history.clear(ecModel);\n    api.dispatchAction({\n      type: 'restore',\n      from: this.uid\n    });\n  };\n  RestoreOption.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      // eslint-disable-next-line\n      icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n      title: ecModel.getLocaleModel().get(['toolbox', 'restore', 'title'])\n    };\n    return defaultOption;\n  };\n  return RestoreOption;\n}(ToolboxFeature);\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'restore',\n  event: 'restore',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.resetOption('recreate');\n});\nexport default RestoreOption;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n// TODO depends on DataZoom and Brush\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BrushController from '../../helper/BrushController.js';\nimport BrushTargetManager from '../../helper/BrushTargetManager.js';\nimport * as history from '../../dataZoom/history.js';\nimport sliderMove from '../../helper/sliderMove.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { makeInternalComponentId, parseFinder } from '../../../util/model.js';\nimport { registerInternalOptionCreator } from '../../../model/internalComponentCreator.js';\nvar each = zrUtil.each;\nvar DATA_ZOOM_ID_BASE = makeInternalComponentId('toolbox-dataZoom_');\nvar ICON_TYPES = ['zoom', 'back'];\nvar DataZoomFeature = /** @class */function (_super) {\n  __extends(DataZoomFeature, _super);\n  function DataZoomFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  DataZoomFeature.prototype.render = function (featureModel, ecModel, api, payload) {\n    if (!this._brushController) {\n      this._brushController = new BrushController(api.getZr());\n      this._brushController.on('brush', zrUtil.bind(this._onBrush, this)).mount();\n    }\n    updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n    updateBackBtnStatus(featureModel, ecModel);\n  };\n  DataZoomFeature.prototype.onclick = function (ecModel, api, type) {\n    handlers[type].call(this);\n  };\n  DataZoomFeature.prototype.remove = function (ecModel, api) {\n    this._brushController && this._brushController.unmount();\n  };\n  DataZoomFeature.prototype.dispose = function (ecModel, api) {\n    this._brushController && this._brushController.dispose();\n  };\n  DataZoomFeature.prototype._onBrush = function (eventParam) {\n    var areas = eventParam.areas;\n    if (!eventParam.isEnd || !areas.length) {\n      return;\n    }\n    var snapshot = {};\n    var ecModel = this.ecModel;\n    this._brushController.updateCovers([]); // remove cover\n    var brushTargetManager = new BrushTargetManager(makeAxisFinder(this.model), ecModel, {\n      include: ['grid']\n    });\n    brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      if (coordSys.type !== 'cartesian2d') {\n        return;\n      }\n      var brushType = area.brushType;\n      if (brushType === 'rect') {\n        setBatch('x', coordSys, coordRange[0]);\n        setBatch('y', coordSys, coordRange[1]);\n      } else {\n        setBatch({\n          lineX: 'x',\n          lineY: 'y'\n        }[brushType], coordSys, coordRange);\n      }\n    });\n    history.push(ecModel, snapshot);\n    this._dispatchZoomAction(snapshot);\n    function setBatch(dimName, coordSys, minMax) {\n      var axis = coordSys.getAxis(dimName);\n      var axisModel = axis.model;\n      var dataZoomModel = findDataZoom(dimName, axisModel, ecModel);\n      // Restrict range.\n      var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n      if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n        minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n      }\n      dataZoomModel && (snapshot[dataZoomModel.id] = {\n        dataZoomId: dataZoomModel.id,\n        startValue: minMax[0],\n        endValue: minMax[1]\n      });\n    }\n    function findDataZoom(dimName, axisModel, ecModel) {\n      var found;\n      ecModel.eachComponent({\n        mainType: 'dataZoom',\n        subType: 'select'\n      }, function (dzModel) {\n        var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n        has && (found = dzModel);\n      });\n      return found;\n    }\n  };\n  ;\n  DataZoomFeature.prototype._dispatchZoomAction = function (snapshot) {\n    var batch = [];\n    // Convert from hash map to array.\n    each(snapshot, function (batchItem, dataZoomId) {\n      batch.push(zrUtil.clone(batchItem));\n    });\n    batch.length && this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      batch: batch\n    });\n  };\n  DataZoomFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      filterMode: 'filter',\n      // Icon group\n      icon: {\n        zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n        back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n      },\n      // `zoom`, `back`\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataZoom', 'title']),\n      brushStyle: {\n        borderWidth: 0,\n        color: 'rgba(210,219,238,0.2)'\n      }\n    };\n    return defaultOption;\n  };\n  return DataZoomFeature;\n}(ToolboxFeature);\nvar handlers = {\n  zoom: function () {\n    var nextActive = !this._isZoomActive;\n    this.api.dispatchAction({\n      type: 'takeGlobalCursor',\n      key: 'dataZoomSelect',\n      dataZoomSelectActive: nextActive\n    });\n  },\n  back: function () {\n    this._dispatchZoomAction(history.pop(this.ecModel));\n  }\n};\nfunction makeAxisFinder(dzFeatureModel) {\n  var setting = {\n    xAxisIndex: dzFeatureModel.get('xAxisIndex', true),\n    yAxisIndex: dzFeatureModel.get('yAxisIndex', true),\n    xAxisId: dzFeatureModel.get('xAxisId', true),\n    yAxisId: dzFeatureModel.get('yAxisId', true)\n  };\n  // If both `xAxisIndex` `xAxisId` not set, it means 'all'.\n  // If both `yAxisIndex` `yAxisId` not set, it means 'all'.\n  // Some old cases set like this below to close yAxis control but leave xAxis control:\n  // `{ feature: { dataZoom: { yAxisIndex: false } }`.\n  if (setting.xAxisIndex == null && setting.xAxisId == null) {\n    setting.xAxisIndex = 'all';\n  }\n  if (setting.yAxisIndex == null && setting.yAxisId == null) {\n    setting.yAxisIndex = 'all';\n  }\n  return setting;\n}\nfunction updateBackBtnStatus(featureModel, ecModel) {\n  featureModel.setIconStatus('back', history.count(ecModel) > 1 ? 'emphasis' : 'normal');\n}\nfunction updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n  var zoomActive = view._isZoomActive;\n  if (payload && payload.type === 'takeGlobalCursor') {\n    zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n  }\n  view._isZoomActive = zoomActive;\n  featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n  var brushTargetManager = new BrushTargetManager(makeAxisFinder(featureModel), ecModel, {\n    include: ['grid']\n  });\n  var panels = brushTargetManager.makePanelOpts(api, function (targetInfo) {\n    return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n  });\n  view._brushController.setPanels(panels).enableBrush(zoomActive && panels.length ? {\n    brushType: 'auto',\n    brushStyle: featureModel.getModel('brushStyle').getItemStyle()\n  } : false);\n}\nregisterInternalOptionCreator('dataZoom', function (ecModel) {\n  var toolboxModel = ecModel.getComponent('toolbox', 0);\n  var featureDataZoomPath = ['feature', 'dataZoom'];\n  if (!toolboxModel || toolboxModel.get(featureDataZoomPath) == null) {\n    return;\n  }\n  var dzFeatureModel = toolboxModel.getModel(featureDataZoomPath);\n  var dzOptions = [];\n  var finder = makeAxisFinder(dzFeatureModel);\n  var finderResult = parseFinder(ecModel, finder);\n  each(finderResult.xAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'xAxis', 'xAxisIndex');\n  });\n  each(finderResult.yAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'yAxis', 'yAxisIndex');\n  });\n  function buildInternalOptions(axisModel, axisMainType, axisIndexPropName) {\n    var axisIndex = axisModel.componentIndex;\n    var newOpt = {\n      type: 'select',\n      $fromToolbox: true,\n      // Default to be filter\n      filterMode: dzFeatureModel.get('filterMode', true) || 'filter',\n      // Id for merge mapping.\n      id: DATA_ZOOM_ID_BASE + axisMainType + axisIndex\n    };\n    newOpt[axisIndexPropName] = axisIndex;\n    dzOptions.push(newOpt);\n  }\n  return dzOptions;\n});\nexport default DataZoomFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installDataZoomSelect } from '../../component/dataZoom/installDataZoomSelect.js';\nimport ToolboxModel from './ToolboxModel.js';\nimport ToolboxView from './ToolboxView.js';\n// TODOD: REGISTER IN INSTALL\nimport { registerFeature } from './featureManager.js';\nimport SaveAsImage from './feature/SaveAsImage.js';\nimport MagicType from './feature/MagicType.js';\nimport DataView from './feature/DataView.js';\nimport Restore from './feature/Restore.js';\nimport DataZoom from './feature/DataZoom.js';\nexport function install(registers) {\n  registers.registerComponentModel(ToolboxModel);\n  registers.registerComponentView(ToolboxView);\n  registerFeature('saveAsImage', SaveAsImage);\n  registerFeature('magicType', MagicType);\n  registerFeature('dataView', DataView);\n  registerFeature('dataZoom', DataZoom);\n  registerFeature('restore', Restore);\n  use(installDataZoomSelect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nvar TooltipModel = /** @class */function (_super) {\n  __extends(TooltipModel, _super);\n  function TooltipModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TooltipModel.type;\n    return _this;\n  }\n  TooltipModel.type = 'tooltip';\n  TooltipModel.dependencies = ['axisPointer'];\n  TooltipModel.defaultOption = {\n    // zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip main content\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    renderMode: 'auto',\n    // whether restraint content inside viewRect.\n    // If renderMode: 'richText', default true.\n    // If renderMode: 'html', defaut false (for backward compat).\n    confine: null,\n    showDelay: 0,\n    hideDelay: 100,\n    // Animation transition time, unit is second\n    transitionDuration: 0.4,\n    enterable: false,\n    backgroundColor: '#fff',\n    // box shadow\n    shadowBlur: 10,\n    shadowColor: 'rgba(0, 0, 0, .2)',\n    shadowOffsetX: 1,\n    shadowOffsetY: 2,\n    // tooltip border radius, unit is px, default is 4\n    borderRadius: 4,\n    // tooltip border width, unit is px, default is 0 (no border)\n    borderWidth: 1,\n    // Tooltip inside padding, default is 5 for all direction\n    // Array is allowed to set up, right, bottom, left, same with css\n    // The default value: See `tooltip/tooltipMarkup.ts#getPaddingFromTooltipModel`.\n    padding: null,\n    // Extra css text\n    extraCssText: '',\n    // axis indicator, trigger by axis\n    axisPointer: {\n      // default is line\n      // legal values: 'line' | 'shadow' | 'cross'\n      type: 'line',\n      // Valid when type is line, appoint tooltip line locate on which line. Optional\n      // legal values: 'x' | 'y' | 'angle' | 'radius' | 'auto'\n      // default is 'auto', chose the axis which type is category.\n      // for multiply y axis, cartesian coord chose x axis, polar chose angle axis\n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {}\n      }\n      // lineStyle and shadowStyle should not be specified here,\n      // otherwise it will always override those styles on option.axisPointer.\n    },\n\n    textStyle: {\n      color: '#666',\n      fontSize: 14\n    }\n  };\n  return TooltipModel;\n}(ComponentModel);\nexport default TooltipModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { toCamelCase } from '../../util/format.js';\nimport env from 'zrender/lib/core/env.js';\n/* global document */\nexport function shouldTooltipConfine(tooltipModel) {\n  var confineOption = tooltipModel.get('confine');\n  return confineOption != null ? !!confineOption\n  // In richText mode, the outside part can not be visible.\n  : tooltipModel.get('renderMode') === 'richText';\n}\nfunction testStyle(styleProps) {\n  if (!env.domSupported) {\n    return;\n  }\n  var style = document.documentElement.style;\n  for (var i = 0, len = styleProps.length; i < len; i++) {\n    if (styleProps[i] in style) {\n      return styleProps[i];\n    }\n  }\n}\nexport var TRANSFORM_VENDOR = testStyle(['transform', 'webkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\nexport var TRANSITION_VENDOR = testStyle(['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\nexport function toCSSVendorPrefix(styleVendor, styleProp) {\n  if (!styleVendor) {\n    return styleProp;\n  }\n  styleProp = toCamelCase(styleProp, true);\n  var idx = styleVendor.indexOf(styleProp);\n  styleVendor = idx === -1 ? styleProp : \"-\" + styleVendor.slice(0, idx) + \"-\" + styleProp;\n  return styleVendor.toLowerCase();\n}\nexport function getComputedStyle(el, style) {\n  var stl = el.currentStyle || document.defaultView && document.defaultView.getComputedStyle(el);\n  return stl ? style ? stl[style] : stl : null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isString, indexOf, each, bind, isFunction, isArray, isDom } from 'zrender/lib/core/util.js';\nimport { normalizeEvent } from 'zrender/lib/core/event.js';\nimport { transformLocalCoord } from 'zrender/lib/core/dom.js';\nimport env from 'zrender/lib/core/env.js';\nimport { convertToColorString, toCamelCase, normalizeCssArray } from '../../util/format.js';\nimport { shouldTooltipConfine, toCSSVendorPrefix, getComputedStyle, TRANSFORM_VENDOR, TRANSITION_VENDOR } from './helper.js';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\n/* global document, window */\nvar CSS_TRANSITION_VENDOR = toCSSVendorPrefix(TRANSITION_VENDOR, 'transition');\nvar CSS_TRANSFORM_VENDOR = toCSSVendorPrefix(TRANSFORM_VENDOR, 'transform');\n// eslint-disable-next-line\nvar gCssText = \"position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;\" + (env.transform3dSupported ? 'will-change:transform;' : '');\nfunction mirrorPos(pos) {\n  pos = pos === 'left' ? 'right' : pos === 'right' ? 'left' : pos === 'top' ? 'bottom' : 'top';\n  return pos;\n}\nfunction assembleArrow(tooltipModel, borderColor, arrowPosition) {\n  if (!isString(arrowPosition) || arrowPosition === 'inside') {\n    return '';\n  }\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var borderWidth = tooltipModel.get('borderWidth');\n  borderColor = convertToColorString(borderColor);\n  var arrowPos = mirrorPos(arrowPosition);\n  var arrowSize = Math.max(Math.round(borderWidth) * 1.5, 6);\n  var positionStyle = '';\n  var transformStyle = CSS_TRANSFORM_VENDOR + ':';\n  var rotateDeg;\n  if (indexOf(['left', 'right'], arrowPos) > -1) {\n    positionStyle += 'top:50%';\n    transformStyle += \"translateY(-50%) rotate(\" + (rotateDeg = arrowPos === 'left' ? -225 : -45) + \"deg)\";\n  } else {\n    positionStyle += 'left:50%';\n    transformStyle += \"translateX(-50%) rotate(\" + (rotateDeg = arrowPos === 'top' ? 225 : 45) + \"deg)\";\n  }\n  var rotateRadian = rotateDeg * Math.PI / 180;\n  var arrowWH = arrowSize + borderWidth;\n  var rotatedWH = arrowWH * Math.abs(Math.cos(rotateRadian)) + arrowWH * Math.abs(Math.sin(rotateRadian));\n  var arrowOffset = Math.round(((rotatedWH - Math.SQRT2 * borderWidth) / 2 + Math.SQRT2 * borderWidth - (rotatedWH - arrowWH) / 2) * 100) / 100;\n  positionStyle += \";\" + arrowPos + \":-\" + arrowOffset + \"px\";\n  var borderStyle = borderColor + \" solid \" + borderWidth + \"px;\";\n  var styleCss = [\"position:absolute;width:\" + arrowSize + \"px;height:\" + arrowSize + \"px;z-index:-1;\", positionStyle + \";\" + transformStyle + \";\", \"border-bottom:\" + borderStyle, \"border-right:\" + borderStyle, \"background-color:\" + backgroundColor + \";\"];\n  return \"<div style=\\\"\" + styleCss.join('') + \"\\\"></div>\";\n}\nfunction assembleTransition(duration, onlyFade) {\n  var transitionCurve = 'cubic-bezier(0.23,1,0.32,1)';\n  var transitionOption = \" \" + duration / 2 + \"s \" + transitionCurve;\n  var transitionText = \"opacity\" + transitionOption + \",visibility\" + transitionOption;\n  if (!onlyFade) {\n    transitionOption = \" \" + duration + \"s \" + transitionCurve;\n    transitionText += env.transformSupported ? \",\" + CSS_TRANSFORM_VENDOR + transitionOption : \",left\" + transitionOption + \",top\" + transitionOption;\n  }\n  return CSS_TRANSITION_VENDOR + ':' + transitionText;\n}\nfunction assembleTransform(x, y, toString) {\n  // If using float on style, the final width of the dom might\n  // keep changing slightly while mouse move. So `toFixed(0)` them.\n  var x0 = x.toFixed(0) + 'px';\n  var y0 = y.toFixed(0) + 'px';\n  // not support transform, use `left` and `top` instead.\n  if (!env.transformSupported) {\n    return toString ? \"top:\" + y0 + \";left:\" + x0 + \";\" : [['top', y0], ['left', x0]];\n  }\n  // support transform\n  var is3d = env.transform3dSupported;\n  var translate = \"translate\" + (is3d ? '3d' : '') + \"(\" + x0 + \",\" + y0 + (is3d ? ',0' : '') + \")\";\n  return toString ? 'top:0;left:0;' + CSS_TRANSFORM_VENDOR + ':' + translate + ';' : [['top', 0], ['left', 0], [TRANSFORM_VENDOR, translate]];\n}\n/**\n * @param {Object} textStyle\n * @return {string}\n * @inner\n */\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  fontSize\n  // @ts-ignore, leave it to the tooltip refactor.\n  && cssText.push('line-height:' + Math.round(fontSize * 3 / 2) + 'px');\n  var shadowColor = textStyleModel.get('textShadowColor');\n  var shadowBlur = textStyleModel.get('textShadowBlur') || 0;\n  var shadowOffsetX = textStyleModel.get('textShadowOffsetX') || 0;\n  var shadowOffsetY = textStyleModel.get('textShadowOffsetY') || 0;\n  shadowColor && shadowBlur && cssText.push('text-shadow:' + shadowOffsetX + 'px ' + shadowOffsetY + 'px ' + shadowBlur + 'px ' + shadowColor);\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\nfunction assembleCssText(tooltipModel, enableTransition, onlyFade) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var shadowBlur = tooltipModel.get('shadowBlur');\n  var shadowColor = tooltipModel.get('shadowColor');\n  var shadowOffsetX = tooltipModel.get('shadowOffsetX');\n  var shadowOffsetY = tooltipModel.get('shadowOffsetY');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = getPaddingFromTooltipModel(tooltipModel, 'html');\n  var boxShadow = shadowOffsetX + \"px \" + shadowOffsetY + \"px \" + shadowBlur + \"px \" + shadowColor;\n  cssText.push('box-shadow:' + boxShadow);\n  // Animation transition. Do not animate when transitionDuration is 0.\n  enableTransition && transitionDuration && cssText.push(assembleTransition(transitionDuration, onlyFade));\n  if (backgroundColor) {\n    cssText.push('background-color:' + backgroundColor);\n  }\n  // Border style\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  });\n  // Text style\n  cssText.push(assembleFont(textStyleModel));\n  // Padding\n  if (padding != null) {\n    cssText.push('padding:' + normalizeCssArray(padding).join('px ') + 'px');\n  }\n  return cssText.join(';') + ';';\n}\n// If not able to make, do not modify the input `out`.\nfunction makeStyleCoord(out, zr, container, zrX, zrY) {\n  var zrPainter = zr && zr.painter;\n  if (container) {\n    var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\n    if (zrViewportRoot) {\n      // Some APPs might use scale on body, so we support CSS transform here.\n      transformLocalCoord(out, zrViewportRoot, container, zrX, zrY);\n    }\n  } else {\n    out[0] = zrX;\n    out[1] = zrY;\n    // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n    var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\n    if (viewportRootOffset) {\n      out[0] += viewportRootOffset.offsetLeft;\n      out[1] += viewportRootOffset.offsetTop;\n    }\n  }\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\nvar TooltipHTMLContent = /** @class */function () {\n  function TooltipHTMLContent(api, opt) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._enterable = true;\n    this._alwaysShowContent = false;\n    this._firstShow = true;\n    this._longHide = true;\n    if (env.wxa) {\n      return null;\n    }\n    var el = document.createElement('div');\n    // TODO: TYPE\n    el.domBelongToZr = true;\n    this.el = el;\n    var zr = this._zr = api.getZr();\n    var appendTo = opt.appendTo;\n    var container = appendTo && (isString(appendTo) ? document.querySelector(appendTo) : isDom(appendTo) ? appendTo : isFunction(appendTo) && appendTo(api.getDom()));\n    makeStyleCoord(this._styleCoord, zr, container, api.getWidth() / 2, api.getHeight() / 2);\n    (container || api.getDom()).appendChild(el);\n    this._api = api;\n    this._container = container;\n    // FIXME\n    // Is it needed to trigger zr event manually if\n    // the browser do not support `pointer-events: none`.\n    var self = this;\n    el.onmouseenter = function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n      self._inContent = true;\n    };\n    el.onmousemove = function (e) {\n      e = e || window.event;\n      if (!self._enterable) {\n        // `pointer-events: none` is set to tooltip content div\n        // if `enterable` is set as `false`, and `el.onmousemove`\n        // can not be triggered. But in browser that do not\n        // support `pointer-events`, we need to do this:\n        // Try trigger zrender event to avoid mouse\n        // in and out shape too frequently\n        var handler = zr.handler;\n        var zrViewportRoot = zr.painter.getViewportRoot();\n        normalizeEvent(zrViewportRoot, e, true);\n        handler.dispatch('mousemove', e);\n      }\n    };\n    el.onmouseleave = function () {\n      // set `_inContent` to `false` before `hideLater`\n      self._inContent = false;\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n    };\n  }\n  /**\n   * Update when tooltip is rendered\n   */\n  TooltipHTMLContent.prototype.update = function (tooltipModel) {\n    // FIXME\n    // Move this logic to ec main?\n    if (!this._container) {\n      var container = this._api.getDom();\n      var position = getComputedStyle(container, 'position');\n      var domStyle = container.style;\n      if (domStyle.position !== 'absolute' && position !== 'absolute') {\n        domStyle.position = 'relative';\n      }\n    }\n    // move tooltip if chart resized\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized();\n    // update alwaysShowContent\n    this._alwaysShowContent = alwaysShowContent;\n    // update className\n    this.el.className = tooltipModel.get('className') || '';\n    // Hide the tooltip\n    // PENDING\n    // this.hide();\n  };\n\n  TooltipHTMLContent.prototype.show = function (tooltipModel, nearPointColor) {\n    clearTimeout(this._hideTimeout);\n    clearTimeout(this._longHideTimeout);\n    var el = this.el;\n    var style = el.style;\n    var styleCoord = this._styleCoord;\n    if (!el.innerHTML) {\n      style.display = 'none';\n    } else {\n      style.cssText = gCssText + assembleCssText(tooltipModel, !this._firstShow, this._longHide)\n      // initial transform\n      + assembleTransform(styleCoord[0], styleCoord[1], true) + (\"border-color:\" + convertToColorString(nearPointColor) + \";\") + (tooltipModel.get('extraCssText') || '')\n      // If mouse occasionally move over the tooltip, a mouseout event will be\n      // triggered by canvas, and cause some unexpectable result like dragging\n      // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n      // it. Although it is not supported by IE8~IE10, fortunately it is a rare\n      // scenario.\n      + (\";pointer-events:\" + (this._enterable ? 'auto' : 'none'));\n    }\n    this._show = true;\n    this._firstShow = false;\n    this._longHide = false;\n  };\n  TooltipHTMLContent.prototype.setContent = function (content, markers, tooltipModel, borderColor, arrowPosition) {\n    var el = this.el;\n    if (content == null) {\n      el.innerHTML = '';\n      return;\n    }\n    var arrow = '';\n    if (isString(arrowPosition) && tooltipModel.get('trigger') === 'item' && !shouldTooltipConfine(tooltipModel)) {\n      arrow = assembleArrow(tooltipModel, borderColor, arrowPosition);\n    }\n    if (isString(content)) {\n      el.innerHTML = content + arrow;\n    } else if (content) {\n      // Clear previous\n      el.innerHTML = '';\n      if (!isArray(content)) {\n        content = [content];\n      }\n      for (var i = 0; i < content.length; i++) {\n        if (isDom(content[i]) && content[i].parentNode !== el) {\n          el.appendChild(content[i]);\n        }\n      }\n      // no arrow if empty\n      if (arrow && el.childNodes.length) {\n        // no need to create a new parent element, but it's not supported by IE 10 and older.\n        // const arrowEl = document.createRange().createContextualFragment(arrow);\n        var arrowEl = document.createElement('div');\n        arrowEl.innerHTML = arrow;\n        el.appendChild(arrowEl);\n      }\n    }\n  };\n  TooltipHTMLContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n  TooltipHTMLContent.prototype.getSize = function () {\n    var el = this.el;\n    return [el.offsetWidth, el.offsetHeight];\n  };\n  TooltipHTMLContent.prototype.moveTo = function (zrX, zrY) {\n    var styleCoord = this._styleCoord;\n    makeStyleCoord(styleCoord, this._zr, this._container, zrX, zrY);\n    if (styleCoord[0] != null && styleCoord[1] != null) {\n      var style_1 = this.el.style;\n      var transforms = assembleTransform(styleCoord[0], styleCoord[1]);\n      each(transforms, function (transform) {\n        style_1[transform[0]] = transform[1];\n      });\n    }\n  };\n  /**\n   * when `alwaysShowContent` is true,\n   * move the tooltip after chart resized\n   */\n  TooltipHTMLContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2];\n    // The ratio of top to height\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n  TooltipHTMLContent.prototype.hide = function () {\n    var _this = this;\n    var style = this.el.style;\n    style.visibility = 'hidden';\n    style.opacity = '0';\n    env.transform3dSupported && (style.willChange = '');\n    this._show = false;\n    this._longHideTimeout = setTimeout(function () {\n      return _this._longHide = true;\n    }, 500);\n  };\n  TooltipHTMLContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent) {\n      if (time) {\n        this._hideDelay = time;\n        // Set show false to avoid invoke hideLater multiple times\n        this._show = false;\n        this._hideTimeout = setTimeout(bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n  TooltipHTMLContent.prototype.isShow = function () {\n    return this._show;\n  };\n  TooltipHTMLContent.prototype.dispose = function () {\n    clearTimeout(this._hideTimeout);\n    clearTimeout(this._longHideTimeout);\n    var parentNode = this.el.parentNode;\n    parentNode && parentNode.removeChild(this.el);\n    this.el = this._container = null;\n  };\n  return TooltipHTMLContent;\n}();\nexport default TooltipHTMLContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\nimport { throwError } from '../../util/log.js';\nvar TooltipRichContent = /** @class */function () {\n  function TooltipRichContent(api) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._alwaysShowContent = false;\n    this._enterable = true;\n    this._zr = api.getZr();\n    makeStyleCoord(this._styleCoord, this._zr, api.getWidth() / 2, api.getHeight() / 2);\n  }\n  /**\n   * Update when tooltip is rendered\n   */\n  TooltipRichContent.prototype.update = function (tooltipModel) {\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized();\n    // update alwaysShowContent\n    this._alwaysShowContent = alwaysShowContent;\n  };\n  TooltipRichContent.prototype.show = function () {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n    this.el.show();\n    this._show = true;\n  };\n  /**\n   * Set tooltip content\n   */\n  TooltipRichContent.prototype.setContent = function (content, markupStyleCreator, tooltipModel, borderColor, arrowPosition) {\n    var _this = this;\n    if (zrUtil.isObject(content)) {\n      throwError(process.env.NODE_ENV !== 'production' ? 'Passing DOM nodes as content is not supported in richText tooltip!' : '');\n    }\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n    var textStyleModel = tooltipModel.getModel('textStyle');\n    this.el = new ZRText({\n      style: {\n        rich: markupStyleCreator.richTextStyles,\n        text: content,\n        lineHeight: 22,\n        borderWidth: 1,\n        borderColor: borderColor,\n        textShadowColor: textStyleModel.get('textShadowColor'),\n        fill: tooltipModel.get(['textStyle', 'color']),\n        padding: getPaddingFromTooltipModel(tooltipModel, 'richText'),\n        verticalAlign: 'top',\n        align: 'left'\n      },\n      z: tooltipModel.get('z')\n    });\n    zrUtil.each(['backgroundColor', 'borderRadius', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'], function (propName) {\n      _this.el.style[propName] = tooltipModel.get(propName);\n    });\n    zrUtil.each(['textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'], function (propName) {\n      _this.el.style[propName] = textStyleModel.get(propName) || 0;\n    });\n    this._zr.add(this.el);\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n      self._inContent = false;\n    });\n  };\n  TooltipRichContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n  TooltipRichContent.prototype.getSize = function () {\n    var el = this.el;\n    var bounding = this.el.getBoundingRect();\n    // bounding rect does not include shadow. For renderMode richText,\n    // if overflow, it will be cut. So calculate them accurately.\n    var shadowOuterSize = calcShadowOuterSize(el.style);\n    return [bounding.width + shadowOuterSize.left + shadowOuterSize.right, bounding.height + shadowOuterSize.top + shadowOuterSize.bottom];\n  };\n  TooltipRichContent.prototype.moveTo = function (x, y) {\n    var el = this.el;\n    if (el) {\n      var styleCoord = this._styleCoord;\n      makeStyleCoord(styleCoord, this._zr, x, y);\n      x = styleCoord[0];\n      y = styleCoord[1];\n      var style = el.style;\n      var borderWidth = mathMaxWith0(style.borderWidth || 0);\n      var shadowOuterSize = calcShadowOuterSize(style);\n      // rich text x, y do not include border.\n      el.x = x + borderWidth + shadowOuterSize.left;\n      el.y = y + borderWidth + shadowOuterSize.top;\n      el.markRedraw();\n    }\n  };\n  /**\n   * when `alwaysShowContent` is true,\n   * move the tooltip after chart resized\n   */\n  TooltipRichContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2];\n    // The ratio of top to height\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n  TooltipRichContent.prototype.hide = function () {\n    if (this.el) {\n      this.el.hide();\n    }\n    this._show = false;\n  };\n  TooltipRichContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent) {\n      if (time) {\n        this._hideDelay = time;\n        // Set show false to avoid invoke hideLater multiple times\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n  TooltipRichContent.prototype.isShow = function () {\n    return this._show;\n  };\n  TooltipRichContent.prototype.dispose = function () {\n    this._zr.remove(this.el);\n  };\n  return TooltipRichContent;\n}();\nfunction mathMaxWith0(val) {\n  return Math.max(0, val);\n}\nfunction calcShadowOuterSize(style) {\n  var shadowBlur = mathMaxWith0(style.shadowBlur || 0);\n  var shadowOffsetX = mathMaxWith0(style.shadowOffsetX || 0);\n  var shadowOffsetY = mathMaxWith0(style.shadowOffsetY || 0);\n  return {\n    left: mathMaxWith0(shadowBlur - shadowOffsetX),\n    right: mathMaxWith0(shadowBlur + shadowOffsetX),\n    top: mathMaxWith0(shadowBlur - shadowOffsetY),\n    bottom: mathMaxWith0(shadowBlur + shadowOffsetY)\n  };\n}\nfunction makeStyleCoord(out, zr, zrX, zrY) {\n  out[0] = zrX;\n  out[1] = zrY;\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\nexport default TooltipRichContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { bind, each, clone, trim, isString, isFunction, isArray, isObject, extend } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport TooltipHTMLContent from './TooltipHTMLContent.js';\nimport TooltipRichContent from './TooltipRichContent.js';\nimport { convertToColorString, encodeHTML, formatTpl } from '../../util/format.js';\nimport { parsePercent } from '../../util/number.js';\nimport { Rect } from '../../util/graphic.js';\nimport findPointFromSeries from '../axisPointer/findPointFromSeries.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport Model from '../../model/Model.js';\nimport * as globalListener from '../axisPointer/globalListener.js';\nimport * as axisHelper from '../../coord/axisHelper.js';\nimport * as axisPointerViewHelper from '../axisPointer/viewHelper.js';\nimport { getTooltipRenderMode, preParseFinder, queryReferringComponents } from '../../util/model.js';\nimport ComponentView from '../../view/Component.js';\nimport { format as timeFormat } from '../../util/time.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { shouldTooltipConfine } from './helper.js';\nimport { normalizeTooltipFormatResult } from '../../model/mixin/dataFormat.js';\nimport { createTooltipMarkup, buildTooltipMarkup, TooltipMarkupStyleCreator } from './tooltipMarkup.js';\nimport { findEventDispatcher } from '../../util/event.js';\nimport { clear, createOrUpdate } from '../../util/throttle.js';\nvar proxyRect = new Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\nvar TooltipView = /** @class */function (_super) {\n  __extends(TooltipView, _super);\n  function TooltipView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TooltipView.type;\n    return _this;\n  }\n  TooltipView.prototype.init = function (ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = this._renderMode = getTooltipRenderMode(tooltipModel.get('renderMode'));\n    this._tooltipContent = renderMode === 'richText' ? new TooltipRichContent(api) : new TooltipHTMLContent(api, {\n      appendTo: tooltipModel.get('appendToBody', true) ? 'body' : tooltipModel.get('appendTo', true)\n    });\n  };\n  TooltipView.prototype.render = function (tooltipModel, ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n    // Reset\n    this.group.removeAll();\n    this._tooltipModel = tooltipModel;\n    this._ecModel = ecModel;\n    this._api = api;\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update(tooltipModel);\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n    this._initGlobalListener();\n    this._keepShow();\n    // PENDING\n    // `mousemove` event will be triggered very frequently when the mouse moves fast,\n    // which causes that the `updatePosition` function was also called frequently.\n    // In Chrome with devtools open and Firefox, tooltip looks laggy and shakes. See #14695 #16101\n    // To avoid frequent triggering,\n    // consider throttling it in 50ms when transition is enabled\n    if (this._renderMode !== 'richText' && tooltipModel.get('transitionDuration')) {\n      createOrUpdate(this, '_updatePosition', 50, 'fixRate');\n    } else {\n      clear(this, '_updatePosition');\n    }\n  };\n  TooltipView.prototype._initGlobalListener = function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  };\n  TooltipView.prototype._keepShow = function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api;\n    var triggerOn = tooltipModel.get('triggerOn');\n    // Try to keep the tooltip show when refreshing\n    if (this._lastX != null && this._lastY != null\n    // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && triggerOn !== 'none' && triggerOn !== 'click') {\n      var self_1 = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self_1.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self_1._lastX,\n          y: self_1._lastY,\n          dataByCoordSys: self_1._lastDataByCoordSys\n        });\n      });\n    }\n  };\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n  TooltipView.prototype.manuallyShowTip = function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node || !api.getDom()) {\n      return;\n    }\n    var dispatchAction = makeDispatchAction(payload, api);\n    // Reset ticket\n    this._ticket = '';\n    // When triggered from axisPointer.\n    var dataByCoordSys = payload.dataByCoordSys;\n    var cmptRef = findComponentReference(payload, ecModel, api);\n    if (cmptRef) {\n      var rect = cmptRef.el.getBoundingRect().clone();\n      rect.applyTransform(cmptRef.el.transform);\n      this._tryShow({\n        offsetX: rect.x + rect.width / 2,\n        offsetY: rect.y + rect.height / 2,\n        target: cmptRef.el,\n        position: payload.position,\n        // When manully trigger, the mouse is not on the el, so we'd better to\n        // position tooltip on the bottom of the el and display arrow is possible.\n        positionDefault: 'bottom'\n      }, dispatchAction);\n    } else if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.x = payload.x;\n      el.y = payload.y;\n      el.update();\n      getECData(el).tooltipConfig = {\n        name: null,\n        option: payload.tooltip\n      };\n      // Manually show tooltip while view is not using zrender elements.\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        dataByCoordSys: dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          target: pointInfo.el,\n          position: payload.position,\n          // When manully trigger, the mouse is not on the el, so we'd better to\n          // position tooltip on the bottom of the el and display arrow is possible.\n          positionDefault: 'bottom'\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target\n      }, dispatchAction);\n    }\n  };\n  TooltipView.prototype.manuallyHideTip = function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n    if (this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n    this._lastX = this._lastY = this._lastDataByCoordSys = null;\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  };\n  // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n  TooltipView.prototype._manuallyAxisShowTip = function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex;\n    // @ts-ignore\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n    if (!seriesModel) {\n      return;\n    }\n    var data = seriesModel.getData();\n    var tooltipCascadedModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model], this._tooltipModel);\n    if (tooltipCascadedModel.get('trigger') !== 'axis') {\n      return;\n    }\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  };\n  TooltipView.prototype._tryShow = function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n    if (!tooltipModel) {\n      return;\n    }\n    // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } else if (el) {\n      var ecData = getECData(el);\n      if (ecData.ssrType === 'legend') {\n        // Don't trigger tooltip for legend tooltip item\n        return;\n      }\n      this._lastDataByCoordSys = null;\n      var seriesDispatcher_1;\n      var cmptDispatcher_1;\n      findEventDispatcher(el, function (target) {\n        // Always show item tooltip if mouse is on the element with dataIndex\n        if (getECData(target).dataIndex != null) {\n          seriesDispatcher_1 = target;\n          return true;\n        }\n        // Tooltip provided directly. Like legend.\n        if (getECData(target).tooltipConfig != null) {\n          cmptDispatcher_1 = target;\n          return true;\n        }\n      }, true);\n      if (seriesDispatcher_1) {\n        this._showSeriesItemTooltip(e, seriesDispatcher_1, dispatchAction);\n      } else if (cmptDispatcher_1) {\n        this._showComponentItemTooltip(e, cmptDispatcher_1, dispatchAction);\n      } else {\n        this._hide(dispatchAction);\n      }\n    } else {\n      this._lastDataByCoordSys = null;\n      this._hide(dispatchAction);\n    }\n  };\n  TooltipView.prototype._showOrMove = function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easier to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  };\n  TooltipView.prototype._showAxisTooltip = function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption], globalTooltipModel);\n    var renderMode = this._renderMode;\n    var cbParamsList = [];\n    var articleMarkup = createTooltipMarkup('section', {\n      blocks: [],\n      noHeader: true\n    });\n    // Only for legacy: `Serise['formatTooltip']` returns a string.\n    var markupTextArrLegacy = [];\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    each(dataByCoordSys, function (itemCoordSys) {\n      each(itemCoordSys.dataByAxis, function (axisItem) {\n        var axisModel = ecModel.getComponent(axisItem.axisDim + 'Axis', axisItem.axisIndex);\n        var axisValue = axisItem.value;\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n        var axisValueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, axisItem.seriesDataIndices, axisItem.valueLabelOpt);\n        var axisSectionMarkup = createTooltipMarkup('section', {\n          header: axisValueLabel,\n          noHeader: !trim(axisValueLabel),\n          sortBlocks: true,\n          blocks: []\n        });\n        articleMarkup.blocks.push(axisSectionMarkup);\n        each(axisItem.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var cbParams = series.getDataParams(dataIndex);\n          // Can't find data.\n          if (cbParams.dataIndex < 0) {\n            return;\n          }\n          cbParams.axisDim = axisItem.axisDim;\n          cbParams.axisIndex = axisItem.axisIndex;\n          cbParams.axisType = axisItem.axisType;\n          cbParams.axisId = axisItem.axisId;\n          cbParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, {\n            value: axisValue\n          });\n          cbParams.axisValueLabel = axisValueLabel;\n          // Pre-create marker style for makers. Users can assemble richText\n          // text in `formatter` callback and use those markers style.\n          cbParams.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(cbParams.color), renderMode);\n          var seriesTooltipResult = normalizeTooltipFormatResult(series.formatTooltip(dataIndex, true, null));\n          var frag = seriesTooltipResult.frag;\n          if (frag) {\n            var valueFormatter = buildTooltipModel([series], globalTooltipModel).get('valueFormatter');\n            axisSectionMarkup.blocks.push(valueFormatter ? extend({\n              valueFormatter: valueFormatter\n            }, frag) : frag);\n          }\n          if (seriesTooltipResult.text) {\n            markupTextArrLegacy.push(seriesTooltipResult.text);\n          }\n          cbParamsList.push(cbParams);\n        });\n      });\n    });\n    // In most cases, the second axis is displays upper on the first one.\n    // So we reverse it to look better.\n    articleMarkup.blocks.reverse();\n    markupTextArrLegacy.reverse();\n    var positionExpr = e.position;\n    var orderMode = singleTooltipModel.get('order');\n    var builtMarkupText = buildTooltipMarkup(articleMarkup, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), singleTooltipModel.get('textStyle'));\n    builtMarkupText && markupTextArrLegacy.unshift(builtMarkupText);\n    var blockBreak = renderMode === 'richText' ? '\\n\\n' : '<br/>';\n    var allMarkupText = markupTextArrLegacy.join(blockBreak);\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys, cbParamsList)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, cbParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, allMarkupText, cbParamsList, Math.random() + '', point[0], point[1], positionExpr, null, markupStyleCreator);\n      }\n    });\n    // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n  };\n\n  TooltipView.prototype._showSeriesItemTooltip = function (e, dispatcher, dispatchAction) {\n    var ecModel = this._ecModel;\n    var ecData = getECData(dispatcher);\n    // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n    var seriesIndex = ecData.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n    // For example, graph link.\n    var dataModel = ecData.dataModel || seriesModel;\n    var dataIndex = ecData.dataIndex;\n    var dataType = ecData.dataType;\n    var data = dataModel.getData(dataType);\n    var renderMode = this._renderMode;\n    var positionDefault = e.positionDefault;\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model], this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var tooltipTrigger = tooltipModel.get('trigger');\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    // Pre-create marker style for makers. Users can assemble richText\n    // text in `formatter` callback and use those markers style.\n    params.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(params.color), renderMode);\n    var seriesTooltipResult = normalizeTooltipFormatResult(dataModel.formatTooltip(dataIndex, false, dataType));\n    var orderMode = tooltipModel.get('order');\n    var valueFormatter = tooltipModel.get('valueFormatter');\n    var frag = seriesTooltipResult.frag;\n    var markupText = frag ? buildTooltipMarkup(valueFormatter ? extend({\n      valueFormatter: valueFormatter\n    }, frag) : frag, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), tooltipModel.get('textStyle')) : seriesTooltipResult.text;\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, markupText, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markupStyleCreator);\n    });\n    // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  };\n  TooltipView.prototype._showComponentItemTooltip = function (e, el, dispatchAction) {\n    var isHTMLRenderMode = this._renderMode === 'html';\n    var ecData = getECData(el);\n    var tooltipConfig = ecData.tooltipConfig;\n    var tooltipOpt = tooltipConfig.option || {};\n    var encodeHTMLContent = tooltipOpt.encodeHTMLContent;\n    if (isString(tooltipOpt)) {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n      // when `tooltipConfig.option` is a string rather than an object,\n      // we can't know if the content needs to be encoded\n      // for the sake of security, encode it by default.\n      encodeHTMLContent = true;\n    }\n    if (encodeHTMLContent && isHTMLRenderMode && tooltipOpt.content) {\n      // clone might be unnecessary?\n      tooltipOpt = clone(tooltipOpt);\n      tooltipOpt.content = encodeHTML(tooltipOpt.content);\n    }\n    var tooltipModelCascade = [tooltipOpt];\n    var cmpt = this._ecModel.getComponent(ecData.componentMainType, ecData.componentIndex);\n    if (cmpt) {\n      tooltipModelCascade.push(cmpt);\n    }\n    // In most cases, component tooltip formatter has different params with series tooltip formatter,\n    // so that they cannot share the same formatter. Since the global tooltip formatter is used for series\n    // by convention, we do not use it as the default formatter for component.\n    tooltipModelCascade.push({\n      formatter: tooltipOpt.content\n    });\n    var positionDefault = e.positionDefault;\n    var subTooltipModel = buildTooltipModel(tooltipModelCascade, this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random() + '';\n    // PENDING: this case do not support richText style yet.\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on coordinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n    this._showOrMove(subTooltipModel, function () {\n      // Use formatterParams from element defined in component\n      // Avoid users modify it.\n      var formatterParams = clone(subTooltipModel.get('formatterParams') || {});\n      this._showTooltipContent(subTooltipModel, defaultHtml, formatterParams, asyncTicket, e.offsetX, e.offsetY, e.position, el, markupStyleCreator);\n    });\n    // If not dispatch showTip, tip may be hide triggered by axis.\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  };\n  TooltipView.prototype._showTooltipContent = function (\n  // Use Model<TooltipOption> insteadof TooltipModel because this model may be from series or other options.\n  // Instead of top level tooltip.\n  tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markupStyleCreator) {\n    // Reset ticket\n    this._ticket = '';\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n    var nearPoint = this._getNearestPoint([x, y], params, tooltipModel.get('trigger'), tooltipModel.get('borderColor'));\n    var nearPointColor = nearPoint.color;\n    if (formatter) {\n      if (isString(formatter)) {\n        var useUTC = tooltipModel.ecModel.get('useUTC');\n        var params0 = isArray(params) ? params[0] : params;\n        var isTimeAxis = params0 && params0.axisType && params0.axisType.indexOf('time') >= 0;\n        html = formatter;\n        if (isTimeAxis) {\n          html = timeFormat(params0.axisValue, html, useUTC);\n        }\n        html = formatTpl(html, params, true);\n      } else if (isFunction(formatter)) {\n        var callback = bind(function (cbTicket, html) {\n          if (cbTicket === this._ticket) {\n            tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n            this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n          }\n        }, this);\n        this._ticket = asyncTicket;\n        html = formatter(params, asyncTicket, callback);\n      } else {\n        html = formatter;\n      }\n    }\n    tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n    tooltipContent.show(tooltipModel, nearPointColor);\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  };\n  TooltipView.prototype._getNearestPoint = function (point, tooltipDataParams, trigger, borderColor) {\n    if (trigger === 'axis' || isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || (this._renderMode === 'html' ? '#fff' : 'none')\n      };\n    }\n    if (!isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || tooltipDataParams.color || tooltipDataParams.borderColor\n      };\n    }\n  };\n  TooltipView.prototype._updatePosition = function (tooltipModel, positionExpr, x,\n  // Mouse x\n  y,\n  // Mouse y\n  content, params, el) {\n    var viewWidth = this._api.getWidth();\n    var viewHeight = this._api.getHeight();\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n    if (isFunction(positionExpr)) {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n    if (isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (isObject(positionExpr)) {\n      var boxLayoutPosition = positionExpr;\n      boxLayoutPosition.width = contentSize[0];\n      boxLayoutPosition.height = contentSize[1];\n      var layoutRect = getLayoutRect(boxLayoutPosition, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null;\n      // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n      vAlign = null;\n    }\n    // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (isString(positionExpr) && el) {\n      var pos = calcTooltipPosition(positionExpr, rect, contentSize, tooltipModel.get('borderWidth'));\n      x = pos[0];\n      y = pos[1];\n    } else {\n      var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n      x = pos[0];\n      y = pos[1];\n    }\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n    if (shouldTooltipConfine(tooltipModel)) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n    content.moveTo(x, y);\n  };\n  // FIXME\n  // Should we remove this but leave this to user?\n  TooltipView.prototype._updateContentNotChangedOnAxis = function (dataByCoordSys, cbParamsList) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var lastCbParamsList = this._cbParamsList;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || [];\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged = contentNotChanged && lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged = contentNotChanged && lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged = contentNotChanged && lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        });\n        // check is cbParams data value changed\n        lastCbParamsList && each(lastItem.seriesDataIndices, function (idxItem) {\n          var seriesIdx = idxItem.seriesIndex;\n          var cbParams = cbParamsList[seriesIdx];\n          var lastCbParams = lastCbParamsList[seriesIdx];\n          if (cbParams && lastCbParams && lastCbParams.data !== cbParams.data) {\n            contentNotChanged = false;\n          }\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    this._cbParamsList = cbParamsList;\n    return !!contentNotChanged;\n  };\n  TooltipView.prototype._hide = function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  };\n  TooltipView.prototype.dispose = function (ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n    clear(this, '_updatePosition');\n    this._tooltipContent.dispose();\n    globalListener.unregister('itemTooltip', api);\n  };\n  TooltipView.type = 'tooltip';\n  return TooltipView;\n}(ComponentView);\n/**\n * From top to bottom. (the last one should be globalTooltipModel);\n */\nfunction buildTooltipModel(modelCascade, globalTooltipModel, defaultTooltipOption) {\n  // Last is always tooltip model.\n  var ecModel = globalTooltipModel.ecModel;\n  var resultModel;\n  if (defaultTooltipOption) {\n    resultModel = new Model(defaultTooltipOption, ecModel, ecModel);\n    resultModel = new Model(globalTooltipModel.option, resultModel, ecModel);\n  } else {\n    resultModel = globalTooltipModel;\n  }\n  for (var i = modelCascade.length - 1; i >= 0; i--) {\n    var tooltipOpt = modelCascade[i];\n    if (tooltipOpt) {\n      if (tooltipOpt instanceof Model) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      }\n      // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n      if (isString(tooltipOpt)) {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n      if (tooltipOpt) {\n        resultModel = new Model(tooltipOpt, resultModel, ecModel);\n      }\n    }\n  }\n  return resultModel;\n}\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || bind(api.dispatchAction, api);\n}\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n  if (gapH != null) {\n    // Add extra 2 pixels for this case:\n    // At present the \"values\" in default tooltip are using CSS `float: right`.\n    // When the right edge of the tooltip box is on the right side of the\n    // viewport, the `float` layout might push the \"values\" to the second line.\n    if (x + width + gapH + 2 > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n  return [x, y];\n}\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\nfunction calcTooltipPosition(position, rect, contentSize, borderWidth) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var offset = Math.ceil(Math.SQRT2 * borderWidth) + 8;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - offset;\n      break;\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + offset;\n      break;\n    case 'left':\n      x = rect.x - domWidth - offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n    case 'right':\n      x = rect.x + rectWidth + offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n  return [x, y];\n}\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n/**\n * Find target component by payload like:\n * ```js\n * { legendId: 'some_id', name: 'xxx' }\n * { toolboxIndex: 1, name: 'xxx' }\n * { geoName: 'some_name', name: 'xxx' }\n * ```\n * PENDING: at present only\n *\n * If not found, return null/undefined.\n */\nfunction findComponentReference(payload, ecModel, api) {\n  var queryOptionMap = preParseFinder(payload).queryOptionMap;\n  var componentMainType = queryOptionMap.keys()[0];\n  if (!componentMainType || componentMainType === 'series') {\n    return;\n  }\n  var queryResult = queryReferringComponents(ecModel, componentMainType, queryOptionMap.get(componentMainType), {\n    useDefault: false,\n    enableAll: false,\n    enableNone: false\n  });\n  var model = queryResult.models[0];\n  if (!model) {\n    return;\n  }\n  var view = api.getViewOfComponentModel(model);\n  var el;\n  view.group.traverse(function (subEl) {\n    var tooltipConfig = getECData(subEl).tooltipConfig;\n    if (tooltipConfig && tooltipConfig.name === payload.name) {\n      el = subEl;\n      return true; // stop\n    }\n  });\n\n  if (el) {\n    return {\n      componentMainType: componentMainType,\n      componentIndex: model.componentIndex,\n      el: el\n    };\n  }\n}\nexport default TooltipView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport { use } from '../../extension.js';\nimport TooltipModel from './TooltipModel.js';\nimport TooltipView from './TooltipView.js';\nimport { noop } from 'zrender/lib/core/util.js';\nexport function install(registers) {\n  use(installAxisPointer);\n  registers.registerComponentModel(TooltipModel);\n  registers.registerComponentView(TooltipView);\n  /**\n   * @action\n   * @property {string} type\n   * @property {number} seriesIndex\n   * @property {number} dataIndex\n   * @property {number} [x]\n   * @property {number} [y]\n   */\n  registers.registerAction({\n    type: 'showTip',\n    event: 'showTip',\n    update: 'tooltip:manuallyShowTip'\n  }, noop);\n  registers.registerAction({\n    type: 'hideTip',\n    event: 'hideTip',\n    update: 'tooltip:manuallyHideTip'\n  }, noop);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { trim, isArray, each, reduce } from 'zrender/lib/core/util.js';\nimport { retrieveVisualColorForTooltipMarker, createTooltipMarkup } from './tooltipMarkup.js';\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { isNameSpecified } from '../../util/model.js';\nexport function defaultSeriesFormatTooltip(opt) {\n  var series = opt.series;\n  var dataIndex = opt.dataIndex;\n  var multipleSeries = opt.multipleSeries;\n  var data = series.getData();\n  var tooltipDims = data.mapDimensionsAll('defaultedTooltip');\n  var tooltipDimLen = tooltipDims.length;\n  var value = series.getRawValue(dataIndex);\n  var isValueArr = isArray(value);\n  var markerColor = retrieveVisualColorForTooltipMarker(series, dataIndex);\n  // Complicated rule for pretty tooltip.\n  var inlineValue;\n  var inlineValueType;\n  var subBlocks;\n  var sortParam;\n  if (tooltipDimLen > 1 || isValueArr && !tooltipDimLen) {\n    var formatArrResult = formatTooltipArrayValue(value, series, dataIndex, tooltipDims, markerColor);\n    inlineValue = formatArrResult.inlineValues;\n    inlineValueType = formatArrResult.inlineValueTypes;\n    subBlocks = formatArrResult.blocks;\n    // Only support tooltip sort by the first inline value. It's enough in most cases.\n    sortParam = formatArrResult.inlineValues[0];\n  } else if (tooltipDimLen) {\n    var dimInfo = data.getDimensionInfo(tooltipDims[0]);\n    sortParam = inlineValue = retrieveRawValue(data, dataIndex, tooltipDims[0]);\n    inlineValueType = dimInfo.type;\n  } else {\n    sortParam = inlineValue = isValueArr ? value[0] : value;\n  }\n  // Do not show generated series name. It might not be readable.\n  var seriesNameSpecified = isNameSpecified(series);\n  var seriesName = seriesNameSpecified && series.name || '';\n  var itemName = data.getName(dataIndex);\n  var inlineName = multipleSeries ? seriesName : itemName;\n  return createTooltipMarkup('section', {\n    header: seriesName,\n    // When series name is not specified, do not show a header line with only '-'.\n    // This case always happens in tooltip.trigger: 'item'.\n    noHeader: multipleSeries || !seriesNameSpecified,\n    sortParam: sortParam,\n    blocks: [createTooltipMarkup('nameValue', {\n      markerType: 'item',\n      markerColor: markerColor,\n      // Do not mix display seriesName and itemName in one tooltip,\n      // which might confuses users.\n      name: inlineName,\n      // name dimension might be auto assigned, where the name might\n      // be not readable. So we check trim here.\n      noName: !trim(inlineName),\n      value: inlineValue,\n      valueType: inlineValueType,\n      dataIndex: dataIndex\n    })].concat(subBlocks || [])\n  });\n}\nfunction formatTooltipArrayValue(value, series, dataIndex, tooltipDims, colorStr) {\n  // check: category-no-encode-has-axis-data in dataset.html\n  var data = series.getData();\n  var isValueMultipleLine = reduce(value, function (isValueMultipleLine, val, idx) {\n    var dimItem = data.getDimensionInfo(idx);\n    return isValueMultipleLine = isValueMultipleLine || dimItem && dimItem.tooltip !== false && dimItem.displayName != null;\n  }, false);\n  var inlineValues = [];\n  var inlineValueTypes = [];\n  var blocks = [];\n  tooltipDims.length ? each(tooltipDims, function (dim) {\n    setEachItem(retrieveRawValue(data, dataIndex, dim), dim);\n  })\n  // By default, all dims is used on tooltip.\n  : each(value, setEachItem);\n  function setEachItem(val, dim) {\n    var dimInfo = data.getDimensionInfo(dim);\n    // If `dimInfo.tooltip` is not set, show tooltip.\n    if (!dimInfo || dimInfo.otherDims.tooltip === false) {\n      return;\n    }\n    if (isValueMultipleLine) {\n      blocks.push(createTooltipMarkup('nameValue', {\n        markerType: 'subItem',\n        markerColor: colorStr,\n        name: dimInfo.displayName,\n        value: val,\n        valueType: dimInfo.type\n      }));\n    } else {\n      inlineValues.push(val);\n      inlineValueTypes.push(dimInfo.type);\n    }\n  }\n  return {\n    inlineValues: inlineValues,\n    inlineValueTypes: inlineValueTypes,\n    blocks: blocks\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getTooltipMarker, encodeHTML, makeValueReadable, convertToColorString } from '../../util/format.js';\nimport { isString, each, hasOwn, isArray, map, assert, extend } from 'zrender/lib/core/util.js';\nimport { SortOrderComparator } from '../../data/helper/dataValueHelper.js';\nimport { getRandomIdBase } from '../../util/number.js';\nvar TOOLTIP_LINE_HEIGHT_CSS = 'line-height:1';\n// TODO: more textStyle option\nfunction getTooltipTextStyle(textStyle, renderMode) {\n  var nameFontColor = textStyle.color || '#6e7079';\n  var nameFontSize = textStyle.fontSize || 12;\n  var nameFontWeight = textStyle.fontWeight || '400';\n  var valueFontColor = textStyle.color || '#464646';\n  var valueFontSize = textStyle.fontSize || 14;\n  var valueFontWeight = textStyle.fontWeight || '900';\n  if (renderMode === 'html') {\n    // `textStyle` is probably from user input, should be encoded to reduce security risk.\n    return {\n      // eslint-disable-next-line max-len\n      nameStyle: \"font-size:\" + encodeHTML(nameFontSize + '') + \"px;color:\" + encodeHTML(nameFontColor) + \";font-weight:\" + encodeHTML(nameFontWeight + ''),\n      // eslint-disable-next-line max-len\n      valueStyle: \"font-size:\" + encodeHTML(valueFontSize + '') + \"px;color:\" + encodeHTML(valueFontColor) + \";font-weight:\" + encodeHTML(valueFontWeight + '')\n    };\n  } else {\n    return {\n      nameStyle: {\n        fontSize: nameFontSize,\n        fill: nameFontColor,\n        fontWeight: nameFontWeight\n      },\n      valueStyle: {\n        fontSize: valueFontSize,\n        fill: valueFontColor,\n        fontWeight: valueFontWeight\n      }\n    };\n  }\n}\n// See `TooltipMarkupLayoutIntent['innerGapLevel']`.\n// (value from UI design)\nvar HTML_GAPS = [0, 10, 20, 30];\nvar RICH_TEXT_GAPS = ['', '\\n', '\\n\\n', '\\n\\n\\n'];\n// eslint-disable-next-line max-len\nexport function createTooltipMarkup(type, option) {\n  option.type = type;\n  return option;\n}\nfunction isSectionFragment(frag) {\n  return frag.type === 'section';\n}\nfunction getBuilder(frag) {\n  return isSectionFragment(frag) ? buildSection : buildNameValue;\n}\nfunction getBlockGapLevel(frag) {\n  if (isSectionFragment(frag)) {\n    var gapLevel_1 = 0;\n    var subBlockLen = frag.blocks.length;\n    var hasInnerGap_1 = subBlockLen > 1 || subBlockLen > 0 && !frag.noHeader;\n    each(frag.blocks, function (subBlock) {\n      var subGapLevel = getBlockGapLevel(subBlock);\n      // If the some of the sub-blocks have some gaps (like 10px) inside, this block\n      // should use a larger gap (like 20px) to distinguish those sub-blocks.\n      if (subGapLevel >= gapLevel_1) {\n        gapLevel_1 = subGapLevel + +(hasInnerGap_1 && (\n        // 0 always can not be readable gap level.\n        !subGapLevel\n        // If no header, always keep the sub gap level. Otherwise\n        // look weird in case `multipleSeries`.\n        || isSectionFragment(subBlock) && !subBlock.noHeader));\n      }\n    });\n    return gapLevel_1;\n  }\n  return 0;\n}\nfunction buildSection(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n  var noHeader = fragment.noHeader;\n  var gaps = getGap(getBlockGapLevel(fragment));\n  var subMarkupTextList = [];\n  var subBlocks = fragment.blocks || [];\n  assert(!subBlocks || isArray(subBlocks));\n  subBlocks = subBlocks || [];\n  var orderMode = ctx.orderMode;\n  if (fragment.sortBlocks && orderMode) {\n    subBlocks = subBlocks.slice();\n    var orderMap = {\n      valueAsc: 'asc',\n      valueDesc: 'desc'\n    };\n    if (hasOwn(orderMap, orderMode)) {\n      var comparator_1 = new SortOrderComparator(orderMap[orderMode], null);\n      subBlocks.sort(function (a, b) {\n        return comparator_1.evaluate(a.sortParam, b.sortParam);\n      });\n    }\n    // FIXME 'seriesDesc' necessary?\n    else if (orderMode === 'seriesDesc') {\n      subBlocks.reverse();\n    }\n  }\n  each(subBlocks, function (subBlock, idx) {\n    var valueFormatter = fragment.valueFormatter;\n    var subMarkupText = getBuilder(subBlock)(\n    // Inherit valueFormatter\n    valueFormatter ? extend(extend({}, ctx), {\n      valueFormatter: valueFormatter\n    }) : ctx, subBlock, idx > 0 ? gaps.html : 0, toolTipTextStyle);\n    subMarkupText != null && subMarkupTextList.push(subMarkupText);\n  });\n  var subMarkupText = ctx.renderMode === 'richText' ? subMarkupTextList.join(gaps.richText) : wrapBlockHTML(subMarkupTextList.join(''), noHeader ? topMarginForOuterGap : gaps.html);\n  if (noHeader) {\n    return subMarkupText;\n  }\n  var displayableHeader = makeValueReadable(fragment.header, 'ordinal', ctx.useUTC);\n  var nameStyle = getTooltipTextStyle(toolTipTextStyle, ctx.renderMode).nameStyle;\n  if (ctx.renderMode === 'richText') {\n    return wrapInlineNameRichText(ctx, displayableHeader, nameStyle) + gaps.richText + subMarkupText;\n  } else {\n    return wrapBlockHTML(\"<div style=\\\"\" + nameStyle + \";\" + TOOLTIP_LINE_HEIGHT_CSS + \";\\\">\" + encodeHTML(displayableHeader) + '</div>' + subMarkupText, topMarginForOuterGap);\n  }\n}\nfunction buildNameValue(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n  var renderMode = ctx.renderMode;\n  var noName = fragment.noName;\n  var noValue = fragment.noValue;\n  var noMarker = !fragment.markerType;\n  var name = fragment.name;\n  var useUTC = ctx.useUTC;\n  var valueFormatter = fragment.valueFormatter || ctx.valueFormatter || function (value) {\n    value = isArray(value) ? value : [value];\n    return map(value, function (val, idx) {\n      return makeValueReadable(val, isArray(valueTypeOption) ? valueTypeOption[idx] : valueTypeOption, useUTC);\n    });\n  };\n  if (noName && noValue) {\n    return;\n  }\n  var markerStr = noMarker ? '' : ctx.markupStyleCreator.makeTooltipMarker(fragment.markerType, fragment.markerColor || '#333', renderMode);\n  var readableName = noName ? '' : makeValueReadable(name, 'ordinal', useUTC);\n  var valueTypeOption = fragment.valueType;\n  var readableValueList = noValue ? [] : valueFormatter(fragment.value, fragment.dataIndex);\n  var valueAlignRight = !noMarker || !noName;\n  // It little weird if only value next to marker but far from marker.\n  var valueCloseToMarker = !noMarker && noName;\n  var _a = getTooltipTextStyle(toolTipTextStyle, renderMode),\n    nameStyle = _a.nameStyle,\n    valueStyle = _a.valueStyle;\n  return renderMode === 'richText' ? (noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameRichText(ctx, readableName, nameStyle))\n  // Value has commas inside, so use ' ' as delimiter for multiple values.\n  + (noValue ? '' : wrapInlineValueRichText(ctx, readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)) : wrapBlockHTML((noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameHTML(readableName, !noMarker, nameStyle)) + (noValue ? '' : wrapInlineValueHTML(readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)), topMarginForOuterGap);\n}\n/**\n * @return markupText. null/undefined means no content.\n */\nexport function buildTooltipMarkup(fragment, markupStyleCreator, renderMode, orderMode, useUTC, toolTipTextStyle) {\n  if (!fragment) {\n    return;\n  }\n  var builder = getBuilder(fragment);\n  var ctx = {\n    useUTC: useUTC,\n    renderMode: renderMode,\n    orderMode: orderMode,\n    markupStyleCreator: markupStyleCreator,\n    valueFormatter: fragment.valueFormatter\n  };\n  return builder(ctx, fragment, 0, toolTipTextStyle);\n}\nfunction getGap(gapLevel) {\n  return {\n    html: HTML_GAPS[gapLevel],\n    richText: RICH_TEXT_GAPS[gapLevel]\n  };\n}\nfunction wrapBlockHTML(encodedContent, topGap) {\n  var clearfix = '<div style=\"clear:both\"></div>';\n  var marginCSS = \"margin: \" + topGap + \"px 0 0\";\n  return \"<div style=\\\"\" + marginCSS + \";\" + TOOLTIP_LINE_HEIGHT_CSS + \";\\\">\" + encodedContent + clearfix + '</div>';\n}\nfunction wrapInlineNameHTML(name, leftHasMarker, style) {\n  var marginCss = leftHasMarker ? 'margin-left:2px' : '';\n  return \"<span style=\\\"\" + style + \";\" + marginCss + \"\\\">\" + encodeHTML(name) + '</span>';\n}\nfunction wrapInlineValueHTML(valueList, alignRight, valueCloseToMarker, style) {\n  // Do not too close to marker, considering there are multiple values separated by spaces.\n  var paddingStr = valueCloseToMarker ? '10px' : '20px';\n  var alignCSS = alignRight ? \"float:right;margin-left:\" + paddingStr : '';\n  valueList = isArray(valueList) ? valueList : [valueList];\n  return \"<span style=\\\"\" + alignCSS + \";\" + style + \"\\\">\"\n  // Value has commas inside, so use '  ' as delimiter for multiple values.\n  + map(valueList, function (value) {\n    return encodeHTML(value);\n  }).join('&nbsp;&nbsp;') + '</span>';\n}\nfunction wrapInlineNameRichText(ctx, name, style) {\n  return ctx.markupStyleCreator.wrapRichTextStyle(name, style);\n}\nfunction wrapInlineValueRichText(ctx, values, alignRight, valueCloseToMarker, style) {\n  var styles = [style];\n  var paddingLeft = valueCloseToMarker ? 10 : 20;\n  alignRight && styles.push({\n    padding: [0, 0, 0, paddingLeft],\n    align: 'right'\n  });\n  // Value has commas inside, so use '  ' as delimiter for multiple values.\n  return ctx.markupStyleCreator.wrapRichTextStyle(isArray(values) ? values.join('  ') : values, styles);\n}\nexport function retrieveVisualColorForTooltipMarker(series, dataIndex) {\n  var style = series.getData().getItemVisual(dataIndex, 'style');\n  var color = style[series.visualDrawType];\n  return convertToColorString(color);\n}\nexport function getPaddingFromTooltipModel(model, renderMode) {\n  var padding = model.get('padding');\n  return padding != null ? padding\n  // We give slightly different to look pretty.\n  : renderMode === 'richText' ? [8, 10] : 10;\n}\n/**\n * The major feature is generate styles for `renderMode: 'richText'`.\n * But it also serves `renderMode: 'html'` to provide\n * \"renderMode-independent\" API.\n */\nvar TooltipMarkupStyleCreator = /** @class */function () {\n  function TooltipMarkupStyleCreator() {\n    this.richTextStyles = {};\n    // Notice that \"generate a style name\" usually happens repeatedly when mouse is moving and\n    // a tooltip is displayed. So we put the `_nextStyleNameId` as a member of each creator\n    // rather than static shared by all creators (which will cause it increase to fast).\n    this._nextStyleNameId = getRandomIdBase();\n  }\n  TooltipMarkupStyleCreator.prototype._generateStyleName = function () {\n    return '__EC_aUTo_' + this._nextStyleNameId++;\n  };\n  TooltipMarkupStyleCreator.prototype.makeTooltipMarker = function (markerType, colorStr, renderMode) {\n    var markerId = renderMode === 'richText' ? this._generateStyleName() : null;\n    var marker = getTooltipMarker({\n      color: colorStr,\n      type: markerType,\n      renderMode: renderMode,\n      markerId: markerId\n    });\n    if (isString(marker)) {\n      return marker;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(markerId);\n      }\n      this.richTextStyles[markerId] = marker.style;\n      return marker.content;\n    }\n  };\n  /**\n   * @usage\n   * ```ts\n   * const styledText = markupStyleCreator.wrapRichTextStyle([\n   *     // The styles will be auto merged.\n   *     {\n   *         fontSize: 12,\n   *         color: 'blue'\n   *     },\n   *     {\n   *         padding: 20\n   *     }\n   * ]);\n   * ```\n   */\n  TooltipMarkupStyleCreator.prototype.wrapRichTextStyle = function (text, styles) {\n    var finalStl = {};\n    if (isArray(styles)) {\n      each(styles, function (stl) {\n        return extend(finalStl, stl);\n      });\n    } else {\n      extend(finalStl, styles);\n    }\n    var styleName = this._generateStyleName();\n    this.richTextStyles[styleName] = finalStl;\n    return \"{\" + styleName + \"|\" + text + \"}\";\n  };\n  return TooltipMarkupStyleCreator;\n}();\nexport { TooltipMarkupStyleCreator };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parseConditionalExpression } from '../../util/conditionalExpression.js';\nimport { hasOwn, createHashMap } from 'zrender/lib/core/util.js';\nimport { makePrintable, throwError } from '../../util/log.js';\nexport var filterTransform = {\n  type: 'echarts:filter',\n  // PENDING: enhance to filter by index rather than create new data\n  transform: function (params) {\n    // [Caveat] Fail-Fast:\n    // Do not return the whole dataset unless user config indicates it explicitly.\n    // For example, if no condition is specified by mistake, returning an empty result\n    // is better than returning the entire raw source for the user to find the mistake.\n    var upstream = params.upstream;\n    var rawItem;\n    var condition = parseConditionalExpression(params.config, {\n      valueGetterAttrMap: createHashMap({\n        dimension: true\n      }),\n      prepareGetValue: function (exprOption) {\n        var errMsg = '';\n        var dimLoose = exprOption.dimension;\n        if (!hasOwn(exprOption, 'dimension')) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = makePrintable('Relation condition must has prop \"dimension\" specified.', 'Illegal condition:', exprOption);\n          }\n          throwError(errMsg);\n        }\n        var dimInfo = upstream.getDimensionInfo(dimLoose);\n        if (!dimInfo) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = makePrintable('Can not find dimension info via: ' + dimLoose + '.\\n', 'Existing dimensions: ', upstream.cloneAllDimensionInfo(), '.\\n', 'Illegal condition:', exprOption, '.\\n');\n          }\n          throwError(errMsg);\n        }\n        return {\n          dimIdx: dimInfo.index\n        };\n      },\n      getValue: function (param) {\n        return upstream.retrieveValueFromItem(rawItem, param.dimIdx);\n      }\n    });\n    var resultData = [];\n    for (var i = 0, len = upstream.count(); i < len; i++) {\n      rawItem = upstream.getRawDataItem(i);\n      if (condition.evaluate()) {\n        resultData.push(rawItem);\n      }\n    }\n    return {\n      data: resultData\n    };\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS } from '../../util/types.js';\nimport { makePrintable, throwError } from '../../util/log.js';\nimport { each } from 'zrender/lib/core/util.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { getRawValueParser, SortOrderComparator } from '../../data/helper/dataValueHelper.js';\nvar sampleLog = '';\nif (process.env.NODE_ENV !== 'production') {\n  sampleLog = ['Valid config is like:', '{ dimension: \"age\", order: \"asc\" }', 'or [{ dimension: \"age\", order: \"asc\"], { dimension: \"date\", order: \"desc\" }]'].join(' ');\n}\nexport var sortTransform = {\n  type: 'echarts:sort',\n  transform: function (params) {\n    var upstream = params.upstream;\n    var config = params.config;\n    var errMsg = '';\n    // Normalize\n    // const orderExprList: OrderExpression[] = isArray(config[0])\n    //     ? config as OrderExpression[]\n    //     : [config as OrderExpression];\n    var orderExprList = normalizeToArray(config);\n    if (!orderExprList.length) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Empty `config` in sort transform.';\n      }\n      throwError(errMsg);\n    }\n    var orderDefList = [];\n    each(orderExprList, function (orderExpr) {\n      var dimLoose = orderExpr.dimension;\n      var order = orderExpr.order;\n      var parserName = orderExpr.parser;\n      var incomparable = orderExpr.incomparable;\n      if (dimLoose == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"dimension\" specified.' + sampleLog;\n        }\n        throwError(errMsg);\n      }\n      if (order !== 'asc' && order !== 'desc') {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"order\" specified.' + sampleLog;\n        }\n        throwError(errMsg);\n      }\n      if (incomparable && incomparable !== 'min' && incomparable !== 'max') {\n        var errMsg_1 = '';\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_1 = 'incomparable must be \"min\" or \"max\" rather than \"' + incomparable + '\".';\n        }\n        throwError(errMsg_1);\n      }\n      if (order !== 'asc' && order !== 'desc') {\n        var errMsg_2 = '';\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_2 = 'order must be \"asc\" or \"desc\" rather than \"' + order + '\".';\n        }\n        throwError(errMsg_2);\n      }\n      var dimInfo = upstream.getDimensionInfo(dimLoose);\n      if (!dimInfo) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Can not find dimension info via: ' + dimLoose + '.\\n', 'Existing dimensions: ', upstream.cloneAllDimensionInfo(), '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n        throwError(errMsg);\n      }\n      var parser = parserName ? getRawValueParser(parserName) : null;\n      if (parserName && !parser) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Invalid parser name ' + parserName + '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n        throwError(errMsg);\n      }\n      orderDefList.push({\n        dimIdx: dimInfo.index,\n        parser: parser,\n        comparator: new SortOrderComparator(order, incomparable)\n      });\n    });\n    // TODO: support it?\n    var sourceFormat = upstream.sourceFormat;\n    if (sourceFormat !== SOURCE_FORMAT_ARRAY_ROWS && sourceFormat !== SOURCE_FORMAT_OBJECT_ROWS) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'sourceFormat \"' + sourceFormat + '\" is not supported yet';\n      }\n      throwError(errMsg);\n    }\n    // Other upstream format are all array.\n    var resultData = [];\n    for (var i = 0, len = upstream.count(); i < len; i++) {\n      resultData.push(upstream.getRawDataItem(i));\n    }\n    resultData.sort(function (item0, item1) {\n      for (var i = 0; i < orderDefList.length; i++) {\n        var orderDef = orderDefList[i];\n        var val0 = upstream.retrieveValueFromItem(item0, orderDef.dimIdx);\n        var val1 = upstream.retrieveValueFromItem(item1, orderDef.dimIdx);\n        if (orderDef.parser) {\n          val0 = orderDef.parser(val0);\n          val1 = orderDef.parser(val1);\n        }\n        var result = orderDef.comparator.evaluate(val0, val1);\n        if (result !== 0) {\n          return result;\n        }\n      }\n      return 0;\n    });\n    return {\n      data: resultData\n    };\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { filterTransform } from './filterTransform.js';\nimport { sortTransform } from './sortTransform.js';\nexport function install(registers) {\n  registers.registerTransform(filterTransform);\n  registers.registerTransform(sortTransform);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport visualDefault from '../../visual/visualDefault.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport * as visualSolution from '../../visual/visualSolution.js';\nimport * as modelUtil from '../../util/model.js';\nimport * as numberUtil from '../../util/number.js';\nimport ComponentModel from '../../model/Component.js';\nvar mapVisual = VisualMapping.mapVisual;\nvar eachVisual = VisualMapping.eachVisual;\nvar isArray = zrUtil.isArray;\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\nvar linearMap = numberUtil.linearMap;\nvar VisualMapModel = /** @class */function (_super) {\n  __extends(VisualMapModel, _super);\n  function VisualMapModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = VisualMapModel.type;\n    _this.stateList = ['inRange', 'outOfRange'];\n    _this.replacableOptionKeys = ['inRange', 'outOfRange', 'target', 'controller', 'color'];\n    _this.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    /**\n     * [lowerBound, upperBound]\n     */\n    _this.dataBound = [-Infinity, Infinity];\n    _this.targetVisuals = {};\n    _this.controllerVisuals = {};\n    return _this;\n  }\n  VisualMapModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n  };\n  /**\n   * @protected\n   */\n  VisualMapModel.prototype.optionUpdated = function (newOption, isInit) {\n    var thisOption = this.option;\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, this.replacableOptionKeys);\n    this.textStyleModel = this.getModel('textStyle');\n    this.resetItemSize();\n    this.completeVisualOption();\n  };\n  /**\n   * @protected\n   */\n  VisualMapModel.prototype.resetVisual = function (supplementVisualOption) {\n    var stateList = this.stateList;\n    supplementVisualOption = zrUtil.bind(supplementVisualOption, this);\n    this.controllerVisuals = visualSolution.createVisualMappings(this.option.controller, stateList, supplementVisualOption);\n    this.targetVisuals = visualSolution.createVisualMappings(this.option.target, stateList, supplementVisualOption);\n  };\n  /**\n   * @public\n   */\n  VisualMapModel.prototype.getItemSymbol = function () {\n    return null;\n  };\n  /**\n   * @protected\n   * @return {Array.<number>} An array of series indices.\n   */\n  VisualMapModel.prototype.getTargetSeriesIndices = function () {\n    var optionSeriesIndex = this.option.seriesIndex;\n    var seriesIndices = [];\n    if (optionSeriesIndex == null || optionSeriesIndex === 'all') {\n      this.ecModel.eachSeries(function (seriesModel, index) {\n        seriesIndices.push(index);\n      });\n    } else {\n      seriesIndices = modelUtil.normalizeToArray(optionSeriesIndex);\n    }\n    return seriesIndices;\n  };\n  /**\n   * @public\n   */\n  VisualMapModel.prototype.eachTargetSeries = function (callback, context) {\n    zrUtil.each(this.getTargetSeriesIndices(), function (seriesIndex) {\n      var seriesModel = this.ecModel.getSeriesByIndex(seriesIndex);\n      if (seriesModel) {\n        callback.call(context, seriesModel);\n      }\n    }, this);\n  };\n  /**\n   * @pubilc\n   */\n  VisualMapModel.prototype.isTargetSeries = function (seriesModel) {\n    var is = false;\n    this.eachTargetSeries(function (model) {\n      model === seriesModel && (is = true);\n    });\n    return is;\n  };\n  /**\n   * @example\n   * this.formatValueText(someVal); // format single numeric value to text.\n   * this.formatValueText(someVal, true); // format single category value to text.\n   * this.formatValueText([min, max]); // format numeric min-max to text.\n   * this.formatValueText([this.dataBound[0], max]); // using data lower bound.\n   * this.formatValueText([min, this.dataBound[1]]); // using data upper bound.\n   *\n   * @param value Real value, or this.dataBound[0 or 1].\n   * @param isCategory Only available when value is number.\n   * @param edgeSymbols Open-close symbol when value is interval.\n   * @protected\n   */\n  VisualMapModel.prototype.formatValueText = function (value, isCategory, edgeSymbols) {\n    var option = this.option;\n    var precision = option.precision;\n    var dataBound = this.dataBound;\n    var formatter = option.formatter;\n    var isMinMax;\n    edgeSymbols = edgeSymbols || ['<', '>'];\n    if (zrUtil.isArray(value)) {\n      value = value.slice();\n      isMinMax = true;\n    }\n    var textValue = isCategory ? value // Value is string when isCategory\n    : isMinMax ? [toFixed(value[0]), toFixed(value[1])] : toFixed(value);\n    if (zrUtil.isString(formatter)) {\n      return formatter.replace('{value}', isMinMax ? textValue[0] : textValue).replace('{value2}', isMinMax ? textValue[1] : textValue);\n    } else if (zrUtil.isFunction(formatter)) {\n      return isMinMax ? formatter(value[0], value[1]) : formatter(value);\n    }\n    if (isMinMax) {\n      if (value[0] === dataBound[0]) {\n        return edgeSymbols[0] + ' ' + textValue[1];\n      } else if (value[1] === dataBound[1]) {\n        return edgeSymbols[1] + ' ' + textValue[0];\n      } else {\n        return textValue[0] + ' - ' + textValue[1];\n      }\n    } else {\n      // Format single value (includes category case).\n      return textValue;\n    }\n    function toFixed(val) {\n      return val === dataBound[0] ? 'min' : val === dataBound[1] ? 'max' : (+val).toFixed(Math.min(precision, 20));\n    }\n  };\n  /**\n   * @protected\n   */\n  VisualMapModel.prototype.resetExtent = function () {\n    var thisOption = this.option;\n    // Can not calculate data extent by data here.\n    // Because series and data may be modified in processing stage.\n    // So we do not support the feature \"auto min/max\".\n    var extent = asc([thisOption.min, thisOption.max]);\n    this._dataExtent = extent;\n  };\n  /**\n   * PENDING:\n   * delete this method if no outer usage.\n   *\n   * Return  Concrete dimension. If null/undefined is returned, no dimension is used.\n   */\n  // getDataDimension(data: SeriesData) {\n  //     const optDim = this.option.dimension;\n  //     if (optDim != null) {\n  //         return data.getDimension(optDim);\n  //     }\n  //     const dimNames = data.dimensions;\n  //     for (let i = dimNames.length - 1; i >= 0; i--) {\n  //         const dimName = dimNames[i];\n  //         const dimInfo = data.getDimensionInfo(dimName);\n  //         if (!dimInfo.isCalculationCoord) {\n  //             return dimName;\n  //         }\n  //     }\n  // }\n  VisualMapModel.prototype.getDataDimensionIndex = function (data) {\n    var optDim = this.option.dimension;\n    if (optDim != null) {\n      return data.getDimensionIndex(optDim);\n    }\n    var dimNames = data.dimensions;\n    for (var i = dimNames.length - 1; i >= 0; i--) {\n      var dimName = dimNames[i];\n      var dimInfo = data.getDimensionInfo(dimName);\n      if (!dimInfo.isCalculationCoord) {\n        return dimInfo.storeDimIndex;\n      }\n    }\n  };\n  VisualMapModel.prototype.getExtent = function () {\n    return this._dataExtent.slice();\n  };\n  VisualMapModel.prototype.completeVisualOption = function () {\n    var ecModel = this.ecModel;\n    var thisOption = this.option;\n    var base = {\n      inRange: thisOption.inRange,\n      outOfRange: thisOption.outOfRange\n    };\n    var target = thisOption.target || (thisOption.target = {});\n    var controller = thisOption.controller || (thisOption.controller = {});\n    zrUtil.merge(target, base); // Do not override\n    zrUtil.merge(controller, base); // Do not override\n    var isCategory = this.isCategory();\n    completeSingle.call(this, target);\n    completeSingle.call(this, controller);\n    completeInactive.call(this, target, 'inRange', 'outOfRange');\n    // completeInactive.call(this, target, 'outOfRange', 'inRange');\n    completeController.call(this, controller);\n    function completeSingle(base) {\n      // Compatible with ec2 dataRange.color.\n      // The mapping order of dataRange.color is: [high value, ..., low value]\n      // whereas inRange.color and outOfRange.color is [low value, ..., high value]\n      // Notice: ec2 has no inverse.\n      if (isArray(thisOption.color)\n      // If there has been inRange: {symbol: ...}, adding color is a mistake.\n      // So adding color only when no inRange defined.\n      && !base.inRange) {\n        base.inRange = {\n          color: thisOption.color.slice().reverse()\n        };\n      }\n      // Compatible with previous logic, always give a default color, otherwise\n      // simple config with no inRange and outOfRange will not work.\n      // Originally we use visualMap.color as the default color, but setOption at\n      // the second time the default color will be erased. So we change to use\n      // constant DEFAULT_COLOR.\n      // If user do not want the default color, set inRange: {color: null}.\n      base.inRange = base.inRange || {\n        color: ecModel.get('gradientColor')\n      };\n    }\n    function completeInactive(base, stateExist, stateAbsent) {\n      var optExist = base[stateExist];\n      var optAbsent = base[stateAbsent];\n      if (optExist && !optAbsent) {\n        optAbsent = base[stateAbsent] = {};\n        each(optExist, function (visualData, visualType) {\n          if (!VisualMapping.isValidType(visualType)) {\n            return;\n          }\n          var defa = visualDefault.get(visualType, 'inactive', isCategory);\n          if (defa != null) {\n            optAbsent[visualType] = defa;\n            // Compatibable with ec2:\n            // Only inactive color to rgba(0,0,0,0) can not\n            // make label transparent, so use opacity also.\n            if (visualType === 'color' && !optAbsent.hasOwnProperty('opacity') && !optAbsent.hasOwnProperty('colorAlpha')) {\n              optAbsent.opacity = [0, 0];\n            }\n          }\n        });\n      }\n    }\n    function completeController(controller) {\n      var symbolExists = (controller.inRange || {}).symbol || (controller.outOfRange || {}).symbol;\n      var symbolSizeExists = (controller.inRange || {}).symbolSize || (controller.outOfRange || {}).symbolSize;\n      var inactiveColor = this.get('inactiveColor');\n      var itemSymbol = this.getItemSymbol();\n      var defaultSymbol = itemSymbol || 'roundRect';\n      each(this.stateList, function (state) {\n        var itemSize = this.itemSize;\n        var visuals = controller[state];\n        // Set inactive color for controller if no other color\n        // attr (like colorAlpha) specified.\n        if (!visuals) {\n          visuals = controller[state] = {\n            color: isCategory ? inactiveColor : [inactiveColor]\n          };\n        }\n        // Consistent symbol and symbolSize if not specified.\n        if (visuals.symbol == null) {\n          visuals.symbol = symbolExists && zrUtil.clone(symbolExists) || (isCategory ? defaultSymbol : [defaultSymbol]);\n        }\n        if (visuals.symbolSize == null) {\n          visuals.symbolSize = symbolSizeExists && zrUtil.clone(symbolSizeExists) || (isCategory ? itemSize[0] : [itemSize[0], itemSize[0]]);\n        }\n        // Filter none\n        visuals.symbol = mapVisual(visuals.symbol, function (symbol) {\n          return symbol === 'none' ? defaultSymbol : symbol;\n        });\n        // Normalize symbolSize\n        var symbolSize = visuals.symbolSize;\n        if (symbolSize != null) {\n          var max_1 = -Infinity;\n          // symbolSize can be object when categories defined.\n          eachVisual(symbolSize, function (value) {\n            value > max_1 && (max_1 = value);\n          });\n          visuals.symbolSize = mapVisual(symbolSize, function (value) {\n            return linearMap(value, [0, max_1], [0, itemSize[0]], true);\n          });\n        }\n      }, this);\n    }\n  };\n  VisualMapModel.prototype.resetItemSize = function () {\n    this.itemSize = [parseFloat(this.get('itemWidth')), parseFloat(this.get('itemHeight'))];\n  };\n  VisualMapModel.prototype.isCategory = function () {\n    return !!this.option.categories;\n  };\n  /**\n   * @public\n   * @abstract\n   */\n  VisualMapModel.prototype.setSelected = function (selected) {};\n  VisualMapModel.prototype.getSelected = function () {\n    return null;\n  };\n  /**\n   * @public\n   * @abstract\n   */\n  VisualMapModel.prototype.getValueState = function (value) {\n    return null;\n  };\n  /**\n   * FIXME\n   * Do not publish to thirt-part-dev temporarily\n   * util the interface is stable. (Should it return\n   * a function but not visual meta?)\n   *\n   * @pubilc\n   * @abstract\n   * @param getColorVisual\n   *        params: value, valueState\n   *        return: color\n   * @return {Object} visualMeta\n   *        should includes {stops, outerColors}\n   *        outerColor means [colorBeyondMinValue, colorBeyondMaxValue]\n   */\n  VisualMapModel.prototype.getVisualMeta = function (getColorVisual) {\n    return null;\n  };\n  VisualMapModel.type = 'visualMap';\n  VisualMapModel.dependencies = ['series'];\n  VisualMapModel.defaultOption = {\n    show: true,\n    // zlevel: 0,\n    z: 4,\n    seriesIndex: 'all',\n    min: 0,\n    max: 200,\n    left: 0,\n    right: null,\n    top: null,\n    bottom: 0,\n    itemWidth: null,\n    itemHeight: null,\n    inverse: false,\n    orient: 'vertical',\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    contentColor: '#5793f3',\n    inactiveColor: '#aaa',\n    borderWidth: 0,\n    padding: 5,\n    // css\n    textGap: 10,\n    precision: 0,\n    textStyle: {\n      color: '#333' // \n    }\n  };\n\n  return VisualMapModel;\n}(ComponentModel);\nexport default VisualMapModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { Rect } from '../../util/graphic.js';\nimport * as formatUtil from '../../util/format.js';\nimport * as layout from '../../util/layout.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport ComponentView from '../../view/Component.js';\nvar VisualMapView = /** @class */function (_super) {\n  __extends(VisualMapView, _super);\n  function VisualMapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = VisualMapView.type;\n    _this.autoPositionValues = {\n      left: 1,\n      right: 1,\n      top: 1,\n      bottom: 1\n    };\n    return _this;\n  }\n  VisualMapView.prototype.init = function (ecModel, api) {\n    this.ecModel = ecModel;\n    this.api = api;\n  };\n  /**\n   * @protected\n   */\n  VisualMapView.prototype.render = function (visualMapModel, ecModel, api, payload // TODO: TYPE\n  ) {\n    this.visualMapModel = visualMapModel;\n    if (visualMapModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n    this.doRender(visualMapModel, ecModel, api, payload);\n  };\n  /**\n   * @protected\n   */\n  VisualMapView.prototype.renderBackground = function (group) {\n    var visualMapModel = this.visualMapModel;\n    var padding = formatUtil.normalizeCssArray(visualMapModel.get('padding') || 0);\n    var rect = group.getBoundingRect();\n    group.add(new Rect({\n      z2: -1,\n      silent: true,\n      shape: {\n        x: rect.x - padding[3],\n        y: rect.y - padding[0],\n        width: rect.width + padding[3] + padding[1],\n        height: rect.height + padding[0] + padding[2]\n      },\n      style: {\n        fill: visualMapModel.get('backgroundColor'),\n        stroke: visualMapModel.get('borderColor'),\n        lineWidth: visualMapModel.get('borderWidth')\n      }\n    }));\n  };\n  /**\n   * @protected\n   * @param targetValue can be Infinity or -Infinity\n   * @param visualCluster Only can be 'color' 'opacity' 'symbol' 'symbolSize'\n   * @param opts\n   * @param opts.forceState Specify state, instead of using getValueState method.\n   * @param opts.convertOpacityToAlpha For color gradient in controller widget.\n   * @return {*} Visual value.\n   */\n  VisualMapView.prototype.getControllerVisual = function (targetValue, visualCluster, opts) {\n    opts = opts || {};\n    var forceState = opts.forceState;\n    var visualMapModel = this.visualMapModel;\n    var visualObj = {};\n    // Default values.\n    if (visualCluster === 'color') {\n      var defaultColor = visualMapModel.get('contentColor');\n      visualObj.color = defaultColor;\n    }\n    function getter(key) {\n      return visualObj[key];\n    }\n    function setter(key, value) {\n      visualObj[key] = value;\n    }\n    var mappings = visualMapModel.controllerVisuals[forceState || visualMapModel.getValueState(targetValue)];\n    var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n    zrUtil.each(visualTypes, function (type) {\n      var visualMapping = mappings[type];\n      if (opts.convertOpacityToAlpha && type === 'opacity') {\n        type = 'colorAlpha';\n        visualMapping = mappings.__alphaForOpacity;\n      }\n      if (VisualMapping.dependsOn(type, visualCluster)) {\n        visualMapping && visualMapping.applyVisual(targetValue, getter, setter);\n      }\n    });\n    return visualObj[visualCluster];\n  };\n  VisualMapView.prototype.positionGroup = function (group) {\n    var model = this.visualMapModel;\n    var api = this.api;\n    layout.positionElement(group, model.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  };\n  VisualMapView.prototype.doRender = function (visualMapModel, ecModel, api, payload) {};\n  VisualMapView.type = 'visualMap';\n  return VisualMapView;\n}(ComponentView);\nexport default VisualMapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getLayoutRect } from '../../util/layout.js';\nvar paramsSet = [['left', 'right', 'width'], ['top', 'bottom', 'height']];\n/**\n * @param visualMapModel\n * @param api\n * @param itemSize always [short, long]\n * @return {string} 'left' or 'right' or 'top' or 'bottom'\n */\nexport function getItemAlign(visualMapModel, api, itemSize) {\n  var modelOption = visualMapModel.option;\n  var itemAlign = modelOption.align;\n  if (itemAlign != null && itemAlign !== 'auto') {\n    return itemAlign;\n  }\n  // Auto decision align.\n  var ecSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var realIndex = modelOption.orient === 'horizontal' ? 1 : 0;\n  var reals = paramsSet[realIndex];\n  var fakeValue = [0, null, 10];\n  var layoutInput = {};\n  for (var i = 0; i < 3; i++) {\n    layoutInput[paramsSet[1 - realIndex][i]] = fakeValue[i];\n    layoutInput[reals[i]] = i === 2 ? itemSize[0] : modelOption[reals[i]];\n  }\n  var rParam = [['x', 'width', 3], ['y', 'height', 0]][realIndex];\n  var rect = getLayoutRect(layoutInput, ecSize, modelOption.padding);\n  return reals[(rect.margin[rParam[2]] || 0) + rect[rParam[0]] + rect[rParam[1]] * 0.5 < ecSize[rParam[1]] * 0.5 ? 0 : 1];\n}\n/**\n * Prepare dataIndex for outside usage, where dataIndex means rawIndex, and\n * dataIndexInside means filtered index.\n */\n// TODO: TYPE more specified payload types.\nexport function makeHighDownBatch(batch, visualMapModel) {\n  zrUtil.each(batch || [], function (batchItem) {\n    if (batchItem.dataIndex != null) {\n      batchItem.dataIndexInside = batchItem.dataIndex;\n      batchItem.dataIndex = null;\n    }\n    batchItem.highlightKey = 'visualMap' + (visualMapModel ? visualMapModel.componentIndex : '');\n  });\n  return batch;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installVisualMapContinuous } from './installVisualMapContinuous.js';\nimport { install as installVisualMapPiecewise } from './installVisualMapPiecewise.js';\nexport function install(registers) {\n  use(installVisualMapContinuous);\n  use(installVisualMapPiecewise);\n  // Do not install './dataZoomSelect',\n  // since it only work for toolbox dataZoom.\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport var visualMapActionInfo = {\n  type: 'selectDataRange',\n  event: 'dataRangeSelected',\n  // FIXME use updateView appears wrong\n  update: 'update'\n};\nexport var visualMapActionHander = function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'visualMap',\n    query: payload\n  }, function (model) {\n    model.setSelected(payload.selected);\n  });\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as visualSolution from '../../visual/visualSolution.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport { getVisualFromData } from '../../visual/helper.js';\nexport var visualMapEncodingHandlers = [{\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var resetDefines = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      var pipelineContext = seriesModel.pipelineContext;\n      if (!visualMapModel.isTargetSeries(seriesModel) || pipelineContext && pipelineContext.large) {\n        return;\n      }\n      resetDefines.push(visualSolution.incrementalApplyVisual(visualMapModel.stateList, visualMapModel.targetVisuals, zrUtil.bind(visualMapModel.getValueState, visualMapModel), visualMapModel.getDataDimensionIndex(seriesModel.getData())));\n    });\n    return resetDefines;\n  }\n},\n// Only support color.\n{\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var visualMetaList = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      if (visualMapModel.isTargetSeries(seriesModel)) {\n        var visualMeta = visualMapModel.getVisualMeta(zrUtil.bind(getColorVisual, null, seriesModel, visualMapModel)) || {\n          stops: [],\n          outerColors: []\n        };\n        var dimIdx = visualMapModel.getDataDimensionIndex(data);\n        if (dimIdx >= 0) {\n          // visualMeta.dimension should be dimension index, but not concrete dimension.\n          visualMeta.dimension = dimIdx;\n          visualMetaList.push(visualMeta);\n        }\n      }\n    });\n    // console.log(JSON.stringify(visualMetaList.map(a => a.stops)));\n    seriesModel.getData().setVisual('visualMeta', visualMetaList);\n  }\n}];\n// FIXME\n// performance and export for heatmap?\n// value can be Infinity or -Infinity\nfunction getColorVisual(seriesModel, visualMapModel, value, valueState) {\n  var mappings = visualMapModel.targetVisuals[valueState];\n  var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n  var resultVisual = {\n    color: getVisualFromData(seriesModel.getData(), 'color') // default color.\n  };\n\n  for (var i = 0, len = visualTypes.length; i < len; i++) {\n    var type = visualTypes[i];\n    var mapping = mappings[type === 'opacity' ? '__alphaForOpacity' : type];\n    mapping && mapping.applyVisual(value, getVisual, setVisual);\n  }\n  return resultVisual.color;\n  function getVisual(key) {\n    return resultVisual[key];\n  }\n  function setVisual(key, value) {\n    resultVisual[key] = value;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar each = zrUtil.each;\nexport default function visualMapPreprocessor(option) {\n  var visualMap = option && option.visualMap;\n  if (!zrUtil.isArray(visualMap)) {\n    visualMap = visualMap ? [visualMap] : [];\n  }\n  each(visualMap, function (opt) {\n    if (!opt) {\n      return;\n    }\n    // rename splitList to pieces\n    if (has(opt, 'splitList') && !has(opt, 'pieces')) {\n      opt.pieces = opt.splitList;\n      delete opt.splitList;\n    }\n    var pieces = opt.pieces;\n    if (pieces && zrUtil.isArray(pieces)) {\n      each(pieces, function (piece) {\n        if (zrUtil.isObject(piece)) {\n          if (has(piece, 'start') && !has(piece, 'min')) {\n            piece.min = piece.start;\n          }\n          if (has(piece, 'end') && !has(piece, 'max')) {\n            piece.max = piece.end;\n          }\n        }\n      });\n    }\n  });\n}\nfunction has(obj, name) {\n  return obj && obj.hasOwnProperty && obj.hasOwnProperty(name);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { visualMapActionInfo, visualMapActionHander } from './visualMapAction.js';\nimport { visualMapEncodingHandlers } from './visualEncoding.js';\nimport { each } from 'zrender/lib/core/util.js';\nimport preprocessor from './preprocessor.js';\nvar installed = false;\nexport default function installCommon(registers) {\n  if (installed) {\n    return;\n  }\n  installed = true;\n  registers.registerSubTypeDefaulter('visualMap', function (option) {\n    // Compatible with ec2, when splitNumber === 0, continuous visualMap will be used.\n    return !option.categories && (!(option.pieces ? option.pieces.length > 0 : option.splitNumber > 0) || option.calculable) ? 'continuous' : 'piecewise';\n  });\n  registers.registerAction(visualMapActionInfo, visualMapActionHander);\n  each(visualMapEncodingHandlers, function (handler) {\n    registers.registerVisual(registers.PRIORITY.VISUAL.COMPONENT, handler);\n  });\n  registers.registerPreprocessor(preprocessor);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapModel from './VisualMapModel.js';\nimport * as numberUtil from '../../util/number.js';\nimport { inheritDefaultOption } from '../../util/component.js';\n// Constant\nvar DEFAULT_BAR_BOUND = [20, 140];\nvar ContinuousModel = /** @class */function (_super) {\n  __extends(ContinuousModel, _super);\n  function ContinuousModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ContinuousModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n  ContinuousModel.prototype.optionUpdated = function (newOption, isInit) {\n    _super.prototype.optionUpdated.apply(this, arguments);\n    this.resetExtent();\n    this.resetVisual(function (mappingOption) {\n      mappingOption.mappingMethod = 'linear';\n      mappingOption.dataExtent = this.getExtent();\n    });\n    this._resetRange();\n  };\n  /**\n   * @protected\n   * @override\n   */\n  ContinuousModel.prototype.resetItemSize = function () {\n    _super.prototype.resetItemSize.apply(this, arguments);\n    var itemSize = this.itemSize;\n    (itemSize[0] == null || isNaN(itemSize[0])) && (itemSize[0] = DEFAULT_BAR_BOUND[0]);\n    (itemSize[1] == null || isNaN(itemSize[1])) && (itemSize[1] = DEFAULT_BAR_BOUND[1]);\n  };\n  /**\n   * @private\n   */\n  ContinuousModel.prototype._resetRange = function () {\n    var dataExtent = this.getExtent();\n    var range = this.option.range;\n    if (!range || range.auto) {\n      // `range` should always be array (so we don't use other\n      // value like 'auto') for user-friend. (consider getOption).\n      dataExtent.auto = 1;\n      this.option.range = dataExtent;\n    } else if (zrUtil.isArray(range)) {\n      if (range[0] > range[1]) {\n        range.reverse();\n      }\n      range[0] = Math.max(range[0], dataExtent[0]);\n      range[1] = Math.min(range[1], dataExtent[1]);\n    }\n  };\n  /**\n   * @protected\n   * @override\n   */\n  ContinuousModel.prototype.completeVisualOption = function () {\n    _super.prototype.completeVisualOption.apply(this, arguments);\n    zrUtil.each(this.stateList, function (state) {\n      var symbolSize = this.option.controller[state].symbolSize;\n      if (symbolSize && symbolSize[0] !== symbolSize[1]) {\n        symbolSize[0] = symbolSize[1] / 3; // For good looking.\n      }\n    }, this);\n  };\n  /**\n   * @override\n   */\n  ContinuousModel.prototype.setSelected = function (selected) {\n    this.option.range = selected.slice();\n    this._resetRange();\n  };\n  /**\n   * @public\n   */\n  ContinuousModel.prototype.getSelected = function () {\n    var dataExtent = this.getExtent();\n    var dataInterval = numberUtil.asc((this.get('range') || []).slice());\n    // Clamp\n    dataInterval[0] > dataExtent[1] && (dataInterval[0] = dataExtent[1]);\n    dataInterval[1] > dataExtent[1] && (dataInterval[1] = dataExtent[1]);\n    dataInterval[0] < dataExtent[0] && (dataInterval[0] = dataExtent[0]);\n    dataInterval[1] < dataExtent[0] && (dataInterval[1] = dataExtent[0]);\n    return dataInterval;\n  };\n  /**\n   * @override\n   */\n  ContinuousModel.prototype.getValueState = function (value) {\n    var range = this.option.range;\n    var dataExtent = this.getExtent();\n    // When range[0] === dataExtent[0], any value larger than dataExtent[0] maps to 'inRange'.\n    // range[1] is processed likewise.\n    return (range[0] <= dataExtent[0] || range[0] <= value) && (range[1] >= dataExtent[1] || value <= range[1]) ? 'inRange' : 'outOfRange';\n  };\n  ContinuousModel.prototype.findTargetDataIndices = function (range) {\n    var result = [];\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimensionIndex(data), function (value, dataIndex) {\n        range[0] <= value && value <= range[1] && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  };\n  /**\n   * @implement\n   */\n  ContinuousModel.prototype.getVisualMeta = function (getColorVisual) {\n    var oVals = getColorStopValues(this, 'outOfRange', this.getExtent());\n    var iVals = getColorStopValues(this, 'inRange', this.option.range.slice());\n    var stops = [];\n    function setStop(value, valueState) {\n      stops.push({\n        value: value,\n        color: getColorVisual(value, valueState)\n      });\n    }\n    // Format to: outOfRange -- inRange -- outOfRange.\n    var iIdx = 0;\n    var oIdx = 0;\n    var iLen = iVals.length;\n    var oLen = oVals.length;\n    for (; oIdx < oLen && (!iVals.length || oVals[oIdx] <= iVals[0]); oIdx++) {\n      // If oVal[oIdx] === iVals[iIdx], oVal[oIdx] should be ignored.\n      if (oVals[oIdx] < iVals[iIdx]) {\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n    for (var first = 1; iIdx < iLen; iIdx++, first = 0) {\n      // If range is full, value beyond min, max will be clamped.\n      // make a singularity\n      first && stops.length && setStop(iVals[iIdx], 'outOfRange');\n      setStop(iVals[iIdx], 'inRange');\n    }\n    for (var first = 1; oIdx < oLen; oIdx++) {\n      if (!iVals.length || iVals[iVals.length - 1] < oVals[oIdx]) {\n        // make a singularity\n        if (first) {\n          stops.length && setStop(stops[stops.length - 1].value, 'outOfRange');\n          first = 0;\n        }\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n    var stopsLen = stops.length;\n    return {\n      stops: stops,\n      outerColors: [stopsLen ? stops[0].color : 'transparent', stopsLen ? stops[stopsLen - 1].color : 'transparent']\n    };\n  };\n  ContinuousModel.type = 'visualMap.continuous';\n  ContinuousModel.defaultOption = inheritDefaultOption(VisualMapModel.defaultOption, {\n    align: 'auto',\n    calculable: false,\n    hoverLink: true,\n    realtime: true,\n    handleIcon: 'path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z',\n    handleSize: '120%',\n    handleStyle: {\n      borderColor: '#fff',\n      borderWidth: 1\n    },\n    indicatorIcon: 'circle',\n    indicatorSize: '50%',\n    indicatorStyle: {\n      borderColor: '#fff',\n      borderWidth: 2,\n      shadowBlur: 2,\n      shadowOffsetX: 1,\n      shadowOffsetY: 1,\n      shadowColor: 'rgba(0,0,0,0.2)'\n    }\n    // emphasis: {\n    //     handleStyle: {\n    //         shadowBlur: 3,\n    //         shadowOffsetX: 1,\n    //         shadowOffsetY: 1,\n    //         shadowColor: 'rgba(0,0,0,0.2)'\n    //     }\n    // }\n  });\n\n  return ContinuousModel;\n}(VisualMapModel);\nfunction getColorStopValues(visualMapModel, valueState, dataExtent) {\n  if (dataExtent[0] === dataExtent[1]) {\n    return dataExtent.slice();\n  }\n  // When using colorHue mapping, it is not linear color any more.\n  // Moreover, canvas gradient seems not to be accurate linear.\n  // FIXME\n  // Should be arbitrary value 100? or based on pixel size?\n  var count = 200;\n  var step = (dataExtent[1] - dataExtent[0]) / count;\n  var value = dataExtent[0];\n  var stopValues = [];\n  for (var i = 0; i <= count && value < dataExtent[1]; i++) {\n    stopValues.push(value);\n    value += step;\n  }\n  stopValues.push(dataExtent[1]);\n  return stopValues;\n}\nexport default ContinuousModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport LinearGradient from 'zrender/lib/graphic/LinearGradient.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport VisualMapView from './VisualMapView.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as numberUtil from '../../util/number.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport * as helper from './helper.js';\nimport * as modelUtil from '../../util/model.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nimport { setAsHighDownDispatcher } from '../../util/states.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { findEventDispatcher } from '../../util/event.js';\nvar linearMap = numberUtil.linearMap;\nvar each = zrUtil.each;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\n// Arbitrary value\nvar HOVER_LINK_SIZE = 12;\nvar HOVER_LINK_OUT = 6;\n// Notice:\n// Any \"interval\" should be by the order of [low, high].\n// \"handle0\" (handleIndex === 0) maps to\n// low data value: this._dataInterval[0] and has low coord.\n// \"handle1\" (handleIndex === 1) maps to\n// high data value: this._dataInterval[1] and has high coord.\n// The logic of transform is implemented in this._createBarGroup.\nvar ContinuousView = /** @class */function (_super) {\n  __extends(ContinuousView, _super);\n  function ContinuousView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ContinuousView.type;\n    _this._shapes = {};\n    _this._dataInterval = [];\n    _this._handleEnds = [];\n    _this._hoverLinkDataIndices = [];\n    return _this;\n  }\n  ContinuousView.prototype.init = function (ecModel, api) {\n    _super.prototype.init.call(this, ecModel, api);\n    this._hoverLinkFromSeriesMouseOver = zrUtil.bind(this._hoverLinkFromSeriesMouseOver, this);\n    this._hideIndicator = zrUtil.bind(this._hideIndicator, this);\n  };\n  ContinuousView.prototype.doRender = function (visualMapModel, ecModel, api, payload) {\n    if (!payload || payload.type !== 'selectDataRange' || payload.from !== this.uid) {\n      this._buildView();\n    }\n  };\n  ContinuousView.prototype._buildView = function () {\n    this.group.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var thisGroup = this.group;\n    this._orient = visualMapModel.get('orient');\n    this._useHandle = visualMapModel.get('calculable');\n    this._resetInterval();\n    this._renderBar(thisGroup);\n    var dataRangeText = visualMapModel.get('text');\n    this._renderEndsText(thisGroup, dataRangeText, 0);\n    this._renderEndsText(thisGroup, dataRangeText, 1);\n    // Do this for background size calculation.\n    this._updateView(true);\n    // After updating view, inner shapes is built completely,\n    // and then background can be rendered.\n    this.renderBackground(thisGroup);\n    // Real update view\n    this._updateView();\n    this._enableHoverLinkToSeries();\n    this._enableHoverLinkFromSeries();\n    this.positionGroup(thisGroup);\n  };\n  ContinuousView.prototype._renderEndsText = function (group, dataRangeText, endsIndex) {\n    if (!dataRangeText) {\n      return;\n    }\n    // Compatible with ec2, text[0] map to high value, text[1] map low value.\n    var text = dataRangeText[1 - endsIndex];\n    text = text != null ? text + '' : '';\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var itemSize = visualMapModel.itemSize;\n    var barGroup = this._shapes.mainGroup;\n    var position = this._applyTransform([itemSize[0] / 2, endsIndex === 0 ? -textGap : itemSize[1] + textGap], barGroup);\n    var align = this._applyTransform(endsIndex === 0 ? 'bottom' : 'top', barGroup);\n    var orient = this._orient;\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    this.group.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        x: position[0],\n        y: position[1],\n        verticalAlign: orient === 'horizontal' ? 'middle' : align,\n        align: orient === 'horizontal' ? align : 'center',\n        text: text\n      })\n    }));\n  };\n  ContinuousView.prototype._renderBar = function (targetGroup) {\n    var visualMapModel = this.visualMapModel;\n    var shapes = this._shapes;\n    var itemSize = visualMapModel.itemSize;\n    var orient = this._orient;\n    var useHandle = this._useHandle;\n    var itemAlign = helper.getItemAlign(visualMapModel, this.api, itemSize);\n    var mainGroup = shapes.mainGroup = this._createBarGroup(itemAlign);\n    var gradientBarGroup = new graphic.Group();\n    mainGroup.add(gradientBarGroup);\n    // Bar\n    gradientBarGroup.add(shapes.outOfRange = createPolygon());\n    gradientBarGroup.add(shapes.inRange = createPolygon(null, useHandle ? getCursor(this._orient) : null, zrUtil.bind(this._dragHandle, this, 'all', false), zrUtil.bind(this._dragHandle, this, 'all', true)));\n    // A border radius clip.\n    gradientBarGroup.setClipPath(new graphic.Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: itemSize[0],\n        height: itemSize[1],\n        r: 3\n      }\n    }));\n    var textRect = visualMapModel.textStyleModel.getTextRect('');\n    var textSize = mathMax(textRect.width, textRect.height);\n    // Handle\n    if (useHandle) {\n      shapes.handleThumbs = [];\n      shapes.handleLabels = [];\n      shapes.handleLabelPoints = [];\n      this._createHandle(visualMapModel, mainGroup, 0, itemSize, textSize, orient);\n      this._createHandle(visualMapModel, mainGroup, 1, itemSize, textSize, orient);\n    }\n    this._createIndicator(visualMapModel, mainGroup, itemSize, textSize, orient);\n    targetGroup.add(mainGroup);\n  };\n  ContinuousView.prototype._createHandle = function (visualMapModel, mainGroup, handleIndex, itemSize, textSize, orient) {\n    var onDrift = zrUtil.bind(this._dragHandle, this, handleIndex, false);\n    var onDragEnd = zrUtil.bind(this._dragHandle, this, handleIndex, true);\n    var handleSize = parsePercent(visualMapModel.get('handleSize'), itemSize[0]);\n    var handleThumb = createSymbol(visualMapModel.get('handleIcon'), -handleSize / 2, -handleSize / 2, handleSize, handleSize, null, true);\n    var cursor = getCursor(this._orient);\n    handleThumb.attr({\n      cursor: cursor,\n      draggable: true,\n      drift: onDrift,\n      ondragend: onDragEnd,\n      onmousemove: function (e) {\n        eventTool.stop(e.event);\n      }\n    });\n    handleThumb.x = itemSize[0] / 2;\n    handleThumb.useStyle(visualMapModel.getModel('handleStyle').getItemStyle());\n    handleThumb.setStyle({\n      strokeNoScale: true,\n      strokeFirst: true\n    });\n    handleThumb.style.lineWidth *= 2;\n    handleThumb.ensureState('emphasis').style = visualMapModel.getModel(['emphasis', 'handleStyle']).getItemStyle();\n    setAsHighDownDispatcher(handleThumb, true);\n    mainGroup.add(handleThumb);\n    // Text is always horizontal layout but should not be effected by\n    // transform (orient/inverse). So label is built separately but not\n    // use zrender/graphic/helper/RectText, and is located based on view\n    // group (according to handleLabelPoint) but not barGroup.\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var handleLabel = new graphic.Text({\n      cursor: cursor,\n      draggable: true,\n      drift: onDrift,\n      onmousemove: function (e) {\n        // For mobile device, prevent screen slider on the button.\n        eventTool.stop(e.event);\n      },\n      ondragend: onDragEnd,\n      style: createTextStyle(textStyleModel, {\n        x: 0,\n        y: 0,\n        text: ''\n      })\n    });\n    handleLabel.ensureState('blur').style = {\n      opacity: 0.1\n    };\n    handleLabel.stateTransition = {\n      duration: 200\n    };\n    this.group.add(handleLabel);\n    var handleLabelPoint = [handleSize, 0];\n    var shapes = this._shapes;\n    shapes.handleThumbs[handleIndex] = handleThumb;\n    shapes.handleLabelPoints[handleIndex] = handleLabelPoint;\n    shapes.handleLabels[handleIndex] = handleLabel;\n  };\n  ContinuousView.prototype._createIndicator = function (visualMapModel, mainGroup, itemSize, textSize, orient) {\n    var scale = parsePercent(visualMapModel.get('indicatorSize'), itemSize[0]);\n    var indicator = createSymbol(visualMapModel.get('indicatorIcon'), -scale / 2, -scale / 2, scale, scale, null, true);\n    indicator.attr({\n      cursor: 'move',\n      invisible: true,\n      silent: true,\n      x: itemSize[0] / 2\n    });\n    var indicatorStyle = visualMapModel.getModel('indicatorStyle').getItemStyle();\n    if (indicator instanceof ZRImage) {\n      var pathStyle = indicator.style;\n      indicator.useStyle(zrUtil.extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, indicatorStyle));\n    } else {\n      indicator.useStyle(indicatorStyle);\n    }\n    mainGroup.add(indicator);\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var indicatorLabel = new graphic.Text({\n      silent: true,\n      invisible: true,\n      style: createTextStyle(textStyleModel, {\n        x: 0,\n        y: 0,\n        text: ''\n      })\n    });\n    this.group.add(indicatorLabel);\n    var indicatorLabelPoint = [(orient === 'horizontal' ? textSize / 2 : HOVER_LINK_OUT) + itemSize[0] / 2, 0];\n    var shapes = this._shapes;\n    shapes.indicator = indicator;\n    shapes.indicatorLabel = indicatorLabel;\n    shapes.indicatorLabelPoint = indicatorLabelPoint;\n    this._firstShowIndicator = true;\n  };\n  ContinuousView.prototype._dragHandle = function (handleIndex, isEnd,\n  // dx is event from ondragend if isEnd is true. It's not used\n  dx, dy) {\n    if (!this._useHandle) {\n      return;\n    }\n    this._dragging = !isEnd;\n    if (!isEnd) {\n      // Transform dx, dy to bar coordination.\n      var vertex = this._applyTransform([dx, dy], this._shapes.mainGroup, true);\n      this._updateInterval(handleIndex, vertex[1]);\n      this._hideIndicator();\n      // Considering realtime, update view should be executed\n      // before dispatch action.\n      this._updateView();\n    }\n    // dragEnd do not dispatch action when realtime.\n    if (isEnd === !this.visualMapModel.get('realtime')) {\n      // jshint ignore:line\n      this.api.dispatchAction({\n        type: 'selectDataRange',\n        from: this.uid,\n        visualMapId: this.visualMapModel.id,\n        selected: this._dataInterval.slice()\n      });\n    }\n    if (isEnd) {\n      !this._hovering && this._clearHoverLinkToSeries();\n    } else if (useHoverLinkOnHandle(this.visualMapModel)) {\n      this._doHoverLinkToSeries(this._handleEnds[handleIndex], false);\n    }\n  };\n  ContinuousView.prototype._resetInterval = function () {\n    var visualMapModel = this.visualMapModel;\n    var dataInterval = this._dataInterval = visualMapModel.getSelected();\n    var dataExtent = visualMapModel.getExtent();\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    this._handleEnds = [linearMap(dataInterval[0], dataExtent, sizeExtent, true), linearMap(dataInterval[1], dataExtent, sizeExtent, true)];\n  };\n  /**\n   * @private\n   * @param {(number|string)} handleIndex 0 or 1 or 'all'\n   * @param {number} dx\n   * @param {number} dy\n   */\n  ContinuousView.prototype._updateInterval = function (handleIndex, delta) {\n    delta = delta || 0;\n    var visualMapModel = this.visualMapModel;\n    var handleEnds = this._handleEnds;\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    sliderMove(delta, handleEnds, sizeExtent, handleIndex,\n    // cross is forbidden\n    0);\n    var dataExtent = visualMapModel.getExtent();\n    // Update data interval.\n    this._dataInterval = [linearMap(handleEnds[0], sizeExtent, dataExtent, true), linearMap(handleEnds[1], sizeExtent, dataExtent, true)];\n  };\n  ContinuousView.prototype._updateView = function (forSketch) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var shapes = this._shapes;\n    var outOfRangeHandleEnds = [0, visualMapModel.itemSize[1]];\n    var inRangeHandleEnds = forSketch ? outOfRangeHandleEnds : this._handleEnds;\n    var visualInRange = this._createBarVisual(this._dataInterval, dataExtent, inRangeHandleEnds, 'inRange');\n    var visualOutOfRange = this._createBarVisual(dataExtent, dataExtent, outOfRangeHandleEnds, 'outOfRange');\n    shapes.inRange.setStyle({\n      fill: visualInRange.barColor\n      // opacity: visualInRange.opacity\n    }).setShape('points', visualInRange.barPoints);\n    shapes.outOfRange.setStyle({\n      fill: visualOutOfRange.barColor\n      // opacity: visualOutOfRange.opacity\n    }).setShape('points', visualOutOfRange.barPoints);\n    this._updateHandle(inRangeHandleEnds, visualInRange);\n  };\n  ContinuousView.prototype._createBarVisual = function (dataInterval, dataExtent, handleEnds, forceState) {\n    var opts = {\n      forceState: forceState,\n      convertOpacityToAlpha: true\n    };\n    var colorStops = this._makeColorGradient(dataInterval, opts);\n    var symbolSizes = [this.getControllerVisual(dataInterval[0], 'symbolSize', opts), this.getControllerVisual(dataInterval[1], 'symbolSize', opts)];\n    var barPoints = this._createBarPoints(handleEnds, symbolSizes);\n    return {\n      barColor: new LinearGradient(0, 0, 0, 1, colorStops),\n      barPoints: barPoints,\n      handlesColor: [colorStops[0].color, colorStops[colorStops.length - 1].color]\n    };\n  };\n  ContinuousView.prototype._makeColorGradient = function (dataInterval, opts) {\n    // Considering colorHue, which is not linear, so we have to sample\n    // to calculate gradient color stops, but not only calculate head\n    // and tail.\n    var sampleNumber = 100; // Arbitrary value.\n    var colorStops = [];\n    var step = (dataInterval[1] - dataInterval[0]) / sampleNumber;\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[0], 'color', opts),\n      offset: 0\n    });\n    for (var i = 1; i < sampleNumber; i++) {\n      var currValue = dataInterval[0] + step * i;\n      if (currValue > dataInterval[1]) {\n        break;\n      }\n      colorStops.push({\n        color: this.getControllerVisual(currValue, 'color', opts),\n        offset: i / sampleNumber\n      });\n    }\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[1], 'color', opts),\n      offset: 1\n    });\n    return colorStops;\n  };\n  ContinuousView.prototype._createBarPoints = function (handleEnds, symbolSizes) {\n    var itemSize = this.visualMapModel.itemSize;\n    return [[itemSize[0] - symbolSizes[0], handleEnds[0]], [itemSize[0], handleEnds[0]], [itemSize[0], handleEnds[1]], [itemSize[0] - symbolSizes[1], handleEnds[1]]];\n  };\n  ContinuousView.prototype._createBarGroup = function (itemAlign) {\n    var orient = this._orient;\n    var inverse = this.visualMapModel.get('inverse');\n    return new graphic.Group(orient === 'horizontal' && !inverse ? {\n      scaleX: itemAlign === 'bottom' ? 1 : -1,\n      rotation: Math.PI / 2\n    } : orient === 'horizontal' && inverse ? {\n      scaleX: itemAlign === 'bottom' ? -1 : 1,\n      rotation: -Math.PI / 2\n    } : orient === 'vertical' && !inverse ? {\n      scaleX: itemAlign === 'left' ? 1 : -1,\n      scaleY: -1\n    } : {\n      scaleX: itemAlign === 'left' ? 1 : -1\n    });\n  };\n  ContinuousView.prototype._updateHandle = function (handleEnds, visualInRange) {\n    if (!this._useHandle) {\n      return;\n    }\n    var shapes = this._shapes;\n    var visualMapModel = this.visualMapModel;\n    var handleThumbs = shapes.handleThumbs;\n    var handleLabels = shapes.handleLabels;\n    var itemSize = visualMapModel.itemSize;\n    var dataExtent = visualMapModel.getExtent();\n    each([0, 1], function (handleIndex) {\n      var handleThumb = handleThumbs[handleIndex];\n      handleThumb.setStyle('fill', visualInRange.handlesColor[handleIndex]);\n      handleThumb.y = handleEnds[handleIndex];\n      var val = linearMap(handleEnds[handleIndex], [0, itemSize[1]], dataExtent, true);\n      var symbolSize = this.getControllerVisual(val, 'symbolSize');\n      handleThumb.scaleX = handleThumb.scaleY = symbolSize / itemSize[0];\n      handleThumb.x = itemSize[0] - symbolSize / 2;\n      // Update handle label position.\n      var textPoint = graphic.applyTransform(shapes.handleLabelPoints[handleIndex], graphic.getTransform(handleThumb, this.group));\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        text: visualMapModel.formatValueText(this._dataInterval[handleIndex]),\n        verticalAlign: 'middle',\n        align: this._orient === 'vertical' ? this._applyTransform('left', shapes.mainGroup) : 'center'\n      });\n    }, this);\n  };\n  ContinuousView.prototype._showIndicator = function (cursorValue, textValue, rangeSymbol, halfHoverLinkSize) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var itemSize = visualMapModel.itemSize;\n    var sizeExtent = [0, itemSize[1]];\n    var shapes = this._shapes;\n    var indicator = shapes.indicator;\n    if (!indicator) {\n      return;\n    }\n    indicator.attr('invisible', false);\n    var opts = {\n      convertOpacityToAlpha: true\n    };\n    var color = this.getControllerVisual(cursorValue, 'color', opts);\n    var symbolSize = this.getControllerVisual(cursorValue, 'symbolSize');\n    var y = linearMap(cursorValue, dataExtent, sizeExtent, true);\n    var x = itemSize[0] - symbolSize / 2;\n    var oldIndicatorPos = {\n      x: indicator.x,\n      y: indicator.y\n    };\n    // Update handle label position.\n    indicator.y = y;\n    indicator.x = x;\n    var textPoint = graphic.applyTransform(shapes.indicatorLabelPoint, graphic.getTransform(indicator, this.group));\n    var indicatorLabel = shapes.indicatorLabel;\n    indicatorLabel.attr('invisible', false);\n    var align = this._applyTransform('left', shapes.mainGroup);\n    var orient = this._orient;\n    var isHorizontal = orient === 'horizontal';\n    indicatorLabel.setStyle({\n      text: (rangeSymbol ? rangeSymbol : '') + visualMapModel.formatValueText(textValue),\n      verticalAlign: isHorizontal ? align : 'middle',\n      align: isHorizontal ? 'center' : align\n    });\n    var indicatorNewProps = {\n      x: x,\n      y: y,\n      style: {\n        fill: color\n      }\n    };\n    var labelNewProps = {\n      style: {\n        x: textPoint[0],\n        y: textPoint[1]\n      }\n    };\n    if (visualMapModel.ecModel.isAnimationEnabled() && !this._firstShowIndicator) {\n      var animationCfg = {\n        duration: 100,\n        easing: 'cubicInOut',\n        additive: true\n      };\n      indicator.x = oldIndicatorPos.x;\n      indicator.y = oldIndicatorPos.y;\n      indicator.animateTo(indicatorNewProps, animationCfg);\n      indicatorLabel.animateTo(labelNewProps, animationCfg);\n    } else {\n      indicator.attr(indicatorNewProps);\n      indicatorLabel.attr(labelNewProps);\n    }\n    this._firstShowIndicator = false;\n    var handleLabels = this._shapes.handleLabels;\n    if (handleLabels) {\n      for (var i = 0; i < handleLabels.length; i++) {\n        // Fade out handle labels.\n        // NOTE: Must use api enter/leave on emphasis/blur/select state. Or the global states manager will change it.\n        this.api.enterBlur(handleLabels[i]);\n      }\n    }\n  };\n  ContinuousView.prototype._enableHoverLinkToSeries = function () {\n    var self = this;\n    this._shapes.mainGroup.on('mousemove', function (e) {\n      self._hovering = true;\n      if (!self._dragging) {\n        var itemSize = self.visualMapModel.itemSize;\n        var pos = self._applyTransform([e.offsetX, e.offsetY], self._shapes.mainGroup, true, true);\n        // For hover link show when hover handle, which might be\n        // below or upper than sizeExtent.\n        pos[1] = mathMin(mathMax(0, pos[1]), itemSize[1]);\n        self._doHoverLinkToSeries(pos[1], 0 <= pos[0] && pos[0] <= itemSize[0]);\n      }\n    }).on('mouseout', function () {\n      // When mouse is out of handle, hoverLink still need\n      // to be displayed when realtime is set as false.\n      self._hovering = false;\n      !self._dragging && self._clearHoverLinkToSeries();\n    });\n  };\n  ContinuousView.prototype._enableHoverLinkFromSeries = function () {\n    var zr = this.api.getZr();\n    if (this.visualMapModel.option.hoverLink) {\n      zr.on('mouseover', this._hoverLinkFromSeriesMouseOver, this);\n      zr.on('mouseout', this._hideIndicator, this);\n    } else {\n      this._clearHoverLinkFromSeries();\n    }\n  };\n  ContinuousView.prototype._doHoverLinkToSeries = function (cursorPos, hoverOnBar) {\n    var visualMapModel = this.visualMapModel;\n    var itemSize = visualMapModel.itemSize;\n    if (!visualMapModel.option.hoverLink) {\n      return;\n    }\n    var sizeExtent = [0, itemSize[1]];\n    var dataExtent = visualMapModel.getExtent();\n    // For hover link show when hover handle, which might be below or upper than sizeExtent.\n    cursorPos = mathMin(mathMax(sizeExtent[0], cursorPos), sizeExtent[1]);\n    var halfHoverLinkSize = getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent);\n    var hoverRange = [cursorPos - halfHoverLinkSize, cursorPos + halfHoverLinkSize];\n    var cursorValue = linearMap(cursorPos, sizeExtent, dataExtent, true);\n    var valueRange = [linearMap(hoverRange[0], sizeExtent, dataExtent, true), linearMap(hoverRange[1], sizeExtent, dataExtent, true)];\n    // Consider data range is out of visualMap range, see test/visualMap-continuous.html,\n    // where china and india has very large population.\n    hoverRange[0] < sizeExtent[0] && (valueRange[0] = -Infinity);\n    hoverRange[1] > sizeExtent[1] && (valueRange[1] = Infinity);\n    // Do not show indicator when mouse is over handle,\n    // otherwise labels overlap, especially when dragging.\n    if (hoverOnBar) {\n      if (valueRange[0] === -Infinity) {\n        this._showIndicator(cursorValue, valueRange[1], '< ', halfHoverLinkSize);\n      } else if (valueRange[1] === Infinity) {\n        this._showIndicator(cursorValue, valueRange[0], '> ', halfHoverLinkSize);\n      } else {\n        this._showIndicator(cursorValue, cursorValue, ' ', halfHoverLinkSize);\n      }\n    }\n    // When realtime is set as false, handles, which are in barGroup,\n    // also trigger hoverLink, which help user to realize where they\n    // focus on when dragging. (see test/heatmap-large.html)\n    // When realtime is set as true, highlight will not show when hover\n    // handle, because the label on handle, which displays a exact value\n    // but not range, might mislead users.\n    var oldBatch = this._hoverLinkDataIndices;\n    var newBatch = [];\n    if (hoverOnBar || useHoverLinkOnHandle(visualMapModel)) {\n      newBatch = this._hoverLinkDataIndices = visualMapModel.findTargetDataIndices(valueRange);\n    }\n    var resultBatches = modelUtil.compressBatches(oldBatch, newBatch);\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(resultBatches[0], visualMapModel));\n    this._dispatchHighDown('highlight', helper.makeHighDownBatch(resultBatches[1], visualMapModel));\n  };\n  ContinuousView.prototype._hoverLinkFromSeriesMouseOver = function (e) {\n    var ecData;\n    findEventDispatcher(e.target, function (target) {\n      var currECData = getECData(target);\n      if (currECData.dataIndex != null) {\n        ecData = currECData;\n        return true;\n      }\n    }, true);\n    if (!ecData) {\n      return;\n    }\n    var dataModel = this.ecModel.getSeriesByIndex(ecData.seriesIndex);\n    var visualMapModel = this.visualMapModel;\n    if (!visualMapModel.isTargetSeries(dataModel)) {\n      return;\n    }\n    var data = dataModel.getData(ecData.dataType);\n    var value = data.getStore().get(visualMapModel.getDataDimensionIndex(data), ecData.dataIndex);\n    if (!isNaN(value)) {\n      this._showIndicator(value, value);\n    }\n  };\n  ContinuousView.prototype._hideIndicator = function () {\n    var shapes = this._shapes;\n    shapes.indicator && shapes.indicator.attr('invisible', true);\n    shapes.indicatorLabel && shapes.indicatorLabel.attr('invisible', true);\n    var handleLabels = this._shapes.handleLabels;\n    if (handleLabels) {\n      for (var i = 0; i < handleLabels.length; i++) {\n        // Fade out handle labels.\n        // NOTE: Must use api enter/leave on emphasis/blur/select state. Or the global states manager will change it.\n        this.api.leaveBlur(handleLabels[i]);\n      }\n    }\n  };\n  ContinuousView.prototype._clearHoverLinkToSeries = function () {\n    this._hideIndicator();\n    var indices = this._hoverLinkDataIndices;\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(indices, this.visualMapModel));\n    indices.length = 0;\n  };\n  ContinuousView.prototype._clearHoverLinkFromSeries = function () {\n    this._hideIndicator();\n    var zr = this.api.getZr();\n    zr.off('mouseover', this._hoverLinkFromSeriesMouseOver);\n    zr.off('mouseout', this._hideIndicator);\n  };\n  ContinuousView.prototype._applyTransform = function (vertex, element, inverse, global) {\n    var transform = graphic.getTransform(element, global ? null : this.group);\n    return zrUtil.isArray(vertex) ? graphic.applyTransform(vertex, transform, inverse) : graphic.transformDirection(vertex, transform, inverse);\n  };\n  // TODO: TYPE more specified payload types.\n  ContinuousView.prototype._dispatchHighDown = function (type, batch) {\n    batch && batch.length && this.api.dispatchAction({\n      type: type,\n      batch: batch\n    });\n  };\n  /**\n   * @override\n   */\n  ContinuousView.prototype.dispose = function () {\n    this._clearHoverLinkFromSeries();\n    this._clearHoverLinkToSeries();\n  };\n  ContinuousView.type = 'visualMap.continuous';\n  return ContinuousView;\n}(VisualMapView);\nfunction createPolygon(points, cursor, onDrift, onDragEnd) {\n  return new graphic.Polygon({\n    shape: {\n      points: points\n    },\n    draggable: !!onDrift,\n    cursor: cursor,\n    drift: onDrift,\n    onmousemove: function (e) {\n      // For mobile device, prevent screen slider on the button.\n      eventTool.stop(e.event);\n    },\n    ondragend: onDragEnd\n  });\n}\nfunction getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent) {\n  var halfHoverLinkSize = HOVER_LINK_SIZE / 2;\n  var hoverLinkDataSize = visualMapModel.get('hoverLinkDataSize');\n  if (hoverLinkDataSize) {\n    halfHoverLinkSize = linearMap(hoverLinkDataSize, dataExtent, sizeExtent, true) / 2;\n  }\n  return halfHoverLinkSize;\n}\nfunction useHoverLinkOnHandle(visualMapModel) {\n  var hoverLinkOnHandle = visualMapModel.get('hoverLinkOnHandle');\n  return !!(hoverLinkOnHandle == null ? visualMapModel.get('realtime') : hoverLinkOnHandle);\n}\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\nexport default ContinuousView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport ContinuousModel from './ContinuousModel.js';\nimport ContinuousView from './ContinuousView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(ContinuousModel);\n  registers.registerComponentView(ContinuousView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapModel from './VisualMapModel.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport visualDefault from '../../visual/visualDefault.js';\nimport { reformIntervals } from '../../util/number.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar PiecewiseModel = /** @class */function (_super) {\n  __extends(PiecewiseModel, _super);\n  function PiecewiseModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = PiecewiseModel.type;\n    /**\n     * The order is always [low, ..., high].\n     * [{text: string, interval: Array.<number>}, ...]\n     */\n    _this._pieceList = [];\n    return _this;\n  }\n  PiecewiseModel.prototype.optionUpdated = function (newOption, isInit) {\n    _super.prototype.optionUpdated.apply(this, arguments);\n    this.resetExtent();\n    var mode = this._mode = this._determineMode();\n    this._pieceList = [];\n    resetMethods[this._mode].call(this, this._pieceList);\n    this._resetSelected(newOption, isInit);\n    var categories = this.option.categories;\n    this.resetVisual(function (mappingOption, state) {\n      if (mode === 'categories') {\n        mappingOption.mappingMethod = 'category';\n        mappingOption.categories = zrUtil.clone(categories);\n      } else {\n        mappingOption.dataExtent = this.getExtent();\n        mappingOption.mappingMethod = 'piecewise';\n        mappingOption.pieceList = zrUtil.map(this._pieceList, function (piece) {\n          piece = zrUtil.clone(piece);\n          if (state !== 'inRange') {\n            // FIXME\n            // outOfRange do not support special visual in pieces.\n            piece.visual = null;\n          }\n          return piece;\n        });\n      }\n    });\n  };\n  /**\n   * @protected\n   * @override\n   */\n  PiecewiseModel.prototype.completeVisualOption = function () {\n    // Consider this case:\n    // visualMap: {\n    //      pieces: [{symbol: 'circle', lt: 0}, {symbol: 'rect', gte: 0}]\n    // }\n    // where no inRange/outOfRange set but only pieces. So we should make\n    // default inRange/outOfRange for this case, otherwise visuals that only\n    // appear in `pieces` will not be taken into account in visual encoding.\n    var option = this.option;\n    var visualTypesInPieces = {};\n    var visualTypes = VisualMapping.listVisualTypes();\n    var isCategory = this.isCategory();\n    zrUtil.each(option.pieces, function (piece) {\n      zrUtil.each(visualTypes, function (visualType) {\n        if (piece.hasOwnProperty(visualType)) {\n          visualTypesInPieces[visualType] = 1;\n        }\n      });\n    });\n    zrUtil.each(visualTypesInPieces, function (v, visualType) {\n      var exists = false;\n      zrUtil.each(this.stateList, function (state) {\n        exists = exists || has(option, state, visualType) || has(option.target, state, visualType);\n      }, this);\n      !exists && zrUtil.each(this.stateList, function (state) {\n        (option[state] || (option[state] = {}))[visualType] = visualDefault.get(visualType, state === 'inRange' ? 'active' : 'inactive', isCategory);\n      });\n    }, this);\n    function has(obj, state, visualType) {\n      return obj && obj[state] && obj[state].hasOwnProperty(visualType);\n    }\n    _super.prototype.completeVisualOption.apply(this, arguments);\n  };\n  PiecewiseModel.prototype._resetSelected = function (newOption, isInit) {\n    var thisOption = this.option;\n    var pieceList = this._pieceList;\n    // Selected do not merge but all override.\n    var selected = (isInit ? thisOption : newOption).selected || {};\n    thisOption.selected = selected;\n    // Consider 'not specified' means true.\n    zrUtil.each(pieceList, function (piece, index) {\n      var key = this.getSelectedMapKey(piece);\n      if (!selected.hasOwnProperty(key)) {\n        selected[key] = true;\n      }\n    }, this);\n    if (thisOption.selectedMode === 'single') {\n      // Ensure there is only one selected.\n      var hasSel_1 = false;\n      zrUtil.each(pieceList, function (piece, index) {\n        var key = this.getSelectedMapKey(piece);\n        if (selected[key]) {\n          hasSel_1 ? selected[key] = false : hasSel_1 = true;\n        }\n      }, this);\n    }\n    // thisOption.selectedMode === 'multiple', default: all selected.\n  };\n  /**\n   * @public\n   */\n  PiecewiseModel.prototype.getItemSymbol = function () {\n    return this.get('itemSymbol');\n  };\n  /**\n   * @public\n   */\n  PiecewiseModel.prototype.getSelectedMapKey = function (piece) {\n    return this._mode === 'categories' ? piece.value + '' : piece.index + '';\n  };\n  /**\n   * @public\n   */\n  PiecewiseModel.prototype.getPieceList = function () {\n    return this._pieceList;\n  };\n  /**\n   * @return {string}\n   */\n  PiecewiseModel.prototype._determineMode = function () {\n    var option = this.option;\n    return option.pieces && option.pieces.length > 0 ? 'pieces' : this.option.categories ? 'categories' : 'splitNumber';\n  };\n  /**\n   * @override\n   */\n  PiecewiseModel.prototype.setSelected = function (selected) {\n    this.option.selected = zrUtil.clone(selected);\n  };\n  /**\n   * @override\n   */\n  PiecewiseModel.prototype.getValueState = function (value) {\n    var index = VisualMapping.findPieceIndex(value, this._pieceList);\n    return index != null ? this.option.selected[this.getSelectedMapKey(this._pieceList[index])] ? 'inRange' : 'outOfRange' : 'outOfRange';\n  };\n  /**\n   * @public\n   * @param pieceIndex piece index in visualMapModel.getPieceList()\n   */\n  PiecewiseModel.prototype.findTargetDataIndices = function (pieceIndex) {\n    var result = [];\n    var pieceList = this._pieceList;\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimensionIndex(data), function (value, dataIndex) {\n        // Should always base on model pieceList, because it is order sensitive.\n        var pIdx = VisualMapping.findPieceIndex(value, pieceList);\n        pIdx === pieceIndex && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  };\n  /**\n   * @private\n   * @param piece piece.value or piece.interval is required.\n   * @return  Can be Infinity or -Infinity\n   */\n  PiecewiseModel.prototype.getRepresentValue = function (piece) {\n    var representValue;\n    if (this.isCategory()) {\n      representValue = piece.value;\n    } else {\n      if (piece.value != null) {\n        representValue = piece.value;\n      } else {\n        var pieceInterval = piece.interval || [];\n        representValue = pieceInterval[0] === -Infinity && pieceInterval[1] === Infinity ? 0 : (pieceInterval[0] + pieceInterval[1]) / 2;\n      }\n    }\n    return representValue;\n  };\n  PiecewiseModel.prototype.getVisualMeta = function (getColorVisual) {\n    // Do not support category. (category axis is ordinal, numerical)\n    if (this.isCategory()) {\n      return;\n    }\n    var stops = [];\n    var outerColors = ['', ''];\n    var visualMapModel = this;\n    function setStop(interval, valueState) {\n      var representValue = visualMapModel.getRepresentValue({\n        interval: interval\n      }); // Not category\n      if (!valueState) {\n        valueState = visualMapModel.getValueState(representValue);\n      }\n      var color = getColorVisual(representValue, valueState);\n      if (interval[0] === -Infinity) {\n        outerColors[0] = color;\n      } else if (interval[1] === Infinity) {\n        outerColors[1] = color;\n      } else {\n        stops.push({\n          value: interval[0],\n          color: color\n        }, {\n          value: interval[1],\n          color: color\n        });\n      }\n    }\n    // Suplement\n    var pieceList = this._pieceList.slice();\n    if (!pieceList.length) {\n      pieceList.push({\n        interval: [-Infinity, Infinity]\n      });\n    } else {\n      var edge = pieceList[0].interval[0];\n      edge !== -Infinity && pieceList.unshift({\n        interval: [-Infinity, edge]\n      });\n      edge = pieceList[pieceList.length - 1].interval[1];\n      edge !== Infinity && pieceList.push({\n        interval: [edge, Infinity]\n      });\n    }\n    var curr = -Infinity;\n    zrUtil.each(pieceList, function (piece) {\n      var interval = piece.interval;\n      if (interval) {\n        // Fulfill gap.\n        interval[0] > curr && setStop([curr, interval[0]], 'outOfRange');\n        setStop(interval.slice());\n        curr = interval[1];\n      }\n    }, this);\n    return {\n      stops: stops,\n      outerColors: outerColors\n    };\n  };\n  PiecewiseModel.type = 'visualMap.piecewise';\n  PiecewiseModel.defaultOption = inheritDefaultOption(VisualMapModel.defaultOption, {\n    selected: null,\n    minOpen: false,\n    maxOpen: false,\n    align: 'auto',\n    itemWidth: 20,\n    itemHeight: 14,\n    itemSymbol: 'roundRect',\n    pieces: null,\n    categories: null,\n    splitNumber: 5,\n    selectedMode: 'multiple',\n    itemGap: 10,\n    hoverLink: true // Enable hover highlight.\n  });\n\n  return PiecewiseModel;\n}(VisualMapModel);\n;\n/**\n * Key is this._mode\n * @type {Object}\n * @this {module:echarts/component/viusalMap/PiecewiseMode}\n */\nvar resetMethods = {\n  splitNumber: function (outPieceList) {\n    var thisOption = this.option;\n    var precision = Math.min(thisOption.precision, 20);\n    var dataExtent = this.getExtent();\n    var splitNumber = thisOption.splitNumber;\n    splitNumber = Math.max(parseInt(splitNumber, 10), 1);\n    thisOption.splitNumber = splitNumber;\n    var splitStep = (dataExtent[1] - dataExtent[0]) / splitNumber;\n    // Precision auto-adaption\n    while (+splitStep.toFixed(precision) !== splitStep && precision < 5) {\n      precision++;\n    }\n    thisOption.precision = precision;\n    splitStep = +splitStep.toFixed(precision);\n    if (thisOption.minOpen) {\n      outPieceList.push({\n        interval: [-Infinity, dataExtent[0]],\n        close: [0, 0]\n      });\n    }\n    for (var index = 0, curr = dataExtent[0]; index < splitNumber; curr += splitStep, index++) {\n      var max = index === splitNumber - 1 ? dataExtent[1] : curr + splitStep;\n      outPieceList.push({\n        interval: [curr, max],\n        close: [1, 1]\n      });\n    }\n    if (thisOption.maxOpen) {\n      outPieceList.push({\n        interval: [dataExtent[1], Infinity],\n        close: [0, 0]\n      });\n    }\n    reformIntervals(outPieceList);\n    zrUtil.each(outPieceList, function (piece, index) {\n      piece.index = index;\n      piece.text = this.formatValueText(piece.interval);\n    }, this);\n  },\n  categories: function (outPieceList) {\n    var thisOption = this.option;\n    zrUtil.each(thisOption.categories, function (cate) {\n      // FIXME categorypieceListvisualMappingpieceList\n      // \n      outPieceList.push({\n        text: this.formatValueText(cate, true),\n        value: cate\n      });\n    }, this);\n    // See \"Order Rule\".\n    normalizeReverse(thisOption, outPieceList);\n  },\n  pieces: function (outPieceList) {\n    var thisOption = this.option;\n    zrUtil.each(thisOption.pieces, function (pieceListItem, index) {\n      if (!zrUtil.isObject(pieceListItem)) {\n        pieceListItem = {\n          value: pieceListItem\n        };\n      }\n      var item = {\n        text: '',\n        index: index\n      };\n      if (pieceListItem.label != null) {\n        item.text = pieceListItem.label;\n      }\n      if (pieceListItem.hasOwnProperty('value')) {\n        var value = item.value = pieceListItem.value;\n        item.interval = [value, value];\n        item.close = [1, 1];\n      } else {\n        // `min` `max` is legacy option.\n        // `lt` `gt` `lte` `gte` is recommended.\n        var interval = item.interval = [];\n        var close_1 = item.close = [0, 0];\n        var closeList = [1, 0, 1];\n        var infinityList = [-Infinity, Infinity];\n        var useMinMax = [];\n        for (var lg = 0; lg < 2; lg++) {\n          var names = [['gte', 'gt', 'min'], ['lte', 'lt', 'max']][lg];\n          for (var i = 0; i < 3 && interval[lg] == null; i++) {\n            interval[lg] = pieceListItem[names[i]];\n            close_1[lg] = closeList[i];\n            useMinMax[lg] = i === 2;\n          }\n          interval[lg] == null && (interval[lg] = infinityList[lg]);\n        }\n        useMinMax[0] && interval[1] === Infinity && (close_1[0] = 0);\n        useMinMax[1] && interval[0] === -Infinity && (close_1[1] = 0);\n        if (process.env.NODE_ENV !== 'production') {\n          if (interval[0] > interval[1]) {\n            console.warn('Piece ' + index + 'is illegal: ' + interval + ' lower bound should not greater then uppper bound.');\n          }\n        }\n        if (interval[0] === interval[1] && close_1[0] && close_1[1]) {\n          // Consider: [{min: 5, max: 5, visual: {...}}, {min: 0, max: 5}],\n          // we use value to lift the priority when min === max\n          item.value = interval[0];\n        }\n      }\n      item.visual = VisualMapping.retrieveVisuals(pieceListItem);\n      outPieceList.push(item);\n    }, this);\n    // See \"Order Rule\".\n    normalizeReverse(thisOption, outPieceList);\n    // Only pieces\n    reformIntervals(outPieceList);\n    zrUtil.each(outPieceList, function (piece) {\n      var close = piece.close;\n      var edgeSymbols = [['<', ''][close[1]], ['>', ''][close[0]]];\n      piece.text = piece.text || this.formatValueText(piece.value != null ? piece.value : piece.interval, false, edgeSymbols);\n    }, this);\n  }\n};\nfunction normalizeReverse(thisOption, pieceList) {\n  var inverse = thisOption.inverse;\n  if (thisOption.orient === 'vertical' ? !inverse : inverse) {\n    pieceList.reverse();\n  }\n}\nexport default PiecewiseModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapView from './VisualMapView.js';\nimport * as graphic from '../../util/graphic.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport * as layout from '../../util/layout.js';\nimport * as helper from './helper.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nvar PiecewiseVisualMapView = /** @class */function (_super) {\n  __extends(PiecewiseVisualMapView, _super);\n  function PiecewiseVisualMapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = PiecewiseVisualMapView.type;\n    return _this;\n  }\n  PiecewiseVisualMapView.prototype.doRender = function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var textStyleModel = visualMapModel.textStyleModel;\n    var textFont = textStyleModel.getFont();\n    var textFill = textStyleModel.getTextColor();\n    var itemAlign = this._getItemAlign();\n    var itemSize = visualMapModel.itemSize;\n    var viewData = this._getViewData();\n    var endsText = viewData.endsText;\n    var showLabel = zrUtil.retrieve(visualMapModel.get('showLabel', true), !endsText);\n    endsText && this._renderEndsText(thisGroup, endsText[0], itemSize, showLabel, itemAlign);\n    zrUtil.each(viewData.viewPieceList, function (item) {\n      var piece = item.piece;\n      var itemGroup = new graphic.Group();\n      itemGroup.onclick = zrUtil.bind(this._onItemClick, this, piece);\n      this._enableHoverLink(itemGroup, item.indexInModelPieceList);\n      // TODO Category\n      var representValue = visualMapModel.getRepresentValue(piece);\n      this._createItemSymbol(itemGroup, representValue, [0, 0, itemSize[0], itemSize[1]]);\n      if (showLabel) {\n        var visualState = this.visualMapModel.getValueState(representValue);\n        itemGroup.add(new graphic.Text({\n          style: {\n            x: itemAlign === 'right' ? -textGap : itemSize[0] + textGap,\n            y: itemSize[1] / 2,\n            text: piece.text,\n            verticalAlign: 'middle',\n            align: itemAlign,\n            font: textFont,\n            fill: textFill,\n            opacity: visualState === 'outOfRange' ? 0.5 : 1\n          }\n        }));\n      }\n      thisGroup.add(itemGroup);\n    }, this);\n    endsText && this._renderEndsText(thisGroup, endsText[1], itemSize, showLabel, itemAlign);\n    layout.box(visualMapModel.get('orient'), thisGroup, visualMapModel.get('itemGap'));\n    this.renderBackground(thisGroup);\n    this.positionGroup(thisGroup);\n  };\n  PiecewiseVisualMapView.prototype._enableHoverLink = function (itemGroup, pieceIndex) {\n    var _this = this;\n    itemGroup.on('mouseover', function () {\n      return onHoverLink('highlight');\n    }).on('mouseout', function () {\n      return onHoverLink('downplay');\n    });\n    var onHoverLink = function (method) {\n      var visualMapModel = _this.visualMapModel;\n      // TODO: TYPE More detailed action types\n      visualMapModel.option.hoverLink && _this.api.dispatchAction({\n        type: method,\n        batch: helper.makeHighDownBatch(visualMapModel.findTargetDataIndices(pieceIndex), visualMapModel)\n      });\n    };\n  };\n  PiecewiseVisualMapView.prototype._getItemAlign = function () {\n    var visualMapModel = this.visualMapModel;\n    var modelOption = visualMapModel.option;\n    if (modelOption.orient === 'vertical') {\n      return helper.getItemAlign(visualMapModel, this.api, visualMapModel.itemSize);\n    } else {\n      // horizontal, most case left unless specifying right.\n      var align = modelOption.align;\n      if (!align || align === 'auto') {\n        align = 'left';\n      }\n      return align;\n    }\n  };\n  PiecewiseVisualMapView.prototype._renderEndsText = function (group, text, itemSize, showLabel, itemAlign) {\n    if (!text) {\n      return;\n    }\n    var itemGroup = new graphic.Group();\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    itemGroup.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        x: showLabel ? itemAlign === 'right' ? itemSize[0] : 0 : itemSize[0] / 2,\n        y: itemSize[1] / 2,\n        verticalAlign: 'middle',\n        align: showLabel ? itemAlign : 'center',\n        text: text\n      })\n    }));\n    group.add(itemGroup);\n  };\n  /**\n   * @private\n   * @return {Object} {peiceList, endsText} The order is the same as screen pixel order.\n   */\n  PiecewiseVisualMapView.prototype._getViewData = function () {\n    var visualMapModel = this.visualMapModel;\n    var viewPieceList = zrUtil.map(visualMapModel.getPieceList(), function (piece, index) {\n      return {\n        piece: piece,\n        indexInModelPieceList: index\n      };\n    });\n    var endsText = visualMapModel.get('text');\n    // Consider orient and inverse.\n    var orient = visualMapModel.get('orient');\n    var inverse = visualMapModel.get('inverse');\n    // Order of model pieceList is always [low, ..., high]\n    if (orient === 'horizontal' ? inverse : !inverse) {\n      viewPieceList.reverse();\n    }\n    // Origin order of endsText is [high, low]\n    else if (endsText) {\n      endsText = endsText.slice().reverse();\n    }\n    return {\n      viewPieceList: viewPieceList,\n      endsText: endsText\n    };\n  };\n  PiecewiseVisualMapView.prototype._createItemSymbol = function (group, representValue, shapeParam) {\n    group.add(createSymbol(\n    // symbol will be string\n    this.getControllerVisual(representValue, 'symbol'), shapeParam[0], shapeParam[1], shapeParam[2], shapeParam[3],\n    // color will be string\n    this.getControllerVisual(representValue, 'color')));\n  };\n  PiecewiseVisualMapView.prototype._onItemClick = function (piece) {\n    var visualMapModel = this.visualMapModel;\n    var option = visualMapModel.option;\n    var selectedMode = option.selectedMode;\n    if (!selectedMode) {\n      return;\n    }\n    var selected = zrUtil.clone(option.selected);\n    var newKey = visualMapModel.getSelectedMapKey(piece);\n    if (selectedMode === 'single' || selectedMode === true) {\n      selected[newKey] = true;\n      zrUtil.each(selected, function (o, key) {\n        selected[key] = key === newKey;\n      });\n    } else {\n      selected[newKey] = !selected[newKey];\n    }\n    this.api.dispatchAction({\n      type: 'selectDataRange',\n      from: this.uid,\n      visualMapId: this.visualMapModel.id,\n      selected: selected\n    });\n  };\n  PiecewiseVisualMapView.type = 'visualMap.piecewise';\n  return PiecewiseVisualMapView;\n}(VisualMapView);\nexport default PiecewiseVisualMapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport PiecewiseModel from './PiecewiseModel.js';\nimport PiecewiseView from './PiecewiseView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(PiecewiseModel);\n  registers.registerComponentView(PiecewiseView);\n  installCommon(registers);\n}"],"names":["axisBuilderAttrs","RadarView","_super","_this","apply","this","arguments","type","__extends","prototype","render","radarModel","ecModel","api","group","removeAll","_buildAxes","_buildSplitLineAndArea","radar","coordinateSystem","indicatorAxes","getIndicatorAxes","axisBuilders","zrUtil","indicatorAxis","axisName","model","get","name","axisBuilder","AxisBuilder","position","cx","cy","rotation","angle","labelDirection","tickDirection","nameDirection","add","getGroup","length","shape","splitLineModel","getModel","splitAreaModel","lineStyleModel","areaStyleModel","showSplitLine","showSplitArea","splitLineColors","splitAreaColors","splitLineColorsArr","splitAreaColorsArr","splitLines","splitAreas","ticksRadius","getTicksCoords","i","colorIndex","getColorIndex","push","graphic","r","coord","r0","realSplitNumber_1","axesTicksPoints","idx","ticksCoords","Math","min","tickCoord","coordToPoint","prevPoints","points","j","slice","concat","reverse","lineStyle","getLineStyle","areaStyle","getAreaStyle","mergePath","style","stroke","fill","silent","areaOrLine","areaOrLineColorList","ComponentView","install","registers","registerCoordinateSystem","Radar","registerComponentModel","RadarModel","registerComponentView","registerVisual","seriesType","reset","seriesModel","data","getData","each","setItemVisual","setVisual","SingleView","use","installAxisPointer","AxisView","registerAxisPointerClass","SingleAxisPointer","SingleAxisView","SingleAxisModel","axisModelCreator","defaultOption","singleCreator","TimelineModel","layoutMode","init","option","parentModel","mergeDefaultAndTheme","_initData","mergeOption","setCurrentIndex","currentIndex","count","_data","loop","getCurrentIndex","isIndexMax","setPlayState","state","autoPlay","getPlayState","processedDataArr","thisOption","dataArr","axisType","names","_names","item","index","newItem","value","convertOptionIdName","getDataItemValue","isObject","clone","dimType","category","time","SeriesData","initData","getCategories","z","show","realtime","left","top","right","bottom","width","height","padding","controlPosition","rewind","playInterval","itemStyle","label","color","ComponentModel","SliderTimelineModel","inheritDefaultOption","backgroundColor","borderColor","borderWidth","orient","inverse","tooltip","trigger","symbol","symbolSize","interval","rotate","checkpointStyle","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","animation","animationDuration","animationEasing","controlStyle","showPlayBtn","showPrevBtn","showNextBtn","itemSize","itemGap","playIcon","stopIcon","nextIcon","prevIcon","prevBtnSize","nextBtnSize","emphasis","progress","mixin","DataFormatMixin","TimelineView","TimelineAxis","dim","scale","coordExtent","call","getLabelModel","isHorizontal","Axis","PI","labelDataIndexStore","makeInner","SliderTimelineView","timelineModel","layoutInfo_1","_layout","mainGroup_1","_createGroup","labelGroup","axis_1","_axis","_createAxis","formatTooltip","dataIndex","getLabel","createTooltipMarkup","noName","_renderAxisLabel","_position","_doPlayStop","_updateTicksStatus","remove","_clearTimer","dispose","parsedLabelPos","labelPosOpt","viewRect","getViewRect","y","getHeight","x","getWidth","isString","horizontal","vertical","playPosition","prevBtnPosition","nextBtnPosition","labelAlignMap","labelBaselineMap","rotationMap","mainLength","controlModel","showControl","controlSize","controlGap","sizePlusGap","labelRotation","xLeft","xRight","axisExtent","labelAlign","labelBaseline","layoutInfo","mainGroup","_mainGroup","_labelGroup","m","matrix","rotateOriginX","rotateOriginY","applyTransform","viewBound","getBound","mainBound","getBoundingRect","labelBound","mainPosition","labelsPosition","mainBoundIdx","toBound","setOrigin","targetGroup","originX","originY","rect","fromPos","from","to","dimIdx","boundIdx","setPosition","createScaleByModel","getTicks","mapArray","dataExtent","getDataExtent","setExtent","calcNiceTicks","axis","key","newGroup","_renderAxisLine","getExtent","line","x1","y1","x2","y2","extend","lineCap","z2","progressLine","_progressLine","_currentPointer","defaults","lineWidth","_renderAxisTick","ticks","_tickSymbols","tick","dataToCoord","itemModel","getItemModel","itemStyleModel","hoverStyleModel","progressStyleModel","symbolOpt","onclick","bind","_changeTimeline","el","giveSymbol","ensureState","getItemStyle","enableHoverEmphasis","ecData","getECData","dataModel","labelModel","labels","getViewLabels","_tickLabels","labelItem","tickValue","normalLabelModel","hoverLabelModel","progressLabelModel","textEl","createTextStyle","text","formattedLabel","align","verticalAlign","_renderControl","hoverStyle","playState","makeBtn","iconName","willRotate","iconSize","parsePercent","retrieve2","btn","makeControlIcon","rectHover","_handlePlayClick","_renderCurrentPointer","pointerModel","me","callback","onCreate","pointer","draggable","drift","_handlePointerDrag","ondragend","_handlePointerDragend","pointerMoveTo","onUpdate","nextState","dispatchAction","uid","dx","dy","e","_pointerChangeTimeline","offsetX","offsetY","mousePos","toCoord","_toAxisCoord","numberUtil","markRedraw","dirty","targetDataIndex","_findNearestTick","_timer","setTimeout","vertex","trans","getLocalTransform","axisCoord","dist","Infinity","d","abs","clearTimeout","nextIndex","tickSymbols","tickLabels","toggleState","OrdinalScale","ordinalMeta","extent","TimeScale","locale","getLocaleModel","useUTC","IntervalScale","layout","getBoxLayoutParams","objPath","opts","icon","createIcon","BoundingRect","setStyle","hostModel","opt","setColor","symbolType","createSymbol","merge","normalizeSymbolSize","scaleX","scaleY","symbolOffset","normalizeSymbolOffset","symbolRotate","attr","updateTransform","noAnimation","dragging","animationCfg","duration","easing","stopAnimation","animateTo","installTimelineAction","registerAction","event","update","payload","getComponent","resetOption","replaceMerge","timelinePreprocessor","timelineOpt","timeline","compatibleEC2","ec2Types","transferItem","has","dataItem","itemStyleEmphasis","labelNormal","normal","excludeLabelAttr","obj","hasOwnProperty","registerSubTypeDefaulter","registerPreprocessor","preprocessor","TitleModel","ignoreSize","target","subtext","subtarget","textStyle","fontSize","fontWeight","subtextStyle","TitleView","titleModel","textStyleModel","subtextStyleModel","textAlign","textVerticalAlign","getTextColor","disableBox","textRect","subText","subTextEl","link","sublink","triggerEvent","on","windowOpen","eventData","componentType","componentIndex","groupRect","layoutOption","layoutRect","getLayoutRect","alignStyle","margin","subPixelOptimize","ToolboxFeature","features","registerFeature","ctor","getFeature","ICON_TYPES","BrushFeature","featureModel","brushType","brushMode","isBrushed","eachComponent","mainType","brushModel","brushOption","areas","_brushType","_brushMode","setIconStatus","updateView","getIcons","availableIcons","icons","intervals","command","getDefaultOption","polygon","lineX","lineY","keep","clear","title","ToolboxModel","optionUpdated","feature","featureOpt","featureName","Feature","featureManager","borderRadius","showTitle","iconStyle","ToolboxView","toolboxModel","isVertical","featureOpts","_features","featureNames","DataDiffer","_featureNames","processFeature","execute","listComponentHelper","eachChild","titleText","__title","emphasisState","emphasisTextConfig","textConfig","textContent","getTextContent","emphasisTextState","emphasisTextStyle","textContain","ZRText","makeFont","needPutOnTop","topOffset","newIndex","oldIndex","oldName","Model","newTitle","isUserFeatureName","getUID","isToolboxFeature","unusable","createIconPaths","status","iconPaths","iconStatus","enterEmphasis","leaveEmphasis","iconsMap","titlesMap","iconStyleModel","iconStyleEmphasisModel","titles","iconStr","path","pathEmphasisState","font","getFont","fontStyle","fontFamily","ignore","setTextContent","setTooltipConfig","componentModel","itemName","formatterParamsExtra","defaultTextPosition","setTextConfig","hide","indexOf","SaveAsImage","isSvg","getZr","painter","getType","url","getConnectedDataURL","connectedBackgroundColor","excludeComponents","pixelRatio","browser","env","MouseEvent","newEdge","ie","edge","window","navigator","msSaveOrOpenBlob","parts","split","base64Encoded","bstr","decodeURIComponent","atob","filename","n","u8arr","Uint8Array","charCodeAt","blob","Blob","frame","document","createElement","body","appendChild","cw","contentWindow","doc","open","write","close","focus","execCommand","removeChild","lang","html","tab","$a","download","href","evt","view","defaultView","bubbles","cancelable","dispatchEvent","INNER_STACK_KEYWORD","radioTypes","MagicType","bar","stack","seriesIndex","seriesOptGenreator","newOption","series","generateNewSeriesTypes","subType","seriesId","id","newSeriesOpt","coordSys","categoryAxis","getAxesByScale","axisDim","axisModel","getReferringComponents","SINGLE_REFERRING","models","axisIndex","boundaryGap","radio","query","currentType","tiled","markPoint","markLine","isStack","echarts","BLOCK_SPLITER","Array","join","ITEM_SPLITER","groupSeries","seriesGroupByCategoryAxis","otherSeries","meta","eachRawSeries","baseAxis","getBaseAxis","valueAxis","getOtherAxis","other","assembleSeriesWithCategoryAxis","groups","tables","valueAxisDim","headers","columns","rawData","getRawData","mapDimension","val","lines","items","assembleOtherSeries","vals","dimensions","argLen","getName","getContentFromModel","result","str","replace","trim","isTSVFormat","block","firstLine","itemSplitRegex","RegExp","parseTSVContents","tsv","tsvLines","shift","categories","header","parseListContents","seriesName","name_1","hasName","isNaN","parseContents","blockMetaList","blocks","blockMeta","axisKey","DataView","container","getDom","_dom","root","cssText","innerHTML","viewMain","textarea","optionToContent","contentToOption","htmlOrDom","getOption","readOnly","buttonContainer","buttonStyle","closeButton","refreshButton","self","addEventListener","Error","clientHeight","textColor","textareaColor","textareaBorderColor","buttonColor","buttonTextColor","tryMergeDataOption","newData","originalData","newVal","original","newValIsObject","shouldDeleteName","newSeriesOptList","seriesOpt","getSeriesByName","RestoreOption","history","DATA_ZOOM_ID_BASE","makeInternalComponentId","DataZoomFeature","_brushController","BrushController","_onBrush","mount","updateZoomBtnStatus","updateBackBtnStatus","handlers","unmount","eventParam","isEnd","snapshot","updateCovers","brushTargetManager","BrushTargetManager","makeAxisFinder","include","matchOutputRanges","area","coordRange","setBatch","_dispatchZoomAction","dimName","minMax","getAxis","dataZoomModel","findDataZoom","minMaxSpan","findRepresentativeAxisProxy","getMinMaxSpan","minValueSpan","maxValueSpan","sliderMove","dataZoomId","startValue","endValue","found","dzModel","getAxisModel","batch","batchItem","filterMode","zoom","back","brushStyle","nextActive","_isZoomActive","dataZoomSelectActive","dzFeatureModel","setting","xAxisIndex","yAxisIndex","xAxisId","yAxisId","zoomActive","panels","makePanelOpts","targetInfo","xAxisDeclared","yAxisDeclared","setPanels","enableBrush","registerInternalOptionCreator","featureDataZoomPath","dzOptions","finder","finderResult","parseFinder","xAxisModels","buildInternalOptions","yAxisModels","axisMainType","axisIndexPropName","newOpt","$fromToolbox","DataZoom","Restore","installDataZoomSelect","TooltipModel","dependencies","showContent","triggerOn","alwaysShowContent","displayMode","renderMode","confine","showDelay","hideDelay","transitionDuration","enterable","extraCssText","axisPointer","animationDurationUpdate","animationEasingUpdate","crossStyle","shouldTooltipConfine","tooltipModel","confineOption","testStyle","styleProps","domSupported","documentElement","len","TRANSFORM_VENDOR","TRANSITION_VENDOR","toCSSVendorPrefix","styleVendor","styleProp","toCamelCase","toLowerCase","getComputedStyle","stl","currentStyle","CSS_TRANSITION_VENDOR","CSS_TRANSFORM_VENDOR","gCssText","transform3dSupported","mirrorPos","pos","assembleArrow","arrowPosition","convertToColorString","rotateDeg","arrowPos","arrowSize","max","round","positionStyle","transformStyle","rotateRadian","arrowWH","rotatedWH","cos","sin","arrowOffset","SQRT2","borderStyle","styleCss","assembleTransition","onlyFade","transitionCurve","transitionOption","transitionText","transformSupported","assembleTransform","toString","x0","toFixed","y0","is3d","translate","assembleFont","assembleCssText","enableTransition","getPaddingFromTooltipModel","boxShadow","borderName","camelCase","normalizeCssArray","makeStyleCoord","out","zr","zrX","zrY","zrPainter","zrViewportRoot","getViewportRoot","transformLocalCoord","viewportRootOffset","getViewportRootOffset","offsetLeft","offsetTop","TooltipHTMLContent","_show","_styleCoord","_enterable","_alwaysShowContent","_firstShow","_longHide","wxa","domBelongToZr","_zr","appendTo","querySelector","isDom","isFunction","_api","_container","onmouseenter","_hideTimeout","_inContent","onmousemove","handler","normalizeEvent","dispatch","onmouseleave","hideLater","_hideDelay","domStyle","_moveIfResized","className","nearPointColor","_longHideTimeout","styleCoord","display","setContent","content","markers","arrow","isArray","parentNode","childNodes","arrowEl","setEnterable","getSize","offsetWidth","offsetHeight","moveTo","style_1","transforms","transform","ratioX","ratioY","visibility","opacity","willChange","isShow","TooltipRichContent","markupStyleCreator","throwError","rich","richTextStyles","lineHeight","textShadowColor","propName","bounding","shadowOuterSize","calcShadowOuterSize","mathMaxWith0","proxyRect","Rect","TooltipView","node","_renderMode","getTooltipRenderMode","_tooltipContent","_tooltipModel","_ecModel","tooltipContent","_initGlobalListener","_keepShow","createOrUpdate","globalListener","currTrigger","_tryShow","_hide","_lastX","_lastY","self_1","_refreshUpdateTimeout","isDisposed","manuallyShowTip","dataByCoordSys","_lastDataByCoordSys","makeDispatchAction","_ticket","cmptRef","findComponentReference","positionDefault","tooltipConfig","tooltipOption","_manuallyAxisShowTip","pointInfo","findPointFromSeries","point","findHover","manuallyHideTip","coordSysAxesInfo","getSeriesByIndex","tooltipCascadedModel","buildTooltipModel","_showAxisTooltip","seriesDispatcher_1","cmptDispatcher_1","ssrType","findEventDispatcher","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","cb","delay","_showTimout","globalTooltipModel","singleTooltipModel","cbParamsList","articleMarkup","noHeader","markupTextArrLegacy","TooltipMarkupStyleCreator","itemCoordSys","dataByAxis","axisItem","axisValue","axisValueLabel","axisPointerViewHelper","seriesDataIndices","valueLabelOpt","axisSectionMarkup","sortBlocks","idxItem","dataIndexInside","cbParams","getDataParams","axisId","axisHelper","marker","makeTooltipMarker","seriesTooltipResult","normalizeTooltipFormatResult","frag","valueFormatter","positionExpr","orderMode","builtMarkupText","buildTooltipMarkup","unshift","blockBreak","allMarkupText","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","random","dispatcher","dataType","tooltipTrigger","params","markupText","asyncTicket","getRawIndex","isHTMLRenderMode","tooltipOpt","encodeHTMLContent","formatter","encodeHTML","tooltipModelCascade","cmpt","componentMainType","subTooltipModel","defaultHtml","formatterParams","nearPoint","_getNearestPoint","params0","isTimeAxis","timeFormat","formatTpl","cbTicket","tooltipDataParams","viewWidth","viewHeight","contentSize","vAlign","viewSize","boxLayoutPosition","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","lastCbParamsList","_cbParamsList","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","thisItem","lastIndices","newIndices","lastIdxItem","newIdxItem","seriesIdx","lastCbParams","modelCascade","defaultTooltipOption","resultModel","gapH","gapV","size","domWidth","domHeight","offset","ceil","rectWidth","rectHeight","queryOptionMap","preParseFinder","keys","queryResult","queryReferringComponents","useDefault","enableAll","enableNone","getViewOfComponentModel","traverse","subEl","noop","defaultSeriesFormatTooltip","inlineValue","inlineValueType","subBlocks","sortParam","multipleSeries","tooltipDims","mapDimensionsAll","tooltipDimLen","getRawValue","isValueArr","markerColor","retrieveVisualColorForTooltipMarker","formatArrResult","formatTooltipArrayValue","inlineValues","inlineValueTypes","dimInfo","getDimensionInfo","retrieveRawValue","seriesNameSpecified","isNameSpecified","inlineName","markerType","valueType","colorStr","isValueMultipleLine","reduce","dimItem","displayName","setEachItem","otherDims","TOOLTIP_LINE_HEIGHT_CSS","getTooltipTextStyle","nameFontColor","nameFontSize","nameFontWeight","valueFontColor","valueFontSize","valueFontWeight","nameStyle","valueStyle","HTML_GAPS","RICH_TEXT_GAPS","isSectionFragment","getBuilder","buildSection","buildNameValue","getBlockGapLevel","gapLevel_1","subBlockLen","hasInnerGap_1","subBlock","subGapLevel","ctx","fragment","topMarginForOuterGap","toolTipTextStyle","gaps","getGap","subMarkupTextList","assert","orderMap","valueAsc","valueDesc","hasOwn","comparator_1","SortOrderComparator","sort","a","b","evaluate","subMarkupText","richText","wrapBlockHTML","displayableHeader","makeValueReadable","wrapInlineNameRichText","noValue","noMarker","map","valueTypeOption","markerStr","readableName","readableValueList","valueAlignRight","valueCloseToMarker","_a","wrapInlineValueRichText","wrapInlineNameHTML","wrapInlineValueHTML","builder","gapLevel","encodedContent","topGap","clearfix","marginCSS","leftHasMarker","marginCss","valueList","alignRight","paddingStr","alignCSS","wrapRichTextStyle","values","styles","paddingLeft","getItemVisual","visualDrawType","_nextStyleNameId","getRandomIdBase","_generateStyleName","markerId","getTooltipMarker","finalStl","styleName","filterTransform","rawItem","upstream","condition","parseConditionalExpression","config","valueGetterAttrMap","createHashMap","dimension","prepareGetValue","exprOption","errMsg","dimLoose","getValue","param","retrieveValueFromItem","resultData","getRawDataItem","sortTransform","orderExprList","normalizeToArray","orderDefList","orderExpr","order","parserName","parser","incomparable","errMsg_1","process","errMsg_2","getRawValueParser","comparator","sourceFormat","SOURCE_FORMAT_ARRAY_ROWS","SOURCE_FORMAT_OBJECT_ROWS","item0","item1","orderDef","val0","val1","registerTransform","mapVisual","VisualMapping","eachVisual","asc","linearMap","VisualMapModel","stateList","replacableOptionKeys","dataBound","targetVisuals","controllerVisuals","isInit","visualSolution","resetItemSize","completeVisualOption","resetVisual","supplementVisualOption","controller","getItemSymbol","getTargetSeriesIndices","optionSeriesIndex","seriesIndices","eachSeries","modelUtil","eachTargetSeries","context","isTargetSeries","is","formatValueText","isCategory","edgeSymbols","isMinMax","precision","textValue","resetExtent","_dataExtent","getDataDimensionIndex","optDim","getDimensionIndex","dimNames","isCalculationCoord","storeDimIndex","base","inRange","outOfRange","completeSingle","completeInactive","stateExist","stateAbsent","optExist","optAbsent","visualData","visualType","isValidType","defa","visualDefault","completeController","symbolExists","symbolSizeExists","inactiveColor","itemSymbol","defaultSymbol","visuals","max_1","parseFloat","setSelected","selected","getSelected","getValueState","getVisualMeta","getColorVisual","itemWidth","itemHeight","contentColor","textGap","VisualMapView","autoPositionValues","visualMapModel","doRender","renderBackground","formatUtil","getControllerVisual","targetValue","visualCluster","forceState","visualObj","defaultColor","getter","setter","mappings","visualTypes","prepareVisualTypes","visualMapping","convertOpacityToAlpha","__alphaForOpacity","dependsOn","applyVisual","positionGroup","paramsSet","getItemAlign","modelOption","itemAlign","ecSize","realIndex","reals","fakeValue","layoutInput","rParam","makeHighDownBatch","highlightKey","installVisualMapContinuous","installVisualMapPiecewise","visualMapActionInfo","visualMapActionHander","visualMapEncodingHandlers","createOnAllSeries","resetDefines","pipelineContext","large","visualMetaList","visualMeta","stops","outerColors","valueState","resultVisual","getVisualFromData","mapping","getVisual","visualMapPreprocessor","visualMap","pieces","splitList","piece","start","end","installed","installCommon","splitNumber","calculable","PRIORITY","VISUAL","COMPONENT","DEFAULT_BAR_BOUND","ContinuousModel","mappingOption","mappingMethod","_resetRange","range","auto","dataInterval","findTargetDataIndices","dataIndices","oVals","getColorStopValues","iVals","setStop","iIdx","oIdx","iLen","oLen","first","stopsLen","hoverLink","handleIcon","handleSize","handleStyle","indicatorIcon","indicatorSize","indicatorStyle","step","stopValues","mathMin","mathMax","HOVER_LINK_SIZE","HOVER_LINK_OUT","ContinuousView","_shapes","_dataInterval","_handleEnds","_hoverLinkDataIndices","_hoverLinkFromSeriesMouseOver","_hideIndicator","_buildView","thisGroup","_orient","_useHandle","_resetInterval","_renderBar","dataRangeText","_renderEndsText","_updateView","_enableHoverLinkToSeries","_enableHoverLinkFromSeries","endsIndex","barGroup","_applyTransform","shapes","useHandle","helper","_createBarGroup","gradientBarGroup","createPolygon","getCursor","_dragHandle","setClipPath","getTextRect","textSize","handleThumbs","handleLabels","handleLabelPoints","_createHandle","_createIndicator","handleIndex","onDrift","onDragEnd","handleThumb","cursor","eventTool","useStyle","strokeNoScale","strokeFirst","setAsHighDownDispatcher","handleLabel","stateTransition","handleLabelPoint","indicator","invisible","ZRImage","pathStyle","image","indicatorLabel","indicatorLabelPoint","_firstShowIndicator","_dragging","_updateInterval","visualMapId","_hovering","_clearHoverLinkToSeries","useHoverLinkOnHandle","_doHoverLinkToSeries","sizeExtent","delta","handleEnds","forSketch","outOfRangeHandleEnds","inRangeHandleEnds","visualInRange","_createBarVisual","visualOutOfRange","barColor","setShape","barPoints","_updateHandle","colorStops","_makeColorGradient","symbolSizes","_createBarPoints","LinearGradient","handlesColor","sampleNumber","currValue","textPoint","getTransform","_showIndicator","cursorValue","rangeSymbol","halfHoverLinkSize","oldIndicatorPos","indicatorNewProps","labelNewProps","isAnimationEnabled","additive","enterBlur","_clearHoverLinkFromSeries","cursorPos","hoverOnBar","getHalfHoverLinkSize","hoverRange","valueRange","oldBatch","newBatch","resultBatches","_dispatchHighDown","currECData","getStore","leaveBlur","indices","off","element","global","transformDirection","hoverLinkDataSize","hoverLinkOnHandle","PiecewiseModel","_pieceList","mode","_mode","_determineMode","resetMethods","_resetSelected","pieceList","visual","visualTypesInPieces","listVisualTypes","v","exists","getSelectedMapKey","selectedMode","hasSel_1","getPieceList","findPieceIndex","pieceIndex","pIdx","getRepresentValue","representValue","pieceInterval","curr","minOpen","maxOpen","outPieceList","parseInt","splitStep","reformIntervals","cate","normalizeReverse","pieceListItem","close_1","closeList","infinityList","useMinMax","lg","retrieveVisuals","PiecewiseVisualMapView","textFont","textFill","_getItemAlign","viewData","_getViewData","endsText","showLabel","viewPieceList","itemGroup","_onItemClick","_enableHoverLink","indexInModelPieceList","_createItemSymbol","visualState","onHoverLink","method","shapeParam","newKey","o","PiecewiseView"],"sourceRoot":""}