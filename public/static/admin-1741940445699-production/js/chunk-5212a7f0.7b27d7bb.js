(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5212a7f0"],{"105a":function(e,t,a){"use strict";a("237c")},"237c":function(e,t,a){},"5e37":function(e,t,a){},afbb:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"project"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleAddOrEdit({handle:"add"})}}},[e._v("新增")]),a("div",{staticClass:"divider"}),a("el-table",{attrs:{data:e.table,border:""}},[a("el-table-column",{attrs:{label:"图标",width:"200"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("el-image",{staticClass:"table-img-1",attrs:{src:t.icon}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[a("i",{staticClass:"el-icon-picture-outline"})])])]}}])}),a("el-table-column",{attrs:{label:"名称",prop:"name"}}),a("el-table-column",{attrs:{label:"简介",prop:"describe"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"createdTime",width:"200"}}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleAddOrEdit({handle:"edit",data:n})}}},[e._v(" 编辑 ")]),e._t("tableBtns",null,{data:{row:n}}),a("el-popconfirm",{staticClass:"ml10",attrs:{title:"确定删除？",placement:"top"},on:{confirm:function(t){return e.handleDelete(n)}}},[a("el-button",{staticStyle:{color:"red"},attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(" 删除 ")])],1)]}}],null,!0)})],1),a("el-dialog",{attrs:{title:"新增/编辑",visible:e.isShow,width:"600px"},on:{"update:visible":function(t){e.isShow=t}}},[a("div",{staticStyle:{"padding-top":"18px"}},[a("el-form",{ref:"form",attrs:{model:e.editForm,rules:e.editRules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),a("el-form-item",{attrs:{label:"图标",prop:"icon"}},[a("div",{staticClass:"form-inline-block"},[a("Upload",{attrs:{url:"/upload/image"},model:{value:e.editForm.icon,callback:function(t){e.$set(e.editForm,"icon",t)},expression:"editForm.icon"}})],1)]),a("el-form-item",{attrs:{label:"简介",prop:"describe"}},[a("el-input",{attrs:{type:"textarea",rows:"2",placeholder:"请输入",clearable:""},model:{value:e.editForm.describe,callback:function(t){e.$set(e.editForm,"describe",t)},expression:"editForm.describe"}})],1)],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isShow=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleComfirn}},[e._v("确认")])],1)])],1)},l=[],i=a("5530"),o=(a("4ec9"),a("b64b"),a("d3b7"),a("6062"),a("0eb6"),a("b7ef"),a("8bd4"),a("ad1f"),a("b0c0"),a("2f62")),r=a("4279"),s=a("0238"),c=a("b81f"),d={name:"ProjectIndex",props:{noBtns:{type:Array,default:function(){return[]}},otherBtns:s["rulesT"].Array,selection:s["rulesT"].Array},components:{Upload:c["a"]},data:function(){return{search:{name:""},table:[],isShow:!1,editForm:{name:"",icon:"",describe:""},editRules:{companyId:s["change"],name:s["blur"],sign:s["blur"]},editFormInit:{}}},computed:Object(i["a"])({},Object(o["b"])([])),created:function(){this.editFormInit=structuredClone(this.editForm),this.handleSearch()},methods:{handleSearch:function(){var e=this;this.$global.loading=!0,Object(r["a"])({url:"/client/software"}).then((function(t){var a=t.data;e.table=a})).finally((function(){e.$global.loading=!1}))},handleAddOrEdit:function(e){var t=e.handle,a=e.data,n=a;"add"===t&&(n=structuredClone(this.editFormInit)),this.editForm=structuredClone(n),this.isShow=!0},handleDelete:function(e){var t=this,a=e._id;this.$global.loading=!0,Object(r["a"])({url:"/client/software/".concat(a),method:"delete"}).then((function(){t.$notify.success("删除成功"),t.handleSearch()})).finally((function(){t.$global.loading=!1}))},handleComfirn:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return e.$notify.warning("必填项未填写完整，请检查！"),!1;e.$global.loading=!0;var a=e.editForm._id;if(a){var n=e.editForm,l=n.name,i=n.icon,o=n.describe,s={name:l,icon:i,describe:o};Object(r["a"])({url:"/client/software/".concat(a),method:"put",data:s}).then((function(){e.handleSearch(),e.isShow=!1})).finally((function(){e.$global.loading=!1}))}else Object(r["a"])({url:"/client/software",method:"post",data:e.editForm}).then((function(){e.handleSearch(),e.isShow=!1})).finally((function(){e.$global.loading=!1}))}))}}},u=d,f=(a("105a"),a("2877")),h=Object(f["a"])(u,n,l,!1,null,"1ce750ea",null);t["default"]=h.exports},b81f:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"e-upload"},[a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"e-avatar-uploader",style:{width:e.cwidth,height:e.height},attrs:{"show-file-list":!1,"element-loading-text":e.progress+"%",action:"#","before-upload":e.beforeAvatarUpload,"http-request":e.handleUploadLearnSignVoucherFileChange,"attr-icon":"注:只能上传"+e.type.join()}},[e.image?a("img",{ref:"img",staticClass:"image",attrs:{src:e.image}}):a("i",{staticClass:"el-icon el-icon-upload2"})])],1)},l=[],i=a("5530"),o=(a("a9e3"),a("4de4"),a("d3b7"),a("ac1f"),a("00b4"),a("4d63"),a("c607"),a("2c3e"),a("25f0"),a("5319"),a("b0c0"),a("a15b"),a("b64b"),a("d81d"),a("0238")),r=a("2f62"),s={name:"UploadProT",props:{model:o["rulesT"].Any,read:o["rulesT"].Boolean,url:o["rulesT"].String,deleteUrl:o["rulesT"].String,type:{type:Array,default:function(){return["image"]}},size:{type:Number,default:80},param:o["rulesT"].Object,filterData:{type:Function},width:{type:String,default:"100px"},height:{type:String,default:"100px"},auto:{type:Boolean,default:!1}},model:{prop:"model",event:"change"},data:function(){return{loading:!1,progress:0,cwidth:this.width}},computed:Object(i["a"])({image:{get:function(){return this.model},set:function(e){this.$emit("change",e)}}},Object(r["b"])(["local"])),created:function(){},methods:{beforeAvatarUpload:function(e){var t=this.type.filter((function(t){return new RegExp(t).test(e.type)||t===e.name.replace(/.+(?=\.)|\./g,"")})).length>0,a=e.size/1024/1024<this.size;return t||this.$message.error("请上传格式正确的文件 [ ".concat(this.type.join(",")," ] ")),a||this.$message.error("上传文件大小不能超过".concat(this.size,"MB!")),t&&a},handleUploadLearnSignVoucherFileChange:function(e){var t=this;this.$global.loading=!0;var a=e.file,n=new FormData;n.append("file",a);var l=Object.keys(this.param);l.length&&l.map((function(e){n.append(e,t.param[e])})),this.$AJAX({url:this.url,method:"post",data:n,onUploadProgress:function(e){var a=e.loaded,n=e.total;t.progress=Math.ceil(a/n*100)}}).then((function(e){var a=e.data,n=a[0].filePath;t.image=n})).finally((function(){t.$global.loading=!1}))},handleDelete:function(e,t){this.image=""}}},c=s,d=(a("d1b2"),a("2877")),u=Object(d["a"])(c,n,l,!1,null,"38bc8108",null);t["a"]=u.exports},d1b2:function(e,t,a){"use strict";a("5e37")}}]);