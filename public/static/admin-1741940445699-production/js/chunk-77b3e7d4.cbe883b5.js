(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77b3e7d4"],{"02b8":function(t,e,a){"use strict";a("acff")},"5e37":function(t,e,a){},"990e":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"company"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:t.handleAddCompany}},[t._v("新增企业")]),a("div",{staticClass:"list scroll"},[a("el-row",{staticClass:"w100",attrs:{gutter:20}},t._l(t.list,(function(e,i){return a("el-col",{key:i,attrs:{xs:12,sm:8,lg:6}},[a("div",{staticClass:"item",style:{"--back":"url("+e.background+")"}},[a("div",{staticClass:"word"},[a("div",{staticClass:"icon"},[a("img",{attrs:{src:e.icon,alt:""}})]),a("div",{staticClass:"name"},[t._v(t._s(e.company))]),a("div",{staticClass:"edit"},[a("el-button",{attrs:{type:"text",icon:"el-icon-document"}}),a("el-button",{staticStyle:{color:"#67c23a"},attrs:{type:"text",icon:"el-icon-edit-outline"},on:{click:function(a){return t.handleEdit(e)}}}),a("el-popconfirm",{staticClass:"ml10",attrs:{title:"确定删除？",placement:"top"},on:{confirm:function(a){return t.handleDelete(e)}}},[a("el-button",{staticStyle:{color:"#f56c6c"},attrs:{slot:"reference",type:"text",icon:"el-icon-delete"},slot:"reference"})],1)],1)])])])})),1)],1),a("el-dialog",{attrs:{title:"新增/编辑",visible:t.isShow,width:"600px"},on:{"update:visible":function(e){t.isShow=e}}},[a("div",{staticStyle:{"padding-top":"18px"}},[a("el-form",{ref:"form",attrs:{model:t.editForm,rules:t.editRules}},[a("el-form-item",{attrs:{label:"名称",prop:"company"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.editForm.company,callback:function(e){t.$set(t.editForm,"company",e)},expression:"editForm.company"}})],1),a("el-form-item",{attrs:{label:"logo",prop:"icon"}},[a("div",{staticStyle:{display:"inline-block",width:"100%"}},[a("Upload",{attrs:{url:"/upload/image",width:"60px",height:"60px"},model:{value:t.editForm.icon,callback:function(e){t.$set(t.editForm,"icon",e)},expression:"editForm.icon"}})],1)]),a("el-form-item",{attrs:{label:"主题背景",prop:"background"}},[a("div",{staticStyle:{display:"inline-block",width:"100%"}},[a("Upload",{attrs:{url:"/upload/image",width:"160px",height:"100px"},model:{value:t.editForm.background,callback:function(e){t.$set(t.editForm,"background",e)},expression:"editForm.background"}})],1)]),a("el-form-item",{attrs:{label:"简介",prop:"describe"}},[a("el-input",{attrs:{type:"textarea",rows:"2",placeholder:"请输入",clearable:""},model:{value:t.editForm.describe,callback:function(e){t.$set(t.editForm,"describe",e)},expression:"editForm.describe"}})],1)],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShow=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleComfirn}},[t._v("确认")])],1)])],1)},o=[],n=(a("4ec9"),a("b64b"),a("d3b7"),a("6062"),a("0eb6"),a("b7ef"),a("8bd4"),a("ad1f"),a("0238")),l=a("b81f"),r=a("4279"),c={name:"CompanyIndex",components:{Upload:l["a"]},data:function(){return{list:[],isShow:!1,editForm:{icon:"",background:"",company:"",describe:""},editRules:{company:n["blur"]},editFormInit:{}}},computed:{},watch:{},created:function(){this.editFormInit=structuredClone(this.editForm),this.getData()},methods:{getData:function(){var t=this;this.isShow=!1,this.$global.loading=!0,Object(r["a"])({url:"/company"}).then((function(e){var a=e.data;t.list=a})).finally((function(){t.$global.loading=!1}))},handleAddCompany:function(){this.editForm=structuredClone(this.editFormInit),this.isShow=!0},handleEdit:function(t){console.log(t),this.editForm=structuredClone(t),this.isShow=!0},handleDelete:function(t){var e=this,a=t._id;this.$global.loading=!0,Object(r["a"])({url:"/company/".concat(a),method:"delete"}).then((function(t){e.getData()})).finally((function(){e.$global.loading=!1}))},handleComfirn:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return t.$notify.warning("必填项未填写完整，请检查！"),!1;t.$global.loading=!0;var a=t.editForm._id;if(a){var i=t.editForm,o=i.icon,n=i.background,l=i.company,c=i.describe,s={icon:o,background:n,company:l,describe:c};Object(r["a"])({url:"/company/".concat(a),method:"put",data:s}).then((function(){t.getData()})).finally((function(){t.$global.loading=!1}))}else Object(r["a"])({url:"/company",method:"post",data:t.editForm}).then((function(){t.getData()})).finally((function(){t.$global.loading=!1}))}))}}},s=c,d=(a("02b8"),a("2877")),u=Object(d["a"])(s,i,o,!1,null,"e3f856ae",null);e["default"]=u.exports},acff:function(t,e,a){},b81f:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"e-upload"},[a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"e-avatar-uploader",style:{width:t.cwidth,height:t.height},attrs:{"show-file-list":!1,"element-loading-text":t.progress+"%",action:"#","before-upload":t.beforeAvatarUpload,"http-request":t.handleUploadLearnSignVoucherFileChange,"attr-icon":"注:只能上传"+t.type.join()}},[t.image?a("img",{ref:"img",staticClass:"image",attrs:{src:t.image}}):a("i",{staticClass:"el-icon el-icon-upload2"})])],1)},o=[],n=a("5530"),l=(a("a9e3"),a("4de4"),a("d3b7"),a("ac1f"),a("00b4"),a("4d63"),a("c607"),a("2c3e"),a("25f0"),a("5319"),a("b0c0"),a("a15b"),a("b64b"),a("d81d"),a("0238")),r=a("2f62"),c={name:"UploadProT",props:{model:l["rulesT"].Any,read:l["rulesT"].Boolean,url:l["rulesT"].String,deleteUrl:l["rulesT"].String,type:{type:Array,default:function(){return["image"]}},size:{type:Number,default:80},param:l["rulesT"].Object,filterData:{type:Function},width:{type:String,default:"100px"},height:{type:String,default:"100px"},auto:{type:Boolean,default:!1}},model:{prop:"model",event:"change"},data:function(){return{loading:!1,progress:0,cwidth:this.width}},computed:Object(n["a"])({image:{get:function(){return this.model},set:function(t){this.$emit("change",t)}}},Object(r["b"])(["local"])),created:function(){},methods:{beforeAvatarUpload:function(t){var e=this.type.filter((function(e){return new RegExp(e).test(t.type)||e===t.name.replace(/.+(?=\.)|\./g,"")})).length>0,a=t.size/1024/1024<this.size;return e||this.$message.error("请上传格式正确的文件 [ ".concat(this.type.join(",")," ] ")),a||this.$message.error("上传文件大小不能超过".concat(this.size,"MB!")),e&&a},handleUploadLearnSignVoucherFileChange:function(t){var e=this;this.$global.loading=!0;var a=t.file,i=new FormData;i.append("file",a);var o=Object.keys(this.param);o.length&&o.map((function(t){i.append(t,e.param[t])})),this.$AJAX({url:this.url,method:"post",data:i,onUploadProgress:function(t){var a=t.loaded,i=t.total;e.progress=Math.ceil(a/i*100)}}).then((function(t){var a=t.data,i=a[0].filePath;e.image=i})).finally((function(){e.$global.loading=!1}))},handleDelete:function(t,e){this.image=""}}},s=c,d=(a("d1b2"),a("2877")),u=Object(d["a"])(s,i,o,!1,null,"38bc8108",null);e["a"]=u.exports},d1b2:function(t,e,a){"use strict";a("5e37")}}]);