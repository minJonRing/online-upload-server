(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-93647694"],{2897:function(e,t,a){"use strict";a("879e")},5505:function(e,t,a){},"5e37":function(e,t,a){},"78cc":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add"},[a("Info")],1)},o=[],n=a("a89d"),r={name:"CompanyAdd",components:{Info:n["a"]}},l=r,s=a("2877"),d=Object(s["a"])(l,i,o,!1,null,null,null);t["default"]=d.exports},"879e":function(e,t,a){},a89d:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info scroll"},[a("el-form",{ref:"form",staticClass:"w100",attrs:{model:e.form,rules:e.rules,"label-width":"140px","label-position":"left"}},[a("el-form-item",{attrs:{label:"文档封面",prop:"cover"}},[a("Upload",{attrs:{url:"/upload/image",width:"200px",height:"140px"},model:{value:e.form.cover,callback:function(t){e.$set(e.form,"cover",t)},expression:"form.cover"}})],1),a("FormProT",{attrs:{form:e.form,list:e.list,"form-list":e.formList}}),a("el-form-item",{attrs:{label:"视频"}},[e.form.videoIsIframe?a("el-input",{attrs:{type:"textarea",rows:"2",placeholder:"请输入",clearable:""},model:{value:e.form.video,callback:function(t){e.$set(e.form,"video",t)},expression:"form.video"}}):a("UploadVideo",{attrs:{url:"/upload/video",width:"200px",height:"120px"},model:{value:e.form.video,callback:function(t){e.$set(e.form,"video",t)},expression:"form.video"}})],1),a("el-form-item",{attrs:{label:"文本内容"}},[a("div",{staticStyle:{border:"1px solid #ccc"}},[a("Toolbar",{attrs:{editor:e.editorRef,defaultConfig:e.toolbarConfig,mode:e.mode}}),a("Editor",{staticStyle:{height:"300px","overflow-y":"hidden"},attrs:{defaultConfig:e.editorConfig,mode:e.mode},on:{onCreated:e.handleCreated},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)]),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("保存")]),a("btn-return")],1)],1)],1)},o=[],n=a("5530"),r=a("b85c"),l=(a("d81d"),a("d3b7"),a("99af"),a("fb6a"),a("14d9"),a("4279")),s=a("2ef0"),d={methods:{initForm:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.map((function(e){var i=e.type,o=e.children,n=e.option;if("box"===i)t.initForm(o,a);else{var l=n.type,d=n.prop,c=n.initValue,u="number"===l?void 0:c;if(Object(s["isArray"])(d)){var f,p=Object(r["a"])(d);try{for(p.s();!(f=p.n()).done;){var h=f.value;a[h]=(c||{})[h]||""}}catch(m){p.e(m)}finally{p.f()}}else a[d]=u}})),a},getDetail:function(e){var t=this;return this.$global.loading=!0,new Promise((function(a,i){Object(l["a"])({url:"".concat(t.mixinConfig.detail||t.mixinConfig.url,"/").concat(e)}).then((function(e){var t=e.data;a(t)})).finally((function(){t.$global.loading=!1}))}))},submit:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.$global.loading=!0;var i=e.id,o=this.mixinConfig.url;return new Promise((function(n,r){Object(l["a"])({url:i?"".concat(o,"/").concat(i):o,method:i?"put":"post",data:e}).then((function(e){t.$notify.success(e.msg||"成功"),a&&t.back(),n(e)})).finally((function(){t.$global.loading=!1}))}))},back:function(){var e=this;this.$store.dispatch("tagsView/delView",this.$route).then((function(t){var a=t.visitedViews,i=a.slice(-1)[0];i&&e.$router.push("list")}))}}},c=d,u=a("0238"),f=a("5f87"),p=a("2f62"),h=a("4e15"),m=a("b81f"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"e-upload"},[a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"e-avatar-uploader",style:{width:e.cwidth,height:e.height},attrs:{"show-file-list":!1,"element-loading-text":e.progress+"%",action:"#","before-upload":e.beforeAvatarUpload,"http-request":e.handleUploadLearnSignVoucherFileChange,"attr-icon":"注:只能上传"+e.type.join()}},[e.videoPath?a("video",{staticClass:"video",attrs:{src:e.videoPath,controls:""}}):a("i",{staticClass:"el-icon el-icon-upload2"})])],1)},b=[],v=(a("a9e3"),a("4de4"),a("ac1f"),a("00b4"),a("4d63"),a("c607"),a("2c3e"),a("25f0"),a("5319"),a("b0c0"),a("a15b"),a("b64b"),{name:"UploadProT",props:{model:u["rulesT"].Any,read:u["rulesT"].Boolean,url:u["rulesT"].String,deleteUrl:u["rulesT"].String,type:{type:Array,default:function(){return["video"]}},size:{type:Number,default:2048},param:u["rulesT"].Object,filterData:{type:Function},width:{type:String,default:"100px"},height:{type:String,default:"100px"},auto:{type:Boolean,default:!1}},model:{prop:"model",event:"change"},data:function(){return{loading:!1,progress:0,cwidth:this.width}},computed:Object(n["a"])({videoPath:{get:function(){return this.model},set:function(e){this.$emit("change",e)}}},Object(p["b"])(["local"])),created:function(){},methods:{beforeAvatarUpload:function(e){console.log(e);var t=this.type.filter((function(t){return new RegExp(t).test(e.type)||t===e.name.replace(/.+(?=\.)|\./g,"")})).length>0,a=e.size/1024/1024<this.size;return t||this.$message.error("请上传格式正确的文件 [ ".concat(this.type.join(",")," ] ")),a||this.$message.error("上传文件大小不能超过".concat(this.size,"MB!")),t&&a},handleUploadLearnSignVoucherFileChange:function(e){var t=this;this.$global.loading=!0;var a=e.file,i=new FormData;i.append("file",a);var o=Object.keys(this.param);o.length&&o.map((function(e){i.append(e,t.param[e])})),this.$AJAX({url:this.url,method:"post",data:i,onUploadProgress:function(e){var a=e.loaded,i=e.total;t.progress=Math.ceil(a/i*100)}}).then((function(e){var a=e.data,i=a[0].filePath;t.videoPath=i})).finally((function(){t.$global.loading=!1}))},handleDelete:function(e,t){this.videoPath=""}}}),y=v,w=(a("e4f5"),a("2877")),x=Object(w["a"])(y,g,b,!1,null,"044ea4b9",null),$=x.exports,C={name:"Info",mixins:[c],props:{read:u["rulesT"].Boolean},components:{Upload:m["a"],UploadVideo:$,Editor:h["a"],Toolbar:h["b"]},data:function(){return{mixinConfig:{url:"/program"},list:{softwareIds:[],artIds:[]},form:{name:"",cover:"",videoIsIframe:!1,video:"",content:"",softwareId:[],artId:[]},formList:[],rules:{name:u["blur"],cover:u["change"],softwareId:u["change"],artId:u["change"]},editorRef:null,toolbarConfig:{},editorConfig:{MENU_CONF:{uploadImage:{server:"/upload/electron/wangeditor",allowedFileTypes:["image/*"],maxFileSize:5242880,headers:{token:Object(f["a"])()},timeout:6e4}},placeholder:"请输入内容..."},mode:"default"}},computed:Object(n["a"])({},Object(p["b"])(["softwareIds","artIds"])),watch:{softwareIds:function(e){this.list.softwareIds=e},artIds:function(e){this.list.artIds=e}},created:function(){var e=this;this.list={softwareIds:this.softwareIds,artIds:this.artIds};var t=this.$route.query.id;t?this.getDetail(t).then((function(t){e.init(),e.form=Object(n["a"])(Object(n["a"])(Object(n["a"])({},e.form),t),{},{id:t._id})})):this.init()},methods:{init:function(){var e=this.read;this.formList=[{label:"项目名称",type:"input",option:{prop:"name",type:"textarea",isRead:e,initValue:""}},{label:"程序类型",type:"select",option:{prop:"softwareId",isRead:e,initValue:"",multiple:!0,"collapse-tags":!1,listName:"softwareIds"}},{label:"技术栈",type:"select",option:{prop:"artId",isRead:e,initValue:"",multiple:!0,"collapse-tags":!1,listName:"artIds"}},{label:"外部视频",type:"switch",option:{prop:"videoIsIframe",isRead:e,initValue:!1}}],this.form=Object(n["a"])(Object(n["a"])({},this.form),this.initForm(this.formList))},handleCreated:function(e){this.editorRef=e},handleSubmit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return e.$notify.warning("必填项未填写完整，请检查！"),!1;var a=Object(n["a"])({},e.form);e.submit(a)}))}}},I=C,j=(a("2897"),Object(w["a"])(I,i,o,!1,null,"043a593a",null));t["a"]=j.exports},b81f:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"e-upload"},[a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"e-avatar-uploader",style:{width:e.cwidth,height:e.height},attrs:{"show-file-list":!1,"element-loading-text":e.progress+"%",action:"#","before-upload":e.beforeAvatarUpload,"http-request":e.handleUploadLearnSignVoucherFileChange,"attr-icon":"注:只能上传"+e.type.join()}},[e.image?a("img",{ref:"img",staticClass:"image",attrs:{src:e.image}}):a("i",{staticClass:"el-icon el-icon-upload2"})])],1)},o=[],n=a("5530"),r=(a("a9e3"),a("4de4"),a("d3b7"),a("ac1f"),a("00b4"),a("4d63"),a("c607"),a("2c3e"),a("25f0"),a("5319"),a("b0c0"),a("a15b"),a("b64b"),a("d81d"),a("0238")),l=a("2f62"),s={name:"UploadProT",props:{model:r["rulesT"].Any,read:r["rulesT"].Boolean,url:r["rulesT"].String,deleteUrl:r["rulesT"].String,type:{type:Array,default:function(){return["image"]}},size:{type:Number,default:80},param:r["rulesT"].Object,filterData:{type:Function},width:{type:String,default:"100px"},height:{type:String,default:"100px"},auto:{type:Boolean,default:!1}},model:{prop:"model",event:"change"},data:function(){return{loading:!1,progress:0,cwidth:this.width}},computed:Object(n["a"])({image:{get:function(){return this.model},set:function(e){this.$emit("change",e)}}},Object(l["b"])(["local"])),created:function(){},methods:{beforeAvatarUpload:function(e){var t=this.type.filter((function(t){return new RegExp(t).test(e.type)||t===e.name.replace(/.+(?=\.)|\./g,"")})).length>0,a=e.size/1024/1024<this.size;return t||this.$message.error("请上传格式正确的文件 [ ".concat(this.type.join(",")," ] ")),a||this.$message.error("上传文件大小不能超过".concat(this.size,"MB!")),t&&a},handleUploadLearnSignVoucherFileChange:function(e){var t=this;this.$global.loading=!0;var a=e.file,i=new FormData;i.append("file",a);var o=Object.keys(this.param);o.length&&o.map((function(e){i.append(e,t.param[e])})),this.$AJAX({url:this.url,method:"post",data:i,onUploadProgress:function(e){var a=e.loaded,i=e.total;t.progress=Math.ceil(a/i*100)}}).then((function(e){var a=e.data,i=a[0].filePath;t.image=i})).finally((function(){t.$global.loading=!1}))},handleDelete:function(e,t){this.image=""}}},d=s,c=(a("d1b2"),a("2877")),u=Object(c["a"])(d,i,o,!1,null,"38bc8108",null);t["a"]=u.exports},d1b2:function(e,t,a){"use strict";a("5e37")},e4f5:function(e,t,a){"use strict";a("5505")}}]);